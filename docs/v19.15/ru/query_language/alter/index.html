



<!DOCTYPE html>
<html lang="ru" class="no-js" data-version="v19.15" data-single-page="false">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://clickhouse.yandex/docs/ru/query_language/alter/">
      
      
      
      <meta name="lang:clipboard.copy" content="Копировать в буфер">
      
      <meta name="lang:clipboard.copied" content="Скопировано в буфер">
      
      <meta name="lang:search.language" content="ru">
      
      <meta name="lang:search.pipeline.stopwords" content="">
      
      <meta name="lang:search.pipeline.trimmer" content="">
      
      <meta name="lang:search.result.none" content="Совпадений не найдено">
      
      <meta name="lang:search.result.one" content="Найдено 1 совпадение">
      
      <meta name="lang:search.result.other" content="Найдено # совпадений">
      
      <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
    
    
      
        <title>ALTER - Документация ClickHouse v19.15</title>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
      <link rel="stylesheet" href="../../assets/stylesheets/application.2a88008a.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/custom.css?71b26c8?1582270703">
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="white" class="md-lang-ru">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">

  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="/" title="Документация ClickHouse v19.15" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.svg" width="40" height="40">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Документация ClickHouse v19.15
              </span>
              <span class="md-header-nav__topic">
                ALTER
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" id="md-search__input" class="md-search__input" name="query" required placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Начните печатать для поиска
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div id="md-language-switch" class="md-header-nav__source">
            

  <a class="md-alt-lang"
     href="../../../en/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../ru/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../zh/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../ja/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../fa/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      <nav class="md-nav md-nav--primary" data-md-level="0">
  
  <label class="md-nav__title md-nav__title--site" for="drawer">
    Документация ClickHouse v19.15
  </label>

  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Введение
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Введение
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../" title="Обзор" class="md-nav__link">
      Обзор
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../introduction/distinctive_features/" title="Отличительные возможности ClickHouse" class="md-nav__link">
      Отличительные возможности ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../introduction/features_considered_disadvantages/" title="Особенности ClickHouse, которые могут считаться недостатками" class="md-nav__link">
      Особенности ClickHouse, которые могут считаться недостатками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../introduction/performance/" title="Производительность" class="md-nav__link">
      Производительность
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../introduction/ya_metrika_task/" title="Постановка задачи в Яндекс.Метрике" class="md-nav__link">
      Постановка задачи в Яндекс.Метрике
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../introduction/info/" title="Информационная поддержка" class="md-nav__link">
      Информационная поддержка
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Начало работы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Начало работы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/" title="Установка и запуск" class="md-nav__link">
      Установка и запуск
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Тестовые наборы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Тестовые наборы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/ontime/" title="OnTime" class="md-nav__link">
      OnTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/nyc_taxi/" title="Данные о такси в Нью-Йорке" class="md-nav__link">
      Данные о такси в Нью-Йорке
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/amplab_benchmark/" title="AMPLab Big Data Benchmark" class="md-nav__link">
      AMPLab Big Data Benchmark
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/wikistat/" title="WikiStat" class="md-nav__link">
      WikiStat
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/criteo/" title="Терабайт логов кликов от Criteo" class="md-nav__link">
      Терабайт логов кликов от Criteo
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/star_schema/" title="Схема «Звезда»" class="md-nav__link">
      Схема «Звезда»
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/metrica/" title="Данные Яндекс.Метрики" class="md-nav__link">
      Данные Яндекс.Метрики
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Интерфейсы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Интерфейсы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/cli/" title="Клиент командной строки" class="md-nav__link">
      Клиент командной строки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/tcp/" title="Нативный интерфейс (TCP)" class="md-nav__link">
      Нативный интерфейс (TCP)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/http/" title="HTTP-интерфейс" class="md-nav__link">
      HTTP-интерфейс
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/formats/" title="Форматы входных и выходных данных" class="md-nav__link">
      Форматы входных и выходных данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/jdbc/" title="JDBC-драйвер" class="md-nav__link">
      JDBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/odbc/" title="ODBC-драйвер" class="md-nav__link">
      ODBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8" type="checkbox" id="nav-3-8">
    
    <label class="md-nav__link" for="nav-3-8">
      От сторонних разработчиков
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        От сторонних разработчиков
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/third-party/client_libraries/" title="Клиентские библиотеки" class="md-nav__link">
      Клиентские библиотеки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/third-party/integrations/" title="Интеграции" class="md-nav__link">
      Интеграции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/third-party/gui/" title="Визуальные интерфейсы" class="md-nav__link">
      Визуальные интерфейсы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../interfaces/third-party/proxy/" title="Прокси" class="md-nav__link">
      Прокси
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/int_uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="md-nav__link">
      UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/float/" title="Float32, Float64" class="md-nav__link">
      Float32, Float64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/decimal/" title="Decimal" class="md-nav__link">
      Decimal
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/boolean/" title="Булевы значения" class="md-nav__link">
      Булевы значения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/fixedstring/" title="FixedString(N)" class="md-nav__link">
      FixedString(N)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/uuid/" title="UUID" class="md-nav__link">
      UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/datetime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/array/" title="Array(T)" class="md-nav__link">
      Array(T)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/nested_data_structures/aggregatefunction/" title="AggregateFunction(name, types_of_arguments...)" class="md-nav__link">
      AggregateFunction(name, types_of_arguments...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/tuple/" title="Tuple(T1, T2, ...)" class="md-nav__link">
      Tuple(T1, T2, ...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/nullable/" title="Nullable" class="md-nav__link">
      Nullable
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-16" type="checkbox" id="nav-4-16">
    
    <label class="md-nav__link" for="nav-4-16">
      Вложенные структуры данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-16">
        Вложенные структуры данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/nested_data_structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="md-nav__link">
      Nested(Name1 Type1, Name2 Type2, ...)
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-17" type="checkbox" id="nav-4-17">
    
    <label class="md-nav__link" for="nav-4-17">
      Служебные типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-17">
        Служебные типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/special_data_types/expression/" title="Expression" class="md-nav__link">
      Expression
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/special_data_types/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/special_data_types/nothing/" title="Nothing" class="md-nav__link">
      Nothing
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-18" type="checkbox" id="nav-4-18">
    
    <label class="md-nav__link" for="nav-4-18">
      Domains
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-18">
        Domains
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/domains/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/domains/ipv4/" title="IPv4" class="md-nav__link">
      IPv4
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../data_types/domains/ipv6/" title="IPv6" class="md-nav__link">
      IPv6
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Движки баз данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Движки баз данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../database_engines/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../database_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Движки таблиц
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Движки таблиц
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      Семейство MergeTree
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        Семейство MergeTree
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/mergetree/" title="MergeTree" class="md-nav__link">
      MergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/replication/" title="Репликация данных" class="md-nav__link">
      Репликация данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/custom_partitioning_key/" title="Произвольный ключ партиционирования" class="md-nav__link">
      Произвольный ключ партиционирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/replacingmergetree/" title="ReplacingMergeTree" class="md-nav__link">
      ReplacingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/summingmergetree/" title="SummingMergeTree" class="md-nav__link">
      SummingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/aggregatingmergetree/" title="AggregatingMergeTree" class="md-nav__link">
      AggregatingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/collapsingmergetree/" title="CollapsingMergeTree" class="md-nav__link">
      CollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="md-nav__link">
      VersionedCollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/graphitemergetree/" title="GraphiteMergeTree" class="md-nav__link">
      GraphiteMergeTree
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Семейство Log
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Семейство Log
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/log_family/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/stripelog/" title="StripeLog" class="md-nav__link">
      StripeLog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/log/" title="Log" class="md-nav__link">
      Log
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/tinylog/" title="TinyLog" class="md-nav__link">
      TinyLog
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4">
    
    <label class="md-nav__link" for="nav-6-4">
      Интеграции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        Интеграции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/jdbc/" title="JDBC" class="md-nav__link">
      JDBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/odbc/" title="ODBC" class="md-nav__link">
      ODBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/hdfs/" title="HDFS" class="md-nav__link">
      HDFS
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Особые
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Особые
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/distributed/" title="Distributed" class="md-nav__link">
      Distributed
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/external_data/" title="Внешние данные" class="md-nav__link">
      Внешние данные
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/dictionary/" title="Dictionary" class="md-nav__link">
      Dictionary
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/merge/" title="Merge" class="md-nav__link">
      Merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/join/" title="Join" class="md-nav__link">
      Join
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/url/" title="URL" class="md-nav__link">
      URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/view/" title="View" class="md-nav__link">
      View
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/materializedview/" title="MaterializedView" class="md-nav__link">
      MaterializedView
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/table_engines/buffer/" title="Buffer" class="md-nav__link">
      Buffer
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Справка по SQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Справка по SQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/select/" title="SELECT" class="md-nav__link">
      SELECT
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/insert_into/" title="INSERT INTO" class="md-nav__link">
      INSERT INTO
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/create/" title="CREATE" class="md-nav__link">
      CREATE
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        ALTER
      </label>
    
    <a href="../../query_language/alter/" title="ALTER" class="md-nav__link md-nav__link--active">
      <strong>ALTER</strong>
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#query_language_queries_alter" title="ALTER" class="md-nav__link">
    ALTER
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-so-stolbtsami" title="Манипуляции со столбцами" class="md-nav__link">
    Манипуляции со столбцами
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alter_add-column" title="ADD COLUMN" class="md-nav__link">
    ADD COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_drop-column" title="DROP COLUMN" class="md-nav__link">
    DROP COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_clear-column" title="CLEAR COLUMN" class="md-nav__link">
    CLEAR COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_comment-column" title="COMMENT COLUMN" class="md-nav__link">
    COMMENT COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_modify-column" title="MODIFY COLUMN" class="md-nav__link">
    MODIFY COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ogranicheniia-zaprosa-alter" title="Ограничения запроса ALTER" class="md-nav__link">
    Ограничения запроса ALTER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-s-kliuchevymi-vyrazheniiami-tablits" title="Манипуляции с ключевыми выражениями таблиц" class="md-nav__link">
    Манипуляции с ключевыми выражениями таблиц
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-s-indeksami" title="Манипуляции с индексами" class="md-nav__link">
    Манипуляции с индексами
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-s-ogranicheniiami-constraints" title="Манипуляции с ограничениями (constraints)" class="md-nav__link">
    Манипуляции с ограничениями (constraints)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_manipulations-with-partitions" title="Манипуляции с партициями и кусками" class="md-nav__link">
    Манипуляции с партициями и кусками
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alter_detach-partition" title="DETACH PARTITION" class="md-nav__link">
    DETACH PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_drop-partition" title="DROP PARTITION" class="md-nav__link">
    DROP PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_drop-detached" title="DROP DETACHED PARTITION|PART" class="md-nav__link">
    DROP DETACHED PARTITION|PART
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_attach-partition" title="ATTACH PARTITION|PART" class="md-nav__link">
    ATTACH PARTITION|PART
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_replace-partition" title="REPLACE PARTITION" class="md-nav__link">
    REPLACE PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_clear-column-partition" title="CLEAR COLUMN IN PARTITION" class="md-nav__link">
    CLEAR COLUMN IN PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_clear-index-partition" title="CLEAR INDEX IN PARTITION" class="md-nav__link">
    CLEAR INDEX IN PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_freeze-partition" title="FREEZE PARTITION" class="md-nav__link">
    FREEZE PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_fetch-partition" title="FETCH PARTITION" class="md-nav__link">
    FETCH PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_move-partition" title="MOVE PARTITION|PART" class="md-nav__link">
    MOVE PARTITION|PART
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter-how-to-specify-part-expr" title="Как задавать имя партиции в запросах ALTER" class="md-nav__link">
    Как задавать имя партиции в запросах ALTER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinkhronnost-zaprosov-alter" title="Синхронность запросов ALTER" class="md-nav__link">
    Синхронность запросов ALTER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter-mutations" title="Мутации" class="md-nav__link">
    Мутации
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/system/" title="SYSTEM" class="md-nav__link">
      SYSTEM
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/misc/" title="Прочие виды запросов" class="md-nav__link">
      Прочие виды запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-8" type="checkbox" id="nav-7-8">
    
    <label class="md-nav__link" for="nav-7-8">
      Функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-8">
        Функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/arithmetic_functions/" title="Арифметические функции" class="md-nav__link">
      Арифметические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/comparison_functions/" title="Функции сравнения" class="md-nav__link">
      Функции сравнения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/logical_functions/" title="Логические функции" class="md-nav__link">
      Логические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/type_conversion_functions/" title="Функции преобразования типов" class="md-nav__link">
      Функции преобразования типов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/date_time_functions/" title="Функции для работы с датами и временем" class="md-nav__link">
      Функции для работы с датами и временем
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/string_functions/" title="Функции для работы со строками" class="md-nav__link">
      Функции для работы со строками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/string_search_functions/" title="Функции поиска в строках" class="md-nav__link">
      Функции поиска в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/string_replace_functions/" title="Функции поиска и замены в строках" class="md-nav__link">
      Функции поиска и замены в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/conditional_functions/" title="Условные функции" class="md-nav__link">
      Условные функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/math_functions/" title="Математические функции" class="md-nav__link">
      Математические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/rounding_functions/" title="Функции округления" class="md-nav__link">
      Функции округления
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/array_functions/" title="Функции по работе с массивами" class="md-nav__link">
      Функции по работе с массивами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/splitting_merging_functions/" title="Функции разбиения и слияния строк и массивов" class="md-nav__link">
      Функции разбиения и слияния строк и массивов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/bit_functions/" title="Битовые функции" class="md-nav__link">
      Битовые функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/bitmap_functions/" title="Функции для битмапов" class="md-nav__link">
      Функции для битмапов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/hash_functions/" title="Функции хэширования" class="md-nav__link">
      Функции хэширования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/random_functions/" title="Функции генерации псевдослучайных чисел" class="md-nav__link">
      Функции генерации псевдослучайных чисел
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/uuid_functions/" title="Функции для работы с UUID" class="md-nav__link">
      Функции для работы с UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/encoding_functions/" title="Функции кодирования" class="md-nav__link">
      Функции кодирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/url_functions/" title="Функции для работы с URL" class="md-nav__link">
      Функции для работы с URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/ip_address_functions/" title="Функции для работы с IP-адресами" class="md-nav__link">
      Функции для работы с IP-адресами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/json_functions/" title="Функции для работы с JSON." class="md-nav__link">
      Функции для работы с JSON.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/higher_order_functions/" title="Функции высшего порядка" class="md-nav__link">
      Функции высшего порядка
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/ext_dict_functions/" title="Функции для работы с внешними словарями" class="md-nav__link">
      Функции для работы с внешними словарями
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/ym_dict_functions/" title="Функции для работы со словарями Яндекс.Метрики" class="md-nav__link">
      Функции для работы со словарями Яндекс.Метрики
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/in_functions/" title="Функции для реализации оператора IN." class="md-nav__link">
      Функции для реализации оператора IN.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/array_join/" title="Функция arrayJoin" class="md-nav__link">
      Функция arrayJoin
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/geo/" title="Функции для работы с географическими координатами" class="md-nav__link">
      Функции для работы с географическими координатами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/functions_for_nulls/" title="Функции c Nullable агрументами" class="md-nav__link">
      Функции c Nullable агрументами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/machine_learning_functions/" title="Функции машинного обучения" class="md-nav__link">
      Функции машинного обучения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/functions/other_functions/" title="Прочие функции" class="md-nav__link">
      Прочие функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9">
    
    <label class="md-nav__link" for="nav-7-9">
      Агрегатные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-9">
        Агрегатные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/agg_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/agg_functions/reference/" title="Справочник функций" class="md-nav__link">
      Справочник функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/agg_functions/combinators/" title="Комбинаторы агрегатных функций" class="md-nav__link">
      Комбинаторы агрегатных функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/agg_functions/parametric_functions/" title="Параметрические агрегатные функции" class="md-nav__link">
      Параметрические агрегатные функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-10" type="checkbox" id="nav-7-10">
    
    <label class="md-nav__link" for="nav-7-10">
      Табличные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-10">
        Табличные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/file/" title="file" class="md-nav__link">
      file
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/merge/" title="merge" class="md-nav__link">
      merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/numbers/" title="numbers" class="md-nav__link">
      numbers
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/remote/" title="remote" class="md-nav__link">
      remote
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/url/" title="url" class="md-nav__link">
      url
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/mysql/" title="mysql" class="md-nav__link">
      mysql
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/jdbc/" title="jdbc" class="md-nav__link">
      jdbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/odbc/" title="odbc" class="md-nav__link">
      odbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/hdfs/" title="hdfs" class="md-nav__link">
      hdfs
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/table_functions/input/" title="input" class="md-nav__link">
      input
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11" type="checkbox" id="nav-7-11">
    
    <label class="md-nav__link" for="nav-7-11">
      Словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-11">
        Словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11-2" type="checkbox" id="nav-7-11-2">
    
    <label class="md-nav__link" for="nav-7-11-2">
      Внешние словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-11-2">
        Внешние словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/external_dicts/" title="Общее описание" class="md-nav__link">
      Общее описание
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/external_dicts_dict/" title="Настройка внешнего словаря" class="md-nav__link">
      Настройка внешнего словаря
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/external_dicts_dict_layout/" title="Хранение словарей в памяти" class="md-nav__link">
      Хранение словарей в памяти
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/external_dicts_dict_lifetime/" title="Обновление словарей" class="md-nav__link">
      Обновление словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/external_dicts_dict_sources/" title="Источники внешних словарей" class="md-nav__link">
      Источники внешних словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/external_dicts_dict_structure/" title="Ключ и поля словаря" class="md-nav__link">
      Ключ и поля словаря
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/dicts/internal_dicts/" title="Встроенные словари" class="md-nav__link">
      Встроенные словари
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/operators/" title="Операторы" class="md-nav__link">
      Операторы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../query_language/syntax/" title="Общий синтаксис" class="md-nav__link">
      Общий синтаксис
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Эксплуатация
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Эксплуатация
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/requirements/" title="Требования" class="md-nav__link">
      Требования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/monitoring/" title="Мониторинг" class="md-nav__link">
      Мониторинг
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/troubleshooting/" title="Устранение неисправностей" class="md-nav__link">
      Устранение неисправностей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/tips/" title="Советы по эксплуатации" class="md-nav__link">
      Советы по эксплуатации
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/update/" title="Обновление ClickHouse" class="md-nav__link">
      Обновление ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/access_rights/" title="Права доступа" class="md-nav__link">
      Права доступа
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/backup/" title="Резервное копирование" class="md-nav__link">
      Резервное копирование
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/configuration_files/" title="Конфигурационные файлы" class="md-nav__link">
      Конфигурационные файлы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/quotas/" title="Квоты" class="md-nav__link">
      Квоты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/system_tables/" title="Системные таблицы" class="md-nav__link">
      Системные таблицы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-12" type="checkbox" id="nav-8-12">
    
    <label class="md-nav__link" for="nav-8-12">
      Конфигурационные параметры сервера
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-12">
        Конфигурационные параметры сервера
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/server_settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/server_settings/settings/" title="Серверные настройки" class="md-nav__link">
      Серверные настройки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-13" type="checkbox" id="nav-8-13">
    
    <label class="md-nav__link" for="nav-8-13">
      Настройки
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-13">
        Настройки
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/permissions_for_queries/" title="Разрешения на выполнение запросов" class="md-nav__link">
      Разрешения на выполнение запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/query_complexity/" title="Ограничения на сложность запроса" class="md-nav__link">
      Ограничения на сложность запроса
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/settings/" title="Настройки" class="md-nav__link">
      Настройки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/constraints_on_settings/" title="Ограничения на изменение настроек" class="md-nav__link">
      Ограничения на изменение настроек
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/settings_profiles/" title="Профили настроек" class="md-nav__link">
      Профили настроек
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/settings/settings_users/" title="Настройки пользователей" class="md-nav__link">
      Настройки пользователей
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-14" type="checkbox" id="nav-8-14">
    
    <label class="md-nav__link" for="nav-8-14">
      Утилиты
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-14">
        Утилиты
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/utils/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/utils/clickhouse-copier/" title="clickhouse-copier" class="md-nav__link">
      clickhouse-copier
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../operations/utils/clickhouse-local/" title="clickhouse-local" class="md-nav__link">
      clickhouse-local
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      F.A.Q.
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        F.A.Q.
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../faq/general/" title="Общие вопросы" class="md-nav__link">
      Общие вопросы
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Разработка
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Разработка
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../development/architecture/" title="Обзор архитектуры ClickHouse" class="md-nav__link">
      Обзор архитектуры ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../development/build/" title="Как собрать ClickHouse на Linux" class="md-nav__link">
      Как собрать ClickHouse на Linux
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../development/build_osx/" title="Как собрать ClickHouse на Mac OS X" class="md-nav__link">
      Как собрать ClickHouse на Mac OS X
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../development/style/" title="Как писать код на C++" class="md-nav__link">
      Как писать код на C++
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../development/tests/" title="Как запустить тесты" class="md-nav__link">
      Как запустить тесты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../development/contrib/" title="Сторонние библиотеки" class="md-nav__link">
      Сторонние библиотеки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Что нового
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Что нового
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../security_changelog/" title="Security changelog" class="md-nav__link">
      Security changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
  </ul>
  

  <ul id="md-extra-nav" class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item md-nav__item--active">
      Релиз:
      <span class="md-selector">
        <select id="releases-selector">
          <option value="">последний</option>
          
            <option value="v20.1"
              
            >v20.1</option>
          
            <option value="v19.17"
              
            >v19.17</option>
          
            <option value="v19.16"
              
            >v19.16</option>
          
            <option value="v19.15"
              
                selected="selected"
              
            >v19.15</option>
          
            <option value="v19.14"
              
            >v19.14</option>
          
            <option value="v19.13"
              
            >v19.13</option>
          
            <option value="v19.11"
              
            >v19.11</option>
          
            <option value="v19.10"
              
            >v19.10</option>
          
            <option value="v19.9"
              
            >v19.9</option>
          
            <option value="v19.8"
              
            >v19.8</option>
          
            <option value="v19.7"
              
            >v19.7</option>
          
        </select><span id="releases-selector-after">&nbsp;▾</span>
      </span>
    </li>
    <li class="md-nav__item md-nav__item--active">
        
          <a href="../../single/" class="md-nav__link md-nav__link--active">Одностраничная версия</a>
        
    </li>
    <li class="md-nav__item md-nav__item--active">
          <a href="../../single/clickhouse_ru.pdf" class="md-nav__link md-nav__link--active">PDF версия</a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
      <a href="https://github.com/ClickHouse/ClickHouse/" rel="external nofollow" target="_blank" class="md-nav__link">
        Исходный код ClickHouse
      </a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
        <span id="md-sidebar-flags" class="md-nav__link">
        

  <a class="md-alt-lang"
     href="../../../en/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../ru/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../zh/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../ja/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../fa/query_language/alter/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

        </span>
    </li>
  </ul>
</nav>
                    
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#query_language_queries_alter" title="ALTER" class="md-nav__link">
    ALTER
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-so-stolbtsami" title="Манипуляции со столбцами" class="md-nav__link">
    Манипуляции со столбцами
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alter_add-column" title="ADD COLUMN" class="md-nav__link">
    ADD COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_drop-column" title="DROP COLUMN" class="md-nav__link">
    DROP COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_clear-column" title="CLEAR COLUMN" class="md-nav__link">
    CLEAR COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_comment-column" title="COMMENT COLUMN" class="md-nav__link">
    COMMENT COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_modify-column" title="MODIFY COLUMN" class="md-nav__link">
    MODIFY COLUMN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ogranicheniia-zaprosa-alter" title="Ограничения запроса ALTER" class="md-nav__link">
    Ограничения запроса ALTER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-s-kliuchevymi-vyrazheniiami-tablits" title="Манипуляции с ключевыми выражениями таблиц" class="md-nav__link">
    Манипуляции с ключевыми выражениями таблиц
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-s-indeksami" title="Манипуляции с индексами" class="md-nav__link">
    Манипуляции с индексами
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipuliatsii-s-ogranicheniiami-constraints" title="Манипуляции с ограничениями (constraints)" class="md-nav__link">
    Манипуляции с ограничениями (constraints)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_manipulations-with-partitions" title="Манипуляции с партициями и кусками" class="md-nav__link">
    Манипуляции с партициями и кусками
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alter_detach-partition" title="DETACH PARTITION" class="md-nav__link">
    DETACH PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_drop-partition" title="DROP PARTITION" class="md-nav__link">
    DROP PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_drop-detached" title="DROP DETACHED PARTITION|PART" class="md-nav__link">
    DROP DETACHED PARTITION|PART
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_attach-partition" title="ATTACH PARTITION|PART" class="md-nav__link">
    ATTACH PARTITION|PART
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_replace-partition" title="REPLACE PARTITION" class="md-nav__link">
    REPLACE PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_clear-column-partition" title="CLEAR COLUMN IN PARTITION" class="md-nav__link">
    CLEAR COLUMN IN PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_clear-index-partition" title="CLEAR INDEX IN PARTITION" class="md-nav__link">
    CLEAR INDEX IN PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_freeze-partition" title="FREEZE PARTITION" class="md-nav__link">
    FREEZE PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_fetch-partition" title="FETCH PARTITION" class="md-nav__link">
    FETCH PARTITION
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter_move-partition" title="MOVE PARTITION|PART" class="md-nav__link">
    MOVE PARTITION|PART
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter-how-to-specify-part-expr" title="Как задавать имя партиции в запросах ALTER" class="md-nav__link">
    Как задавать имя партиции в запросах ALTER
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinkhronnost-zaprosov-alter" title="Синхронность запросов ALTER" class="md-nav__link">
    Синхронность запросов ALTER
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter-mutations" title="Мутации" class="md-nav__link">
    Мутации
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                    
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                    <a href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/query_language/alter.md" title="Редактировать страницу" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a>
                  
                
                
                  <h1>ALTER</h1>
                
                <div id="content">
                
                  <h2 id="query_language_queries_alter">ALTER<a class="headerlink" href="#query_language_queries_alter" title="Permanent link">&para;</a></h2>
<p>Запрос <code>ALTER</code> поддерживается только для таблиц типа <code>*MergeTree</code>, а также <code>Merge</code> и <code>Distributed</code>. Запрос имеет несколько вариантов.</p>
<h3 id="manipuliatsii-so-stolbtsami">Манипуляции со столбцами<a class="headerlink" href="#manipuliatsii-so-stolbtsami" title="Permanent link">&para;</a></h3>
<p>Изменение структуры таблицы.</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">].</span><span class="n">name</span> <span class="p">[</span><span class="k">ON</span> <span class="k">CLUSTER</span> <span class="k">cluster</span><span class="p">]</span> <span class="k">ADD</span><span class="o">|</span><span class="k">DROP</span><span class="o">|</span><span class="n">CLEAR</span><span class="o">|</span><span class="k">COMMENT</span><span class="o">|</span><span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="p">...</span>
</pre></div>


<p>В запросе указывается список из одного или более действий через запятую.
Каждое действие — операция над столбцом.</p>
<p>Существуют следующие действия:</p>
<ul>
<li><a href="#alter_add-column">ADD COLUMN</a> — добавляет столбец в таблицу;</li>
<li><a href="#alter_drop-column">DROP COLUMN</a> — удаляет столбец;</li>
<li><a href="#alter_clear-column">CLEAR COLUMN</a> — сбрасывает все значения в столбце для заданной партиции;</li>
<li><a href="#alter_comment-column">COMMENT COLUMN</a> — добавляет комментарий к столбцу;</li>
<li><a href="#alter_modify-column">MODIFY COLUMN</a> — изменяет тип столбца и/или выражение для значения по умолчанию.</li>
</ul>
<p>Подробное описание для каждого действия приведено ниже.</p>
<h4 id="alter_add-column">ADD COLUMN<a class="headerlink" href="#alter_add-column" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ADD</span> <span class="k">COLUMN</span> <span class="p">[</span><span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span><span class="p">]</span> <span class="n">name</span> <span class="p">[</span><span class="k">type</span><span class="p">]</span> <span class="p">[</span><span class="n">default_expr</span><span class="p">]</span> <span class="p">[</span><span class="k">AFTER</span> <span class="n">name_after</span><span class="p">]</span>
</pre></div>


<p>Добавляет в таблицу новый столбец с именем <code>name</code>, типом <code>type</code> и выражением для умолчания <code>default_expr</code> (смотрите раздел <a href="../create/#create-default-values">Значения по умолчанию</a>).</p>
<p>Если указано <code>IF NOT EXISTS</code>, запрос не будет возвращать ошибку, если столбец уже существует. Если указано <code>AFTER name_after</code> (имя другого столбца), то столбец добавляется (в список столбцов таблицы) после указанного. Иначе, столбец добавляется в конец таблицы. Обратите внимание, ClickHouse не позволяет добавлять столбцы в начало таблицы. Для цепочки действий, <code>name_after</code> может быть именем столбца, который добавляется в одном из предыдущих действий.</p>
<p>Добавление столбца всего лишь меняет структуру таблицы, и не производит никаких действий с данными - соответствующие данные не появляются на диске после ALTER-а. При чтении из таблицы, если для какого-либо столбца отсутствуют данные, то он заполняется значениями по умолчанию (выполняя выражение по умолчанию, если такое есть, или нулями, пустыми строками). Также, столбец появляется на диске при слиянии кусков данных (см. <a href="../../operations/table_engines/mergetree/">MergeTree</a>).</p>
<p>Такая схема позволяет добиться мгновенной работы запроса <code>ALTER</code> и отсутствия необходимости увеличивать объём старых данных.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">browser</span> <span class="n">String</span> <span class="k">AFTER</span> <span class="n">user_id</span>
</pre></div>


<h4 id="alter_drop-column">DROP COLUMN<a class="headerlink" href="#alter_drop-column" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">DROP</span> <span class="k">COLUMN</span> <span class="p">[</span><span class="k">IF</span> <span class="k">EXISTS</span><span class="p">]</span> <span class="n">name</span>
</pre></div>


<p>Удаляет столбец с именем <code>name</code>. Если указано <code>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p>
<p>Запрос удаляет данные из файловой системы. Так как это представляет собой удаление целых файлов, запрос выполняется почти мгновенно.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="n">browser</span>
</pre></div>


<h4 id="alter_clear-column">CLEAR COLUMN<a class="headerlink" href="#alter_clear-column" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="n">CLEAR</span> <span class="k">COLUMN</span> <span class="p">[</span><span class="k">IF</span> <span class="k">EXISTS</span><span class="p">]</span> <span class="n">name</span> <span class="k">IN</span> <span class="n">PARTITION</span> <span class="n">partition_name</span>
</pre></div>


<p>Сбрасывает все значения в столбце для заданной партиции. Если указано <code>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p>
<p>Как корректно задать имя партиции, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="n">CLEAR</span> <span class="k">COLUMN</span> <span class="n">browser</span> <span class="k">IN</span> <span class="n">PARTITION</span> <span class="n">tuple</span><span class="p">()</span>
</pre></div>


<h4 id="alter_comment-column">COMMENT COLUMN<a class="headerlink" href="#alter_comment-column" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">COMMENT</span> <span class="k">COLUMN</span> <span class="p">[</span><span class="k">IF</span> <span class="k">EXISTS</span><span class="p">]</span> <span class="n">name</span> <span class="s1">&#39;Text comment&#39;</span>
</pre></div>


<p>Добавляет комментарий к таблице. Если указано <code>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p>
<p>Каждый столбец может содержать только один комментарий. При выполнении запроса существующий комментарий заменяется на новый.</p>
<p>Посмотреть комментарии можно в столбце <code>comment_expression</code> из запроса <a href="../misc/#misc-describe-table">DESCRIBE TABLE</a>.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="k">COMMENT</span> <span class="k">COLUMN</span> <span class="n">browser</span> <span class="s1">&#39;Столбец показывает, из каких браузеров пользователи заходили на сайт.&#39;</span>
</pre></div>


<h4 id="alter_modify-column">MODIFY COLUMN<a class="headerlink" href="#alter_modify-column" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="p">[</span><span class="k">IF</span> <span class="k">EXISTS</span><span class="p">]</span> <span class="n">name</span> <span class="p">[</span><span class="k">type</span><span class="p">]</span> <span class="p">[</span><span class="n">default_expr</span><span class="p">]</span>
</pre></div>


<p>Изменяет тип столбца <code>name</code> на <code>type</code> и/или выражение для умолчания на <code>default_expr</code>. Если указано <code>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p>
<p>При изменении типа, значения преобразуются так, как если бы к ним была применена функция <a href="../functions/type_conversion_functions/">toType</a>. Если изменяется только выражение для умолчания, запрос не делает никакой сложной работы и выполняется мгновенно.</p>
<p>Пример запроса:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="k">MODIFY</span> <span class="k">COLUMN</span> <span class="n">browser</span> <span class="nb">Array</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>
</pre></div>


<p>Изменение типа столбца - это единственное действие, которое выполняет сложную работу - меняет содержимое файлов с данными. Для больших таблиц, выполнение может занять длительное время.</p>
<p>Выполнение производится в несколько стадий:</p>
<ul>
<li>подготовка временных (новых) файлов с изменёнными данными;</li>
<li>переименование старых файлов;</li>
<li>переименование временных (новых) файлов в старые;</li>
<li>удаление старых файлов.</li>
</ul>
<p>Из них, длительной является только первая стадия. Если на этой стадии возникнет сбой, то данные не поменяются.
Если на одной из следующих стадий возникнет сбой, то данные будет можно восстановить вручную. За исключением случаев, когда старые файлы удалены из файловой системы, а данные для новых файлов не доехали на диск и потеряны.</p>
<p>Запрос <code>ALTER</code> на изменение столбцов реплицируется. Соответствующие инструкции сохраняются в ZooKeeper, и затем каждая реплика их применяет. Все запросы <code>ALTER</code> выполняются в одном и том же порядке. Запрос ждёт выполнения соответствующих действий на всех репликах. Но при этом, запрос на изменение столбцов в реплицируемой таблице можно прервать, и все действия будут осуществлены асинхронно.</p>
<h4 id="ogranicheniia-zaprosa-alter">Ограничения запроса ALTER<a class="headerlink" href="#ogranicheniia-zaprosa-alter" title="Permanent link">&para;</a></h4>
<p>Запрос <code>ALTER</code> позволяет создавать и удалять отдельные элементы (столбцы) вложенных структур данных, но не вложенные структуры данных целиком. Для добавления вложенной структуры данных, вы можете добавить столбцы с именем вида <code>name.nested_name</code> и типом <code>Array(T)</code> - вложенная структура данных полностью эквивалентна нескольким столбцам-массивам с именем, имеющим одинаковый префикс до точки.</p>
<p>Отсутствует возможность удалять столбцы, входящие в первичный ключ или ключ для сэмплирования (в общем, входящие в выражение <code>ENGINE</code>). Изменение типа у столбцов, входящих в первичный ключ возможно только в том случае, если это изменение не приводит к изменению данных (например, разрешено добавление значения в Enum или изменение типа с <code>DateTime</code> на <code>UInt32</code>).</p>
<p>Если возможностей запроса <code>ALTER</code> не хватает для нужного изменения таблицы, вы можете создать новую таблицу, скопировать туда данные с помощью запроса <a href="../insert_into/#insert_query_insert-select">INSERT SELECT</a>, затем поменять таблицы местами с помощью запроса <a href="../misc/#misc_operations-rename">RENAME</a>, и удалить старую таблицу. В качестве альтернативы для запроса <code>INSERT SELECT</code>, можно использовать инструмент <a href="../../operations/utils/clickhouse-copier/">clickhouse-copier</a>.</p>
<p>Запрос <code>ALTER</code> блокирует все чтения и записи для таблицы. То есть, если на момент запроса <code>ALTER</code>, выполнялся долгий <code>SELECT</code>, то запрос <code>ALTER</code> сначала дождётся его выполнения. И в это время, все новые запросы к той же таблице, будут ждать, пока завершится этот <code>ALTER</code>.</p>
<p>Для таблиц, которые не хранят данные самостоятельно (типа <a href="../../operations/table_engines/merge/">Merge</a> и <a href="../../operations/table_engines/distributed/">Distributed</a>), <code>ALTER</code> всего лишь меняет структуру таблицы, но не меняет структуру подчинённых таблиц. Для примера, при ALTER-е таблицы типа <code>Distributed</code>, вам также потребуется выполнить запрос <code>ALTER</code> для таблиц на всех удалённых серверах.</p>
<h3 id="manipuliatsii-s-kliuchevymi-vyrazheniiami-tablits">Манипуляции с ключевыми выражениями таблиц<a class="headerlink" href="#manipuliatsii-s-kliuchevymi-vyrazheniiami-tablits" title="Permanent link">&para;</a></h3>
<p>Поддерживается операция:</p>
<div class="codehilite"><pre><span></span><span class="k">MODIFY</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">new_expression</span>
</pre></div>


<p>Работает только для таблиц семейства <a href="../../operations/table_engines/mergetree/"><code>MergeTree</code></a> (в том числе <a href="../../operations/table_engines/replication/">реплицированных</a>). После выполнения запроса
<a href="../../operations/table_engines/mergetree/">ключ сортировки</a> таблицы
заменяется на <code>new_expression</code> (выражение или кортеж выражений). Первичный ключ при этом остаётся прежним.</p>
<p>Операция затрагивает только метаданные. Чтобы сохранить свойство упорядоченности кусков данных по ключу
сортировки, разрешено добавлять в ключ только новые столбцы (т.е. столбцы, добавляемые командой <code>ADD COLUMN</code>
в том же запросе <code>ALTER</code>), у которых нет выражения по умолчанию.</p>
<h3 id="manipuliatsii-s-indeksami">Манипуляции с индексами<a class="headerlink" href="#manipuliatsii-s-indeksami" title="Permanent link">&para;</a></h3>
<p>Добавить или удалить индекс можно с помощью операций</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">].</span><span class="n">name</span> <span class="k">ADD</span> <span class="k">INDEX</span> <span class="n">name</span> <span class="n">expression</span> <span class="k">TYPE</span> <span class="k">type</span> <span class="n">GRANULARITY</span> <span class="n">value</span> <span class="p">[</span><span class="k">AFTER</span> <span class="n">name</span><span class="p">]</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">].</span><span class="n">name</span> <span class="k">DROP</span> <span class="k">INDEX</span> <span class="n">name</span>
</pre></div>


<p>Поддерживается только таблицами семейства <code>*MergeTree</code>.</p>
<p>Команда <code>ADD INDEX</code> добавляет описание индексов в метаданные, а <code>DROP INDEX</code> удаляет индекс из метаданных и стирает файлы индекса с диска, поэтому они легковесные и работают мгновенно.</p>
<p>Если индекс появился в метаданных, то он начнет считаться в последующих слияниях и записях в таблицу, а не сразу после выполнения операции <code>ALTER</code>.</p>
<p>Запрос на изменение индексов реплицируется, сохраняя новые метаданные в ZooKeeper и применяя изменения на всех репликах.</p>
<h3 id="manipuliatsii-s-ogranicheniiami-constraints">Манипуляции с ограничениями (constraints)<a class="headerlink" href="#manipuliatsii-s-ogranicheniiami-constraints" title="Permanent link">&para;</a></h3>
<p>Про ограничения подробнее написано <a href="../create/#constraints">тут</a>.</p>
<p>Добавить или удалить ограничение можно с помощью запросов</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">].</span><span class="n">name</span> <span class="k">ADD</span> <span class="k">CONSTRAINT</span> <span class="k">constraint_name</span> <span class="k">CHECK</span> <span class="n">expression</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">].</span><span class="n">name</span> <span class="k">DROP</span> <span class="k">CONSTRAINT</span> <span class="k">constraint_name</span><span class="p">;</span>
</pre></div>


<p>Запросы выполняют добавление или удаление метаданных об ограничениях таблицы <code>[db].name</code>, поэтому выполняются мнгновенно.</p>
<p>Если ограничение появилось для непустой таблицы, то <em>проверка ограничения для имеющихся данных не производится</em>.</p>
<p>Запрос на изменение ограничений для Replicated таблиц реплицируется, сохраняя новые метаданные в ZooKeeper и применяя изменения на всех репликах.</p>
<h3 id="alter_manipulations-with-partitions">Манипуляции с партициями и кусками<a class="headerlink" href="#alter_manipulations-with-partitions" title="Permanent link">&para;</a></h3>
<p>Для работы с <a href="../../operations/table_engines/custom_partitioning_key/">партициями</a> доступны следующие операции:</p>
<ul>
<li><a href="#alter_detach-partition">DETACH PARTITION</a> –  перенести партицию в директорию <code>detached</code>;</li>
<li><a href="#alter_drop-partition">DROP PARTITION</a> – удалить партицию;</li>
<li><a href="#alter_attach-partition">ATTACH PARTITION|PART</a> – добавить партицию/кусок в таблицу из директории <code>detached</code>;</li>
<li><a href="#alter_replace-partition">REPLACE PARTITION</a> – скопировать партицию из другой таблицы;</li>
<li><a href="#alter_clear-column-partition">CLEAR COLUMN IN PARTITION</a> – удалить все значения в столбце для заданной партиции;</li>
<li><a href="#alter_clear-index-partition">CLEAR INDEX IN PARTITION</a> - очистить построенные вторичные индексы для заданной партиции;</li>
<li><a href="#alter_freeze-partition">FREEZE PARTITION</a> – создать резервную копию партиции;</li>
<li><a href="#alter_fetch-partition">FETCH PARTITION</a> – скачать партицию с другого сервера;</li>
<li><a href="#alter_move-partition">MOVE PARTITION|PART</a> -- переместить партицию/кускок на другой диск или том.</li>
</ul>
<h4 id="alter_detach-partition">DETACH PARTITION<a class="headerlink" href="#alter_detach-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="n">DETACH</span> <span class="n">PARTITION</span> <span class="n">partition_expr</span>
</pre></div>


<p>Перемещает заданную партицию в директорию <code>detached</code>. Сервер не будет знать об этой партиции до тех пор, пока вы не выполните запрос <a href="#alter_attach-partition">ATTACH</a>.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="n">DETACH</span> <span class="n">PARTITION</span> <span class="mi">201901</span>
</pre></div>


<p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<p>После того как запрос будет выполнен, вы сможете производить любые операции с данными в директории <code>detached</code>. Например, можно удалить их из файловой системы.</p>
<p>Запрос реплицируется — данные будут перенесены в директорию <code>detached</code> и забыты на всех репликах. Обратите внимание, запрос может быть отправлен только на реплику-лидер. Чтобы узнать, является ли реплика лидером, выполните запрос <code>SELECT</code> к системной таблице <a href="../../operations/system_tables/#system_tables-replicas">system.replicas</a>. Либо можно выполнить запрос <code>DETACH</code> на всех репликах — тогда на всех репликах, кроме реплики-лидера, запрос вернет ошибку.</p>
<h4 id="alter_drop-partition">DROP PARTITION<a class="headerlink" href="#alter_drop-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="k">DROP</span> <span class="n">PARTITION</span> <span class="n">partition_expr</span>
</pre></div>


<p>Удаляет партицию. Партиция помечается как неактивная и будет полностью удалена примерно через 10 минут.</p>
<p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<p>Запрос реплицируется — данные будут удалены на всех репликах.</p>
<h4 id="alter_drop-detached">DROP DETACHED PARTITION|PART<a class="headerlink" href="#alter_drop-detached" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="k">DROP</span> <span class="n">DETACHED</span> <span class="n">PARTITION</span><span class="o">|</span><span class="n">PART</span> <span class="n">partition_expr</span>
</pre></div>


<p>Удаляет из <code>detached</code> кусок или все куски, принадлежащие партиции.
Подробнее о том, как корректно задать имя партиции, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<h4 id="alter_attach-partition">ATTACH PARTITION|PART<a class="headerlink" href="#alter_attach-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="n">ATTACH</span> <span class="n">PARTITION</span><span class="o">|</span><span class="n">PART</span> <span class="n">partition_expr</span>
</pre></div>


<p>Добавляет данные в таблицу из директории <code>detached</code>. Можно добавить данные как для целой партиции, так и для отдельного куска. Примеры:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="n">ATTACH</span> <span class="n">PARTITION</span> <span class="mi">201901</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="n">ATTACH</span> <span class="n">PART</span> <span class="mi">201901</span><span class="n">_2_2_0</span><span class="p">;</span>
</pre></div>


<p>Как корректно задать имя партиции или куска, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<p>Этот запрос реплицируется. Каждая реплика проверяет, есть ли данные в директории <code>detached</code>. Если данные есть, то запрос проверяет их целостность и соответствие данным на сервере-инициаторе запроса. В случае успеха данные добавляются в таблицу. В противном случае, реплика загружает данные с реплики-инициатора запроса или с другой реплики, на которой эти данные уже добавлены.</p>
<p>Это означает, что вы можете разместить данные в директории <code>detached</code> на одной реплике и с помощью запроса <code>ALTER ... ATTACH</code> добавить их в таблицу на всех репликах.</p>
<h4 id="alter_replace-partition">REPLACE PARTITION<a class="headerlink" href="#alter_replace-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">table2</span> <span class="k">REPLACE</span> <span class="n">PARTITION</span> <span class="n">partition_expr</span> <span class="k">FROM</span> <span class="n">table1</span>
</pre></div>


<p>Копирует партицию из таблицы <code>table1</code> в таблицу <code>table2</code>. Данные из <code>table1</code> не удаляются.</p>
<p>Следует иметь в виду:</p>
<ul>
<li>Таблицы должны иметь одинаковую структуру.</li>
<li>Для таблиц должен быть задан одинаковый ключ партиционирования.</li>
</ul>
<p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<h4 id="alter_clear-column-partition">CLEAR COLUMN IN PARTITION<a class="headerlink" href="#alter_clear-column-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="n">CLEAR</span> <span class="k">COLUMN</span> <span class="k">column_name</span> <span class="k">IN</span> <span class="n">PARTITION</span> <span class="n">partition_expr</span>
</pre></div>


<p>Сбрасывает все значения в столбце для заданной партиции. Если для столбца определено значение по умолчанию (в секции <code>DEFAULT</code>), то будет выставлено это значение.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">visits</span> <span class="n">CLEAR</span> <span class="k">COLUMN</span> <span class="n">hour</span> <span class="k">in</span> <span class="n">PARTITION</span> <span class="mi">201902</span>
</pre></div>


<h4 id="alter_clear-index-partition">CLEAR INDEX IN PARTITION<a class="headerlink" href="#alter_clear-index-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="n">CLEAR</span> <span class="k">INDEX</span> <span class="n">index_name</span> <span class="k">IN</span> <span class="n">PARTITION</span> <span class="n">partition_expr</span>
</pre></div>


<p>Работает как <code>CLEAR COLUMN</code>, но сбрасывает индексы вместо данных в столбцах.</p>
<h4 id="alter_freeze-partition">FREEZE PARTITION<a class="headerlink" href="#alter_freeze-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="k">FREEZE</span> <span class="p">[</span><span class="n">PARTITION</span> <span class="n">partition_expr</span><span class="p">]</span>
</pre></div>


<p>Создаёт резервную копию для заданной партиции. Если выражение <code>PARTITION</code> опущено, резервные копии будут созданы для всех партиций.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Создание резервной копии не требует остановки сервера.</p>
</div>
<p>Для таблиц старого стиля имя партиций можно задавать в виде префикса (например, '2019'). В этом случае резервные копии будут созданы для всех соответствующих партиций. Подробнее о том, как корректно задать имя партиции, см. в разделе <a href="#alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER</a>.</p>
<p>Запрос делает следующее — для текущего состояния таблицы он формирует жесткие ссылки на данные в этой таблице. Ссылки размещаются в директории <code>/var/lib/clickhouse/shadow/N/...</code>, где:</p>
<ul>
<li><code>/var/lib/clickhouse/</code> — рабочая директория ClickHouse, заданная в конфигурационном файле;</li>
<li><code>N</code> — инкрементальный номер резервной копии.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>При использовании <a href="../../operations/table_engines/mergetree/#table_engine-mergetree-multiple-volumes">нескольких дисков для хранения данных таблицы</a> директория <code>shadow/N</code> появляется на каждом из дисков, на которых были куски, попавшие под выражение <code>PARTITION</code>.</p>
</div>
<p>Структура директорий внутри резервной копии такая же, как внутри <code>/var/lib/clickhouse/</code>. Запрос выполнит 'chmod' для всех файлов, запрещая запись в них.</p>
<p>Обратите внимание, запрос <code>ALTER TABLE t FREEZE PARTITION</code> не реплицируется. Он создает резервную копию только на локальном сервере. После создания резервной копии данные из <code>/var/lib/clickhouse/shadow/</code> можно скопировать на удалённый сервер, а локальную копию удалить.</p>
<p>Резервная копия создается почти мгновенно (однако сначала запрос дожидается завершения всех запросов, которые выполняются для соответствующей таблицы).</p>
<p><code>ALTER TABLE t FREEZE PARTITION</code> копирует только данные, но не метаданные таблицы. Чтобы сделать резервную копию метаданных таблицы, скопируйте файл <code>/var/lib/clickhouse/metadata/database/table.sql</code></p>
<p>Чтобы восстановить данные из резервной копии, выполните следующее:</p>
<ol>
<li>Создайте таблицу, если она ещё не существует. Запрос на создание можно взять из .sql файла (замените в нём <code>ATTACH</code> на <code>CREATE</code>).</li>
<li>Скопируйте данные из директории <code>data/database/table/</code> внутри резервной копии в директорию <code>/var/lib/clickhouse/data/database/table/detached/</code>.</li>
<li>С помощью запросов <code>ALTER TABLE t ATTACH PARTITION</code> добавьте данные в таблицу.</li>
</ol>
<p>Восстановление данных из резервной копии не требует остановки сервера.</p>
<p>Подробнее о резервном копировании и восстановлении данных читайте в разделе <a href="../../operations/backup/">Резервное копирование данных</a>.</p>
<h4 id="alter_fetch-partition">FETCH PARTITION<a class="headerlink" href="#alter_fetch-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="k">FETCH</span> <span class="n">PARTITION</span> <span class="n">partition_expr</span> <span class="k">FROM</span> <span class="s1">&#39;path-in-zookeeper&#39;</span>
</pre></div>


<p>Загружает партицию с другого сервера. Этот запрос работает только для реплицированных таблиц.</p>
<p>Запрос выполняет следующее:</p>
<ol>
<li>Загружает партицию с указанного шарда. Путь к шарду задается в секции <code>FROM</code> ('path-in-zookeeper'). Обратите внимание, нужно задавать путь к шарду в ZooKeeper.</li>
<li>Помещает загруженные данные в директорию <code>detached</code> таблицы <code>table_name</code>. Чтобы прикрепить эти данные к таблице, используйте запрос <a href="#alter_attach-partition">ATTACH PARTITION|PART</a>.</li>
</ol>
<p>Например:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="k">FETCH</span> <span class="n">PARTITION</span> <span class="mi">201902</span> <span class="k">FROM</span> <span class="s1">&#39;/clickhouse/tables/01-01/visits&#39;</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="n">ATTACH</span> <span class="n">PARTITION</span> <span class="mi">201902</span><span class="p">;</span>
</pre></div>


<p>Следует иметь в виду:</p>
<ul>
<li>Запрос <code>ALTER TABLE t FETCH PARTITION</code> не реплицируется. Он загружает партицию в директорию <code>detached</code> только на локальном сервере.</li>
<li>Запрос <code>ALTER TABLE t ATTACH</code> реплицируется — он добавляет данные в таблицу сразу на всех репликах. На одной из реплик данные будут добавлены из директории <code>detached</code>, а на других — из соседних реплик.</li>
</ul>
<p>Перед загрузкой данных система проверяет, существует ли партиция и совпадает ли её структура со структурой таблицы. При этом автоматически выбирается наиболее актуальная реплика среди всех живых реплик.</p>
<p>Несмотря на то что запрос называется <code>ALTER TABLE</code>, он не изменяет структуру таблицы и не изменяет сразу доступные данные в таблице.</p>
<h4 id="alter_move-partition">MOVE PARTITION|PART<a class="headerlink" href="#alter_move-partition" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="k">table_name</span> <span class="k">MOVE</span> <span class="n">PARTITION</span><span class="o">|</span><span class="n">PART</span> <span class="n">partition_expr</span> <span class="k">TO</span> <span class="n">DISK</span><span class="o">|</span><span class="n">VOLUME</span> <span class="s1">&#39;disk_name&#39;</span>
</pre></div>


<p>Перемещает партицию или кусок на другой том или диск. Запрос работает только для движков семейства MergeTree. Подробнее о хранении данных на разных дисках читайте в разделе <a href="../../operations/table_engines/mergetree/#table_engine-mergetree-multiple-volumes">Хранение данных таблицы на нескольких блочных устройствах</a>.</p>
<p>Следует иметь ввиду:</p>
<ul>
<li>Запрос <code>ALTER TABLE t MOVE</code> не реплицируется, т.к. на разных репликах могут быть различные конфигурации политик хранения.</li>
<li>Запрос <code>ALTER TABLE t MOVE</code> будет возвращать ошибку, если указан несуществующий том или диск, а также в случае невыполнения условий перемещения данных, которые указаны в конфигурации политики хранения.</li>
<li>Запрос <code>ALTER TABLE t MOVE</code> может возвращать ошибку в случае, когда перемещаемые данные уже оказались перемещены в результате фонового процесса, конкурентного запроса <code>ALTER TABLE t MOVE</code> или как часть результата фоновой операции слияния. В данном случае никаких дополнительных действий от пользователя не требуется.</li>
</ul>
<p>Примеры:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">hits</span> <span class="k">MOVE</span> <span class="n">PART</span> <span class="s1">&#39;20190301_14343_16206_438&#39;</span> <span class="k">TO</span> <span class="n">VOLUME</span> <span class="s1">&#39;slow&#39;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">hits</span> <span class="k">MOVE</span> <span class="n">PARTITION</span> <span class="s1">&#39;2019-09-01&#39;</span> <span class="k">TO</span> <span class="n">DISK</span> <span class="s1">&#39;fast_ssd&#39;</span>
</pre></div>


<h4 id="alter-how-to-specify-part-expr">Как задавать имя партиции в запросах ALTER<a class="headerlink" href="#alter-how-to-specify-part-expr" title="Permanent link">&para;</a></h4>
<p>Чтобы задать нужную партицию в запросах <code>ALTER ... PARTITION</code>, можно использовать:</p>
<ul>
<li>Имя партиции. Посмотреть имя партиции можно в столбце <code>partition</code> системной таблицы <a href="../../operations/system_tables/#system_tables-parts">system.parts</a>. Например, <code>ALTER TABLE visits DETACH PARTITION 201901</code>.</li>
<li>Произвольное выражение из столбцов исходной таблицы. Также поддерживаются константы и константные выражения. Например, <code>ALTER TABLE visits DETACH PARTITION toYYYYMM(toDate('2019-01-25'))</code>.</li>
<li>Строковый идентификатор партиции. Идентификатор партиции используется для именования кусков партиции на файловой системе и в ZooKeeper. В запросах <code>ALTER</code> идентификатор партиции нужно указывать в секции <code>PARTITION ID</code>, в одинарных кавычках. Например, <code>ALTER TABLE visits DETACH PARTITION ID '201901'</code>.</li>
<li>Для запросов <a href="#alter_attach-partition">ATTACH PART</a> и <a href="#alter_drop-detached">DROP DETACHED PART</a>: чтобы задать имя куска партиции, используйте строковой литерал со значением из столбца <code>name</code> системной таблицы <a href="../../operations/system_tables/#system_tables-detached_parts">system.detached_parts</a>. Например, <code>ALTER TABLE visits ATTACH PART '201901_1_1_0'</code>.</li>
</ul>
<p>Использование кавычек в имени партиций зависит от типа данных столбца, по которому задано партиционирование. Например, для столбца с типом <code>String</code> имя партиции необходимо указывать в кавычках (одинарных). Для типов <code>Date</code> и <code>Int*</code> кавычки указывать не нужно.</p>
<p>Замечание: для таблиц старого стиля партицию можно указывать и как число <code>201901</code>, и как строку <code>'201901'</code>. Синтаксис для таблиц нового типа более строг к типам (аналогично парсеру входного формата VALUES).</p>
<p>Правила, сформулированные выше, актуальны также для запросов <a href="../misc/#misc_operations-optimize">OPTIMIZE</a>. Чтобы указать единственную партицию непартиционированной таблицы, укажите <code>PARTITION tuple()</code>. Например:</p>
<div class="codehilite"><pre><span></span><span class="n">OPTIMIZE</span> <span class="k">TABLE</span> <span class="n">table_not_partitioned</span> <span class="n">PARTITION</span> <span class="n">tuple</span><span class="p">()</span> <span class="k">FINAL</span><span class="p">;</span>
</pre></div>


<p>Примеры запросов <code>ALTER ... PARTITION</code> можно посмотреть в тестах: <a href="https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00502_custom_partitioning_local.sql" rel="external nofollow"><code>00502_custom_partitioning_local</code></a> и <a href="https://github.com/ClickHouse/ClickHouse/blob/master/dbms/tests/queries/0_stateless/00502_custom_partitioning_replicated_zookeeper.sql" rel="external nofollow"><code>00502_custom_partitioning_replicated_zookeeper</code></a>.</p>
<h3 id="sinkhronnost-zaprosov-alter">Синхронность запросов ALTER<a class="headerlink" href="#sinkhronnost-zaprosov-alter" title="Permanent link">&para;</a></h3>
<p>Для нереплицируемых таблиц, все запросы <code>ALTER</code> выполняются синхронно. Для реплицируемых таблиц, запрос всего лишь добавляет инструкцию по соответствующим действиям в <code>ZooKeeper</code>, а сами действия осуществляются при первой возможности. Но при этом, запрос может ждать завершения выполнения этих действий на всех репликах.</p>
<p>Для запросов <code>ALTER ... ATTACH|DETACH|DROP</code> можно настроить ожидание, с помощью настройки <code>replication_alter_partitions_sync</code>.
Возможные значения: <code>0</code> - не ждать, <code>1</code> - ждать выполнения только у себя (по умолчанию), <code>2</code> - ждать всех.</p>
<h3 id="alter-mutations">Мутации<a class="headerlink" href="#alter-mutations" title="Permanent link">&para;</a></h3>
<p>Мутации - разновидность запроса ALTER, позволяющая изменять или удалять данные в таблице. В отличие от стандартных запросов <code>DELETE</code> и <code>UPDATE</code>, рассчитанных на точечное изменение данных, область применения мутаций - достаточно тяжёлые изменения, затрагивающие много строк в таблице.</p>
<p>Функциональность находится в состоянии beta и доступна начиная с версии 1.1.54388. Реализована поддержка *MergeTree таблиц (с репликацией и без).</p>
<p>Конвертировать существующие таблицы для работы с мутациями не нужно. Но после применения первой мутации формат данных таблицы становится несовместимым с предыдущими версиями и откатиться на предыдущую версию уже не получится.</p>
<p>На данный момент доступны команды:</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">.]</span><span class="k">table</span> <span class="k">DELETE</span> <span class="k">WHERE</span> <span class="n">filter_expr</span>
</pre></div>


<p>Выражение <code>filter_expr</code> должно иметь тип UInt8. Запрос удаляет строки таблицы, для которых это выражение принимает ненулевое значение.</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">.]</span><span class="k">table</span> <span class="k">UPDATE</span> <span class="n">column1</span> <span class="o">=</span> <span class="n">expr1</span> <span class="p">[,</span> <span class="p">...]</span> <span class="k">WHERE</span> <span class="n">filter_expr</span>
</pre></div>


<p>Команда доступна начиная с версии 18.12.14. Выражение <code>filter_expr</code> должно иметь тип UInt8. Запрос изменяет значение указанных столбцов на вычисленное значение соответствующих выражений в каждой строке, для которой <code>filter_expr</code> принимает ненулевое значение. Вычисленные значения преобразуются к типу столбца с помощью оператора <code>CAST</code>. Изменение столбцов, которые используются при вычислении первичного ключа или ключа партиционирования, не поддерживается.</p>
<div class="codehilite"><pre><span></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="p">[</span><span class="n">db</span><span class="p">.]</span><span class="k">table</span> <span class="n">MATERIALIZE</span> <span class="k">INDEX</span> <span class="n">name</span> <span class="k">IN</span> <span class="n">PARTITION</span> <span class="n">partition_name</span>
</pre></div>


<p>Команда перестроит вторичный индекс <code>name</code> для партиции <code>partition_name</code>.</p>
<p>В одном запросе можно указать несколько команд через запятую.</p>
<p>Для *MergeTree-таблиц мутации выполняются, перезаписывая данные по кускам (parts). При этом атомарности нет — куски заменяются на помутированные по мере выполнения и запрос <code>SELECT</code>, заданный во время выполнения мутации, увидит данные как из измененных кусков, так и из кусков, которые еще не были изменены.</p>
<p>Мутации линейно упорядочены между собой и накладываются на каждый кусок в порядке добавления. Мутации также упорядочены со вставками - гарантируется, что данные, вставленные в таблицу до начала выполнения запроса мутации, будут изменены, а данные, вставленные после окончания запроса мутации, изменены не будут. При этом мутации никак не блокируют вставки.</p>
<p>Запрос завершается немедленно после добавления информации о мутации (для реплицированных таблиц - в ZooKeeper, для нереплицированных - на файловую систему). Сама мутация выполняется асинхронно, используя настройки системного профиля. Следить за ходом её выполнения можно по таблице <a href="../../operations/system_tables/#system_tables-mutations"><code>system.mutations</code></a>. Добавленные мутации будут выполняться до конца даже в случае перезапуска серверов ClickHouse. Откатить мутацию после её добавления нельзя, но если мутация по какой-то причине не может выполниться до конца, её можно остановить с помощью запроса <a href="../misc/#kill-mutation"><code>KILL MUTATION</code></a>.</p>
<p>Записи о последних выполненных мутациях удаляются не сразу (количество сохраняемых мутаций определяется параметром движка таблиц <code>finished_mutations_to_keep</code>). Более старые записи удаляются.</p>
                
                </div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../query_language/create/" title="CREATE" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Назад
                </span>
                CREATE
              </span>
            </div>
          </a>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../query_language/system/" title="SYSTEM" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Вперед
                </span>
                SYSTEM
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2016–2020 Yandex LLC
          </div>
        
      </div>
      
        <div class="md-footer-social">
  <span class="md-footer-copyright__highlight">Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/71b26c8f9b91b99ff3656474d1bd09b5b7f55437" rel="external nofollow">71b26c8</a></span>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      
        <script src="../../assets/javascripts/modernizr.js"></script>
      
      <script src="../../assets/javascripts/application.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../assets/javascripts/lunr/lunr.ru.js"></script>
            
          
          
            <script src="../../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      
    
    
      
    

    <script type="text/javascript">
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'ru';
            }
          )
      });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:ru"]
},
debug: false
});
</script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/18343495" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>