<!DOCTYPE html><html lang=ru class=no-js data-version=v19.15 data-single-page=false> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=https://clickhouse.yandex/docs/ru/interfaces/formats/ rel=canonical><meta name=lang:clipboard.copy content="Копировать в буфер"><meta name=lang:clipboard.copied content="Скопировано в буфер"><meta name=lang:search.language content=ru><meta name=lang:search.pipeline.stopwords content><meta name=lang:search.pipeline.trimmer content><meta name=lang:search.result.none content="Совпадений не найдено"><meta name=lang:search.result.one content="Найдено 1 совпадение"><meta name=lang:search.result.other content="Найдено # совпадений"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../assets/images/favicon.ico><title>Форматы входных и выходных данных - Документация ClickHouse v19.15</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><link rel=stylesheet href=../../assets/stylesheets/application.2a88008a.css><link rel=stylesheet href=../../assets/stylesheets/application-palette.792431c1.css><link rel=stylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel=stylesheet href=../../assets/stylesheets/custom.css?1582326900></head> <body dir=ltr data-md-color-primary=white data-md-color-accent=white class=md-lang-ru> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=drawer> <input class=md-toggle data-md-toggle=search type=checkbox id=search> <label class=md-overlay data-md-component=overlay for=drawer></label> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=/ title="Документация ClickHouse v19.15" class="md-header-nav__button md-logo"> <img src=../../images/logo.svg width=40 height=40> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Документация ClickHouse v19.15 </span> <span class=md-header-nav__topic> Форматы входных и выходных данных </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=search></label> <div class=md-search__inner> <form class=md-search__form name=search> <input type=text id=md-search__input class=md-search__input name=query required placeholder=Поиск autocapitalize=off autocorrect=off autocomplete=off spellcheck=false> <label class="md-icon md-search__icon" for=search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset>&#xE5CD;</button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Начните печатать для поиска </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div id=md-language-switch class=md-header-nav__source> <a class=md-alt-lang href=../../../en/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=English> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 60 30" preserveaspectratio=none> <clippath id=t> <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/> </clippath> <path fill=#00247d d="M0,0 v30 h60 v-30 z"/> <path stroke=#fff stroke-width=6 d="M0,0 L60,30 M60,0 L0,30"/> <path clip-path=url(#t) stroke=#cf142b stroke-width=4 d="M0,0 L60,30 M60,0 L0,30"/> <path stroke=#fff stroke-width=10 d="M30,0 v30 M0,15 h60"/> <path stroke=#cf142b stroke-width=6 d="M30,0 v30 M0,15 h60"/> </svg> </a> <a class="md-alt-lang md-current-lang" href=../../../ru/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Russian> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 9 6" preserveaspectratio=none> <rect fill=#fff width=9 height=3 /> <rect fill=#d52b1e y=3 width=9 height=3 /> <rect fill=#0039a6 y=2 width=9 height=2 /> </svg> </a> <a class=md-alt-lang href=../../../zh/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Chinese> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 30 20" preserveaspectratio=none> <defs> <path id=s fill=#ffde00 d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/> </defs> <rect width=30 height=20 fill=#de2910 /> <use xlink:href=#s transform="translate(5,5) scale(3)"/> <use xlink:href=#s transform="translate(10,2) rotate(23.036243)"/> <use xlink:href=#s transform="translate(12,4) rotate(45.869898)"/> <use xlink:href=#s transform="translate(12,7) rotate(69.945396)"/> <use xlink:href=#s transform="translate(10,9) rotate(20.659808)"/> </svg> </a> <a class=md-alt-lang href=../../../ja/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Japanese> <?xml version="1.0" encoding="UTF-8"?> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink width=90px height=60px viewbox="0 0 90 60" version=1.1> <g id=surface1> <rect x=0 y=0 width=90 height=60 style=fill:rgb(62.7451%,62.7451%,62.7451%);fill-opacity:1;stroke:none; /> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562 "/> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(74.509805%,0%,14.901961%);fill-opacity:1;" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30 "/> </g> </svg> </a> <a class=md-alt-lang href=../../../fa/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Farsi> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 630 360" preserveaspectratio=none> <rect width=630 height=360 fill=#da0000 /> <rect width=630 height=240 fill=#fff /> <rect width=630 height=120 fill=#239f40 /> <g transform=translate(8.4,100.4)> <g id=tb4> <g id=tb1 fill=none stroke=#fff stroke-width=2> <path id=tbp1 d=M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9 transform=scale(1.4) /> <path id=tbp2 d=M0,7H9M10,7H19 transform=scale(2.8) /> <use xlink:href=#tbp2 y=120 /> <use xlink:href=#tbp1 y=145.2 /> </g> <g id=tb3> <use xlink:href=#tb1 x=56 /> <use xlink:href=#tb1 x=112 /> <use xlink:href=#tb1 x=168 /> </g> </g> <use xlink:href=#tb3 x=168 /> <use xlink:href=#tb4 x=392 /> </g> <g fill=#da0000 transform=matrix(45,0,0,45,315,180)> <g id=emblem_half> <path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/> <path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/> <path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/> <path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/> </g> <use xlink:href=#emblem_half transform=scale(-1,1) /> </g> </svg> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=drawer> Документация ClickHouse v19.15 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Введение </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> Введение </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ title=Обзор class=md-nav__link> Обзор </a> </li> <li class=md-nav__item> <a href=../../introduction/distinctive_features/ title="Отличительные возможности ClickHouse" class=md-nav__link> Отличительные возможности ClickHouse </a> </li> <li class=md-nav__item> <a href=../../introduction/features_considered_disadvantages/ title="Особенности ClickHouse, которые могут считаться недостатками" class=md-nav__link> Особенности ClickHouse, которые могут считаться недостатками </a> </li> <li class=md-nav__item> <a href=../../introduction/performance/ title=Производительность class=md-nav__link> Производительность </a> </li> <li class=md-nav__item> <a href=../../introduction/ya_metrika_task/ title="Постановка задачи в Яндекс.Метрике" class=md-nav__link> Постановка задачи в Яндекс.Метрике </a> </li> <li class=md-nav__item> <a href=../../introduction/info/ title="Информационная поддержка" class=md-nav__link> Информационная поддержка </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Начало работы </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Начало работы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting_started/ title="Установка и запуск" class=md-nav__link> Установка и запуск </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Тестовые наборы данных </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-2> Тестовые наборы данных </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting_started/example_datasets/ontime/ title=OnTime class=md-nav__link> OnTime </a> </li> <li class=md-nav__item> <a href=../../getting_started/example_datasets/nyc_taxi/ title="Данные о такси в Нью-Йорке" class=md-nav__link> Данные о такси в Нью-Йорке </a> </li> <li class=md-nav__item> <a href=../../getting_started/example_datasets/amplab_benchmark/ title="AMPLab Big Data Benchmark" class=md-nav__link> AMPLab Big Data Benchmark </a> </li> <li class=md-nav__item> <a href=../../getting_started/example_datasets/wikistat/ title=WikiStat class=md-nav__link> WikiStat </a> </li> <li class=md-nav__item> <a href=../../getting_started/example_datasets/criteo/ title="Терабайт логов кликов от Criteo" class=md-nav__link> Терабайт логов кликов от Criteo </a> </li> <li class=md-nav__item> <a href=../../getting_started/example_datasets/star_schema/ title="Схема «Звезда»" class=md-nav__link> Схема «Звезда» </a> </li> <li class=md-nav__item> <a href=../../getting_started/example_datasets/metrica/ title="Данные Яндекс.Метрики" class=md-nav__link> Данные Яндекс.Метрики </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Интерфейсы </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Интерфейсы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../interfaces/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../interfaces/cli/ title="Клиент командной строки" class=md-nav__link> Клиент командной строки </a> </li> <li class=md-nav__item> <a href=../../interfaces/tcp/ title="Нативный интерфейс (TCP)" class=md-nav__link> Нативный интерфейс (TCP) </a> </li> <li class=md-nav__item> <a href=../../interfaces/http/ title=HTTP-интерфейс class=md-nav__link> HTTP-интерфейс </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=toc> <label class="md-nav__link md-nav__link--active" for=toc> Форматы входных и выходных данных </label> <a href=../../interfaces/formats/ title="Форматы входных и выходных данных" class="md-nav__link md-nav__link--active"> <strong>Форматы входных и выходных данных</strong> </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=toc>Содержание</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#tabseparated title=TabSeparated class=md-nav__link> TabSeparated </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#formatirovanie-dannykh title="Форматирование данных" class=md-nav__link> Форматирование данных </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tabseparatedraw title=TabSeparatedRaw class=md-nav__link> TabSeparatedRaw </a> </li> <li class=md-nav__item> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class=md-nav__link> TabSeparatedWithNames </a> </li> <li class=md-nav__item> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class=md-nav__link> TabSeparatedWithNamesAndTypes </a> </li> <li class=md-nav__item> <a href=#format-template title=Template class=md-nav__link> Template </a> </li> <li class=md-nav__item> <a href=#templateignorespaces title=TemplateIgnoreSpaces class=md-nav__link> TemplateIgnoreSpaces </a> </li> <li class=md-nav__item> <a href=#tskv title=TSKV class=md-nav__link> TSKV </a> </li> <li class=md-nav__item> <a href=#csv title=CSV class=md-nav__link> CSV </a> </li> <li class=md-nav__item> <a href=#csvwithnames title=CSVWithNames class=md-nav__link> CSVWithNames </a> </li> <li class=md-nav__item> <a href=#json title=JSON class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=#jsoncompact title=JSONCompact class=md-nav__link> JSONCompact </a> </li> <li class=md-nav__item> <a href=#jsoneachrow title=JSONEachRow class=md-nav__link> JSONEachRow </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vstavka-dannykh title="Вставка данных" class=md-nav__link> Вставка данных </a> </li> <li class=md-nav__item> <a href=#vyborka-dannykh title="Выборка данных" class=md-nav__link> Выборка данных </a> </li> <li class=md-nav__item> <a href=#jsoneachrow-nested title="Использование вложенных структур" class=md-nav__link> Использование вложенных структур </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#native title=Native class=md-nav__link> Native </a> </li> <li class=md-nav__item> <a href=#null title=Null class=md-nav__link> Null </a> </li> <li class=md-nav__item> <a href=#pretty title=Pretty class=md-nav__link> Pretty </a> </li> <li class=md-nav__item> <a href=#prettycompact title=PrettyCompact class=md-nav__link> PrettyCompact </a> </li> <li class=md-nav__item> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class=md-nav__link> PrettyCompactMonoBlock </a> </li> <li class=md-nav__item> <a href=#prettynoescapes title=PrettyNoEscapes class=md-nav__link> PrettyNoEscapes </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class=md-nav__link> PrettyCompactNoEscapes </a> </li> <li class=md-nav__item> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class=md-nav__link> PrettySpaceNoEscapes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prettyspace title=PrettySpace class=md-nav__link> PrettySpace </a> </li> <li class=md-nav__item> <a href=#rowbinary title=RowBinary class=md-nav__link> RowBinary </a> </li> <li class=md-nav__item> <a href=#rowbinarywithnamesandtypes title=RowBinaryWithNamesAndTypes class=md-nav__link> RowBinaryWithNamesAndTypes </a> </li> <li class=md-nav__item> <a href=#data-format-values title=Values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#vertical title=Vertical class=md-nav__link> Vertical </a> </li> <li class=md-nav__item> <a href=#xml title=XML class=md-nav__link> XML </a> </li> <li class=md-nav__item> <a href=#capnproto title=CapnProto class=md-nav__link> CapnProto </a> </li> <li class=md-nav__item> <a href=#protobuf title=Protobuf class=md-nav__link> Protobuf </a> </li> <li class=md-nav__item> <a href=#data-format-parquet title=Parquet class=md-nav__link> Parquet </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sootvetstvie-tipov-dannykh title="Соответствие типов данных" class=md-nav__link> Соответствие типов данных </a> </li> <li class=md-nav__item> <a href=#inserting-and-selecting-data title="Inserting and Selecting Data" class=md-nav__link> Inserting and Selecting Data </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#formatschema title="Схема формата" class=md-nav__link> Схема формата </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../interfaces/jdbc/ title=JDBC-драйвер class=md-nav__link> JDBC-драйвер </a> </li> <li class=md-nav__item> <a href=../../interfaces/odbc/ title=ODBC-драйвер class=md-nav__link> ODBC-драйвер </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-8 type=checkbox id=nav-3-8> <label class=md-nav__link for=nav-3-8> От сторонних разработчиков </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-8> От сторонних разработчиков </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../interfaces/third-party/client_libraries/ title="Клиентские библиотеки" class=md-nav__link> Клиентские библиотеки </a> </li> <li class=md-nav__item> <a href=../../interfaces/third-party/integrations/ title=Интеграции class=md-nav__link> Интеграции </a> </li> <li class=md-nav__item> <a href=../../interfaces/third-party/gui/ title="Визуальные интерфейсы" class=md-nav__link> Визуальные интерфейсы </a> </li> <li class=md-nav__item> <a href=../../interfaces/third-party/proxy/ title=Прокси class=md-nav__link> Прокси </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Типы данных </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Типы данных </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data_types/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class=md-nav__link> UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64 </a> </li> <li class=md-nav__item> <a href=../../data_types/float/ title="Float32, Float64" class=md-nav__link> Float32, Float64 </a> </li> <li class=md-nav__item> <a href=../../data_types/decimal/ title=Decimal class=md-nav__link> Decimal </a> </li> <li class=md-nav__item> <a href=../../data_types/boolean/ title="Булевы значения" class=md-nav__link> Булевы значения </a> </li> <li class=md-nav__item> <a href=../../data_types/string/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../data_types/fixedstring/ title=FixedString(N) class=md-nav__link> FixedString(N) </a> </li> <li class=md-nav__item> <a href=../../data_types/uuid/ title=UUID class=md-nav__link> UUID </a> </li> <li class=md-nav__item> <a href=../../data_types/date/ title=Date class=md-nav__link> Date </a> </li> <li class=md-nav__item> <a href=../../data_types/datetime/ title=DateTime class=md-nav__link> DateTime </a> </li> <li class=md-nav__item> <a href=../../data_types/enum/ title=Enum class=md-nav__link> Enum </a> </li> <li class=md-nav__item> <a href=../../data_types/array/ title=Array(T) class=md-nav__link> Array(T) </a> </li> <li class=md-nav__item> <a href=../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class=md-nav__link> AggregateFunction(name, types_of_arguments...) </a> </li> <li class=md-nav__item> <a href=../../data_types/tuple/ title="Tuple(T1, T2, ...)" class=md-nav__link> Tuple(T1, T2, ...) </a> </li> <li class=md-nav__item> <a href=../../data_types/nullable/ title=Nullable class=md-nav__link> Nullable </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-16 type=checkbox id=nav-4-16> <label class=md-nav__link for=nav-4-16> Вложенные структуры данных </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-16> Вложенные структуры данных </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class=md-nav__link> Nested(Name1 Type1, Name2 Type2, ...) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-17 type=checkbox id=nav-4-17> <label class=md-nav__link for=nav-4-17> Служебные типы данных </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-17> Служебные типы данных </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data_types/special_data_types/expression/ title=Expression class=md-nav__link> Expression </a> </li> <li class=md-nav__item> <a href=../../data_types/special_data_types/set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../../data_types/special_data_types/nothing/ title=Nothing class=md-nav__link> Nothing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-18 type=checkbox id=nav-4-18> <label class=md-nav__link for=nav-4-18> Domains </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-18> Domains </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data_types/domains/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../data_types/domains/ipv4/ title=IPv4 class=md-nav__link> IPv4 </a> </li> <li class=md-nav__item> <a href=../../data_types/domains/ipv6/ title=IPv6 class=md-nav__link> IPv6 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Движки баз данных </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Движки баз данных </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../database_engines/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../database_engines/mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Движки таблиц </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Движки таблиц </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/table_engines/ title=Введение class=md-nav__link> Введение </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2> <label class=md-nav__link for=nav-6-2> Семейство MergeTree </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-2> Семейство MergeTree </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/table_engines/mergetree/ title=MergeTree class=md-nav__link> MergeTree </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/replication/ title="Репликация данных" class=md-nav__link> Репликация данных </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/custom_partitioning_key/ title="Произвольный ключ партиционирования" class=md-nav__link> Произвольный ключ партиционирования </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class=md-nav__link> ReplacingMergeTree </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/summingmergetree/ title=SummingMergeTree class=md-nav__link> SummingMergeTree </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class=md-nav__link> AggregatingMergeTree </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class=md-nav__link> CollapsingMergeTree </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class=md-nav__link> VersionedCollapsingMergeTree </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class=md-nav__link> GraphiteMergeTree </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-3 type=checkbox id=nav-6-3> <label class=md-nav__link for=nav-6-3> Семейство Log </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-3> Семейство Log </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/table_engines/log_family/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/stripelog/ title=StripeLog class=md-nav__link> StripeLog </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/log/ title=Log class=md-nav__link> Log </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/tinylog/ title=TinyLog class=md-nav__link> TinyLog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-4 type=checkbox id=nav-6-4> <label class=md-nav__link for=nav-6-4> Интеграции </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-4> Интеграции </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/table_engines/kafka/ title=Kafka class=md-nav__link> Kafka </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/jdbc/ title=JDBC class=md-nav__link> JDBC </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/odbc/ title=ODBC class=md-nav__link> ODBC </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/hdfs/ title=HDFS class=md-nav__link> HDFS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-5 type=checkbox id=nav-6-5> <label class=md-nav__link for=nav-6-5> Особые </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-5> Особые </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/table_engines/distributed/ title=Distributed class=md-nav__link> Distributed </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/external_data/ title="Внешние данные" class=md-nav__link> Внешние данные </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/dictionary/ title=Dictionary class=md-nav__link> Dictionary </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/merge/ title=Merge class=md-nav__link> Merge </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/file/ title=File class=md-nav__link> File </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/null/ title=Null class=md-nav__link> Null </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/join/ title=Join class=md-nav__link> Join </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/url/ title=URL class=md-nav__link> URL </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/view/ title=View class=md-nav__link> View </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/materializedview/ title=MaterializedView class=md-nav__link> MaterializedView </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/memory/ title=Memory class=md-nav__link> Memory </a> </li> <li class=md-nav__item> <a href=../../operations/table_engines/buffer/ title=Buffer class=md-nav__link> Buffer </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Справка по SQL </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> Справка по SQL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../query_language/select/ title=SELECT class=md-nav__link> SELECT </a> </li> <li class=md-nav__item> <a href=../../query_language/insert_into/ title="INSERT INTO" class=md-nav__link> INSERT INTO </a> </li> <li class=md-nav__item> <a href=../../query_language/create/ title=CREATE class=md-nav__link> CREATE </a> </li> <li class=md-nav__item> <a href=../../query_language/alter/ title=ALTER class=md-nav__link> ALTER </a> </li> <li class=md-nav__item> <a href=../../query_language/system/ title=SYSTEM class=md-nav__link> SYSTEM </a> </li> <li class=md-nav__item> <a href=../../query_language/misc/ title="Прочие виды запросов" class=md-nav__link> Прочие виды запросов </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-8 type=checkbox id=nav-7-8> <label class=md-nav__link for=nav-7-8> Функции </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-8> Функции </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../query_language/functions/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/arithmetic_functions/ title="Арифметические функции" class=md-nav__link> Арифметические функции </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/comparison_functions/ title="Функции сравнения" class=md-nav__link> Функции сравнения </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/logical_functions/ title="Логические функции" class=md-nav__link> Логические функции </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/type_conversion_functions/ title="Функции преобразования типов" class=md-nav__link> Функции преобразования типов </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/date_time_functions/ title="Функции для работы с датами и временем" class=md-nav__link> Функции для работы с датами и временем </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/string_functions/ title="Функции для работы со строками" class=md-nav__link> Функции для работы со строками </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/string_search_functions/ title="Функции поиска в строках" class=md-nav__link> Функции поиска в строках </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/string_replace_functions/ title="Функции поиска и замены в строках" class=md-nav__link> Функции поиска и замены в строках </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/conditional_functions/ title="Условные функции" class=md-nav__link> Условные функции </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/math_functions/ title="Математические функции" class=md-nav__link> Математические функции </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/rounding_functions/ title="Функции округления" class=md-nav__link> Функции округления </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/array_functions/ title="Функции по работе с массивами" class=md-nav__link> Функции по работе с массивами </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/splitting_merging_functions/ title="Функции разбиения и слияния строк и массивов" class=md-nav__link> Функции разбиения и слияния строк и массивов </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/bit_functions/ title="Битовые функции" class=md-nav__link> Битовые функции </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/bitmap_functions/ title="Функции для битмапов" class=md-nav__link> Функции для битмапов </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/hash_functions/ title="Функции хэширования" class=md-nav__link> Функции хэширования </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/random_functions/ title="Функции генерации псевдослучайных чисел" class=md-nav__link> Функции генерации псевдослучайных чисел </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/uuid_functions/ title="Функции для работы с UUID" class=md-nav__link> Функции для работы с UUID </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/encoding_functions/ title="Функции кодирования" class=md-nav__link> Функции кодирования </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/url_functions/ title="Функции для работы с URL" class=md-nav__link> Функции для работы с URL </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/ip_address_functions/ title="Функции для работы с IP-адресами" class=md-nav__link> Функции для работы с IP-адресами </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/json_functions/ title="Функции для работы с JSON." class=md-nav__link> Функции для работы с JSON. </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/higher_order_functions/ title="Функции высшего порядка" class=md-nav__link> Функции высшего порядка </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/ext_dict_functions/ title="Функции для работы с внешними словарями" class=md-nav__link> Функции для работы с внешними словарями </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/ym_dict_functions/ title="Функции для работы со словарями Яндекс.Метрики" class=md-nav__link> Функции для работы со словарями Яндекс.Метрики </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/in_functions/ title="Функции для реализации оператора IN." class=md-nav__link> Функции для реализации оператора IN. </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/array_join/ title="Функция arrayJoin" class=md-nav__link> Функция arrayJoin </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/geo/ title="Функции для работы с географическими координатами" class=md-nav__link> Функции для работы с географическими координатами </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/functions_for_nulls/ title="Функции c Nullable агрументами" class=md-nav__link> Функции c Nullable агрументами </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/machine_learning_functions/ title="Функции машинного обучения" class=md-nav__link> Функции машинного обучения </a> </li> <li class=md-nav__item> <a href=../../query_language/functions/other_functions/ title="Прочие функции" class=md-nav__link> Прочие функции </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-9 type=checkbox id=nav-7-9> <label class=md-nav__link for=nav-7-9> Агрегатные функции </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-9> Агрегатные функции </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../query_language/agg_functions/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../query_language/agg_functions/reference/ title="Справочник функций" class=md-nav__link> Справочник функций </a> </li> <li class=md-nav__item> <a href=../../query_language/agg_functions/combinators/ title="Комбинаторы агрегатных функций" class=md-nav__link> Комбинаторы агрегатных функций </a> </li> <li class=md-nav__item> <a href=../../query_language/agg_functions/parametric_functions/ title="Параметрические агрегатные функции" class=md-nav__link> Параметрические агрегатные функции </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-10 type=checkbox id=nav-7-10> <label class=md-nav__link for=nav-7-10> Табличные функции </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-10> Табличные функции </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../query_language/table_functions/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/file/ title=file class=md-nav__link> file </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/merge/ title=merge class=md-nav__link> merge </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/numbers/ title=numbers class=md-nav__link> numbers </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/remote/ title=remote class=md-nav__link> remote </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/url/ title=url class=md-nav__link> url </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/mysql/ title=mysql class=md-nav__link> mysql </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/jdbc/ title=jdbc class=md-nav__link> jdbc </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/odbc/ title=odbc class=md-nav__link> odbc </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/hdfs/ title=hdfs class=md-nav__link> hdfs </a> </li> <li class=md-nav__item> <a href=../../query_language/table_functions/input/ title=input class=md-nav__link> input </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-11 type=checkbox id=nav-7-11> <label class=md-nav__link for=nav-7-11> Словари </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-11> Словари </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../query_language/dicts/ title=Введение class=md-nav__link> Введение </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-11-2 type=checkbox id=nav-7-11-2> <label class=md-nav__link for=nav-7-11-2> Внешние словари </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-11-2> Внешние словари </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../query_language/dicts/external_dicts/ title="Общее описание" class=md-nav__link> Общее описание </a> </li> <li class=md-nav__item> <a href=../../query_language/dicts/external_dicts_dict/ title="Настройка внешнего словаря" class=md-nav__link> Настройка внешнего словаря </a> </li> <li class=md-nav__item> <a href=../../query_language/dicts/external_dicts_dict_layout/ title="Хранение словарей в памяти" class=md-nav__link> Хранение словарей в памяти </a> </li> <li class=md-nav__item> <a href=../../query_language/dicts/external_dicts_dict_lifetime/ title="Обновление словарей" class=md-nav__link> Обновление словарей </a> </li> <li class=md-nav__item> <a href=../../query_language/dicts/external_dicts_dict_sources/ title="Источники внешних словарей" class=md-nav__link> Источники внешних словарей </a> </li> <li class=md-nav__item> <a href=../../query_language/dicts/external_dicts_dict_structure/ title="Ключ и поля словаря" class=md-nav__link> Ключ и поля словаря </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../query_language/dicts/internal_dicts/ title="Встроенные словари" class=md-nav__link> Встроенные словари </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../query_language/operators/ title=Операторы class=md-nav__link> Операторы </a> </li> <li class=md-nav__item> <a href=../../query_language/syntax/ title="Общий синтаксис" class=md-nav__link> Общий синтаксис </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Эксплуатация </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-8> Эксплуатация </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../operations/requirements/ title=Требования class=md-nav__link> Требования </a> </li> <li class=md-nav__item> <a href=../../operations/monitoring/ title=Мониторинг class=md-nav__link> Мониторинг </a> </li> <li class=md-nav__item> <a href=../../operations/troubleshooting/ title="Устранение неисправностей" class=md-nav__link> Устранение неисправностей </a> </li> <li class=md-nav__item> <a href=../../operations/tips/ title="Советы по эксплуатации" class=md-nav__link> Советы по эксплуатации </a> </li> <li class=md-nav__item> <a href=../../operations/update/ title="Обновление ClickHouse" class=md-nav__link> Обновление ClickHouse </a> </li> <li class=md-nav__item> <a href=../../operations/access_rights/ title="Права доступа" class=md-nav__link> Права доступа </a> </li> <li class=md-nav__item> <a href=../../operations/backup/ title="Резервное копирование" class=md-nav__link> Резервное копирование </a> </li> <li class=md-nav__item> <a href=../../operations/configuration_files/ title="Конфигурационные файлы" class=md-nav__link> Конфигурационные файлы </a> </li> <li class=md-nav__item> <a href=../../operations/quotas/ title=Квоты class=md-nav__link> Квоты </a> </li> <li class=md-nav__item> <a href=../../operations/system_tables/ title="Системные таблицы" class=md-nav__link> Системные таблицы </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-12 type=checkbox id=nav-8-12> <label class=md-nav__link for=nav-8-12> Конфигурационные параметры сервера </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-12> Конфигурационные параметры сервера </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/server_settings/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../operations/server_settings/settings/ title="Серверные настройки" class=md-nav__link> Серверные настройки </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-13 type=checkbox id=nav-8-13> <label class=md-nav__link for=nav-8-13> Настройки </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-13> Настройки </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/settings/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../operations/settings/permissions_for_queries/ title="Разрешения на выполнение запросов" class=md-nav__link> Разрешения на выполнение запросов </a> </li> <li class=md-nav__item> <a href=../../operations/settings/query_complexity/ title="Ограничения на сложность запроса" class=md-nav__link> Ограничения на сложность запроса </a> </li> <li class=md-nav__item> <a href=../../operations/settings/settings/ title=Настройки class=md-nav__link> Настройки </a> </li> <li class=md-nav__item> <a href=../../operations/settings/constraints_on_settings/ title="Ограничения на изменение настроек" class=md-nav__link> Ограничения на изменение настроек </a> </li> <li class=md-nav__item> <a href=../../operations/settings/settings_profiles/ title="Профили настроек" class=md-nav__link> Профили настроек </a> </li> <li class=md-nav__item> <a href=../../operations/settings/settings_users/ title="Настройки пользователей" class=md-nav__link> Настройки пользователей </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-14 type=checkbox id=nav-8-14> <label class=md-nav__link for=nav-8-14> Утилиты </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-14> Утилиты </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../operations/utils/ title=Введение class=md-nav__link> Введение </a> </li> <li class=md-nav__item> <a href=../../operations/utils/clickhouse-copier/ title=clickhouse-copier class=md-nav__link> clickhouse-copier </a> </li> <li class=md-nav__item> <a href=../../operations/utils/clickhouse-local/ title=clickhouse-local class=md-nav__link> clickhouse-local </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> F.A.Q. </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-9> F.A.Q. </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../faq/general/ title="Общие вопросы" class=md-nav__link> Общие вопросы </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class=md-nav__link for=nav-10> Разработка </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-10> Разработка </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/architecture/ title="Обзор архитектуры ClickHouse" class=md-nav__link> Обзор архитектуры ClickHouse </a> </li> <li class=md-nav__item> <a href=../../development/build/ title="Как собрать ClickHouse на Linux" class=md-nav__link> Как собрать ClickHouse на Linux </a> </li> <li class=md-nav__item> <a href=../../development/build_osx/ title="Как собрать ClickHouse на Mac OS X" class=md-nav__link> Как собрать ClickHouse на Mac OS X </a> </li> <li class=md-nav__item> <a href=../../development/style/ title="Как писать код на C++" class=md-nav__link> Как писать код на C++ </a> </li> <li class=md-nav__item> <a href=../../development/tests/ title="Как запустить тесты" class=md-nav__link> Как запустить тесты </a> </li> <li class=md-nav__item> <a href=../../development/contrib/ title="Сторонние библиотеки" class=md-nav__link> Сторонние библиотеки </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-11 type=checkbox id=nav-11> <label class=md-nav__link for=nav-11> Что нового </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-11> Что нового </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../changelog/ title=Changelog class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../security_changelog/ title="Security changelog" class=md-nav__link> Security changelog </a> </li> <li class=md-nav__item> <a href=../../roadmap/ title=Roadmap class=md-nav__link> Roadmap </a> </li> </ul> </nav> </li> </ul> <ul id=md-extra-nav class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> Релиз: <span class=md-selector> <select id=releases-selector> <option value>последний</option> <option value=v20.1>v20.1</option> <option value=v19.17>v19.17</option> <option value=v19.16>v19.16</option> <option value=v19.15 selected=selected>v19.15</option> <option value=v19.14>v19.14</option> <option value=v19.13>v19.13</option> <option value=v19.11>v19.11</option> <option value=v19.10>v19.10</option> <option value=v19.9>v19.9</option> <option value=v19.8>v19.8</option> <option value=v19.7>v19.7</option> </select><span id=releases-selector-after>&nbsp;▾</span> </span> </li> <li class="md-nav__item md-nav__item--active"> <a href=../../single/ class="md-nav__link md-nav__link--active">Одностраничная версия</a> </li> <li class="md-nav__item md-nav__item--active"> <a href=../../single/clickhouse_ru.pdf class="md-nav__link md-nav__link--active">PDF версия</a> </li> <li class="md-nav__item md-nav__item--active"> <a href=https://github.com/ClickHouse/ClickHouse/ rel="external nofollow" target=_blank class=md-nav__link> Исходный код ClickHouse </a> </li> <li class="md-nav__item md-nav__item--active"> <span id=md-sidebar-flags class=md-nav__link> <a class=md-alt-lang href=../../../en/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=English> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 60 30" preserveaspectratio=none> <clippath id=t> <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/> </clippath> <path fill=#00247d d="M0,0 v30 h60 v-30 z"/> <path stroke=#fff stroke-width=6 d="M0,0 L60,30 M60,0 L0,30"/> <path clip-path=url(#t) stroke=#cf142b stroke-width=4 d="M0,0 L60,30 M60,0 L0,30"/> <path stroke=#fff stroke-width=10 d="M30,0 v30 M0,15 h60"/> <path stroke=#cf142b stroke-width=6 d="M30,0 v30 M0,15 h60"/> </svg> </a> <a class="md-alt-lang md-current-lang" href=../../../ru/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Russian> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 9 6" preserveaspectratio=none> <rect fill=#fff width=9 height=3 /> <rect fill=#d52b1e y=3 width=9 height=3 /> <rect fill=#0039a6 y=2 width=9 height=2 /> </svg> </a> <a class=md-alt-lang href=../../../zh/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Chinese> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 30 20" preserveaspectratio=none> <defs> <path id=s fill=#ffde00 d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/> </defs> <rect width=30 height=20 fill=#de2910 /> <use xlink:href=#s transform="translate(5,5) scale(3)"/> <use xlink:href=#s transform="translate(10,2) rotate(23.036243)"/> <use xlink:href=#s transform="translate(12,4) rotate(45.869898)"/> <use xlink:href=#s transform="translate(12,7) rotate(69.945396)"/> <use xlink:href=#s transform="translate(10,9) rotate(20.659808)"/> </svg> </a> <a class=md-alt-lang href=../../../ja/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Japanese> <?xml version="1.0" encoding="UTF-8"?> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink width=90px height=60px viewbox="0 0 90 60" version=1.1> <g id=surface1> <rect x=0 y=0 width=90 height=60 style=fill:rgb(62.7451%,62.7451%,62.7451%);fill-opacity:1;stroke:none; /> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562 "/> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(74.509805%,0%,14.901961%);fill-opacity:1;" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30 "/> </g> </svg> </a> <a class=md-alt-lang href=../../../fa/interfaces/formats/ class="md-flex__ellipsis md-header-nav__title" title=Farsi> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 630 360" preserveaspectratio=none> <rect width=630 height=360 fill=#da0000 /> <rect width=630 height=240 fill=#fff /> <rect width=630 height=120 fill=#239f40 /> <g transform=translate(8.4,100.4)> <g id=tb4> <g id=tb1 fill=none stroke=#fff stroke-width=2> <path id=tbp1 d=M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9 transform=scale(1.4) /> <path id=tbp2 d=M0,7H9M10,7H19 transform=scale(2.8) /> <use xlink:href=#tbp2 y=120 /> <use xlink:href=#tbp1 y=145.2 /> </g> <g id=tb3> <use xlink:href=#tb1 x=56 /> <use xlink:href=#tb1 x=112 /> <use xlink:href=#tb1 x=168 /> </g> </g> <use xlink:href=#tb3 x=168 /> <use xlink:href=#tb4 x=392 /> </g> <g fill=#da0000 transform=matrix(45,0,0,45,315,180)> <g id=emblem_half> <path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/> <path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/> <path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/> <path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/> </g> <use xlink:href=#emblem_half transform=scale(-1,1) /> </g> </svg> </a> </span> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=toc>Содержание</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#tabseparated title=TabSeparated class=md-nav__link> TabSeparated </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#formatirovanie-dannykh title="Форматирование данных" class=md-nav__link> Форматирование данных </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tabseparatedraw title=TabSeparatedRaw class=md-nav__link> TabSeparatedRaw </a> </li> <li class=md-nav__item> <a href=#tabseparatedwithnames title=TabSeparatedWithNames class=md-nav__link> TabSeparatedWithNames </a> </li> <li class=md-nav__item> <a href=#tabseparatedwithnamesandtypes title=TabSeparatedWithNamesAndTypes class=md-nav__link> TabSeparatedWithNamesAndTypes </a> </li> <li class=md-nav__item> <a href=#format-template title=Template class=md-nav__link> Template </a> </li> <li class=md-nav__item> <a href=#templateignorespaces title=TemplateIgnoreSpaces class=md-nav__link> TemplateIgnoreSpaces </a> </li> <li class=md-nav__item> <a href=#tskv title=TSKV class=md-nav__link> TSKV </a> </li> <li class=md-nav__item> <a href=#csv title=CSV class=md-nav__link> CSV </a> </li> <li class=md-nav__item> <a href=#csvwithnames title=CSVWithNames class=md-nav__link> CSVWithNames </a> </li> <li class=md-nav__item> <a href=#json title=JSON class=md-nav__link> JSON </a> </li> <li class=md-nav__item> <a href=#jsoncompact title=JSONCompact class=md-nav__link> JSONCompact </a> </li> <li class=md-nav__item> <a href=#jsoneachrow title=JSONEachRow class=md-nav__link> JSONEachRow </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vstavka-dannykh title="Вставка данных" class=md-nav__link> Вставка данных </a> </li> <li class=md-nav__item> <a href=#vyborka-dannykh title="Выборка данных" class=md-nav__link> Выборка данных </a> </li> <li class=md-nav__item> <a href=#jsoneachrow-nested title="Использование вложенных структур" class=md-nav__link> Использование вложенных структур </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#native title=Native class=md-nav__link> Native </a> </li> <li class=md-nav__item> <a href=#null title=Null class=md-nav__link> Null </a> </li> <li class=md-nav__item> <a href=#pretty title=Pretty class=md-nav__link> Pretty </a> </li> <li class=md-nav__item> <a href=#prettycompact title=PrettyCompact class=md-nav__link> PrettyCompact </a> </li> <li class=md-nav__item> <a href=#prettycompactmonoblock title=PrettyCompactMonoBlock class=md-nav__link> PrettyCompactMonoBlock </a> </li> <li class=md-nav__item> <a href=#prettynoescapes title=PrettyNoEscapes class=md-nav__link> PrettyNoEscapes </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prettycompactnoescapes title=PrettyCompactNoEscapes class=md-nav__link> PrettyCompactNoEscapes </a> </li> <li class=md-nav__item> <a href=#prettyspacenoescapes title=PrettySpaceNoEscapes class=md-nav__link> PrettySpaceNoEscapes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prettyspace title=PrettySpace class=md-nav__link> PrettySpace </a> </li> <li class=md-nav__item> <a href=#rowbinary title=RowBinary class=md-nav__link> RowBinary </a> </li> <li class=md-nav__item> <a href=#rowbinarywithnamesandtypes title=RowBinaryWithNamesAndTypes class=md-nav__link> RowBinaryWithNamesAndTypes </a> </li> <li class=md-nav__item> <a href=#data-format-values title=Values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#vertical title=Vertical class=md-nav__link> Vertical </a> </li> <li class=md-nav__item> <a href=#xml title=XML class=md-nav__link> XML </a> </li> <li class=md-nav__item> <a href=#capnproto title=CapnProto class=md-nav__link> CapnProto </a> </li> <li class=md-nav__item> <a href=#protobuf title=Protobuf class=md-nav__link> Protobuf </a> </li> <li class=md-nav__item> <a href=#data-format-parquet title=Parquet class=md-nav__link> Parquet </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sootvetstvie-tipov-dannykh title="Соответствие типов данных" class=md-nav__link> Соответствие типов данных </a> </li> <li class=md-nav__item> <a href=#inserting-and-selecting-data title="Inserting and Selecting Data" class=md-nav__link> Inserting and Selecting Data </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#formatschema title="Схема формата" class=md-nav__link> Схема формата </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/interfaces/formats.md title="Редактировать страницу" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a> <div id=content> <h1 id=formats>Форматы входных и выходных данных<a class=headerlink href=#formats title="Permanent link">&para;</a></h1> <p>ClickHouse может принимать (<code>INSERT</code>) и отдавать (<code>SELECT</code>) данные в различных форматах.</p> <p>Поддерживаемые форматы и возможность использовать их в запросах <code>INSERT</code> и <code>SELECT</code> перечислены в таблице ниже.</p> <table> <thead> <tr> <th>Формат</th> <th>INSERT</th> <th>SELECT</th> </tr> </thead> <tbody> <tr> <td><a href=#tabseparated>TabSeparated</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedraw>TabSeparatedRaw</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnames>TabSeparatedWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#format-template>Template</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#templateignorespaces>TemplateIgnoreSpaces</a></td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=#csv>CSV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#csvwithnames>CSVWithNames</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-values>Values</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#vertical>Vertical</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#json>JSON</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoncompact>JSONCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#jsoneachrow>JSONEachRow</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#tskv>TSKV</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#pretty>Pretty</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompact>PrettyCompact</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettycompactmonoblock>PrettyCompactMonoBlock</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettynoescapes>PrettyNoEscapes</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#prettyspace>PrettySpace</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#protobuf>Protobuf</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#data-format-parquet>Parquet</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#rowbinary>RowBinary</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#native>Native</a></td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=#null>Null</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#xml>XML</a></td> <td>✗</td> <td>✔</td> </tr> <tr> <td><a href=#capnproto>CapnProto</a></td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>Вы можете регулировать некоторые параметры работы с форматами с помощью настроек ClickHouse. За дополнительной информацией обращайтесь к разделу <a href=../../operations/settings/settings/ >Настройки</a>.</p> <h2 id=tabseparated>TabSeparated<a class=headerlink href=#tabseparated title="Permanent link">&para;</a></h2> <p>В TabSeparated формате данные пишутся по строкам. Каждая строчка содержит значения, разделённые табами. После каждого значения идёт таб, кроме последнего значения в строке, после которого идёт перевод строки. Везде подразумеваются исключительно unix-переводы строк. Последняя строка также обязана содержать перевод строки на конце. Значения пишутся в текстовом виде, без обрамляющих кавычек, с экранированием служебных символов.</p> <p>Этот формат также доступен под именем <code>TSV</code>.</p> <p>Формат <code>TabSeparated</code> удобен для обработки данных произвольными программами и скриптами. Он используется по умолчанию в HTTP-интерфейсе, а также в batch-режиме клиента командной строки. Также формат позволяет переносить данные между разными СУБД. Например, вы можете получить дамп из MySQL и загрузить его в ClickHouse, или наоборот.</p> <p>Формат <code>TabSeparated</code> поддерживает вывод тотальных значений (при использовании WITH TOTALS) и экстремальных значений (при настройке extremes выставленной в 1). В этих случаях, после основных данных выводятся тотальные значения, и экстремальные значения. Основной результат, тотальные значения и экстремальные значения, отделяются друг от друга пустой строкой. Пример:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>TabSeparated</span><span class=o>``</span>
</pre></div> <div class=codehilite><pre><span></span>2014-03-17      1406958
2014-03-18      1383658
2014-03-19      1405797
2014-03-20      1353623
2014-03-21      1245779
2014-03-22      1031592
2014-03-23      1046491

0000-00-00      8873898

2014-03-17      1031592
2014-03-23      1406958
</pre></div> <h3 id=formatirovanie-dannykh>Форматирование данных<a class=headerlink href=#formatirovanie-dannykh title="Permanent link">&para;</a></h3> <p>Целые числа пишутся в десятичной форме. Числа могут содержать лишний символ "+" в начале (игнорируется при парсинге, а при форматировании не пишется). Неотрицательные числа не могут содержать знак отрицания. При чтении допустим парсинг пустой строки, как числа ноль, или (для знаковых типов) строки, состоящей из одного минуса, как числа ноль. Числа, не помещающиеся в соответствующий тип данных, могут парсится, как некоторое другое число, без сообщения об ошибке.</p> <p>Числа с плавающей запятой пишутся в десятичной форме. При этом, десятичный разделитель - точка. Поддерживается экспоненциальная запись, а также inf, +inf, -inf, nan. Запись числа с плавающей запятой может начинаться или заканчиваться на десятичную точку. При форматировании возможна потеря точности чисел с плавающей запятой. При парсинге, допустимо чтение не обязательно наиболее близкого к десятичной записи машинно-представимого числа.</p> <p>Даты выводятся в формате YYYY-MM-DD, парсятся в том же формате, но с любыми символами в качестве разделителей. Даты-с-временем выводятся в формате YYYY-MM-DD hh:mm:ss, парсятся в том же формате, но с любыми символами в качестве разделителей. Всё это происходит в системном часовом поясе на момент старта клиента (если клиент занимается форматированием данных) или сервера. Для дат-с-временем не указывается, действует ли daylight saving time. То есть, если в дампе есть времена во время перевода стрелок назад, то дамп не соответствует данным однозначно, и при парсинге будет выбрано какое-либо из двух времён. При парсинге, некорректные даты и даты-с-временем могут парситься с естественным переполнением или как нулевые даты/даты-с-временем без сообщения об ошибке.</p> <p>В качестве исключения, поддерживается также парсинг даты-с-временем в формате unix timestamp, если он состоит ровно из 10 десятичных цифр. Результат не зависит от часового пояса. Различение форматов YYYY-MM-DD hh:mm:ss и NNNNNNNNNN делается автоматически.</p> <p>Строки выводятся с экранированием спецсимволов с помощью обратного слеша. При выводе, используются следующие escape-последовательности: <code>\b</code>, <code>\f</code>, <code>\r</code>, <code>\n</code>, <code>\t</code>, <code>\0</code>, <code>\'</code>, <code>\\</code>. Парсер также поддерживает последовательности <code>\a</code>, <code>\v</code>, и <code>\xHH</code> (последовательности hex escape) и любые последовательности вида <code>\c</code>, где <code>c</code> — любой символ (такие последовательности преобразуются в <code>c</code>). Таким образом, при чтении поддерживаются форматы, где перевод строки может быть записан как <code>\n</code> и как <code>\</code> и перевод строки. Например, строка <code>Hello world</code>, где между словами вместо пробела стоит перевод строки, может быть считана в любом из следующих вариантов:</p> <div class=codehilite><pre><span></span>Hello\nworld

Hello\
world
</pre></div> <p>Второй вариант поддерживается, так как его использует MySQL при записи tab-separated дампа.</p> <p>Минимальный набор символов, которых вам необходимо экранировать при передаче в TabSeparated формате: таб, перевод строки (LF) и обратный слеш.</p> <p>Экранируется лишь небольшой набор символов. Вы можете легко наткнуться на строковое значение, которое испортит ваш терминал при выводе в него.</p> <p>Массивы форматируются в виде списка значений через запятую в квадратных скобках. Элементы массива - числа форматируются как обычно, а даты, даты-с-временем и строки - в одинарных кавычках с такими же правилами экранирования, как указано выше.</p> <p><a href=../../query_language/syntax/ >NULL</a> форматируется как <code>\N</code>.</p> <h2 id=tabseparatedraw>TabSeparatedRaw<a class=headerlink href=#tabseparatedraw title="Permanent link">&para;</a></h2> <p>Отличается от формата <code>TabSeparated</code> тем, что строки выводятся без экранирования. Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <p>Этот формат также доступен под именем <code>TSVRaw</code>.</p> <h2 id=tabseparatedwithnames>TabSeparatedWithNames<a class=headerlink href=#tabseparatedwithnames title="Permanent link">&para;</a></h2> <p>Отличается от формата <code>TabSeparated</code> тем, что в первой строке пишутся имена столбцов. При парсинге, первая строка полностью игнорируется. Вы не можете использовать имена столбцов, чтобы указать их порядок расположения, или чтобы проверить их корректность. (Поддержка обработки заголовка при парсинге может быть добавлена в будущем.)</p> <p>Этот формат также доступен под именем <code>TSVWithNames</code>.</p> <h2 id=tabseparatedwithnamesandtypes>TabSeparatedWithNamesAndTypes<a class=headerlink href=#tabseparatedwithnamesandtypes title="Permanent link">&para;</a></h2> <p>Отличается от формата <code>TabSeparated</code> тем, что в первой строке пишутся имена столбцов, а во второй - типы столбцов. При парсинге, первая и вторая строка полностью игнорируется.</p> <p>Этот формат также доступен под именем <code>TSVWithNamesAndTypes</code>.</p> <h2 id=format-template>Template<a class=headerlink href=#format-template title="Permanent link">&para;</a></h2> <p>Этот формат позволяет указать произвольную форматную строку, в которую подставляются значения, сериализованные выбранным способом.</p> <p>Для этого используются настройки <code>format_schema</code>, <code>format_schema_rows</code>, <code>format_schema_rows_between_delimiter</code> и настройки экранирования других форматов (например, <code>output_format_json_quote_64bit_integers</code> при экранировании как в <code>JSON</code>, см. далее)</p> <p>Форматная строка <code>format_schema_rows</code> задаёт формат для строк таблицы и должна иметь вид:</p> <p><code>delimiter_1${column_1:serializeAs_1}delimiter_2${column_2:serializeAs_2} ... delimiter_N</code>,</p> <p>где <code>delimiter_i</code> - разделители между значениями (символ <code>$</code> в разделителе экранируется как <code>$$</code>), <code>column_i</code> - имена столбцов, значения которых должны быть выведены или считаны (если имя не указано - столбец пропускается), <code>serializeAs_i</code> - тип экранирования для значений соответствующего столбца. Поддерживаются следующие типы экранирования:</p> <ul> <li><code>CSV</code>, <code>JSON</code>, <code>XML</code> (как в одноимённых форматах)</li> <li><code>Escaped</code> (как в <code>TSV</code>)</li> <li><code>Quoted</code> (как в <code>Values</code>)</li> <li><code>Raw</code> (без экранирования, как в <code>TSVRaw</code>)</li> <li><code>None</code> (тип экранирования отсутствует, см. далее)</li> </ul> <p>Если для столбца не указан тип экранирования, используется <code>None</code>. <code>XML</code> и <code>Raw</code> поддерживаются только для вывода. </p> <p>Так, в форматной строке </p> <p><code>Search phrase: ${SearchPhrase:Quoted}, count: ${c:Escaped}, ad price: $$${price:JSON};</code></p> <p>между разделителями <code>Search phrase:</code>, <code>, count:</code>, <code>, ad price: $</code> и <code>;</code> при выводе будут подставлены (при вводе - будут ожидаться) значения столбцов <code>SearchPhrase</code>, <code>c</code> и <code>price</code>, сериализованные как <code>Quoted</code>, <code>Escaped</code> и <code>JSON</code> соответственно, например:</p> <p><code>Search phrase: 'bathroom interior design', count: 2166, ad price: $3;</code></p> <p>Настройка <code>format_schema_rows_between_delimiter</code> задаёт разделитель между строками, который выводится (или ожмдается при вводе) после каждой строки, кроме последней. По умолчанию <code>\n</code>.</p> <p>Форматная строка <code>format_schema</code> имеет аналогичный <code>format_schema_rows</code> синтаксис и позволяет указать префикс, суффикс и способ вывода дополнительной информации. Вместо имён столбцов в ней указываются следующие имена подстановок:</p> <ul> <li><code>data</code> - строки с данными в формате <code>format_schema_rows</code>, разделённые <code>format_schema_rows_between_delimiter</code>. Эта подстановка должна быть первой подстановкой в форматной строке.</li> <li><code>totals</code> - строка с тотальными значениями в формате <code>format_schema_rows</code> (при использовании WITH TOTALS)</li> <li><code>min</code> - строка с минимальными значениями в формате <code>format_schema_rows</code> (при настройке extremes, выставленной в 1)</li> <li><code>max</code> - строка с максимальными значениями в формате <code>format_schema_rows</code> (при настройке extremes, выставленной в 1)</li> <li><code>rows</code> - общее количество выведенных стрчек</li> <li><code>rows_before_limit</code> - не менее скольких строчек получилось бы, если бы не было LIMIT-а. Выводится только если запрос содержит LIMIT. В случае, если запрос содержит GROUP BY, <code>rows_before_limit</code> - точное число строк, которое получилось бы, если бы не было LIMIT-а.</li> <li><code>time</code> - время выполнения запроса в секундах</li> <li><code>rows_read</code> - сколько строк было прочитано при выполнении запроса</li> <li><code>bytes_read</code> - сколько байт (несжатых) было прочитано при выполнении запроса</li> </ul> <p>У подстановок <code>data</code>, <code>totals</code>, <code>min</code> и <code>max</code> не должны быть указаны типы экранирования (или должен быть указан <code>None</code>). Остальные подстановки - это отдельные значения, для них может быть указан любой тип экранирования. Если строка <code>format_schema</code> пустая, то по-умолчанию используется <code>${data}</code>. Из всех перечисленных подстановок форматная строка <code>format_schema</code> для ввода может содержать только <code>data</code>. Также при вводе формат поддерживает пропуск значений столбцов и пропуск значений в префиксе и суффиксе (см. пример).</p> <p>Пример вывода:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span>
<span class=n>FORMAT</span> <span class=k>Template</span> 
<span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;&lt;!DOCTYPE HTML&gt;</span>
<span class=s1>&lt;html&gt; &lt;head&gt; &lt;title&gt;Search phrases&lt;/title&gt; &lt;/head&gt;</span>
<span class=s1> &lt;body&gt;</span>
<span class=s1>  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Search phrases&lt;/caption&gt;</span>
<span class=s1>    &lt;tr&gt; &lt;th&gt;Search phrase&lt;/th&gt; &lt;th&gt;Count&lt;/th&gt; &lt;/tr&gt;</span>
<span class=s1>    ${data}</span>
<span class=s1>  &lt;/table&gt;</span>
<span class=s1>  &lt;table border=&quot;1&quot;&gt; &lt;caption&gt;Max&lt;/caption&gt;</span>
<span class=s1>    ${max}</span>
<span class=s1>  &lt;/table&gt;</span>
<span class=s1>  &lt;b&gt;Processed ${rows_read:XML} rows in ${time:XML} sec&lt;/b&gt;</span>
<span class=s1> &lt;/body&gt;</span>
<span class=s1>&lt;/html&gt;&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;&lt;tr&gt; &lt;td&gt;${SearchPhrase:XML}&lt;/td&gt; &lt;td&gt;${с:XML}&lt;/td&gt; &lt;/tr&gt;&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;\n    &#39;</span>
</pre></div> <div class=codehilite><pre><span></span><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
 <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Search phrases<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Search phrase<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>th</span><span class=p>&gt;</span>Count<span class=p>&lt;/</span><span class=nt>th</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8267016<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>bathroom interior design<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>2166<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>yandex<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1655<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>spring 2014 fashion<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1549<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>freeform photos<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>1480<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>table</span> <span class=na>border</span><span class=o>=</span><span class=s>&quot;1&quot;</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>caption</span><span class=p>&gt;</span>Max<span class=p>&lt;/</span><span class=nt>caption</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>tr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span>8873898<span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>tr</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>table</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>b</span><span class=p>&gt;</span>Processed 3095973 rows in 0.1569913 sec<span class=p>&lt;/</span><span class=nt>b</span><span class=p>&gt;</span>
 <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</pre></div> <p>Пример ввода:</p> <div class=codehilite><pre><span></span>Some header
Page views: 5, User id: 4324182021466249494, Useless field: hello, Duration: 146, Sign: -1
Page views: 6, User id: 4324182021466249494, Useless field: world, Duration: 185, Sign: 1
Total rows: 2
</pre></div> <div class=codehilite><pre><span></span><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>UserActivity</span> <span class=n>FORMAT</span> <span class=k>Template</span> <span class=n>SETTINGS</span> 
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;Some header\n${data}\nTotal rows: ${:CSV}\n&#39;</span><span class=p>,</span> 
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;Page views: ${PageViews:CSV}, User id: ${UserID:CSV}, Useless field: ${:CSV}, Duration: ${Duration:CSV}, Sign: ${Sign:CSV}&#39;</span>
</pre></div> <p><code>PageViews</code>, <code>UserID</code>, <code>Duration</code> и <code>Sign</code> внутри подстановок - имена столбцов в таблице, в которую вставляются данные. Значения после <code>Useless field</code> в строках и значение после <code>\nTotal rows:</code> в суффиксе будут проигнорированы. Все разделители во входных данных должны строго соответствовать разделителям в форматных строках.</p> <h2 id=templateignorespaces>TemplateIgnoreSpaces<a class=headerlink href=#templateignorespaces title="Permanent link">&para;</a></h2> <p>Подходит только для ввода. Отличается от формата <code>Template</code> тем, что пропускает пробельные символы между разделителями и значениями во входном потоке. Также в этом формате можно указать пустые подстановки с типом экранирования <code>None</code> (<code>${}</code> или <code>${:None}</code>), чтобы разбить разделители на несколько частей, пробелы между которыми должны игнорироваться. Такие подстановки используются только для пропуска пробелов. С помощью этого формата можно считывать <code>JSON</code>, если значения столбцов в нём всегда идут в одном порядке в каждой строке. Например, для вставки данных из примера вывода формата <a href=#json>JSON</a> в таблицу со столбцами <code>phrase</code> и <code>cnt</code> можно использовать следующий запрос:</p> <div class=codehilite><pre><span></span><span class=k>INSERT</span> <span class=k>INTO</span> <span class=k>table_name</span> <span class=n>FORMAT</span> <span class=n>TemplateIgnoreSpaces</span> <span class=n>SETTINGS</span>
<span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;meta&quot;${}:${:JSON},${}&quot;data&quot;${}:${}[${data}]${},${}&quot;totals&quot;${}:${:JSON},${}&quot;extremes&quot;${}:${:JSON},${}&quot;rows&quot;${}:${:JSON},${}&quot;rows_before_limit_at_least&quot;${}:${:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows</span> <span class=o>=</span> <span class=s1>&#39;{${}&quot;SearchPhrase&quot;${}:${}${phrase:JSON}${},${}&quot;c&quot;${}:${}${cnt:JSON}${}}&#39;</span><span class=p>,</span>
<span class=n>format_schema_rows_between_delimiter</span> <span class=o>=</span> <span class=s1>&#39;,&#39;</span>
</pre></div> <h2 id=tskv>TSKV<a class=headerlink href=#tskv title="Permanent link">&para;</a></h2> <p>Похож на TabSeparated, но выводит значения в формате name=value. Имена экранируются так же, как строки в формате TabSeparated и, дополнительно, экранируется также символ =.</p> <div class=codehilite><pre><span></span>SearchPhrase=   count()=8267016
SearchPhrase=интерьер ванной комнаты    count()=2166
SearchPhrase=яндекс     count()=1655
SearchPhrase=весна 2014 мода    count()=1549
SearchPhrase=фриформ фото       count()=1480
SearchPhrase=анджелина джоли    count()=1245
SearchPhrase=омск       count()=1112
SearchPhrase=фото собак разных пород    count()=1091
SearchPhrase=дизайн штор        count()=1064
SearchPhrase=баку       count()=1000
</pre></div> <p><a href=../../query_language/syntax/ >NULL</a> форматируется как <code>\N</code>.</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>TSKV</span>
</pre></div> <div class=codehilite><pre><span></span>x=1 y=\N
</pre></div> <p>При большом количестве маленьких столбцов, этот формат существенно неэффективен, и обычно нет причин его использовать. Впрочем, он не хуже формата JSONEachRow по производительности.</p> <p>Поддерживается как вывод, так и парсинг данных в этом формате. При парсинге, поддерживается расположение значений разных столбцов в произвольном порядке. Допустимо отсутствие некоторых значений - тогда они воспринимаются как равные значениям по умолчанию. В этом случае в качестве значений по умолчанию используются нули и пустые строки. Сложные значения, которые могут быть заданы в таблице не поддерживаются как значения по умолчанию.</p> <p>При парсинге, в качестве дополнительного поля, может присутствовать <code>tskv</code> без знака равенства и без значения. Это поле игнорируется.</p> <h2 id=csv>CSV<a class=headerlink href=#csv title="Permanent link">&para;</a></h2> <p>Формат Comma Separated Values (<a href=https://tools.ietf.org/html/rfc4180 rel="external nofollow">RFC</a>).</p> <p>При форматировании, строки выводятся в двойных кавычках. Двойная кавычка внутри строки выводится как две двойные кавычки подряд. Других правил экранирования нет. Даты и даты-с-временем выводятся в двойных кавычках. Числа выводятся без кавычек. Значения разделяются символом-разделителем, по умолчанию — <code>,</code>. Символ-разделитель определяется настройкой <a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a>. Строки разделяются unix переводом строки (LF). Массивы сериализуются в CSV следующим образом: сначала массив сериализуется в строку, как в формате TabSeparated, а затем полученная строка выводится в CSV в двойных кавычках. Кортежи в формате CSV сериализуются, как отдельные столбцы (то есть, теряется их вложенность в кортеж).</p> <div class=codehilite><pre><span></span>$ clickhouse-client --format_csv_delimiter<span class=o>=</span><span class=s2>&quot;|&quot;</span> --query<span class=o>=</span><span class=s2>&quot;INSERT INTO test.csv FORMAT CSV&quot;</span> &lt; data.csv
</pre></div> <p>&ast;По умолчанию — <code>,</code>. См. настройку <a href=../../operations/settings/settings/#settings-format_csv_delimiter>format_csv_delimiter</a> для дополнительной информации.</p> <p>При парсинге, все значения могут парситься как в кавычках, так и без кавычек. Поддерживаются как двойные, так и одинарные кавычки. Строки также могут быть без кавычек. В этом случае они парсятся до символа-разделителя или перевода строки (CR или LF). В нарушение RFC, в случае парсинга строк не в кавычках, начальные и конечные пробелы и табы игнорируются. В качестве перевода строки, поддерживаются как Unix (LF), так и Windows (CR LF) и Mac OS Classic (LF CR) варианты.</p> <p><code>NULL</code> форматируется в виде <code>\N</code> или <code>NULL</code> или пустой неэкранированной строки (см. настройки <a href=../../operations/settings/settings/#settings-input_format_csv_unquoted_null_literal_as_null>input_format_csv_unquoted_null_literal_as_null</a> и <a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>).</p> <p>Если установлена настройка <a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields = 1</a> и тип столбца не <code>Nullable(T)</code>, то пустые значения без кавычек заменяются значениями по умолчанию для типа данных столбца.</p> <p>Формат CSV поддерживает вывод totals и extremes аналогично <code>TabSeparated</code>.</p> <h2 id=csvwithnames>CSVWithNames<a class=headerlink href=#csvwithnames title="Permanent link">&para;</a></h2> <p>Выводит также заголовок, аналогично <code>TabSeparatedWithNames</code>.</p> <h2 id=json>JSON<a class=headerlink href=#json title="Permanent link">&para;</a></h2> <p>Выводит данные в формате JSON. Кроме таблицы с данными, также выводятся имена и типы столбцов, и некоторая дополнительная информация - общее количество выведенных строк, а также количество строк, которое могло бы быть выведено, если бы не было LIMIT-а. Пример:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>SearchPhrase</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>SearchPhrase</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=k>c</span> <span class=k>DESC</span> <span class=k>LIMIT</span> <span class=mi>5</span> <span class=n>FORMAT</span> <span class=n>JSON</span>
</pre></div> <div class=codehilite><pre><span></span><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;bathroom interior design&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;2166&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;yandex&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1655&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;spring 2014 fashion&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1549&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;freeform photos&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8873898&quot;</span>
        <span class=p>},</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;1480&quot;</span>
                <span class=p>},</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span>
                <span class=p>{</span>
                        <span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;c&quot;</span><span class=p>:</span> <span class=s2>&quot;8267016&quot;</span>
                <span class=p>}</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</pre></div> <p>JSON совместим с JavaScript. Для этого, дополнительно экранируются некоторые символы: символ прямого слеша <code>/</code> экранируется в виде <code>\/</code>; альтернативные переводы строк <code>U+2028</code>, <code>U+2029</code>, на которых ломаются некоторые браузеры, экранируются в виде <code>\uXXXX</code>-последовательностей. Экранируются ASCII control characters: backspace, form feed, line feed, carriage return, horizontal tab в виде <code>\b</code>, <code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code> соответственно, а также остальные байты из диапазона 00-1F с помощью <code>\uXXXX</code>-последовательностей. Невалидные UTF-8 последовательности заменяются на replacement character � и, таким образом, выводимый текст будет состоять из валидных UTF-8 последовательностей. Числа типа UInt64 и Int64, для совместимости с JavaScript, по умолчанию выводятся в двойных кавычках. Чтобы они выводились без кавычек, можно установить конфигурационный параметр <a href=../../operations/settings/settings/#session_settings-output_format_json_quote_64bit_integers>output_format_json_quote_64bit_integers</a> равным 0.</p> <p><code>rows</code> - общее количество выведенных строчек.</p> <p><code>rows_before_limit_at_least</code> - не менее скольких строчек получилось бы, если бы не было LIMIT-а. Выводится только если запрос содержит LIMIT. В случае, если запрос содержит GROUP BY, rows_before_limit_at_least - точное число строк, которое получилось бы, если бы не было LIMIT-а.</p> <p><code>totals</code> - тотальные значения (при использовании WITH TOTALS).</p> <p><code>extremes</code> - экстремальные значения (при настройке extremes, выставленной в 1).</p> <p>Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <p>ClickHouse поддерживает <a href=../../query_language/syntax/ >NULL</a>, который при выводе JSON будет отображен как <code>null</code>.</p> <p>Смотрите также формат <a href=#jsoneachrow>JSONEachRow</a> .</p> <h2 id=jsoncompact>JSONCompact<a class=headerlink href=#jsoncompact title="Permanent link">&para;</a></h2> <p>Отличается от JSON только тем, что строчки данных выводятся в массивах, а не в object-ах.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><span class=p>{</span>
        <span class=nt>&quot;meta&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;SearchPhrase&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;String&quot;</span>
                <span class=p>},</span>
                <span class=p>{</span>
                        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;c&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;UInt64&quot;</span>
                <span class=p>}</span>
        <span class=p>],</span>

        <span class=nt>&quot;data&quot;</span><span class=p>:</span>
        <span class=p>[</span>
                <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;8267016&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;интерьер ванной комнаты&quot;</span><span class=p>,</span> <span class=s2>&quot;2166&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;яндекс&quot;</span><span class=p>,</span> <span class=s2>&quot;1655&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;весна 2014 мода&quot;</span><span class=p>,</span> <span class=s2>&quot;1549&quot;</span><span class=p>],</span>
                <span class=p>[</span><span class=s2>&quot;фриформ фото&quot;</span><span class=p>,</span> <span class=s2>&quot;1480&quot;</span><span class=p>]</span>
        <span class=p>],</span>

        <span class=nt>&quot;totals&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8873898&quot;</span><span class=p>],</span>

        <span class=nt>&quot;extremes&quot;</span><span class=p>:</span>
        <span class=p>{</span>
                <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;1480&quot;</span><span class=p>],</span>
                <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=s2>&quot;8267016&quot;</span><span class=p>]</span>
        <span class=p>},</span>

        <span class=nt>&quot;rows&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>

        <span class=nt>&quot;rows_before_limit_at_least&quot;</span><span class=p>:</span> <span class=mi>141137</span>
<span class=p>}</span>
</pre></div> <p>Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу). Смотрите также формат <code>JSONEachRow</code>.</p> <h2 id=jsoneachrow>JSONEachRow<a class=headerlink href=#jsoneachrow title="Permanent link">&para;</a></h2> <p>При использовании этого формата, ClickHouse выводит каждую запись как объект JSON (каждый объект отдельной строкой), при этом данные в целом — невалидный JSON.</p> <div class=codehilite><pre><span></span><span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;дизайн штор&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1064&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;баку&quot;</span><span class=p>,</span><span class=nt>&quot;count()&quot;</span><span class=p>:</span><span class=s2>&quot;1000&quot;</span><span class=p>}</span>
<span class=p>{</span><span class=nt>&quot;SearchPhrase&quot;</span><span class=p>:</span><span class=s2>&quot;&quot;</span><span class=p>,</span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=s2>&quot;8267016&quot;</span><span class=p>}</span>
</pre></div> <p>При вставке данных необходимо каждую запись передавать как отдельный объект JSON.</p> <h3 id=vstavka-dannykh>Вставка данных<a class=headerlink href=#vstavka-dannykh title="Permanent link">&para;</a></h3> <div class=codehilite><pre><span></span><span class=nv>INSERT</span> <span class=nv>INTO</span> <span class=nv>UserActivity</span> <span class=nv>FORMAT</span> <span class=nv>JSONEachRow</span> <span class=p>{</span><span class=s2>&quot;PageViews&quot;</span><span class="s s-Atom">:</span><span class=mi>5</span><span class=p>,</span> <span class=s2>&quot;UserID&quot;</span><span class="s s-Atom">:</span><span class=s2>&quot;4324182021466249494&quot;</span><span class=p>,</span> <span class=s2>&quot;Duration&quot;</span><span class="s s-Atom">:</span><span class=mi>146</span><span class=p>,</span><span class=s2>&quot;Sign&quot;</span><span class=p>:-</span><span class=mi>1</span><span class=p>}</span> <span class=p>{</span><span class=s2>&quot;UserID&quot;</span><span class="s s-Atom">:</span><span class=s2>&quot;4324182021466249494&quot;</span><span class=p>,</span><span class=s2>&quot;PageViews&quot;</span><span class="s s-Atom">:</span><span class=mi>6</span><span class=p>,</span><span class=s2>&quot;Duration&quot;</span><span class="s s-Atom">:</span><span class=mi>185</span><span class=p>,</span><span class=s2>&quot;Sign&quot;</span><span class="s s-Atom">:</span><span class=mi>1</span><span class=p>}</span>
</pre></div> <p>ClickHouse допускает:</p> <ul> <li>Любой порядок пар ключ-значение в объекте.</li> <li>Пропуск отдельных значений.</li> </ul> <p>ClickHouse игнорирует пробелы между элементами и запятые после объектов. Вы можете передать все объекты одной строкой. Вам не нужно разделять их переносами строк.</p> <p><strong>Обработка пропущенных значений</strong></p> <p>ClickHouse заменяет опущенные значения значениями по умолчанию для соответствующих <a href=../../data_types/ >data types</a>.</p> <p>Если указано <code>DEFAULT expr</code>, то ClickHouse использует различные правила подстановки в зависимости от настройки <a href=../../operations/settings/settings/#session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields</a>.</p> <p>Рассмотрим следующую таблицу:</p> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>example_table</span>
<span class=p>(</span>
    <span class=n>x</span> <span class=n>UInt32</span><span class=p>,</span>
    <span class=n>a</span> <span class=k>DEFAULT</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
</pre></div> <ul> <li>Если <code>input_format_defaults_for_omitted_fields = 0</code>, то значение по умолчанию для <code>x</code> и <code>a</code> равняется <code>0</code> (поскольку это значение по умолчанию для типа данных <code>UInt32</code>.)</li> <li>Если <code>input_format_defaults_for_omitted_fields = 1</code>, то значение по умолчанию для <code>x</code> равно <code>0</code>, а значение по умолчанию <code>a</code> равно <code>x * 2</code>.</li> </ul> <div class="admonition note"> <p class=admonition-title>Предупреждение</p> <p>Если <code>insert_sample_with_metadata = 1</code>, то при обработке запросов ClickHouse потребляет больше вычислительных ресурсов, чем если <code>insert_sample_with_metadata = 0</code>.</p> </div> <h3 id=vyborka-dannykh>Выборка данных<a class=headerlink href=#vyborka-dannykh title="Permanent link">&para;</a></h3> <p>Рассмотрим в качестве примера таблицу <code>UserActivity</code>:</p> <div class=codehilite><pre><span></span>┌──────────────UserID─┬─PageViews─┬─Duration─┬─Sign─┐
│ 4324182021466249494 │         5 │      146 │   -1 │
│ 4324182021466249494 │         6 │      185 │    1 │
└─────────────────────┴───────────┴──────────┴──────┘
</pre></div> <p>Запрос <code>SELECT * FROM UserActivity FORMAT JSONEachRow</code> возвращает:</p> <div class=codehilite><pre><span></span>{&quot;UserID&quot;:&quot;4324182021466249494&quot;,&quot;PageViews&quot;:5,&quot;Duration&quot;:146,&quot;Sign&quot;:-1}
{&quot;UserID&quot;:&quot;4324182021466249494&quot;,&quot;PageViews&quot;:6,&quot;Duration&quot;:185,&quot;Sign&quot;:1}
</pre></div> <p>В отличие от формата <a href=#json>JSON</a>, для <code>JSONEachRow</code> ClickHouse не заменяет невалидные UTF-8 последовательности. Значения экранируются так же, как и для формата <code>JSON</code>.</p> <div class="admonition note"> <p class=admonition-title>Примечание</p> <p>В строках может выводиться произвольный набор байт. Используйте формат <code>JSONEachRow</code>, если вы уверены, что данные в таблице могут быть представлены в формате JSON без потери информации.</p> </div> <h3 id=jsoneachrow-nested>Использование вложенных структур<a class=headerlink href=#jsoneachrow-nested title="Permanent link">&para;</a></h3> <p>Если у вас есть таблица со столбцами типа <a href=../../data_types/nested_data_structures/nested/ >Nested</a>, то в неё можно вставить данные из JSON-документа с такой же структурой. Функциональность включается настройкой <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json</a>.</p> <p>Например, рассмотрим следующую таблицу:</p> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>json_each_row_nested</span> <span class=p>(</span><span class=n>n</span> <span class=n>Nested</span> <span class=p>(</span><span class=n>s</span> <span class=n>String</span><span class=p>,</span> <span class=n>i</span> <span class=n>Int32</span><span class=p>)</span> <span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span>
</pre></div> <p>Из описания типа данных <code>Nested</code> видно, что ClickHouse трактует каждый компонент вложенной структуры как отдельный столбец (для нашей таблицы <code>n.s</code> и <code>n.i</code>). Можно вставить данные следующим образом:</p> <div class=codehilite><pre><span></span><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n.s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;n.i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}</span>
</pre></div> <p>Чтобы вставить данные как иерархический объект JSON, установите <a href=../../operations/settings/settings/#settings-input_format_import_nested_json>input_format_import_nested_json=1</a>.</p> <div class=codehilite><pre><span></span><span class=p>{</span>
    <span class=nt>&quot;n&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;abc&quot;</span><span class=p>,</span> <span class=s2>&quot;def&quot;</span><span class=p>],</span>
        <span class=nt>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div> <p>Без этой настройки ClickHouse сгенерирует исключение.</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;input_format_import_nested_json&#39;</span>
</pre></div> <div class=codehilite><pre><span></span>┌─name────────────────────────────┬─value─┐
│ input_format_import_nested_json │ 0     │
└─────────────────────────────────┴───────┘
</pre></div> <div class=codehilite><pre><span></span><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
</pre></div> <div class=codehilite><pre><span></span>Code: 117. DB::Exception: Unknown field found while parsing JSONEachRow format: n: (at row 1)
</pre></div> <div class=codehilite><pre><span></span><span class=k>SET</span> <span class=n>input_format_import_nested_json</span><span class=o>=</span><span class=mi>1</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>json_each_row_nested</span> <span class=n>FORMAT</span> <span class=n>JSONEachRow</span> <span class=err>{</span><span class=ss>&quot;n&quot;</span><span class=p>:</span> <span class=err>{</span><span class=ss>&quot;s&quot;</span><span class=p>:</span> <span class=p>[</span><span class=ss>&quot;abc&quot;</span><span class=p>,</span> <span class=ss>&quot;def&quot;</span><span class=p>],</span> <span class=ss>&quot;i&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>23</span><span class=p>]</span><span class=err>}}</span>
<span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>json_each_row_nested</span>
</pre></div> <div class=codehilite><pre><span></span>┌─n.s───────────┬─n.i────┐
│ [&#39;abc&#39;,&#39;def&#39;] │ [1,23] │
└───────────────┴────────┘
</pre></div> <h2 id=native>Native<a class=headerlink href=#native title="Permanent link">&para;</a></h2> <p>Самый эффективный формат. Данные пишутся и читаются блоками в бинарном виде. Для каждого блока пишется количество строк, количество столбцов, имена и типы столбцов, а затем кусочки столбцов этого блока, один за другим. То есть, этот формат является "столбцовым" - не преобразует столбцы в строки. Именно этот формат используется в родном интерфейсе - при межсерверном взаимодействии, при использовании клиента командной строки, при работе клиентов, написанных на C++.</p> <p>Вы можете использовать этот формат для быстрой генерации дампов, которые могут быть прочитаны только СУБД ClickHouse. Вряд ли имеет смысл работать с этим форматом самостоятельно.</p> <h2 id=null>Null<a class=headerlink href=#null title="Permanent link">&para;</a></h2> <p>Ничего не выводит. При этом, запрос обрабатывается, а при использовании клиента командной строки, данные ещё и передаются на клиент. Используется для тестов, в том числе, тестов производительности. Очевидно, формат подходит только для вывода, но не для парсинга.</p> <h2 id=pretty>Pretty<a class=headerlink href=#pretty title="Permanent link">&para;</a></h2> <p>Выводит данные в виде Unicode-art табличек, также используя ANSI-escape последовательности для установки цветов в терминале. Рисуется полная сетка таблицы и, таким образом, каждая строчка занимает две строки в терминале. Каждый блок результата выводится в виде отдельной таблицы. Это нужно, чтобы можно было выводить блоки без буферизации результата (буферизация потребовалась бы, чтобы заранее вычислить видимую ширину всех значений.)</p> <p><a href=../../query_language/syntax/ >NULL</a> выводится как <code>ᴺᵁᴸᴸ</code>.</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span>
</pre></div> <div class=codehilite><pre><span></span>┌─x─┬────y─┐
│ 1 │ ᴺᵁᴸᴸ │
└───┴──────┘
</pre></div> <p>В форматах <code>Pretty*</code> строки выводятся без экранирования. Ниже приведен пример для формата <a href=#prettycompact>PrettyCompact</a>:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=s1>&#39;String with \&#39;</span><span class=n>quotes</span><span class=err>\</span><span class=s1>&#39; and \t character&#39;</span> <span class=k>AS</span> <span class=n>Escaping_test</span>
</pre></div> <div class=codehilite><pre><span></span>┌─Escaping_test────────────────────────┐
│ String with &#39;quotes&#39; and   character │
└──────────────────────────────────────┘
</pre></div> <p>Для защиты от вываливания слишком большого количества данных в терминал, выводится только первые 10 000 строк. Если строк больше или равно 10 000, то будет написано "Showed first 10 000." Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <p>Формат <code>Pretty</code> поддерживает вывод тотальных значений (при использовании WITH TOTALS) и экстремальных значений (при настройке extremes выставленной в 1). В этих случаях, после основных данных выводятся тотальные значения, и экстремальные значения, в отдельных табличках. Пример (показан для формата <a href=#prettycompact>PrettyCompact</a>):</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>EventDate</span><span class=p>,</span> <span class=k>count</span><span class=p>()</span> <span class=k>AS</span> <span class=k>c</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=n>hits</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=k>WITH</span> <span class=n>TOTALS</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>EventDate</span> <span class=n>FORMAT</span> <span class=n>PrettyCompact</span>
</pre></div> <div class=codehilite><pre><span></span>┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1406958 │
│ 2014-03-18 │ 1383658 │
│ 2014-03-19 │ 1405797 │
│ 2014-03-20 │ 1353623 │
│ 2014-03-21 │ 1245779 │
│ 2014-03-22 │ 1031592 │
│ 2014-03-23 │ 1046491 │
└────────────┴─────────┘

Totals:
┌──EventDate─┬───────c─┐
│ 0000-00-00 │ 8873898 │
└────────────┴─────────┘

Extremes:
┌──EventDate─┬───────c─┐
│ 2014-03-17 │ 1031592 │
│ 2014-03-23 │ 1406958 │
└────────────┴─────────┘
</pre></div> <h2 id=prettycompact>PrettyCompact<a class=headerlink href=#prettycompact title="Permanent link">&para;</a></h2> <p>Отличается от <a href=#pretty>Pretty</a> тем, что не рисуется сетка между строками - результат более компактный. Этот формат используется по умолчанию в клиенте командной строки в интерактивном режиме.</p> <h2 id=prettycompactmonoblock>PrettyCompactMonoBlock<a class=headerlink href=#prettycompactmonoblock title="Permanent link">&para;</a></h2> <p>Отличается от <a href=#prettycompact>PrettyCompact</a> тем, что строки (до 10 000 штук) буферизуются и затем выводятся в виде одной таблицы, а не по блокам.</p> <h2 id=prettynoescapes>PrettyNoEscapes<a class=headerlink href=#prettynoescapes title="Permanent link">&para;</a></h2> <p>Отличается от Pretty тем, что не используются ANSI-escape последовательности. Это нужно для отображения этого формата в браузере, а также при использовании утилиты командной строки watch.</p> <p>Пример:</p> <div class=codehilite><pre><span></span>$ watch -n1 <span class=s2>&quot;clickhouse-client --query=&#39;SELECT event, value FROM system.events FORMAT PrettyCompactNoEscapes&#39;&quot;</span>
</pre></div> <p>Для отображения в браузере, вы можете использовать HTTP интерфейс.</p> <h3 id=prettycompactnoescapes>PrettyCompactNoEscapes<a class=headerlink href=#prettycompactnoescapes title="Permanent link">&para;</a></h3> <p>Аналогично.</p> <h3 id=prettyspacenoescapes>PrettySpaceNoEscapes<a class=headerlink href=#prettyspacenoescapes title="Permanent link">&para;</a></h3> <p>Аналогично.</p> <h2 id=prettyspace>PrettySpace<a class=headerlink href=#prettyspace title="Permanent link">&para;</a></h2> <p>Отличается от <a href=#prettycompact>PrettyCompact</a> тем, что вместо сетки используется пустое пространство (пробелы).</p> <h2 id=rowbinary>RowBinary<a class=headerlink href=#rowbinary title="Permanent link">&para;</a></h2> <p>Форматирует и парсит данные по строкам, в бинарном виде. Строки и значения уложены подряд, без разделителей. Формат менее эффективен, чем формат Native, так как является строковым.</p> <p>Числа представлены в little endian формате фиксированной длины. Для примера, UInt64 занимает 8 байт. DateTime представлены как UInt32, содержащий unix timestamp в качестве значения. Date представлены как UInt16, содержащий количество дней, прошедших с 1970-01-01 в качестве значения. String представлены как длина в формате varint (unsigned <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow">LEB128</a>), а затем байты строки. FixedString представлены просто как последовательность байт.</p> <p>Array представлены как длина в формате varint (unsigned <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow">LEB128</a>), а затем элементы массива, подряд.</p> <p>Для поддержки <a href=../../query_language/syntax/#null-literal>NULL</a> перед каждым значением типа <a href=../../data_types/nullable/ >Nullable</a> следует байт содержащий 1 или 0. Если байт 1, то значение равно NULL, и этот байт интерпретируется как отдельное значение (т.е. после него следует значение следующего поля). Если байт 0, то после байта следует значение поля (не равно NULL).</p> <h2 id=rowbinarywithnamesandtypes>RowBinaryWithNamesAndTypes<a class=headerlink href=#rowbinarywithnamesandtypes title="Permanent link">&para;</a></h2> <p>То же самое что <a href=#rowbinary>RowBinary</a>, но добавляется заголовок:</p> <ul> <li>Количество колонок - N, закодированное <a href=https://en.wikipedia.org/wiki/LEB128 rel="external nofollow">LEB128</a>,</li> <li>N строк (<code>String</code>) с именами колонок,</li> <li>N строк (<code>String</code>) с типами колонок.</li> </ul> <h2 id=data-format-values>Values<a class=headerlink href=#data-format-values title="Permanent link">&para;</a></h2> <p>Выводит каждую строку в скобках. Строки разделены запятыми. После последней строки запятой нет. Значения внутри скобок также разделены запятыми. Числа выводятся в десятичном виде без кавычек. Массивы выводятся в квадратных скобках. Строки, даты, даты-с-временем выводятся в кавычках. Правила экранирования и особенности парсинга аналогичны формату <a href=#tabseparated>TabSeparated</a>. При форматировании, лишние пробелы не ставятся, а при парсинге - допустимы и пропускаются (за исключением пробелов внутри значений типа массив, которые недопустимы). <a href=../../query_language/syntax/ >NULL</a> представляется как <code>NULL</code>.</p> <p>Минимальный набор символов, которых вам необходимо экранировать при передаче в Values формате: одинарная кавычка и обратный слеш.</p> <p>Именно этот формат используется в запросе <code>INSERT INTO t VALUES ...</code>, но вы также можете использовать его для форматирования результатов запросов.</p> <h2 id=vertical>Vertical<a class=headerlink href=#vertical title="Permanent link">&para;</a></h2> <p>Выводит каждое значение на отдельной строке, с указанием имени столбца. Формат удобно использовать для вывода одной-нескольких строк, если каждая строка состоит из большого количества столбцов.</p> <p><a href=../../query_language/syntax/ >NULL</a> выводится как <code>ᴺᵁᴸᴸ</code>.</p> <p>Пример:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>t_null</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</pre></div> <div class=codehilite><pre><span></span>Row 1:
──────
x: 1
y: ᴺᵁᴸᴸ
</pre></div> <p>В формате <code>Vertical</code> строки выводятся без экранирования. Например:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=s1>&#39;string with \&#39;</span><span class=n>quotes</span><span class=err>\</span><span class=s1>&#39; and \t with some special \n characters&#39;</span> <span class=k>AS</span> <span class=n>test</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</pre></div> <div class=codehilite><pre><span></span>Row 1:
──────
test: string with &#39;quotes&#39; and   with some special
 characters
</pre></div> <p>Этот формат подходит только для вывода результата выполнения запроса, но не для парсинга (приёма данных для вставки в таблицу).</p> <h2 id=xml>XML<a class=headerlink href=#xml title="Permanent link">&para;</a></h2> <p>Формат XML подходит только для вывода данных, не для парсинга. Пример:</p> <div class=codehilite><pre><span></span><span class=cp>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;</span>
<span class=nt>&lt;result&gt;</span>
        <span class=nt>&lt;meta&gt;</span>
                <span class=nt>&lt;columns&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>SearchPhrase<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>String<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                        <span class=nt>&lt;column&gt;</span>
                                <span class=nt>&lt;name&gt;</span>count()<span class=nt>&lt;/name&gt;</span>
                                <span class=nt>&lt;type&gt;</span>UInt64<span class=nt>&lt;/type&gt;</span>
                        <span class=nt>&lt;/column&gt;</span>
                <span class=nt>&lt;/columns&gt;</span>
        <span class=nt>&lt;/meta&gt;</span>
        <span class=nt>&lt;data&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>8267016<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>интерьер ванной комнаты<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>2166<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>яндекс<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1655<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>весна 2014 мода<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1549<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>фриформ фото<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1480<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>анджелина джоли<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1245<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>омск<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1112<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>фото собак разных пород<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1091<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>дизайн штор<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1064<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
                <span class=nt>&lt;row&gt;</span>
                        <span class=nt>&lt;SearchPhrase&gt;</span>баку<span class=nt>&lt;/SearchPhrase&gt;</span>
                        <span class=nt>&lt;field&gt;</span>1000<span class=nt>&lt;/field&gt;</span>
                <span class=nt>&lt;/row&gt;</span>
        <span class=nt>&lt;/data&gt;</span>
        <span class=nt>&lt;rows&gt;</span>10<span class=nt>&lt;/rows&gt;</span>
        <span class=nt>&lt;rows_before_limit_at_least&gt;</span>141137<span class=nt>&lt;/rows_before_limit_at_least&gt;</span>
<span class=nt>&lt;/result&gt;</span>
</pre></div> <p>Если имя столбца не имеет некоторый допустимый вид, то в качестве имени элемента используется просто field. В остальном, структура XML повторяет структуру в формате JSON. Как и для формата JSON, невалидные UTF-8 последовательности заменяются на replacement character � и, таким образом, выводимый текст будет состоять из валидных UTF-8 последовательностей.</p> <p>В строковых значениях, экранируются символы <code>&lt;</code> и <code>&amp;</code> как <code>&amp;lt;</code> и <code>&amp;amp;</code>.</p> <p>Массивы выводятся как <code>&lt;array&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/array&gt;</code>, а кортежи как <code>&lt;tuple&gt;&lt;elem&gt;Hello&lt;/elem&gt;&lt;elem&gt;World&lt;/elem&gt;...&lt;/tuple&gt;</code>.</p> <h2 id=capnproto>CapnProto<a class=headerlink href=#capnproto title="Permanent link">&para;</a></h2> <p>Cap'n Proto - формат бинарных сообщений, похож на Protocol Buffers и Thrift, но не похож на JSON или MessagePack.</p> <p>Сообщения Cap'n Proto строго типизированы и не самоописывающиеся, т.е. нуждаются во внешнем описании схемы. Схема применяется "на лету" и кешируется между запросами.</p> <div class=codehilite><pre><span></span>$ cat capnproto_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>&quot;INSERT INTO test.hits FORMAT CapnProto SETTINGS format_schema=&#39;schema:Message&#39;&quot;</span>
</pre></div> <p>Где <code>schema.capnp</code> выглядит следующим образом:</p> <div class=codehilite><pre><span></span><span class=k>struct</span> <span class=n>Message</span> {
  <span class=n>SearchPhrase</span> <span class=nd>@0</span> <span class=nc>:Text</span>;
  <span class=n>c</span> <span class=nd>@1</span> <span class=nc>:Uint64</span>;
}
</pre></div> <p>Десериализация эффективна и обычно не повышает нагрузку на систему.</p> <p>См. также <a href=#formatschema>схема формата</a>.</p> <h2 id=protobuf>Protobuf<a class=headerlink href=#protobuf title="Permanent link">&para;</a></h2> <p>Protobuf - формат <a href=https://developers.google.com/protocol-buffers/ rel="external nofollow">Protocol Buffers</a>.</p> <p>Формат нуждается во внешнем описании схемы. Схема кэшируется между запросами. ClickHouse поддерживает как синтаксис <code>proto2</code>, так и <code>proto3</code>; все типы полей (repeated/optional/required) поддерживаются.</p> <p>Пример использования формата:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>test</span><span class=p>.</span><span class=k>table</span> <span class=n>FORMAT</span> <span class=n>Protobuf</span> <span class=n>SETTINGS</span> <span class=n>format_schema</span> <span class=o>=</span> <span class=s1>&#39;schemafile:MessageType&#39;</span>
</pre></div> <p>или</p> <div class=codehilite><pre><span></span>$ cat protobuf_messages.bin <span class=p>|</span> clickhouse-client --query <span class=s2>&quot;INSERT INTO test.table FORMAT Protobuf SETTINGS format_schema=&#39;schemafile:MessageType&#39;&quot;</span>
</pre></div> <p>Где файл <code>schemafile.proto</code> может выглядеть так:</p> <div class=codehilite><pre><span></span><span class=n>syntax</span> <span class=l>= &quot;proto3&quot;</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>string</span> <span class=n>name</span> <span class=l>= 1</span>;
  <span class=n>string</span> <span class=n>surname</span> <span class=l>= 2</span>;
  <span class=n>uint32</span> <span class=n>birthDate</span> <span class=l>= 3</span>;
  <span class=n>repeated</span> <span class=n>string</span> <span class=n>phoneNumbers</span> <span class=l>= 4</span>;
};
</pre></div> <p>Соответствие между столбцами таблицы и полями сообщения <code>Protocol Buffers</code> устанавливается по имени, при этом игнорируется регистр букв и символы <code>_</code> (подчеркивание) и <code>.</code> (точка) считаются одинаковыми. Если типы столбцов не соответствуют точно типам полей сообщения <code>Protocol Buffers</code>, производится необходимая конвертация.</p> <p>Вложенные сообщения поддерживаются, например, для поля <code>z</code> в таком сообщении</p> <div class=codehilite><pre><span></span><span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>message</span> <span class=n>XType</span> {
    <span class=n>message</span> <span class=n>YType</span> {
      <span class=n>int32</span> <span class=n>z</span>;
    };
    <span class=n>repeated</span> <span class=n>YType</span> <span class=n>y</span>;
  };
  <span class=n>XType</span> <span class=n>x</span>;
};
</pre></div> <p>ClickHouse попытается найти столбец с именем <code>x.y.z</code> (или <code>x_y_z</code>, или <code>X.y_Z</code> и т.п.). Вложенные сообщения удобно использовать в качестве соответствия для <a href=../../data_types/nested_data_structures/nested/ >вложенной структуры данных</a>.</p> <p>Значения по умолчанию, определённые в схеме <code>proto2</code>, например,</p> <div class=codehilite><pre><span></span><span class=n>syntax</span> <span class=l>= &quot;proto2&quot;</span>;

<span class=n>message</span> <span class=n>MessageType</span> {
  <span class=n>optional</span> <span class=n>int32</span> <span class=n>result_per_page</span> <span class=l>= 3 [default = 10]</span>;
}
</pre></div> <p>не применяются; вместо них используются определенные в таблице <a href=../../query_language/create/#create-default-values>значения по умолчанию</a>.</p> <p>ClickHouse пишет и читает сообщения <code>Protocol Buffers</code> в формате <code>length-delimited</code>. Это означает, что перед каждым сообщением пишется его длина в формате <a href=https://developers.google.com/protocol-buffers/docs/encoding#varints rel="external nofollow">varint</a>. См. также <a href=https://cwiki.apache.org/confluence/display/GEODE/Delimiting+Protobuf+Messages rel="external nofollow">как читать и записывать сообщения Protocol Buffers в формате length-delimited в различных языках программирования</a>.</p> <h2 id=data-format-parquet>Parquet<a class=headerlink href=#data-format-parquet title="Permanent link">&para;</a></h2> <p><a href=http://parquet.apache.org/ rel="external nofollow">Apache Parquet</a> — формат поколоночного хранения данных, который распространён в экосистеме Hadoop. Для формата <code>Parquet</code> ClickHouse поддерживает операции чтения и записи.</p> <h3 id=sootvetstvie-tipov-dannykh>Соответствие типов данных<a class=headerlink href=#sootvetstvie-tipov-dannykh title="Permanent link">&para;</a></h3> <p>Таблица ниже содержит поддерживаемые типы данных и их соответствие <a href=../../data_types/ >типам данных</a> ClickHouse для запросов <code>INSERT</code> и <code>SELECT</code>.</p> <table> <thead> <tr> <th>Тип данных Parquet (<code>INSERT</code>)</th> <th>Тип данных ClickHouse</th> <th>Тип данных Parquet (<code>SELECT</code>)</th> </tr> </thead> <tbody> <tr> <td><code>UINT8</code>, <code>BOOL</code></td> <td><a href=../../data_types/int_uint/ >UInt8</a></td> <td><code>UINT8</code></td> </tr> <tr> <td><code>INT8</code></td> <td><a href=../../data_types/int_uint/ >Int8</a></td> <td><code>INT8</code></td> </tr> <tr> <td><code>UINT16</code></td> <td><a href=../../data_types/int_uint/ >UInt16</a></td> <td><code>UINT16</code></td> </tr> <tr> <td><code>INT16</code></td> <td><a href=../../data_types/int_uint/ >Int16</a></td> <td><code>INT16</code></td> </tr> <tr> <td><code>UINT32</code></td> <td><a href=../../data_types/int_uint/ >UInt32</a></td> <td><code>UINT32</code></td> </tr> <tr> <td><code>INT32</code></td> <td><a href=../../data_types/int_uint/ >Int32</a></td> <td><code>INT32</code></td> </tr> <tr> <td><code>UINT64</code></td> <td><a href=../../data_types/int_uint/ >UInt64</a></td> <td><code>UINT64</code></td> </tr> <tr> <td><code>INT64</code></td> <td><a href=../../data_types/int_uint/ >Int64</a></td> <td><code>INT64</code></td> </tr> <tr> <td><code>FLOAT</code>, <code>HALF_FLOAT</code></td> <td><a href=../../data_types/float/ >Float32</a></td> <td><code>FLOAT</code></td> </tr> <tr> <td><code>DOUBLE</code></td> <td><a href=../../data_types/float/ >Float64</a></td> <td><code>DOUBLE</code></td> </tr> <tr> <td><code>DATE32</code></td> <td><a href=../../data_types/date/ >Date</a></td> <td><code>UINT16</code></td> </tr> <tr> <td><code>DATE64</code>, <code>TIMESTAMP</code></td> <td><a href=../../data_types/datetime/ >DateTime</a></td> <td><code>UINT32</code></td> </tr> <tr> <td><code>STRING</code>, <code>BINARY</code></td> <td><a href=../../data_types/string/ >String</a></td> <td><code>STRING</code></td> </tr> <tr> <td>—</td> <td><a href=../../data_types/fixedstring/ >FixedString</a></td> <td><code>STRING</code></td> </tr> <tr> <td><code>DECIMAL</code></td> <td><a href=../../data_types/decimal/ >Decimal</a></td> <td><code>DECIMAL</code></td> </tr> </tbody> </table> <p>ClickHouse поддерживает настраиваемую точность для формата <code>Decimal</code>. При обработке запроса <code>INSERT</code>, ClickHouse обрабатывает тип данных Parquet <code>DECIMAL</code> как <code>Decimal128</code>.</p> <p>Неподдержанные типы данных Parquet: <code>DATE32</code>, <code>TIME32</code>, <code>FIXED_SIZE_BINARY</code>, <code>JSON</code>, <code>UUID</code>, <code>ENUM</code>.</p> <p>Типы данных столбцов в ClickHouse могут отличаться от типов данных соответствущих полей файла в формате Parquet. При вставке данных, ClickHouse интерпретирует типы данных в соответствии с таблицей выше, а затем <a href=../query_language/functions/type_conversion_functions/#type_conversion_function-cast>приводит</a> данные к тому типу, который установлен для столбца таблицы.</p> <h3 id=inserting-and-selecting-data>Inserting and Selecting Data<a class=headerlink href=#inserting-and-selecting-data title="Permanent link">&para;</a></h3> <p>Чтобы вставить в ClickHouse данные из файла в формате Parquet, выполните команду следующего вида:</p> <div class=codehilite><pre><span></span>$ cat <span class=o>{</span>filename<span class=o>}</span> <span class=p>|</span> clickhouse-client --query<span class=o>=</span><span class=s2>&quot;INSERT INTO {some_table} FORMAT Parquet&quot;</span>
</pre></div> <p>Чтобы получить данные из таблицы ClickHouse и сохранить их в файл формата Parquet, используйте команду следующего вида:</p> <div class=codehilite><pre><span></span>$ clickhouse-client --query<span class=o>=</span><span class=s2>&quot;SELECT * FROM {some_table} FORMAT Parquet&quot;</span> &gt; <span class=o>{</span>some_file.pq<span class=o>}</span>
</pre></div> <p>Для обмена данными с экосистемой Hadoop можно использовать движки таблиц <a href=../../operations/table_engines/hdfs/ >HDFS</a> и <code>URL</code>.</p> <h2 id=formatschema>Схема формата<a class=headerlink href=#formatschema title="Permanent link">&para;</a></h2> <p>Имя файла со схемой записывается в настройке <code>format_schema</code>. При использовании форматов <code>Cap'n Proto</code> и <code>Protobuf</code> требуется указать схему. Схема представляет собой имя файла и имя типа в этом файле, разделенные двоеточием, например <code>schemafile.proto:MessageType</code>. Если файл имеет стандартное расширение для данного формата (например <code>.proto</code> для <code>Protobuf</code>), то можно его не указывать и записывать схему так <code>schemafile:MessageType</code>.</p> <p>Если для ввода/вывода данных используется <a href=../cli/ >клиент</a> в <a href=../cli/#cli_usage>интерактивном режиме</a>, то при записи схемы можно использовать абсолютный путь или записывать путь относительно текущей директории на клиенте. Если клиент используется в <a href=../cli/#cli_usage>batch режиме</a>, то в записи схемы допускается только относительный путь, из соображений безопасности.</p> <p>Если для ввода/вывода данных используется <a href=../http/ >HTTP-интерфейс</a>, то файл со схемой должен располагаться на сервере в каталоге, указанном в параметре <a href=../../operations/server_settings/settings/#server_settings-format_schema_path>format_schema_path</a> конфигурации сервера.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../interfaces/http/ title=HTTP-интерфейс class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Назад </span> HTTP-интерфейс </span> </div> </a> <a href=../../interfaces/jdbc/ title=JDBC-драйвер class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Вперед </span> JDBC-драйвер </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> ©2016–2020 Yandex LLC </div> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/modernizr.js></script> <script src=../../assets/javascripts/application.js></script> <script src=../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../assets/javascripts/lunr/lunr.ru.js></script> <script src=../../assets/javascripts/lunr/lunr.multi.js></script> <script type=text/javascript>
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'ru';
            }
          )
      });
    </script> <script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script> <script type=text/javascript> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:ru"]
},
debug: false
});
</script> <!-- Yandex.Metrika counter --> <script type=text/javascript>
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 style="position:absolute; left:-9999px;" alt></div> </noscript> <!-- /Yandex.Metrika counter --> </body> </html>