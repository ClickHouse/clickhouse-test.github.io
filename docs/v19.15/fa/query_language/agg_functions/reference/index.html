



<!DOCTYPE html>
<html lang="fa" class="no-js" data-version="v19.15" data-single-page="false">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://clickhouse.yandex/docs/fa/query_language/agg_functions/reference/">
      
      
      
      <meta name="lang:clipboard.copy" content="کپی کردن">
      
      <meta name="lang:clipboard.copied" content="کپی شد">
      
      <meta name="lang:search.language" content="fa">
      
      <meta name="lang:search.pipeline.stopwords" content="False">
      
      <meta name="lang:search.pipeline.trimmer" content="False">
      
      <meta name="lang:search.result.none" content="سندی یافت نشد">
      
      <meta name="lang:search.result.one" content="1 سند یافت شد">
      
      <meta name="lang:search.result.other" content="# سند یافت شد">
      
      <meta name="lang:search.tokenizer" content="">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
    
    
      
        <title>Reference - مستندات  v19.15ClickHouse</title>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
      <link rel="stylesheet" href="../../../assets/stylesheets/application.2a88008a.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom.css?69ad5cf?1582276798">
    
    
  </head>
  
  
    
    
    <body dir="rtl" data-md-color-primary="white" data-md-color-accent="white" class="md-lang-fa">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">

  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="/" title="مستندات  v19.15ClickHouse" class="md-header-nav__button md-logo">
          
            <img src="../../../images/logo.svg" width="40" height="40">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                مستندات  v19.15ClickHouse
              </span>
              <span class="md-header-nav__topic">
                Reference
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" id="md-search__input" class="md-search__input" name="query" required placeholder="جستجو" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            برای شروع جستجو تایپ کنید
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div id="md-language-switch" class="md-header-nav__source">
            

  <a class="md-alt-lang"
     href="../../../../en/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ru/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../fa/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      <nav class="md-nav md-nav--primary" data-md-level="0">
  
  <label class="md-nav__title md-nav__title--site" for="drawer">
    مستندات  v19.15ClickHouse
  </label>

  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../" title="ClickHouse چیست؟" class="md-nav__link">
      ClickHouse چیست؟
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/distinctive_features/" title=" ویژگی های برجسته ClickHouse" class="md-nav__link">
       ویژگی های برجسته ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/features_considered_disadvantages/" title=" ویژگی های از ClickHouse که می تواند معایبی باشد" class="md-nav__link">
       ویژگی های از ClickHouse که می تواند معایبی باشد
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/performance/" title="Performance" class="md-nav__link">
      Performance
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/ya_metrika_task/" title="The Yandex.Metrica task" class="md-nav__link">
      The Yandex.Metrica task
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/" title=" شروع به کار" class="md-nav__link">
       شروع به کار
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Example datasets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Example datasets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/ontime/" title="OnTime" class="md-nav__link">
      OnTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/nyc_taxi/" title=" داده های تاکسی New York" class="md-nav__link">
       داده های تاکسی New York
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/amplab_benchmark/" title=" بنچمارک AMPLab Big Data" class="md-nav__link">
       بنچمارک AMPLab Big Data
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/wikistat/" title="WikiStat" class="md-nav__link">
      WikiStat
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/criteo/" title=" ترابایت از لاگ های کلیک از سرویس Criteo" class="md-nav__link">
       ترابایت از لاگ های کلیک از سرویس Criteo
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/star_schema/" title=" بنچمارک Star Schema" class="md-nav__link">
       بنچمارک Star Schema
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/metrica/" title="Yandex.Metrica Data" class="md-nav__link">
      Yandex.Metrica Data
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Interfaces
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Interfaces
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/" title="Interface ها" class="md-nav__link">
      Interface ها
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/cli/" title=" کلاینت Command-line" class="md-nav__link">
       کلاینت Command-line
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/tcp/" title="Native interface (TCP)" class="md-nav__link">
      Native interface (TCP)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/http/" title="HTTP interface" class="md-nav__link">
      HTTP interface
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/formats/" title=" فرمت های Input و Output" class="md-nav__link">
       فرمت های Input و Output
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/jdbc/" title=" درایور JDBC" class="md-nav__link">
       درایور JDBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/odbc/" title=" درایور ODBC" class="md-nav__link">
       درایور ODBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8" type="checkbox" id="nav-3-8">
    
    <label class="md-nav__link" for="nav-3-8">
      Third-party
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        Third-party
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/client_libraries/" title="کتابخانه های مشتری" class="md-nav__link">
      کتابخانه های مشتری
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/integrations/" title="یکپارچگی" class="md-nav__link">
      یکپارچگی
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/gui/" title="رابط های بصری" class="md-nav__link">
      رابط های بصری
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/proxy/" title="پروکسی" class="md-nav__link">
      پروکسی
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Data types
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Data types
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/int_uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="md-nav__link">
      UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/float/" title="Float32, Float64" class="md-nav__link">
      Float32, Float64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/decimal/" title="Decimal" class="md-nav__link">
      Decimal
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/boolean/" title=" مقادیر Boolean" class="md-nav__link">
       مقادیر Boolean
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/fixedstring/" title="FixedString(N)" class="md-nav__link">
      FixedString(N)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/uuid/" title="UUID" class="md-nav__link">
      UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/datetime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/array/" title="Array(T)" class="md-nav__link">
      Array(T)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/aggregatefunction/" title="AggregateFunction(name, types_of_arguments...)" class="md-nav__link">
      AggregateFunction(name, types_of_arguments...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/tuple/" title="Tuple(T1, T2, ...)" class="md-nav__link">
      Tuple(T1, T2, ...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nullable/" title="Nullable" class="md-nav__link">
      Nullable
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-16" type="checkbox" id="nav-4-16">
    
    <label class="md-nav__link" for="nav-4-16">
      Nested data structures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-16">
        Nested data structures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="md-nav__link">
      Nested(Name1 Type1, Name2 Type2, ...)
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-17" type="checkbox" id="nav-4-17">
    
    <label class="md-nav__link" for="nav-4-17">
      Special data types
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-17">
        Special data types
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/expression/" title="Expression" class="md-nav__link">
      Expression
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/nothing/" title="Nothing" class="md-nav__link">
      Nothing
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-18" type="checkbox" id="nav-4-18">
    
    <label class="md-nav__link" for="nav-4-18">
      Domains
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-18">
        Domains
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/ipv4/" title="IPv4" class="md-nav__link">
      IPv4
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/ipv6/" title="IPv6" class="md-nav__link">
      IPv6
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Database Engines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Database Engines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../database_engines/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../database_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Table Engines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Table Engines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      MergeTree Family
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        MergeTree Family
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mergetree/" title="MergeTree" class="md-nav__link">
      MergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replication/" title="Data Replication" class="md-nav__link">
      Data Replication
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/custom_partitioning_key/" title="Custom Partitioning Key" class="md-nav__link">
      Custom Partitioning Key
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replacingmergetree/" title="ReplacingMergeTree" class="md-nav__link">
      ReplacingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/summingmergetree/" title="SummingMergeTree" class="md-nav__link">
      SummingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/aggregatingmergetree/" title="AggregatingMergeTree" class="md-nav__link">
      AggregatingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/collapsingmergetree/" title="CollapsingMergeTree" class="md-nav__link">
      CollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="md-nav__link">
      VersionedCollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/graphitemergetree/" title="GraphiteMergeTree" class="md-nav__link">
      GraphiteMergeTree
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Log Family
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Log Family
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log_family/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/stripelog/" title="StripeLog" class="md-nav__link">
      StripeLog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log/" title="Log" class="md-nav__link">
      Log
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/tinylog/" title="TinyLog" class="md-nav__link">
      TinyLog
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4">
    
    <label class="md-nav__link" for="nav-6-4">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/jdbc/" title="JDBC" class="md-nav__link">
      JDBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/odbc/" title="ODBC" class="md-nav__link">
      ODBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/hdfs/" title="HDFS" class="md-nav__link">
      HDFS
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Special
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Special
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/distributed/" title="Distributed" class="md-nav__link">
      Distributed
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/external_data/" title="External data" class="md-nav__link">
      External data
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/dictionary/" title="Dictionary" class="md-nav__link">
      Dictionary
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/merge/" title="Merge" class="md-nav__link">
      Merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/join/" title="Join" class="md-nav__link">
      Join
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/url/" title="URL" class="md-nav__link">
      URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/view/" title="View" class="md-nav__link">
      View
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/materializedview/" title="MaterializedView" class="md-nav__link">
      MaterializedView
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/buffer/" title="Buffer" class="md-nav__link">
      Buffer
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      SQL Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        SQL Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/select/" title="SELECT" class="md-nav__link">
      SELECT
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/insert_into/" title="INSERT INTO" class="md-nav__link">
      INSERT INTO
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/create/" title="CREATE" class="md-nav__link">
      CREATE
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/alter/" title="ALTER" class="md-nav__link">
      ALTER
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/system/" title="SYSTEM" class="md-nav__link">
      SYSTEM
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/misc/" title="Other Kinds of Queries" class="md-nav__link">
      Other Kinds of Queries
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-8" type="checkbox" id="nav-7-8">
    
    <label class="md-nav__link" for="nav-7-8">
      Functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-8">
        Functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/arithmetic_functions/" title="Arithmetic" class="md-nav__link">
      Arithmetic
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/comparison_functions/" title="Comparison" class="md-nav__link">
      Comparison
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/logical_functions/" title="Logical" class="md-nav__link">
      Logical
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/type_conversion_functions/" title="Type Conversion" class="md-nav__link">
      Type Conversion
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/date_time_functions/" title="Working with Dates and Times" class="md-nav__link">
      Working with Dates and Times
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_functions/" title="Working with strings" class="md-nav__link">
      Working with strings
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_search_functions/" title="For Searching Strings" class="md-nav__link">
      For Searching Strings
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_replace_functions/" title="For Replacing in Strings" class="md-nav__link">
      For Replacing in Strings
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/conditional_functions/" title="Conditional " class="md-nav__link">
      Conditional 
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/math_functions/" title="Mathematical" class="md-nav__link">
      Mathematical
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/rounding_functions/" title="Rounding" class="md-nav__link">
      Rounding
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_functions/" title="Working with Arrays" class="md-nav__link">
      Working with Arrays
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/splitting_merging_functions/" title="Splitting and Merging Strings and Arrays" class="md-nav__link">
      Splitting and Merging Strings and Arrays
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bit_functions/" title="Bit" class="md-nav__link">
      Bit
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bitmap_functions/" title="Bitmap" class="md-nav__link">
      Bitmap
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/hash_functions/" title="Hash" class="md-nav__link">
      Hash
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/random_functions/" title="Generating Pseudo-Random Numbers" class="md-nav__link">
      Generating Pseudo-Random Numbers
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/encoding_functions/" title="Encoding" class="md-nav__link">
      Encoding
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/uuid_functions/" title="Working with UUID" class="md-nav__link">
      Working with UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/url_functions/" title="Working with URLs" class="md-nav__link">
      Working with URLs
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ip_address_functions/" title="Working with IP Addresses" class="md-nav__link">
      Working with IP Addresses
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/json_functions/" title="Working with JSON." class="md-nav__link">
      Working with JSON.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/higher_order_functions/" title="Higher-Order" class="md-nav__link">
      Higher-Order
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ext_dict_functions/" title="Working with External Dictionaries" class="md-nav__link">
      Working with External Dictionaries
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ym_dict_functions/" title="Working with Yandex.Metrica Dictionaries" class="md-nav__link">
      Working with Yandex.Metrica Dictionaries
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/in_functions/" title="Implementing the IN Operator" class="md-nav__link">
      Implementing the IN Operator
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_join/" title="arrayJoin" class="md-nav__link">
      arrayJoin
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/geo/" title="Working with geographical coordinates" class="md-nav__link">
      Working with geographical coordinates
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/functions_for_nulls/" title="Working with Nullable arguments" class="md-nav__link">
      Working with Nullable arguments
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/machine_learning_functions/" title="Machine Learning Functions" class="md-nav__link">
      Machine Learning Functions
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/other_functions/" title="Other" class="md-nav__link">
      Other
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9" checked>
    
    <label class="md-nav__link" for="nav-7-9">
      Aggregate Functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-9">
        Aggregate Functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Reference
      </label>
    
    <a href="../../../query_language/agg_functions/reference/" title="Reference" class="md-nav__link md-nav__link--active">
      <strong>Reference</strong>
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">فهرست موضوعات</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agg_function-count" title="count" class="md-nav__link">
    count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-any" title="any(x)" class="md-nav__link">
    any(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anyheavy-x" title="anyHeavy(x)" class="md-nav__link">
    anyHeavy(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anylast-x" title="anyLast(x)" class="md-nav__link">
    anyLast(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitand" title="groupBitAnd" class="md-nav__link">
    groupBitAnd
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitor" title="groupBitOr" class="md-nav__link">
    groupBitOr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitxor" title="groupBitXor" class="md-nav__link">
    groupBitXor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitmap" title="groupBitmap" class="md-nav__link">
    groupBitmap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-min" title="min(x)" class="md-nav__link">
    min(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-max" title="max(x)" class="md-nav__link">
    max(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMin" title="argMin(arg, val)" class="md-nav__link">
    argMin(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMax" title="argMax(arg, val)" class="md-nav__link">
    argMax(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-sum" title="sum(x)" class="md-nav__link">
    sum(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sumwithoverflow-x" title="sumWithOverflow(x)" class="md-nav__link">
    sumWithOverflow(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-summap" title="sumMap(key, value)" class="md-nav__link">
    sumMap(key, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewpop" title="skewPop" class="md-nav__link">
    skewPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewsamp" title="skewSamp" class="md-nav__link">
    skewSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtpop" title="kurtPop" class="md-nav__link">
    kurtPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtsamp" title="kurtSamp" class="md-nav__link">
    kurtSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupsum" title="timeSeriesGroupSum(uid, timestamp, value)" class="md-nav__link">
    timeSeriesGroupSum(uid, timestamp, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupratesum" title="timeSeriesGroupRateSum(uid, ts, val)" class="md-nav__link">
    timeSeriesGroupRateSum(uid, ts, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-avg" title="avg(x)" class="md-nav__link">
    avg(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniq" title="uniq" class="md-nav__link">
    uniq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqcombined" title="uniqCombined" class="md-nav__link">
    uniqCombined
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqhll12" title="uniqHLL12" class="md-nav__link">
    uniqHLL12
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqexact" title="uniqExact" class="md-nav__link">
    uniqExact
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparray" title="groupArray(x), groupArray(max_size)(x)" class="md-nav__link">
    groupArray(x), groupArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grouparrayinsertat-x" title="groupArrayInsertAt(x)" class="md-nav__link">
    groupArrayInsertAt(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingsum" title="groupArrayMovingSum" class="md-nav__link">
    groupArrayMovingSum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingavg" title="groupArrayMovingAvg" class="md-nav__link">
    groupArrayMovingAvg
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupuniqarray-x-groupuniqarray-max-size-x" title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="md-nav__link">
    groupUniqArray(x), groupUniqArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantile" title="quantile(level)(x)" class="md-nav__link">
    quantile(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiledeterministic-level-x-determinator" title="quantileDeterministic(level)(x, determinator)" class="md-nav__link">
    quantileDeterministic(level)(x, determinator)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantiletiming" title="quantileTiming" class="md-nav__link">
    quantileTiming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletimingweighted-level-x-weight" title="quantileTimingWeighted(level)(x, weight)" class="md-nav__link">
    quantileTimingWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexact-level-x" title="quantileExact(level)(x)" class="md-nav__link">
    quantileExact(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexactweighted-level-x-weight" title="quantileExactWeighted(level)(x, weight)" class="md-nav__link">
    quantileExactWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletdigest-level-x" title="quantileTDigest(level)(x)" class="md-nav__link">
    quantileTDigest(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#median-x" title="median(x)" class="md-nav__link">
    median(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiles-level1-level2-x" title="quantiles(level1, level2, ...)(x)" class="md-nav__link">
    quantiles(level1, level2, ...)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varsamp-x" title="varSamp(x)" class="md-nav__link">
    varSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varpop-x" title="varPop(x)" class="md-nav__link">
    varPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevsamp-x" title="stddevSamp(x)" class="md-nav__link">
    stddevSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevpop-x" title="stddevPop(x)" class="md-nav__link">
    stddevPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topk-n-column" title="topK(N)(column)" class="md-nav__link">
    topK(N)(column)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarsamp-x-y" title="covarSamp(x, y)" class="md-nav__link">
    covarSamp(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarpop-x-y" title="covarPop(x, y)" class="md-nav__link">
    covarPop(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corr-x-y" title="corr(x, y)" class="md-nav__link">
    corr(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplelinearregression" title="simpleLinearRegression" class="md-nav__link">
    simpleLinearRegression
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression" title="stochasticLinearRegression" class="md-nav__link">
    stochasticLinearRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-parameters" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-notes" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression" title="stochasticLogisticRegression" class="md-nav__link">
    stochasticLogisticRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression-parameters" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/combinators/" title="Aggregate function combinators" class="md-nav__link">
      Aggregate function combinators
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/parametric_functions/" title="Parametric aggregate functions" class="md-nav__link">
      Parametric aggregate functions
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-10" type="checkbox" id="nav-7-10">
    
    <label class="md-nav__link" for="nav-7-10">
      Table Functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-10">
        Table Functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/file/" title="file" class="md-nav__link">
      file
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/merge/" title="merge" class="md-nav__link">
      merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/numbers/" title="numbers" class="md-nav__link">
      numbers
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/remote/" title="remote" class="md-nav__link">
      remote
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/url/" title="url" class="md-nav__link">
      url
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/mysql/" title="mysql" class="md-nav__link">
      mysql
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/jdbc/" title="jdbc" class="md-nav__link">
      jdbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/odbc/" title="odbc" class="md-nav__link">
      odbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/hdfs/" title="hdfs" class="md-nav__link">
      hdfs
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/input/" title="input" class="md-nav__link">
      input
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11" type="checkbox" id="nav-7-11">
    
    <label class="md-nav__link" for="nav-7-11">
      Dictionaries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-11">
        Dictionaries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11-2" type="checkbox" id="nav-7-11-2">
    
    <label class="md-nav__link" for="nav-7-11-2">
      External Dictionaries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-11-2">
        External Dictionaries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts/" title="General Description" class="md-nav__link">
      General Description
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict/" title="Configuring an External Dictionary" class="md-nav__link">
      Configuring an External Dictionary
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_layout/" title="Storing Dictionaries in Memory" class="md-nav__link">
      Storing Dictionaries in Memory
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_lifetime/" title="Dictionary Updates" class="md-nav__link">
      Dictionary Updates
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_sources/" title="Sources of External Dictionaries" class="md-nav__link">
      Sources of External Dictionaries
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_structure/" title="Dictionary Key and Fields" class="md-nav__link">
      Dictionary Key and Fields
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/internal_dicts/" title="Internal Dictionaries" class="md-nav__link">
      Internal Dictionaries
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/operators/" title="Operators" class="md-nav__link">
      Operators
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/syntax/" title="General Syntax" class="md-nav__link">
      General Syntax
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Operations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/tips/" title="Usage Recommendations" class="md-nav__link">
      Usage Recommendations
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/update/" title="ClickHouse Update" class="md-nav__link">
      ClickHouse Update
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/access_rights/" title="Access Rights" class="md-nav__link">
      Access Rights
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/backup/" title="Data Backup" class="md-nav__link">
      Data Backup
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/configuration_files/" title="Configuration Files" class="md-nav__link">
      Configuration Files
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/quotas/" title="Quotas" class="md-nav__link">
      Quotas
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/system_tables/" title="System Tables" class="md-nav__link">
      System Tables
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-12" type="checkbox" id="nav-8-12">
    
    <label class="md-nav__link" for="nav-8-12">
      Server Configuration Parameters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-12">
        Server Configuration Parameters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/settings/" title="Server Settings" class="md-nav__link">
      Server Settings
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-13" type="checkbox" id="nav-8-13">
    
    <label class="md-nav__link" for="nav-8-13">
      Settings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-13">
        Settings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/permissions_for_queries/" title="Permissions for Queries" class="md-nav__link">
      Permissions for Queries
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/query_complexity/" title="Restrictions on Query Complexity" class="md-nav__link">
      Restrictions on Query Complexity
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings_profiles/" title="Settings Profiles" class="md-nav__link">
      Settings Profiles
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings_users/" title="User Settings" class="md-nav__link">
      User Settings
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/constraints_on_settings/" title="Constraints on Settings" class="md-nav__link">
      Constraints on Settings
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-14" type="checkbox" id="nav-8-14">
    
    <label class="md-nav__link" for="nav-8-14">
      Utilities
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-14">
        Utilities
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-copier/" title="clickhouse-copier" class="md-nav__link">
      clickhouse-copier
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-local/" title="clickhouse-local" class="md-nav__link">
      clickhouse-local
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      F.A.Q.
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        F.A.Q.
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../faq/general/" title="General Questions" class="md-nav__link">
      General Questions
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/architecture/" title="Overview of ClickHouse Architecture" class="md-nav__link">
      Overview of ClickHouse Architecture
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build/" title="How to Build ClickHouse on Linux" class="md-nav__link">
      How to Build ClickHouse on Linux
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build_osx/" title="How to Build ClickHouse on Mac OS X" class="md-nav__link">
      How to Build ClickHouse on Mac OS X
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/style/" title="How to Write C++ code" class="md-nav__link">
      How to Write C++ code
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/tests/" title="How to Run ClickHouse Tests" class="md-nav__link">
      How to Run ClickHouse Tests
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/contrib/" title="Third-Party Libraries Used" class="md-nav__link">
      Third-Party Libraries Used
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      What's New
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        What's New
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../security_changelog/" title="Security Changelog" class="md-nav__link">
      Security Changelog
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
  </ul>
  

  <ul id="md-extra-nav" class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item md-nav__item--active">
      رهایی:
      <span class="md-selector">
        <select id="releases-selector">
          <option value="">آخرین</option>
          
            <option value="v20.1"
              
            >v20.1</option>
          
            <option value="v19.17"
              
            >v19.17</option>
          
            <option value="v19.16"
              
            >v19.16</option>
          
            <option value="v19.15"
              
                selected="selected"
              
            >v19.15</option>
          
            <option value="v19.14"
              
            >v19.14</option>
          
            <option value="v19.13"
              
            >v19.13</option>
          
            <option value="v19.11"
              
            >v19.11</option>
          
            <option value="v19.10"
              
            >v19.10</option>
          
            <option value="v19.9"
              
            >v19.9</option>
          
            <option value="v19.8"
              
            >v19.8</option>
          
            <option value="v19.7"
              
            >v19.7</option>
          
        </select><span id="releases-selector-after">&nbsp;▾</span>
      </span>
    </li>
    <li class="md-nav__item md-nav__item--active">
        
          <a href="../../../single/" class="md-nav__link md-nav__link--active">نسخه تک صفحه</a>
        
    </li>
    <li class="md-nav__item md-nav__item--active">
          <a href="../../../single/clickhouse_fa.pdf" class="md-nav__link md-nav__link--active">نسخه PDF</a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
      <a href="https://github.com/ClickHouse/ClickHouse/" rel="external nofollow" target="_blank" class="md-nav__link">
        کد منبع کلیک
      </a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
        <span id="md-sidebar-flags" class="md-nav__link">
        

  <a class="md-alt-lang"
     href="../../../../en/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ru/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../fa/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

        </span>
    </li>
  </ul>
</nav>
                    
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">فهرست موضوعات</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agg_function-count" title="count" class="md-nav__link">
    count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-any" title="any(x)" class="md-nav__link">
    any(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anyheavy-x" title="anyHeavy(x)" class="md-nav__link">
    anyHeavy(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anylast-x" title="anyLast(x)" class="md-nav__link">
    anyLast(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitand" title="groupBitAnd" class="md-nav__link">
    groupBitAnd
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitor" title="groupBitOr" class="md-nav__link">
    groupBitOr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitxor" title="groupBitXor" class="md-nav__link">
    groupBitXor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitmap" title="groupBitmap" class="md-nav__link">
    groupBitmap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-min" title="min(x)" class="md-nav__link">
    min(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-max" title="max(x)" class="md-nav__link">
    max(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMin" title="argMin(arg, val)" class="md-nav__link">
    argMin(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMax" title="argMax(arg, val)" class="md-nav__link">
    argMax(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-sum" title="sum(x)" class="md-nav__link">
    sum(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sumwithoverflow-x" title="sumWithOverflow(x)" class="md-nav__link">
    sumWithOverflow(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-summap" title="sumMap(key, value)" class="md-nav__link">
    sumMap(key, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewpop" title="skewPop" class="md-nav__link">
    skewPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewsamp" title="skewSamp" class="md-nav__link">
    skewSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtpop" title="kurtPop" class="md-nav__link">
    kurtPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtsamp" title="kurtSamp" class="md-nav__link">
    kurtSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupsum" title="timeSeriesGroupSum(uid, timestamp, value)" class="md-nav__link">
    timeSeriesGroupSum(uid, timestamp, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupratesum" title="timeSeriesGroupRateSum(uid, ts, val)" class="md-nav__link">
    timeSeriesGroupRateSum(uid, ts, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-avg" title="avg(x)" class="md-nav__link">
    avg(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniq" title="uniq" class="md-nav__link">
    uniq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqcombined" title="uniqCombined" class="md-nav__link">
    uniqCombined
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqhll12" title="uniqHLL12" class="md-nav__link">
    uniqHLL12
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqexact" title="uniqExact" class="md-nav__link">
    uniqExact
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparray" title="groupArray(x), groupArray(max_size)(x)" class="md-nav__link">
    groupArray(x), groupArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grouparrayinsertat-x" title="groupArrayInsertAt(x)" class="md-nav__link">
    groupArrayInsertAt(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingsum" title="groupArrayMovingSum" class="md-nav__link">
    groupArrayMovingSum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingavg" title="groupArrayMovingAvg" class="md-nav__link">
    groupArrayMovingAvg
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupuniqarray-x-groupuniqarray-max-size-x" title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="md-nav__link">
    groupUniqArray(x), groupUniqArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantile" title="quantile(level)(x)" class="md-nav__link">
    quantile(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiledeterministic-level-x-determinator" title="quantileDeterministic(level)(x, determinator)" class="md-nav__link">
    quantileDeterministic(level)(x, determinator)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantiletiming" title="quantileTiming" class="md-nav__link">
    quantileTiming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletimingweighted-level-x-weight" title="quantileTimingWeighted(level)(x, weight)" class="md-nav__link">
    quantileTimingWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexact-level-x" title="quantileExact(level)(x)" class="md-nav__link">
    quantileExact(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexactweighted-level-x-weight" title="quantileExactWeighted(level)(x, weight)" class="md-nav__link">
    quantileExactWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletdigest-level-x" title="quantileTDigest(level)(x)" class="md-nav__link">
    quantileTDigest(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#median-x" title="median(x)" class="md-nav__link">
    median(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiles-level1-level2-x" title="quantiles(level1, level2, ...)(x)" class="md-nav__link">
    quantiles(level1, level2, ...)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varsamp-x" title="varSamp(x)" class="md-nav__link">
    varSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varpop-x" title="varPop(x)" class="md-nav__link">
    varPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevsamp-x" title="stddevSamp(x)" class="md-nav__link">
    stddevSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevpop-x" title="stddevPop(x)" class="md-nav__link">
    stddevPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topk-n-column" title="topK(N)(column)" class="md-nav__link">
    topK(N)(column)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarsamp-x-y" title="covarSamp(x, y)" class="md-nav__link">
    covarSamp(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarpop-x-y" title="covarPop(x, y)" class="md-nav__link">
    covarPop(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corr-x-y" title="corr(x, y)" class="md-nav__link">
    corr(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplelinearregression" title="simpleLinearRegression" class="md-nav__link">
    simpleLinearRegression
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression" title="stochasticLinearRegression" class="md-nav__link">
    stochasticLinearRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-parameters" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-notes" title="Notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression" title="stochasticLogisticRegression" class="md-nav__link">
    stochasticLogisticRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression-parameters" title="Parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                    
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                    <a href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/fa/query_language/agg_functions/reference.md" title="این صفحه را ویرایش کنید" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a>
                  
                
                
                <div id="content">
                
                  <h1 id="function-reference">Function Reference<a class="headerlink" href="#function-reference" title="Permanent link">&para;</a></h1>
<h2 id="agg_function-count">count<a class="headerlink" href="#agg_function-count" title="Permanent link">&para;</a></h2>
<p>Counts the number of rows or not-NULL values.</p>
<p>ClickHouse supports the following syntaxes for <code>count</code>:
- <code>count(expr)</code> or <code>COUNT(DISTINCT expr)</code>.
- <code>count()</code> or <code>COUNT(*)</code>. The <code>count()</code> syntax is ClickHouse-specific.</p>
<p><strong>Parameters</strong></p>
<p>The function can take:</p>
<ul>
<li>Zero parameters.</li>
<li>One <a href="../../syntax/#syntax-expressions">expression</a>.</li>
</ul>
<p><strong>Returned value</strong></p>
<ul>
<li>If the function is called without parameters it counts the number of rows.</li>
<li>If the <a href="../../syntax/#syntax-expressions">expression</a> is passed, then the function counts how many times this expression returned not null. If the expression returns a <a href="../../../data_types/nullable/">Nullable</a>-type value, then the result of <code>count</code> stays not <code>Nullable</code>. The function returns 0 if the expression returned <code>NULL</code> for all the rows.</li>
</ul>
<p>In both cases the type of the returned value is <a href="../../../data_types/int_uint/">UInt64</a>.</p>
<p><strong>Details</strong></p>
<p>ClickHouse supports the <code>COUNT(DISTINCT ...)</code> syntax. The behavior of this construction depends on the <a href="../../../operations/settings/settings/#settings-count_distinct_implementation">count_distinct_implementation</a> setting. It defines which of the <a href="#agg_function-uniq">uniq*</a> functions is used to perform the operation. The default is the <a href="#agg_function-uniqexact">uniqExact</a> function.</p>
<p>The <code>SELECT count() FROM table</code> query is not optimized, because the number of entries in the table is not stored separately. It chooses a small column from the table and counts the number of values in it.</p>
<p><strong>Examples</strong></p>
<p>Example 1:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">()</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─count()─┐
│       5 │
└─────────┘
</pre></div>


<p>Example 2:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">settings</span> <span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;count_distinct_implementation&#39;</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─name──────────────────────────┬─value─────┐
│ count_distinct_implementation │ uniqExact │
└───────────────────────────────┴───────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─uniqExact(num)─┐
│              3 │
└────────────────┘
</pre></div>


<p>This example shows that <code>count(DISTINCT num)</code> is performed by the <code>uniqExact</code> function according to the <code>count_distinct_implementation</code> setting value.</p>
<h2 id="agg_function-any">any(x)<a class="headerlink" href="#agg_function-any" title="Permanent link">&para;</a></h2>
<p>Selects the first encountered value.
The query can be executed in any order and even in a different order each time, so the result of this function is indeterminate.
To get a determinate result, you can use the 'min' or 'max' function instead of 'any'.</p>
<p>In some cases, you can rely on the order of execution. This applies to cases when SELECT comes from a subquery that uses ORDER BY.</p>
<p>When a <code>SELECT</code> query has the <code>GROUP BY</code> clause or at least one aggregate function, ClickHouse (in contrast to MySQL) requires that all expressions in the <code>SELECT</code>, <code>HAVING</code>, and <code>ORDER BY</code> clauses be calculated from keys or from aggregate functions. In other words, each column selected from the table must be used either in keys or inside aggregate functions. To get behavior like in MySQL, you can put the other columns in the <code>any</code> aggregate function.</p>
<h2 id="anyheavy-x">anyHeavy(x)<a class="headerlink" href="#anyheavy-x" title="Permanent link">&para;</a></h2>
<p>Selects a frequently occurring value using the <a href="http://www.cs.umd.edu/~samir/498/karp.pdf" rel="external nofollow">heavy hitters</a> algorithm. If there is a value that occurs more than in half the cases in each of the query's execution threads, this value is returned. Normally, the result is nondeterministic.</p>
<div class="codehilite"><pre><span></span><span class="n">anyHeavy</span><span class="p">(</span><span class="k">column</span><span class="p">)</span>
</pre></div>


<p><strong>Arguments</strong></p>
<ul>
<li><code>column</code> – The column name.</li>
</ul>
<p><strong>Example</strong></p>
<p>Take the <a href="../../../getting_started/example_datasets/ontime/">OnTime</a> data set and select any frequently occurring value in the <code>AirlineID</code> column.</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">anyHeavy</span><span class="p">(</span><span class="n">AirlineID</span><span class="p">)</span> <span class="k">AS</span> <span class="n">res</span>
<span class="k">FROM</span> <span class="n">ontime</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌───res─┐
│ 19690 │
└───────┘
</pre></div>


<h2 id="anylast-x">anyLast(x)<a class="headerlink" href="#anylast-x" title="Permanent link">&para;</a></h2>
<p>Selects the last value encountered.
The result is just as indeterminate as for the <code>any</code> function.</p>
<h2 id="groupbitand">groupBitAnd<a class="headerlink" href="#groupbitand" title="Permanent link">&para;</a></h2>
<p>Applies bitwise <code>AND</code> for series of numbers.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitAnd</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p>
<p><strong>Return value</strong></p>
<p>Value of the <code>UInt*</code> type.</p>
<p><strong>Example</strong></p>
<p>Test data:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</pre></div>


<p>Query:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitAnd</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Where <code>num</code> is the column with the test data.</p>
<p>Result:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00000100 = 4
</pre></div>


<h2 id="groupbitor">groupBitOr<a class="headerlink" href="#groupbitor" title="Permanent link">&para;</a></h2>
<p>Applies bitwise <code>OR</code> for series of numbers.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitOr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p>
<p><strong>Return value</strong></p>
<p>Value of the <code>UInt*</code> type.</p>
<p><strong>Example</strong></p>
<p>Test data:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</pre></div>


<p>Query:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitOr</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Where <code>num</code> is the column with the test data.</p>
<p>Result:</p>
<div class="codehilite"><pre><span></span>binary     decimal
01111101 = 125
</pre></div>


<h2 id="groupbitxor">groupBitXor<a class="headerlink" href="#groupbitxor" title="Permanent link">&para;</a></h2>
<p>Applies bitwise <code>XOR</code> for series of numbers.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitXor</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p>
<p><strong>Return value</strong></p>
<p>Value of the <code>UInt*</code> type.</p>
<p><strong>Example</strong></p>
<p>Test data:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</pre></div>


<p>Query:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitXor</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Where <code>num</code> is the column with the test data.</p>
<p>Result:</p>
<div class="codehilite"><pre><span></span>binary     decimal
01101000 = 104
</pre></div>


<h2 id="groupbitmap">groupBitmap<a class="headerlink" href="#groupbitmap" title="Permanent link">&para;</a></h2>
<p>Bitmap or Aggregate calculations from a unsigned integer column, return cardinality of type UInt64, if add suffix -State, then return <a href="../../functions/bitmap_functions/">bitmap object</a>.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitmap</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> – An expression that results in <code>UInt*</code> type.</p>
<p><strong>Return value</strong></p>
<p>Value of the <code>UInt64</code> type.</p>
<p><strong>Example</strong></p>
<p>Test data:</p>
<div class="codehilite"><pre><span></span>UserID
1
1
2
3
</pre></div>


<p>Query:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitmap</span><span class="p">(</span><span class="n">UserID</span><span class="p">)</span> <span class="k">as</span> <span class="n">num</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Result:</p>
<div class="codehilite"><pre><span></span>num
3
</pre></div>


<h2 id="agg_function-min">min(x)<a class="headerlink" href="#agg_function-min" title="Permanent link">&para;</a></h2>
<p>Calculates the minimum.</p>
<h2 id="agg_function-max">max(x)<a class="headerlink" href="#agg_function-max" title="Permanent link">&para;</a></h2>
<p>Calculates the maximum.</p>
<h2 id="agg_function-argMin">argMin(arg, val)<a class="headerlink" href="#agg_function-argMin" title="Permanent link">&para;</a></h2>
<p>Calculates the 'arg' value for a minimal 'val' value. If there are several different values of 'arg' for minimal values of 'val', the first of these values encountered is output.</p>
<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span>┌─user─────┬─salary─┐
│ director │   5000 │
│ manager  │   3000 │
│ worker   │   1000 │
└──────────┴────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">argMin</span><span class="p">(</span><span class="k">user</span><span class="p">,</span> <span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">salary</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─argMin(user, salary)─┐
│ worker               │
└──────────────────────┘
</pre></div>


<h2 id="agg_function-argMax">argMax(arg, val)<a class="headerlink" href="#agg_function-argMax" title="Permanent link">&para;</a></h2>
<p>Calculates the 'arg' value for a maximum 'val' value. If there are several different values of 'arg' for maximum values of 'val', the first of these values encountered is output.</p>
<h2 id="agg_function-sum">sum(x)<a class="headerlink" href="#agg_function-sum" title="Permanent link">&para;</a></h2>
<p>Calculates the sum.
Only works for numbers.</p>
<h2 id="sumwithoverflow-x">sumWithOverflow(x)<a class="headerlink" href="#sumwithoverflow-x" title="Permanent link">&para;</a></h2>
<p>Computes the sum of the numbers, using the same data type for the result as for the input parameters. If the sum exceeds the maximum value for this data type, the function returns an error.</p>
<p>Only works for numbers.</p>
<h2 id="agg_functions-summap">sumMap(key, value)<a class="headerlink" href="#agg_functions-summap" title="Permanent link">&para;</a></h2>
<p>Totals the 'value' array according to the keys specified in the 'key' array.
The number of elements in 'key' and 'value' must be the same for each row that is totaled.
Returns a tuple of two arrays: keys in sorted order, and values ​​summed for the corresponding keys.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">sum_map</span><span class="p">(</span>
    <span class="nb">date</span> <span class="nb">Date</span><span class="p">,</span>
    <span class="n">timeslot</span> <span class="n">DateTime</span><span class="p">,</span>
    <span class="n">statusMap</span> <span class="n">Nested</span><span class="p">(</span>
        <span class="n">status</span> <span class="n">UInt16</span><span class="p">,</span>
        <span class="n">requests</span> <span class="n">UInt64</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Log</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">sum_map</span> <span class="k">VALUES</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:00:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:00:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:01:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:01:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]);</span>
<span class="k">SELECT</span>
    <span class="n">timeslot</span><span class="p">,</span>
    <span class="n">sumMap</span><span class="p">(</span><span class="n">statusMap</span><span class="p">.</span><span class="n">status</span><span class="p">,</span> <span class="n">statusMap</span><span class="p">.</span><span class="n">requests</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">sum_map</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">timeslot</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┐
│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │
│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │
└─────────────────────┴──────────────────────────────────────────────┘
</pre></div>


<h2 id="skewpop">skewPop<a class="headerlink" href="#skewpop" title="Permanent link">&para;</a></h2>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Skewness" rel="external nofollow">skewness</a> of a sequence.</p>
<div class="codehilite"><pre><span></span><span class="n">skewPop</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Expression</a> returning a number.</p>
<p><strong>Returned value</strong></p>
<p>The skewness of the given distribution. Type — <a href="../../../data_types/float/">Float64</a></p>
<p><strong>Example</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">skewPop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="skewsamp">skewSamp<a class="headerlink" href="#skewsamp" title="Permanent link">&para;</a></h2>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Skewness" rel="external nofollow">sample skewness</a> of a sequence.</p>
<p>It represents an unbiased estimate of the skewness of a random variable if passed values form its sample.</p>
<div class="codehilite"><pre><span></span><span class="n">skewSamp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Expression</a> returning a number.</p>
<p><strong>Returned value</strong></p>
<p>The skewness of the given distribution. Type — <a href="../../../data_types/float/">Float64</a>. If <code>n &lt;= 1</code> (<code>n</code> is the size of the sample), then the function returns <code>nan</code>.</p>
<p><strong>Example</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">skewSamp</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="kurtpop">kurtPop<a class="headerlink" href="#kurtpop" title="Permanent link">&para;</a></h2>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Kurtosis" rel="external nofollow">kurtosis</a> of a sequence.</p>
<div class="codehilite"><pre><span></span><span class="n">kurtPop</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Expression</a> returning a number.</p>
<p><strong>Returned value</strong></p>
<p>The kurtosis of the given distribution. Type — <a href="../../../data_types/float/">Float64</a></p>
<p><strong>Example</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">kurtPop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="kurtsamp">kurtSamp<a class="headerlink" href="#kurtsamp" title="Permanent link">&para;</a></h2>
<p>Computes the <a href="https://en.wikipedia.org/wiki/Kurtosis" rel="external nofollow">sample kurtosis</a> of a sequence.</p>
<p>It represents an unbiased estimate of the kurtosis of a random variable if passed values form its sample.</p>
<div class="codehilite"><pre><span></span><span class="n">kurtSamp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Expression</a> returning a number.</p>
<p><strong>Returned value</strong></p>
<p>The kurtosis of the given distribution. Type — <a href="../../../data_types/float/">Float64</a>. If <code>n &lt;= 1</code> (<code>n</code> is a size of the sample), then the function returns <code>nan</code>.</p>
<p><strong>Example</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">kurtSamp</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="agg_function-timeseriesgroupsum">timeSeriesGroupSum(uid, timestamp, value)<a class="headerlink" href="#agg_function-timeseriesgroupsum" title="Permanent link">&para;</a></h2>
<p><code>timeSeriesGroupSum</code> can aggregate different time series that sample timestamp not alignment.
It will use linear interpolation between two sample timestamp and then sum time-series together.</p>
<ul>
<li><code>uid</code> is the time series unique id, <code>UInt64</code>.</li>
<li><code>timestamp</code> is Int64 type in order to support millisecond or microsecond.</li>
<li><code>value</code> is the metric.</li>
</ul>
<p>The function returns array of tuples with <code>(timestamp, aggregated_value)</code> pairs.</p>
<p>Before using this function make sure <code>timestamp</code> is in ascending order.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span>┌─uid─┬─timestamp─┬─value─┐
│ 1   │     2     │   0.2 │
│ 1   │     7     │   0.7 │
│ 1   │    12     │   1.2 │
│ 1   │    17     │   1.7 │
│ 1   │    25     │   2.5 │
│ 2   │     3     │   0.6 │
│ 2   │     8     │   1.6 │
│ 2   │    12     │   2.4 │
│ 2   │    18     │   3.6 │
│ 2   │    24     │   4.8 │
└─────┴───────────┴───────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">time_series</span><span class="p">(</span>
    <span class="n">uid</span>       <span class="n">UInt64</span><span class="p">,</span>
    <span class="k">timestamp</span> <span class="n">Int64</span><span class="p">,</span>
    <span class="n">value</span>     <span class="n">Float64</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">time_series</span> <span class="k">VALUES</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">7</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">4</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">3</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="n">timeSeriesGroupSum</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="k">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">time_series</span> <span class="k">order</span> <span class="k">by</span> <span class="k">timestamp</span> <span class="k">ASC</span>
<span class="p">);</span>
</pre></div>


<p>And the result will be:</p>
<div class="codehilite"><pre><span></span>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]
</pre></div>


<h2 id="agg_function-timeseriesgroupratesum">timeSeriesGroupRateSum(uid, ts, val)<a class="headerlink" href="#agg_function-timeseriesgroupratesum" title="Permanent link">&para;</a></h2>
<p>Similarly timeSeriesGroupRateSum, timeSeriesGroupRateSum will Calculate the rate of time-series and then sum rates together.
Also, timestamp should be in ascend order before use this function.</p>
<p>Use this function, the result above case will be:</p>
<div class="codehilite"><pre><span></span>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]
</pre></div>


<h2 id="agg_function-avg">avg(x)<a class="headerlink" href="#agg_function-avg" title="Permanent link">&para;</a></h2>
<p>Calculates the average.
Only works for numbers.
The result is always Float64.</p>
<h2 id="agg_function-uniq">uniq<a class="headerlink" href="#agg_function-uniq" title="Permanent link">&para;</a></h2>
<p>Calculates the approximate number of different values of the argument.</p>
<div class="codehilite"><pre><span></span><span class="n">uniq</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>
<p><strong>Returned value</strong></p>
<ul>
<li>A <a href="../../../data_types/int_uint/">UInt64</a>-type number.</li>
</ul>
<p><strong>Implementation details</strong></p>
<p>Function:</p>
<ul>
<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>
<li>
<p>Uses an adaptive sampling algorithm. For the calculation state, the function uses a sample of element hash values up to 65536.</p>
<p>This algorithm is very accurate and very efficient on the CPU. When the query contains several of these functions, using <code>uniq</code> is almost as fast as using other aggregate functions.</p>
</li>
<li>
<p>Provides the result deterministically (it doesn't depend on the query processing order).</p>
</li>
</ul>
<p>We recommend using this function in almost all scenarios.</p>
<p><strong>See Also</strong></p>
<ul>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqcombined">uniqCombined<a class="headerlink" href="#agg_function-uniqcombined" title="Permanent link">&para;</a></h2>
<p>Calculates the approximate number of different argument values.</p>
<div class="codehilite"><pre><span></span><span class="n">uniqCombined</span><span class="p">(</span><span class="n">HLL_precision</span><span class="p">)(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p>The <code>uniqCombined</code> function is a good choice for calculating the number of different values, but keep in mind that the estimation error for large sets (200 million elements and more) will be larger than the theoretical value due to the poor hash function choice.</p>
<p><strong>Parameters</strong></p>
<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>
<p><code>HLL_precision</code> is the base-2 logarithm of the number of cells in <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="external nofollow">HyperLogLog</a>. Optional, you can use the function as <code>uniqCombined(x[, ...])</code>. The default value for <code>HLL_precision</code> is 17, which is effectively 96 KiB of space (2^17 cells, 6 bits each).</p>
<p><strong>Returned value</strong></p>
<ul>
<li>A number <a href="../../../data_types/int_uint/">UInt64</a>-type number.</li>
</ul>
<p><strong>Implementation details</strong></p>
<p>Function:</p>
<ul>
<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>
<li>
<p>Uses a combination of three algorithms: array, hash table, and HyperLogLog with an error correction table.</p>
<p>For a small number of distinct elements, an array is used. When the set size is larger, a hash table is used. For a larger number of elements, HyperLogLog is used, which will occupy a fixed amount of memory.</p>
</li>
<li>
<p>Provides the result deterministically (it doesn't depend on the query processing order).</p>
</li>
</ul>
<p>Compared to the <a href="#agg_function-uniq">uniq</a> function, the <code>uniqCombined</code>:</p>
<ul>
<li>Consumes several times less memory.</li>
<li>Calculates with several times higher accuracy.</li>
<li>Usually has slightly lower performance. In some scenarios, <code>uniqCombined</code> can perform better than <code>uniq</code>, for example, with distributed queries that transmit a large number of aggregation states over the network.</li>
</ul>
<p><strong>See Also</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqhll12">uniqHLL12<a class="headerlink" href="#agg_function-uniqhll12" title="Permanent link">&para;</a></h2>
<p>Calculates the approximate number of different argument values, using the <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="external nofollow">HyperLogLog</a> algorithm.</p>
<div class="codehilite"><pre><span></span><span class="n">uniqHLL12</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p><strong>Parameters</strong></p>
<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>
<p><strong>Returned value</strong></p>
<ul>
<li>A <a href="../../../data_types/int_uint/">UInt64</a>-type number.</li>
</ul>
<p><strong>Implementation details</strong></p>
<p>Function:</p>
<ul>
<li>Calculates a hash for all parameters in the aggregate, then uses it in calculations.</li>
<li>
<p>Uses the HyperLogLog algorithm to approximate the number of different argument values.</p>
<p>212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</p>
</li>
<li>
<p>Provides the determinate result (it doesn't depend on the query processing order).</p>
</li>
</ul>
<p>We don't recommend using this function. In most cases, use the <a href="#agg_function-uniq">uniq</a> or <a href="#agg_function-uniqcombined">uniqCombined</a> function.</p>
<p><strong>See Also</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqexact">uniqExact<a class="headerlink" href="#agg_function-uniqexact" title="Permanent link">&para;</a></h2>
<p>Calculates the exact number of different argument values.</p>
<div class="codehilite"><pre><span></span><span class="n">uniqExact</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p>Use the <code>uniqExact</code> function if you absolutely need an exact result. Otherwise use the <a href="#agg_function-uniq">uniq</a> function.</p>
<p>The <code>uniqExact</code> function uses more memory than <code>uniq</code>, because the size of the state has unbounded growth as the number of different values increases.</p>
<p><strong>Parameters</strong></p>
<p>The function takes a variable number of parameters. Parameters can be <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, or numeric types.</p>
<p><strong>See Also</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
</ul>
<h2 id="agg_function-grouparray">groupArray(x), groupArray(max_size)(x)<a class="headerlink" href="#agg_function-grouparray" title="Permanent link">&para;</a></h2>
<p>Creates an array of argument values.
Values can be added to the array in any (indeterminate) order.</p>
<p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.
For example, <code>groupArray (1) (x)</code> is equivalent to <code>[any (x)]</code>.</p>
<p>In some cases, you can still rely on the order of execution. This applies to cases when <code>SELECT</code> comes from a subquery that uses <code>ORDER BY</code>.</p>
<h2 id="grouparrayinsertat-x">groupArrayInsertAt(x)<a class="headerlink" href="#grouparrayinsertat-x" title="Permanent link">&para;</a></h2>
<p>Inserts a value into the array in the specified position.</p>
<p>Accepts the value and position as input. If several values ​​are inserted into the same position, any of them might end up in the resulting array (the first one will be used in the case of single-threaded execution). If no value is inserted into a position, the position is assigned the default value.</p>
<p>Optional parameters:</p>
<ul>
<li>The default value for substituting in empty positions.</li>
<li>The length of the resulting array. This allows you to receive arrays of the same size for all the aggregate keys. When using this parameter, the default value must be specified.</li>
</ul>
<h2 id="agg_function-grouparraymovingsum">groupArrayMovingSum<a class="headerlink" href="#agg_function-grouparraymovingsum" title="Permanent link">&para;</a></h2>
<p>Calculates the moving sum of input values.</p>
<div class="codehilite"><pre><span></span><span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
<span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="n">window_size</span><span class="p">)(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
</pre></div>


<p>The function can take the window size as a parameter. If left unspecified, the function takes the window size equal to the number of rows in the column.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>numbers_for_summing</code> — <a href="../../syntax/#syntax-expressions">Expression</a> resulting in a numeric data type value.</li>
<li><code>window_size</code> — Size of the calculation window.</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>Array of the same size and type as the input data.</li>
</ul>
<p><strong>Example</strong></p>
<p>The sample table:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span>
<span class="p">(</span>
    <span class="o">`</span><span class="nb">int</span><span class="o">`</span> <span class="n">UInt8</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">float</span><span class="o">`</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">dec</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">TinyLog</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</pre></div>


<p>The queries:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</pre></div>


<h2 id="agg_function-grouparraymovingavg">groupArrayMovingAvg<a class="headerlink" href="#agg_function-grouparraymovingavg" title="Permanent link">&para;</a></h2>
<p>Calculates the moving average of input values.</p>
<div class="codehilite"><pre><span></span><span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
<span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="n">window_size</span><span class="p">)(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
</pre></div>


<p>The function can take the window size as a parameter. If left unspecified, the function takes the window size equal to the number of rows in the column.</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>numbers_for_summing</code> — <a href="../../syntax/#syntax-expressions">Expression</a> resulting in a numeric data type value.</li>
<li><code>window_size</code> — Size of the calculation window.</li>
</ul>
<p><strong>Returned values</strong></p>
<ul>
<li>Array of the same size and type as the input data.</li>
</ul>
<p>The function uses <a href="https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero" rel="external nofollow">rounding towards zero</a>. It truncates the decimal places insignificant for the resulting data type.</p>
<p><strong>Example</strong></p>
<p>The sample table <code>b</code>:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span>
<span class="p">(</span>
    <span class="o">`</span><span class="nb">int</span><span class="o">`</span> <span class="n">UInt8</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">float</span><span class="o">`</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">dec</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">TinyLog</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</pre></div>


<p>The queries:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I─────────┬─F───────────────────────────────────┬─D─────────────────────┐
│ [0,0,1,3] │ [0.275,0.82500005,1.9250001,3.8675] │ [0.27,0.82,1.92,3.86] │
└───────────┴─────────────────────────────────────┴───────────────────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I─────────┬─F────────────────────────────────┬─D─────────────────────┐
│ [0,1,3,5] │ [0.55,1.6500001,3.3000002,6.085] │ [0.55,1.65,3.30,6.08] │
└───────────┴──────────────────────────────────┴───────────────────────┘
</pre></div>


<h2 id="groupuniqarray-x-groupuniqarray-max-size-x">groupUniqArray(x), groupUniqArray(max_size)(x)<a class="headerlink" href="#groupuniqarray-x-groupuniqarray-max-size-x" title="Permanent link">&para;</a></h2>
<p>Creates an array from different argument values. Memory consumption is the same as for the <code>uniqExact</code> function.</p>
<p>The second version (with the <code>max_size</code> parameter) limits the size of the resulting array to <code>max_size</code> elements.
For example, <code>groupUniqArray(1)(x)</code> is equivalent to <code>[any(x)]</code>.</p>
<h2 id="agg_function-quantile">quantile(level)(x)<a class="headerlink" href="#agg_function-quantile" title="Permanent link">&para;</a></h2>
<p>Approximates the <code>level</code> quantile. <code>level</code> is a constant, a floating-point number from 0 to 1.
We recommend using a <code>level</code> value in the range of <code>[0.01, 0.99]</code>
Don't use a <code>level</code> value equal to 0 or 1 – use the <code>min</code> and <code>max</code> functions for these cases.</p>
<p>In this function, as well as in all functions for calculating quantiles, the <code>level</code> parameter can be omitted. In this case, it is assumed to be equal to 0.5 (in other words, the function will calculate the median).</p>
<p>Works for numbers, dates, and dates with times.
Returns: for numbers – <code>Float64</code>; for dates – a date; for dates with times – a date with time.</p>
<p>Uses <a href="https://en.wikipedia.org/wiki/Reservoir_sampling" rel="external nofollow">reservoir sampling</a> with a reservoir size up to 8192.
If necessary, the result is output with linear approximation from the two neighboring values.
This algorithm provides very low accuracy. See also: <code>quantileTiming</code>, <code>quantileTDigest</code>, <code>quantileExact</code>.</p>
<p>The result depends on the order of running the query, and is nondeterministic.</p>
<p>When using multiple <code>quantile</code> (and similar) functions with different levels in a query, the internal states are not combined (that is, the query works less efficiently than it could). In this case, use the <code>quantiles</code> (and similar) functions.</p>
<h2 id="quantiledeterministic-level-x-determinator">quantileDeterministic(level)(x, determinator)<a class="headerlink" href="#quantiledeterministic-level-x-determinator" title="Permanent link">&para;</a></h2>
<p>Works the same way as the <code>quantile</code> function, but the result is deterministic and does not depend on the order of query execution.</p>
<p>To achieve this, the function takes a second argument – the "determinator". This is a number whose hash is used instead of a random number generator in the reservoir sampling algorithm. For the function to work correctly, the same determinator value should not occur too often. For the determinator, you can use an event ID, user ID, and so on.</p>
<p>Don't use this function for calculating timings. There is a more suitable function for this purpose: <code>quantileTiming</code>.</p>
<h2 id="agg_function-quantiletiming">quantileTiming<a class="headerlink" href="#agg_function-quantiletiming" title="Permanent link">&para;</a></h2>
<p>Computes the quantile of the specified level with determined precision. The function is intended for calculating page loading time quantiles in milliseconds. </p>
<div class="codehilite"><pre><span></span><span class="n">quantileTiming</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<ul>
<li><code>level</code> — Quantile level. Range: [0, 1].</li>
<li>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Expression</a> returning a <a href="../../../data_types/float/">Float*</a>-type number. The function expects input values in unix timestamp format in milliseconds, but it doesn't validate format.</p>
<ul>
<li>If negative values are passed to the function, the behavior is undefined.</li>
<li>If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</li>
</ul>
</li>
</ul>
<p><strong>Accuracy</strong></p>
<p>The calculation is accurate if:</p>
<ul>
<li>Total number of values doesn't exceed 5670.</li>
<li>Total number of values exceeds 5670, but the page loading time is less than 1024ms.</li>
</ul>
<p>Otherwise, the result of the calculation is rounded to the nearest multiple of 16 ms.</p>
<p>!! note "Note"
    For calculating page loading time quantiles, this function is more effective and accurate than <a href="#agg_function-quantile">quantile</a>.</p>
<p><strong>Returned value</strong></p>
<ul>
<li>Quantile of the specified level.</li>
</ul>
<p>Type: <code>Float32</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If no values are passed to the function (when using <code>quantileTimingIf</code>), <a href="../../../data_types/float/#data_type-float-nan-inf">NaN</a> is returned. The purpose of this is to differentiate these cases from cases that result in zero. See <a href="../../select/#select-order-by">ORDER BY clause</a> for notes on sorting <code>NaN</code> values.</p>
</div>
<p>The result is deterministic (it doesn't depend on the query processing order).</p>
<p><strong>Example</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">quantileTiming</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)(</span><span class="nb">number</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─quantileTiming(0.5)(divide(number, 2))─┐
│                                      2 │
└────────────────────────────────────────┘
</pre></div>


<h2 id="quantiletimingweighted-level-x-weight">quantileTimingWeighted(level)(x, weight)<a class="headerlink" href="#quantiletimingweighted-level-x-weight" title="Permanent link">&para;</a></h2>
<p>Differs from the <code>quantileTiming</code> function in that it has a second argument, "weights". Weight is a non-negative integer.
The result is calculated as if the <code>x</code> value were passed <code>weight</code> number of times to the <code>quantileTiming</code> function.</p>
<h2 id="quantileexact-level-x">quantileExact(level)(x)<a class="headerlink" href="#quantileexact-level-x" title="Permanent link">&para;</a></h2>
<p>Computes the quantile of 'level' exactly. To do this, all the passed values ​​are combined into an array, which is then partially sorted. Therefore, the function consumes O(n) memory, where 'n' is the number of values that were passed. However, for a small number of values, the function is very effective.</p>
<h2 id="quantileexactweighted-level-x-weight">quantileExactWeighted(level)(x, weight)<a class="headerlink" href="#quantileexactweighted-level-x-weight" title="Permanent link">&para;</a></h2>
<p>Computes the quantile of 'level' exactly. In addition, each value is counted with its weight, as if it is present 'weight' times. The arguments of the function can be considered as histograms, where the value 'x' corresponds to a histogram "column" of the height 'weight', and the function itself can be considered as a summation of histograms.</p>
<p>A hash table is used as the algorithm. Because of this, if the passed values ​​are frequently repeated, the function consumes less RAM than <code>quantileExact</code>. You can use this function instead of <code>quantileExact</code> and specify the weight as 1.</p>
<h2 id="quantiletdigest-level-x">quantileTDigest(level)(x)<a class="headerlink" href="#quantiletdigest-level-x" title="Permanent link">&para;</a></h2>
<p>Approximates the quantile level using the <a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf" rel="external nofollow">t-digest</a> algorithm. The maximum error is 1%. Memory consumption by State is proportional to the logarithm of the number of passed values.</p>
<p>The performance of the function is lower than for <code>quantile</code> or <code>quantileTiming</code>. In terms of the ratio of State size to precision, this function is much better than <code>quantile</code>.</p>
<p>The result depends on the order of running the query, and is nondeterministic.</p>
<h2 id="median-x">median(x)<a class="headerlink" href="#median-x" title="Permanent link">&para;</a></h2>
<p>All the quantile functions have corresponding median functions: <code>median</code>, <code>medianDeterministic</code>, <code>medianTiming</code>, <code>medianTimingWeighted</code>, <code>medianExact</code>, <code>medianExactWeighted</code>, <code>medianTDigest</code>. They are synonyms and their behavior is identical.</p>
<h2 id="quantiles-level1-level2-x">quantiles(level1, level2, ...)(x)<a class="headerlink" href="#quantiles-level1-level2-x" title="Permanent link">&para;</a></h2>
<p>All the quantile functions also have corresponding quantiles functions: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. These functions calculate all the quantiles of the listed levels in one pass, and return an array of the resulting values.</p>
<h2 id="varsamp-x">varSamp(x)<a class="headerlink" href="#varsamp-x" title="Permanent link">&para;</a></h2>
<p>Calculates the amount <code>Σ((x - x̅)^2) / (n - 1)</code>, where <code>n</code> is the sample size and <code>x̅</code>is the average value of <code>x</code>.</p>
<p>It represents an unbiased estimate of the variance of a random variable if passed values form its sample.</p>
<p>Returns <code>Float64</code>. When <code>n &lt;= 1</code>, returns <code>+∞</code>.</p>
<h2 id="varpop-x">varPop(x)<a class="headerlink" href="#varpop-x" title="Permanent link">&para;</a></h2>
<p>Calculates the amount <code>Σ((x - x̅)^2) / n</code>, where <code>n</code> is the sample size and <code>x̅</code>is the average value of <code>x</code>.</p>
<p>In other words, dispersion for a set of values. Returns <code>Float64</code>.</p>
<h2 id="stddevsamp-x">stddevSamp(x)<a class="headerlink" href="#stddevsamp-x" title="Permanent link">&para;</a></h2>
<p>The result is equal to the square root of <code>varSamp(x)</code>.</p>
<h2 id="stddevpop-x">stddevPop(x)<a class="headerlink" href="#stddevpop-x" title="Permanent link">&para;</a></h2>
<p>The result is equal to the square root of <code>varPop(x)</code>.</p>
<h2 id="topk-n-column">topK(N)(column)<a class="headerlink" href="#topk-n-column" title="Permanent link">&para;</a></h2>
<p>Returns an array of the most frequent values in the specified column. The resulting array is sorted in descending order of frequency of values (not by the values themselves).</p>
<p>Implements the <a href="http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf" rel="external nofollow"> Filtered Space-Saving</a> algorithm for analyzing TopK, based on the reduce-and-combine algorithm from <a href="https://arxiv.org/pdf/1401.0702.pdf" rel="external nofollow">Parallel Space Saving</a>.</p>
<div class="codehilite"><pre><span></span><span class="n">topK</span><span class="p">(</span><span class="n">N</span><span class="p">)(</span><span class="k">column</span><span class="p">)</span>
</pre></div>


<p>This function doesn't provide a guaranteed result. In certain situations, errors might occur and it might return frequent values that aren't the most frequent values.</p>
<p>We recommend using the <code>N &lt; 10</code> value; performance is reduced with large <code>N</code> values. Maximum value of <code>N = 65536</code>.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>'N' is the number of values.</li>
<li>' x ' – The column.</li>
</ul>
<p><strong>Example</strong></p>
<p>Take the <a href="../../../getting_started/example_datasets/ontime/">OnTime</a> data set and select the three most frequently occurring values in the <code>AirlineID</code> column.</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">topK</span><span class="p">(</span><span class="mi">3</span><span class="p">)(</span><span class="n">AirlineID</span><span class="p">)</span> <span class="k">AS</span> <span class="n">res</span>
<span class="k">FROM</span> <span class="n">ontime</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─res─────────────────┐
│ [19393,19790,19805] │
└─────────────────────┘
</pre></div>


<h2 id="covarsamp-x-y">covarSamp(x, y)<a class="headerlink" href="#covarsamp-x-y" title="Permanent link">&para;</a></h2>
<p>Calculates the value of <code>Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p>
<p>Returns Float64. When <code>n &lt;= 1</code>, returns +∞.</p>
<h2 id="covarpop-x-y">covarPop(x, y)<a class="headerlink" href="#covarpop-x-y" title="Permanent link">&para;</a></h2>
<p>Calculates the value of <code>Σ((x - x̅)(y - y̅)) / n</code>.</p>
<h2 id="corr-x-y">corr(x, y)<a class="headerlink" href="#corr-x-y" title="Permanent link">&para;</a></h2>
<p>Calculates the Pearson correlation coefficient: <code>Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p>
<h2 id="simplelinearregression">simpleLinearRegression<a class="headerlink" href="#simplelinearregression" title="Permanent link">&para;</a></h2>
<p>Performs simple (unidimensional) linear regression.</p>
<div class="codehilite"><pre><span></span><span class="n">simpleLinearRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>


<p>Parameters:</p>
<ul>
<li><code>x</code> — Column with dependent variable values.</li>
<li><code>y</code> — Column with explanatory variable values.</li>
</ul>
<p>Returned values:</p>
<p>Constants <code>(a, b)</code> of the resulting line <code>y = a*x + b</code>.</p>
<p><strong>Examples</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">arrayReduce</span><span class="p">(</span><span class="s1">&#39;simpleLinearRegression&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">arrayReduce</span><span class="p">(</span><span class="s1">&#39;simpleLinearRegression&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</pre></div>


<h2 id="agg_functions-stochasticlinearregression">stochasticLinearRegression<a class="headerlink" href="#agg_functions-stochasticlinearregression" title="Permanent link">&para;</a></h2>
<p>This function implements stochastic linear regression. It supports custom parameters for learning rate, L2 regularization coefficient, mini-batch size and has few methods for updating weights (<a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam" rel="external nofollow">Adam</a> (used by default), <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent" rel="external nofollow">simple SGD</a>, <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum" rel="external nofollow">Momentum</a>, <a href="https://mipt.ru/upload/medialibrary/d7e/41-91.pdf" rel="external nofollow">Nesterov</a>).</p>
<h3 id="agg_functions-stochasticlinearregression-parameters">Parameters<a class="headerlink" href="#agg_functions-stochasticlinearregression-parameters" title="Permanent link">&para;</a></h3>
<p>There are 4 customizable parameters. They are passed to the function sequentially, but there is no need to pass all four - default values will be used, however good model required some parameter tuning.</p>
<div class="codehilite"><pre><span></span>stochasticLinearRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</pre></div>


<ol>
<li><code>learning rate</code> is the coefficient on step length, when gradient descent step is performed. Too big learning rate may cause infinite weights of the model. Default is <code>0.00001</code>.</li>
<li><code>l2 regularization coefficient</code> which may help to prevent overfitting. Default is <code>0.1</code>.</li>
<li><code>mini-batch size</code> sets the number of elements, which gradients will be computed and summed to perform one step of gradient descent. Pure stochastic descent uses one element, however having small batches(about 10 elements) make gradient steps more stable. Default is <code>15</code>.</li>
<li><code>method for updating weights</code>, they are: <code>Adam</code> (by default), <code>SGD</code>, <code>Momentum</code>, <code>Nesterov</code>. <code>Momentum</code> and <code>Nesterov</code> require little bit more computations and memory, however they happen to be useful in terms of speed of convergance and stability of stochastic gradient methods.</li>
</ol>
<h3 id="agg_functions-stochasticlinearregression-usage">Usage<a class="headerlink" href="#agg_functions-stochasticlinearregression-usage" title="Permanent link">&para;</a></h3>
<p><code>stochasticLinearRegression</code> is used in two steps: fitting the model and predicting on new data. In order to fit the model and save its state for later usage we use <code>-State</code> combinator, which basically saves the state (model weights, etc).
To predict we use function <a href="../../functions/machine_learning_functions/#machine_learning_methods-evalmlmethod">evalMLMethod</a>, which takes a state as an argument as well as features to predict on.</p>
<p><a name="stochasticlinearregression-usage-fitting"></a>
1. Fitting</p>
<div class="codehilite"><pre><span></span><span class="n">Such</span> <span class="n">query</span> <span class="n">may</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>

<span class="ss">```sql</span>
<span class="ss">CREATE TABLE IF NOT EXISTS train_data</span>
<span class="ss">(</span>
<span class="ss">    param1 Float64,</span>
<span class="ss">    param2 Float64,</span>
<span class="ss">    target Float64</span>
<span class="ss">) ENGINE = Memory;</span>

<span class="ss">CREATE TABLE your_model ENGINE = Memory AS SELECT</span>
<span class="ss">stochasticLinearRegressionState(0.1, 0.0, 5, &#39;SGD&#39;)(target, param1, param2)</span>
<span class="ss">AS state FROM train_data;</span>

<span class="ss">```</span>

<span class="n">Here</span> <span class="n">we</span> <span class="n">also</span> <span class="n">need</span> <span class="k">to</span> <span class="k">insert</span> <span class="n">data</span> <span class="k">into</span> <span class="ss">`train_data`</span> <span class="k">table</span><span class="p">.</span> <span class="n">The</span> <span class="n">number</span> <span class="n">of</span> <span class="n">parameters</span> <span class="k">is</span> <span class="k">not</span> <span class="n">fixed</span><span class="p">,</span> <span class="n">it</span> <span class="n">depends</span> <span class="n">only</span> <span class="k">on</span> <span class="n">number</span> <span class="n">of</span> <span class="n">arguments</span><span class="p">,</span> <span class="n">passed</span> <span class="k">into</span> <span class="ss">`linearRegressionState`</span><span class="p">.</span> <span class="n">They</span> <span class="k">all</span> <span class="n">must</span> <span class="n">be</span> <span class="kt">numeric</span> <span class="k">values</span><span class="p">.</span>
<span class="n">Note</span> <span class="n">that</span> <span class="n">the</span> <span class="k">column</span> <span class="k">with</span> <span class="n">target</span> <span class="nf">value</span><span class="p">(</span><span class="n">which</span> <span class="n">we</span> <span class="n">would</span> <span class="k">like</span> <span class="k">to</span> <span class="n">learn</span> <span class="k">to</span> <span class="n">predict</span><span class="p">)</span> <span class="k">is</span> <span class="n">inserted</span> <span class="k">as</span> <span class="n">the</span> <span class="n">first</span> <span class="n">argument</span><span class="p">.</span>
</pre></div>


<ol>
<li>
<p>Predicting</p>
<p>After saving a state into the table, we may use it multiple times for prediction, or even merge with other states and create new even better models.</p>
<p><code>sql
WITH (SELECT state FROM your_model) AS model SELECT
evalMLMethod(model, param1, param2) FROM test_data</code></p>
<p>The query will return a column of predicted values. Note that first argument of <code>evalMLMethod</code> is <code>AggregateFunctionState</code> object, next are columns of features.</p>
<p><code>test_data</code> is a table like <code>train_data</code> but may not contain target value.</p>
</li>
</ol>
<h3 id="agg_functions-stochasticlinearregression-notes">Notes<a class="headerlink" href="#agg_functions-stochasticlinearregression-notes" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>To merge two models user may create such query:
    <code>sql
    SELECT state1 + state2 FROM your_models</code>
    where <code>your_models</code> table contains both models. This query will return new <code>AggregateFunctionState</code> object.</p>
</li>
<li>
<p>User may fetch weights of the created model for its own purposes without saving the model if no <code>-State</code> combinator is used.
    <code>sql
    SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code>
    Such query will fit the model and return its weights - first are weights, which correspond to the parameters of the model, the last one is bias. So in the example above the query will return a column with 3 values.</p>
</li>
</ol>
<p><strong>See Also</strong></p>
<ul>
<li><a href="#agg_functions-stochasticlogisticregression">stochasticLogisticRegression</a></li>
<li><a href="https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression" rel="external nofollow">Difference between linear and logistic regressions</a></li>
</ul>
<h2 id="agg_functions-stochasticlogisticregression">stochasticLogisticRegression<a class="headerlink" href="#agg_functions-stochasticlogisticregression" title="Permanent link">&para;</a></h2>
<p>This function implements stochastic logistic regression. It can be used for binary classification problem, supports the same custom parameters as stochasticLinearRegression and works the same way.</p>
<h3 id="agg_functions-stochasticlogisticregression-parameters">Parameters<a class="headerlink" href="#agg_functions-stochasticlogisticregression-parameters" title="Permanent link">&para;</a></h3>
<p>Parameters are exactly the same as in stochasticLinearRegression:
<code>learning rate</code>, <code>l2 regularization coefficient</code>, <code>mini-batch size</code>, <code>method for updating weights</code>.
For more information see <a href="#agg_functions-stochasticlinearregression-parameters">parameters</a>.</p>
<div class="codehilite"><pre><span></span>stochasticLogisticRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</pre></div>


<ol>
<li>
<p>Fitting</p>
<p>See the <code>Fitting</code> section in the <a href="#stochasticlinearregression-usage-fitting">stochasticLinearRegression</a> description.</p>
<p>Predicted labels have to be in [-1, 1].</p>
</li>
<li>
<p>Predicting</p>
<p>Using saved state we can predict probability of object having label <code>1</code>.</p>
<p><code>sql
WITH (SELECT state FROM your_model) AS model SELECT
evalMLMethod(model, param1, param2) FROM test_data</code></p>
<p>The query will return a column of probabilities. Note that first argument of <code>evalMLMethod</code> is <code>AggregateFunctionState</code> object, next are columns of features.</p>
<p>We can also set a bound of probability, which assigns elements to different labels.</p>
<p><code>sql
SELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM
(WITH (SELECT state FROM your_model) AS model SELECT
evalMLMethod(model, param1, param2) AS ans FROM test_data)</code></p>
<p>Then the result will be labels.</p>
<p><code>test_data</code> is a table like <code>train_data</code> but may not contain target value.</p>
</li>
</ol>
<p><strong>See Also</strong></p>
<ul>
<li><a href="#agg_functions-stochasticlinearregression">stochasticLinearRegression</a></li>
<li><a href="https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression" rel="external nofollow">Difference between linear and logistic regressions.</a></li>
</ul>
                
                </div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../query_language/agg_functions/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  قبلی
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../query_language/agg_functions/combinators/" title="Aggregate function combinators" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  بعدی
                </span>
                Aggregate function combinators
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2016–2020 Yandex LLC
          </div>
        
      </div>
      
        <div class="md-footer-social">
  <span class="md-footer-copyright__highlight">Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/69ad5cf04e2d78bb10ce6a3091341fa8ba769a8e" rel="external nofollow">69ad5cf</a></span>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      
        <script src="../../../assets/javascripts/modernizr.js"></script>
      
      <script src="../../../assets/javascripts/application.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../../assets/javascripts/lunr/lunr.fa.js"></script>
            
          
          
            <script src="../../../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      
    
    
      
    

    <script type="text/javascript">
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'fa';
            }
          )
      });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:fa"]
},
debug: false
});
</script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/18343495" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>