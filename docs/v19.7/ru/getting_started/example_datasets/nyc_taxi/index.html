



<!DOCTYPE html>
<html lang="ru" class="no-js" data-version="v19.7" data-single-page="false">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://clickhouse.yandex/docs/ru/getting_started/example_datasets/nyc_taxi/">
      
      
      
      <meta name="lang:clipboard.copy" content="Копировать в буфер">
      
      <meta name="lang:clipboard.copied" content="Скопировано в буфер">
      
      <meta name="lang:search.language" content="ru">
      
      <meta name="lang:search.pipeline.stopwords" content="">
      
      <meta name="lang:search.pipeline.trimmer" content="">
      
      <meta name="lang:search.result.none" content="Совпадений не найдено">
      
      <meta name="lang:search.result.one" content="Найдено 1 совпадение">
      
      <meta name="lang:search.result.other" content="Найдено # совпадений">
      
      <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
    
    
      
        <title>Данные о такси в Нью-Йорке - Документация ClickHouse v19.7</title>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
      <link rel="stylesheet" href="../../../assets/stylesheets/application.2a88008a.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom.css?69ad5cf?1582277506">
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="white" class="md-lang-ru">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">

  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="/" title="Документация ClickHouse v19.7" class="md-header-nav__button md-logo">
          
            <img src="../../../images/logo.svg" width="40" height="40">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Документация ClickHouse v19.7
              </span>
              <span class="md-header-nav__topic">
                Данные о такси в Нью-Йорке
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" id="md-search__input" class="md-search__input" name="query" required placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Начните печатать для поиска
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div id="md-language-switch" class="md-header-nav__source">
            

  <a class="md-alt-lang"
     href="../../../../en/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../ru/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../fa/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      <nav class="md-nav md-nav--primary" data-md-level="0">
  
  <label class="md-nav__title md-nav__title--site" for="drawer">
    Документация ClickHouse v19.7
  </label>

  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Введение
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Введение
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../" title="Обзор" class="md-nav__link">
      Обзор
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/distinctive_features/" title="Отличительные возможности ClickHouse" class="md-nav__link">
      Отличительные возможности ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/features_considered_disadvantages/" title="Особенности ClickHouse, которые могут считаться недостатками" class="md-nav__link">
      Особенности ClickHouse, которые могут считаться недостатками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/performance/" title="Производительность" class="md-nav__link">
      Производительность
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/ya_metrika_task/" title="Постановка задачи в Яндекс.Метрике" class="md-nav__link">
      Постановка задачи в Яндекс.Метрике
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/info/" title="Информационная поддержка" class="md-nav__link">
      Информационная поддержка
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Начало работы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Начало работы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/" title="Установка и запуск" class="md-nav__link">
      Установка и запуск
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2">
      Тестовые наборы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Тестовые наборы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/ontime/" title="OnTime" class="md-nav__link">
      OnTime
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Данные о такси в Нью-Йорке
      </label>
    
    <a href="../../../getting_started/example_datasets/nyc_taxi/" title="Данные о такси в Нью-Йорке" class="md-nav__link md-nav__link--active">
      <strong>Данные о такси в Нью-Йорке</strong>
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kak-importirovat-syrye-dannye" title="Как импортировать сырые данные" class="md-nav__link">
    Как импортировать сырые данные
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skachivanie-gotovykh-partitsii" title="Скачивание готовых партиций" class="md-nav__link">
    Скачивание готовых партиций
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rezultaty-na-odnom-servere" title="Результаты на одном сервере" class="md-nav__link">
    Результаты на одном сервере
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reziume" title="Резюме" class="md-nav__link">
    Резюме
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/amplab_benchmark/" title="AMPLab Big Data Benchmark" class="md-nav__link">
      AMPLab Big Data Benchmark
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/wikistat/" title="WikiStat" class="md-nav__link">
      WikiStat
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/criteo/" title="Терабайт логов кликов от Criteo" class="md-nav__link">
      Терабайт логов кликов от Criteo
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/star_schema/" title="Схема «Звезда»" class="md-nav__link">
      Схема «Звезда»
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/metrica/" title="Данные Яндекс.Метрики" class="md-nav__link">
      Данные Яндекс.Метрики
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Интерфейсы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Интерфейсы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/cli/" title="Клиент командной строки" class="md-nav__link">
      Клиент командной строки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/tcp/" title="Нативный интерфейс (TCP)" class="md-nav__link">
      Нативный интерфейс (TCP)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/http/" title="HTTP-интерфейс" class="md-nav__link">
      HTTP-интерфейс
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/formats/" title="Форматы входных и выходных данных" class="md-nav__link">
      Форматы входных и выходных данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/jdbc/" title="JDBC-драйвер" class="md-nav__link">
      JDBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/odbc/" title="ODBC-драйвер" class="md-nav__link">
      ODBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8" type="checkbox" id="nav-3-8">
    
    <label class="md-nav__link" for="nav-3-8">
      От сторонних разработчиков
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        От сторонних разработчиков
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/client_libraries/" title="Клиентские библиотеки" class="md-nav__link">
      Клиентские библиотеки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/integrations/" title="Интеграции" class="md-nav__link">
      Интеграции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/gui/" title="Визуальные интерфейсы" class="md-nav__link">
      Визуальные интерфейсы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/proxy/" title="Прокси" class="md-nav__link">
      Прокси
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/int_uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="md-nav__link">
      UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/float/" title="Float32, Float64" class="md-nav__link">
      Float32, Float64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/decimal/" title="Decimal" class="md-nav__link">
      Decimal
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/boolean/" title="Булевы значения" class="md-nav__link">
      Булевы значения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/fixedstring/" title="FixedString(N)" class="md-nav__link">
      FixedString(N)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/uuid/" title="UUID" class="md-nav__link">
      UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/datetime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/array/" title="Array(T)" class="md-nav__link">
      Array(T)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/aggregatefunction/" title="AggregateFunction(name, types_of_arguments...)" class="md-nav__link">
      AggregateFunction(name, types_of_arguments...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/tuple/" title="Tuple(T1, T2, ...)" class="md-nav__link">
      Tuple(T1, T2, ...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nullable/" title="Nullable" class="md-nav__link">
      Nullable
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-16" type="checkbox" id="nav-4-16">
    
    <label class="md-nav__link" for="nav-4-16">
      Вложенные структуры данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-16">
        Вложенные структуры данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="md-nav__link">
      Nested(Name1 Type1, Name2 Type2, ...)
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-17" type="checkbox" id="nav-4-17">
    
    <label class="md-nav__link" for="nav-4-17">
      Служебные типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-17">
        Служебные типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/expression/" title="Expression" class="md-nav__link">
      Expression
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/nothing/" title="Nothing" class="md-nav__link">
      Nothing
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Движки таблиц
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Движки таблиц
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Семейство MergeTree
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Семейство MergeTree
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mergetree/" title="MergeTree" class="md-nav__link">
      MergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replication/" title="Репликация данных" class="md-nav__link">
      Репликация данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/custom_partitioning_key/" title="Произвольный ключ партиционирования" class="md-nav__link">
      Произвольный ключ партиционирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replacingmergetree/" title="ReplacingMergeTree" class="md-nav__link">
      ReplacingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/summingmergetree/" title="SummingMergeTree" class="md-nav__link">
      SummingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/aggregatingmergetree/" title="AggregatingMergeTree" class="md-nav__link">
      AggregatingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/collapsingmergetree/" title="CollapsingMergeTree" class="md-nav__link">
      CollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="md-nav__link">
      VersionedCollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/graphitemergetree/" title="GraphiteMergeTree" class="md-nav__link">
      GraphiteMergeTree
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Семейство Log
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Семейство Log
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log_family/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/stripelog/" title="StripeLog" class="md-nav__link">
      StripeLog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log/" title="Log" class="md-nav__link">
      Log
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/tinylog/" title="TinyLog" class="md-nav__link">
      TinyLog
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Интеграции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Интеграции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Особые
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        Особые
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/distributed/" title="Distributed" class="md-nav__link">
      Distributed
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/external_data/" title="Внешние данные" class="md-nav__link">
      Внешние данные
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/dictionary/" title="Dictionary" class="md-nav__link">
      Dictionary
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/merge/" title="Merge" class="md-nav__link">
      Merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/join/" title="Join" class="md-nav__link">
      Join
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/url/" title="URL" class="md-nav__link">
      URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/view/" title="View" class="md-nav__link">
      View
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/materializedview/" title="MaterializedView" class="md-nav__link">
      MaterializedView
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/buffer/" title="Buffer" class="md-nav__link">
      Buffer
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Справка по SQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Справка по SQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/select/" title="SELECT" class="md-nav__link">
      SELECT
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/insert_into/" title="INSERT INTO" class="md-nav__link">
      INSERT INTO
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/create/" title="CREATE" class="md-nav__link">
      CREATE
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/alter/" title="ALTER" class="md-nav__link">
      ALTER
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/misc/" title="Прочие виды запросов" class="md-nav__link">
      Прочие виды запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7">
    
    <label class="md-nav__link" for="nav-6-7">
      Функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        Функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/arithmetic_functions/" title="Арифметические функции" class="md-nav__link">
      Арифметические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/comparison_functions/" title="Функции сравнения" class="md-nav__link">
      Функции сравнения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/logical_functions/" title="Логические функции" class="md-nav__link">
      Логические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/type_conversion_functions/" title="Функции преобразования типов" class="md-nav__link">
      Функции преобразования типов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/date_time_functions/" title="Функции для работы с датами и временем" class="md-nav__link">
      Функции для работы с датами и временем
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_functions/" title="Функции для работы со строками" class="md-nav__link">
      Функции для работы со строками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_search_functions/" title="Функции поиска в строках" class="md-nav__link">
      Функции поиска в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_replace_functions/" title="Функции поиска и замены в строках" class="md-nav__link">
      Функции поиска и замены в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/conditional_functions/" title="Условные функции" class="md-nav__link">
      Условные функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/math_functions/" title="Математические функции" class="md-nav__link">
      Математические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/rounding_functions/" title="Функции округления" class="md-nav__link">
      Функции округления
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_functions/" title="Функции по работе с массивами" class="md-nav__link">
      Функции по работе с массивами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/splitting_merging_functions/" title="Функции разбиения и слияния строк и массивов" class="md-nav__link">
      Функции разбиения и слияния строк и массивов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bit_functions/" title="Битовые функции" class="md-nav__link">
      Битовые функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/hash_functions/" title="Функции хэширования" class="md-nav__link">
      Функции хэширования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/random_functions/" title="Функции генерации псевдослучайных чисел" class="md-nav__link">
      Функции генерации псевдослучайных чисел
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/uuid_functions/" title="Функции для работы с UUID" class="md-nav__link">
      Функции для работы с UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/encoding_functions/" title="Функции кодирования" class="md-nav__link">
      Функции кодирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/url_functions/" title="Функции для работы с URL" class="md-nav__link">
      Функции для работы с URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ip_address_functions/" title="Функции для работы с IP-адресами" class="md-nav__link">
      Функции для работы с IP-адресами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/json_functions/" title="Функции для работы с JSON." class="md-nav__link">
      Функции для работы с JSON.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/higher_order_functions/" title="Функции высшего порядка" class="md-nav__link">
      Функции высшего порядка
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ext_dict_functions/" title="Функции для работы с внешними словарями" class="md-nav__link">
      Функции для работы с внешними словарями
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ym_dict_functions/" title="Функции для работы со словарями Яндекс.Метрики" class="md-nav__link">
      Функции для работы со словарями Яндекс.Метрики
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/in_functions/" title="Функции для реализации оператора IN." class="md-nav__link">
      Функции для реализации оператора IN.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_join/" title="Функция arrayJoin" class="md-nav__link">
      Функция arrayJoin
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/geo/" title="Функции для работы с географическими координатами" class="md-nav__link">
      Функции для работы с географическими координатами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/functions_for_nulls/" title="Функции c Nullable агрументами" class="md-nav__link">
      Функции c Nullable агрументами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/other_functions/" title="Прочие функции" class="md-nav__link">
      Прочие функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-8" type="checkbox" id="nav-6-8">
    
    <label class="md-nav__link" for="nav-6-8">
      Агрегатные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-8">
        Агрегатные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/reference/" title="Справочник функций" class="md-nav__link">
      Справочник функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/combinators/" title="Комбинаторы агрегатных функций" class="md-nav__link">
      Комбинаторы агрегатных функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/parametric_functions/" title="Параметрические агрегатные функции" class="md-nav__link">
      Параметрические агрегатные функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9" type="checkbox" id="nav-6-9">
    
    <label class="md-nav__link" for="nav-6-9">
      Табличные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-9">
        Табличные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/file/" title="file" class="md-nav__link">
      file
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/merge/" title="merge" class="md-nav__link">
      merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/numbers/" title="numbers" class="md-nav__link">
      numbers
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/remote/" title="remote" class="md-nav__link">
      remote
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/url/" title="url" class="md-nav__link">
      url
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/jdbc/" title="jdbc" class="md-nav__link">
      jdbc
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10" type="checkbox" id="nav-6-10">
    
    <label class="md-nav__link" for="nav-6-10">
      Словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-10">
        Словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10-2" type="checkbox" id="nav-6-10-2">
    
    <label class="md-nav__link" for="nav-6-10-2">
      Внешние словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-10-2">
        Внешние словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts/" title="Общее описание" class="md-nav__link">
      Общее описание
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict/" title="Настройка внешнего словаря" class="md-nav__link">
      Настройка внешнего словаря
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_layout/" title="Хранение словарей в памяти" class="md-nav__link">
      Хранение словарей в памяти
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_lifetime/" title="Обновление словарей" class="md-nav__link">
      Обновление словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_sources/" title="Источники внешних словарей" class="md-nav__link">
      Источники внешних словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_structure/" title="Ключ и поля словаря" class="md-nav__link">
      Ключ и поля словаря
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/internal_dicts/" title="Встроенные словари" class="md-nav__link">
      Встроенные словари
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/operators/" title="Операторы" class="md-nav__link">
      Операторы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/syntax/" title="Общий синтаксис" class="md-nav__link">
      Общий синтаксис
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Эксплуатация
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Эксплуатация
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/requirements/" title="Требования" class="md-nav__link">
      Требования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/monitoring/" title="Мониторинг" class="md-nav__link">
      Мониторинг
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/troubleshooting/" title="Устранение неисправностей" class="md-nav__link">
      Устранение неисправностей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/tips/" title="Советы по эксплуатации" class="md-nav__link">
      Советы по эксплуатации
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/update/" title="Обновление ClickHouse" class="md-nav__link">
      Обновление ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/access_rights/" title="Права доступа" class="md-nav__link">
      Права доступа
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/backup/" title="Резервное копирование" class="md-nav__link">
      Резервное копирование
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/configuration_files/" title="Конфигурационные файлы" class="md-nav__link">
      Конфигурационные файлы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/quotas/" title="Квоты" class="md-nav__link">
      Квоты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/system_tables/" title="Системные таблицы" class="md-nav__link">
      Системные таблицы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-12" type="checkbox" id="nav-7-12">
    
    <label class="md-nav__link" for="nav-7-12">
      Конфигурационные параметры сервера
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-12">
        Конфигурационные параметры сервера
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/settings/" title="Серверные настройки" class="md-nav__link">
      Серверные настройки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-13" type="checkbox" id="nav-7-13">
    
    <label class="md-nav__link" for="nav-7-13">
      Настройки
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-13">
        Настройки
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/permissions_for_queries/" title="Разрешения на выполнение запросов" class="md-nav__link">
      Разрешения на выполнение запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/query_complexity/" title="Ограничения на сложность запроса" class="md-nav__link">
      Ограничения на сложность запроса
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings/" title="Настройки" class="md-nav__link">
      Настройки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings_profiles/" title="Профили настроек" class="md-nav__link">
      Профили настроек
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-14" type="checkbox" id="nav-7-14">
    
    <label class="md-nav__link" for="nav-7-14">
      Утилиты
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-14">
        Утилиты
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-copier/" title="clickhouse-copier" class="md-nav__link">
      clickhouse-copier
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-local/" title="clickhouse-local" class="md-nav__link">
      clickhouse-local
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      F.A.Q.
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        F.A.Q.
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../faq/general/" title="Общие вопросы" class="md-nav__link">
      Общие вопросы
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Разработка
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Разработка
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/architecture/" title="Обзор архитектуры ClickHouse" class="md-nav__link">
      Обзор архитектуры ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build/" title="Как собрать ClickHouse на Linux" class="md-nav__link">
      Как собрать ClickHouse на Linux
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build_osx/" title="Как собрать ClickHouse на Mac OS X" class="md-nav__link">
      Как собрать ClickHouse на Mac OS X
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/style/" title="Как писать код на C++" class="md-nav__link">
      Как писать код на C++
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/tests/" title="Как запустить тесты" class="md-nav__link">
      Как запустить тесты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/contrib/" title="Сторонние библиотеки" class="md-nav__link">
      Сторонние библиотеки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Что нового
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Что нового
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../security_changelog/" title="Security changelog" class="md-nav__link">
      Security changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
  </ul>
  

  <ul id="md-extra-nav" class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item md-nav__item--active">
      Релиз:
      <span class="md-selector">
        <select id="releases-selector">
          <option value="">последний</option>
          
            <option value="v20.1"
              
            >v20.1</option>
          
            <option value="v19.17"
              
            >v19.17</option>
          
            <option value="v19.16"
              
            >v19.16</option>
          
            <option value="v19.15"
              
            >v19.15</option>
          
            <option value="v19.14"
              
            >v19.14</option>
          
            <option value="v19.13"
              
            >v19.13</option>
          
            <option value="v19.11"
              
            >v19.11</option>
          
            <option value="v19.10"
              
            >v19.10</option>
          
            <option value="v19.9"
              
            >v19.9</option>
          
            <option value="v19.8"
              
            >v19.8</option>
          
            <option value="v19.7"
              
                selected="selected"
              
            >v19.7</option>
          
        </select><span id="releases-selector-after">&nbsp;▾</span>
      </span>
    </li>
    <li class="md-nav__item md-nav__item--active">
        
          <a href="../../../single/" class="md-nav__link md-nav__link--active">Одностраничная версия</a>
        
    </li>
    <li class="md-nav__item md-nav__item--active">
          <a href="../../../single/clickhouse_ru.pdf" class="md-nav__link md-nav__link--active">PDF версия</a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
      <a href="https://github.com/ClickHouse/ClickHouse/" rel="external nofollow" target="_blank" class="md-nav__link">
        Исходный код ClickHouse
      </a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
        <span id="md-sidebar-flags" class="md-nav__link">
        

  <a class="md-alt-lang"
     href="../../../../en/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../ru/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../fa/getting_started/example_datasets/nyc_taxi/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

        </span>
    </li>
  </ul>
</nav>
                    
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kak-importirovat-syrye-dannye" title="Как импортировать сырые данные" class="md-nav__link">
    Как импортировать сырые данные
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skachivanie-gotovykh-partitsii" title="Скачивание готовых партиций" class="md-nav__link">
    Скачивание готовых партиций
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rezultaty-na-odnom-servere" title="Результаты на одном сервере" class="md-nav__link">
    Результаты на одном сервере
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reziume" title="Резюме" class="md-nav__link">
    Резюме
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                    
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                    <a href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/getting_started/example_datasets/nyc_taxi.md" title="Редактировать страницу" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a>
                  
                
                
                <div id="content">
                
                  <h1 id="dannye-o-taksi-v-niu-iorke">Данные о такси в Нью-Йорке<a class="headerlink" href="#dannye-o-taksi-v-niu-iorke" title="Permanent link">&para;</a></h1>
<p>Этот датасет может быть получен двумя способами:</p>
<ul>
<li>импорт из сырых данных;</li>
<li>скачивание готовых партиций.</li>
</ul>
<h2 id="kak-importirovat-syrye-dannye">Как импортировать сырые данные<a class="headerlink" href="#kak-importirovat-syrye-dannye" title="Permanent link">&para;</a></h2>
<p>См. <a href="https://github.com/toddwschneider/nyc-taxi-data" rel="external nofollow">https://github.com/toddwschneider/nyc-taxi-data</a> и <a href="http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html" rel="external nofollow">http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html</a> для описания набора данных и инструкций по загрузке.</p>
<p>После скачивания получится порядка 227 Гб несжатых данных в CSV файлах. Скачивание занимает порядка часа на 1 Гбит соединении (параллельное скачивание с s3.amazonaws.com утилизирует как минимум половину гигабитного канала).
Некоторые файлы могут скачаться не полностью. Проверьте размеры файлов и скачайте повторно подозрительные.</p>
<p>Некоторые файлы могут содержать некорректные строки. Их можно скорректировать следующим образом:</p>
<div class="codehilite"><pre><span></span>sed -E <span class="s1">&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-02.csv &gt; data/yellow_tripdata_2010-02.csv_
sed -E <span class="s1">&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-03.csv &gt; data/yellow_tripdata_2010-03.csv_
mv data/yellow_tripdata_2010-02.csv_ data/yellow_tripdata_2010-02.csv
mv data/yellow_tripdata_2010-03.csv_ data/yellow_tripdata_2010-03.csv
</pre></div>


<p>Далее данные должны быть предобработаны в PostgreSQL. Будут сделаны выборки точек в полигонах (для установки соответствия точек на карте с районами Нью-Йорка) и объединение всех данных в одну денормализованную плоскую таблицу с помощью JOIN. Для этого потребуется установить PostgreSQL с поддержкой PostGIS.</p>
<p>При запуске <code>initialize_database.sh</code>, будьте осторожны и вручную перепроверьте, что все таблицы корректно создались.</p>
<p>Обработка каждого месяца данных в PostgreSQL занимает около 20-30 минут, в сумме порядка 48 часов.</p>
<p>Проверить количество загруженных строк можно следующим образом:</p>
<div class="codehilite"><pre><span></span><span class="n">time</span> <span class="n">psql</span> <span class="n">nyc</span><span class="o">-</span><span class="n">taxi</span><span class="o">-</span><span class="k">data</span> <span class="o">-</span><span class="k">c</span> <span class="ss">&quot;SELECT count(*) FROM trips;&quot;</span>
<span class="o">##</span>    <span class="k">count</span>
 <span class="mi">1298979494</span>
<span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>

<span class="nb">real</span>    <span class="mi">7</span><span class="n">m9</span><span class="p">.</span><span class="mi">164</span><span class="n">s</span>
</pre></div>


<p>(this is slightly more than 1.1 billion rows reported by Mark Litwintschik in a series of blog posts)</p>
<p>Данные в PostgreSQL занимают 370 Гб.</p>
<p>Экспорт данных из PostgreSQL:</p>
<div class="codehilite"><pre><span></span><span class="k">COPY</span>
<span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">trips</span><span class="p">.</span><span class="n">id</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">vendor_id</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">pickup_datetime</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">dropoff_datetime</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">store_and_fwd_flag</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">rate_code_id</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">pickup_longitude</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">pickup_latitude</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">dropoff_longitude</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">dropoff_latitude</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">passenger_count</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">trip_distance</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">fare_amount</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">extra</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">mta_tax</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">tip_amount</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">tolls_amount</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">ehail_fee</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">improvement_surcharge</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">total_amount</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">payment_type</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">trip_type</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">pickup</span><span class="p">,</span>
           <span class="n">trips</span><span class="p">.</span><span class="n">dropoff</span><span class="p">,</span>

           <span class="n">cab_types</span><span class="p">.</span><span class="k">type</span> <span class="n">cab_type</span><span class="p">,</span>

           <span class="n">weather</span><span class="p">.</span><span class="n">precipitation_tenths_of_mm</span> <span class="n">rain</span><span class="p">,</span>
           <span class="n">weather</span><span class="p">.</span><span class="n">snow_depth_mm</span><span class="p">,</span>
           <span class="n">weather</span><span class="p">.</span><span class="n">snowfall_mm</span><span class="p">,</span>
           <span class="n">weather</span><span class="p">.</span><span class="n">max_temperature_tenths_degrees_celsius</span> <span class="n">max_temp</span><span class="p">,</span>
           <span class="n">weather</span><span class="p">.</span><span class="n">min_temperature_tenths_degrees_celsius</span> <span class="n">min_temp</span><span class="p">,</span>
           <span class="n">weather</span><span class="p">.</span><span class="n">average_wind_speed_tenths_of_meters_per_second</span> <span class="n">wind</span><span class="p">,</span>

           <span class="n">pick_up</span><span class="p">.</span><span class="n">gid</span> <span class="n">pickup_nyct2010_gid</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">ctlabel</span> <span class="n">pickup_ctlabel</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">borocode</span> <span class="n">pickup_borocode</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">boroname</span> <span class="n">pickup_boroname</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">ct2010</span> <span class="n">pickup_ct2010</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">boroct2010</span> <span class="n">pickup_boroct2010</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">cdeligibil</span> <span class="n">pickup_cdeligibil</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">ntacode</span> <span class="n">pickup_ntacode</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">ntaname</span> <span class="n">pickup_ntaname</span><span class="p">,</span>
           <span class="n">pick_up</span><span class="p">.</span><span class="n">puma</span> <span class="n">pickup_puma</span><span class="p">,</span>

           <span class="n">drop_off</span><span class="p">.</span><span class="n">gid</span> <span class="n">dropoff_nyct2010_gid</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">ctlabel</span> <span class="n">dropoff_ctlabel</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">borocode</span> <span class="n">dropoff_borocode</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">boroname</span> <span class="n">dropoff_boroname</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">ct2010</span> <span class="n">dropoff_ct2010</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">boroct2010</span> <span class="n">dropoff_boroct2010</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">cdeligibil</span> <span class="n">dropoff_cdeligibil</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">ntacode</span> <span class="n">dropoff_ntacode</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">ntaname</span> <span class="n">dropoff_ntaname</span><span class="p">,</span>
           <span class="n">drop_off</span><span class="p">.</span><span class="n">puma</span> <span class="n">dropoff_puma</span>
    <span class="k">FROM</span> <span class="n">trips</span>
    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">cab_types</span>
        <span class="k">ON</span> <span class="n">trips</span><span class="p">.</span><span class="n">cab_type_id</span> <span class="o">=</span> <span class="n">cab_types</span><span class="p">.</span><span class="n">id</span>
    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">central_park_weather_observations_raw</span> <span class="n">weather</span>
        <span class="k">ON</span> <span class="n">weather</span><span class="p">.</span><span class="nb">date</span> <span class="o">=</span> <span class="n">trips</span><span class="p">.</span><span class="n">pickup_datetime</span><span class="p">::</span><span class="nb">date</span>
    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">nyct2010</span> <span class="n">pick_up</span>
        <span class="k">ON</span> <span class="n">pick_up</span><span class="p">.</span><span class="n">gid</span> <span class="o">=</span> <span class="n">trips</span><span class="p">.</span><span class="n">pickup_nyct2010_gid</span>
    <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">nyct2010</span> <span class="n">drop_off</span>
        <span class="k">ON</span> <span class="n">drop_off</span><span class="p">.</span><span class="n">gid</span> <span class="o">=</span> <span class="n">trips</span><span class="p">.</span><span class="n">dropoff_nyct2010_gid</span>
<span class="p">)</span> <span class="k">TO</span> <span class="s1">&#39;/opt/milovidov/nyc-taxi-data/trips.tsv&#39;</span><span class="p">;</span>
</pre></div>


<p>Слепок данных создается со скоростью около 50 Мб в секунду. Во время создания слепка, PostgreSQL читает с диска со скоростью около 28 Мб в секунду.
Это занимает около 5 часов. Результирующий tsv файл имеет размер в 590612904969 байт.</p>
<p>Создание временной таблицы в ClickHouse:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">trips</span>
<span class="p">(</span>
<span class="n">trip_id</span>                 <span class="n">UInt32</span><span class="p">,</span>
<span class="n">vendor_id</span>               <span class="n">String</span><span class="p">,</span>
<span class="n">pickup_datetime</span>         <span class="n">DateTime</span><span class="p">,</span>
<span class="n">dropoff_datetime</span>        <span class="k">Nullable</span><span class="p">(</span><span class="n">DateTime</span><span class="p">),</span>
<span class="n">store_and_fwd_flag</span>      <span class="k">Nullable</span><span class="p">(</span><span class="n">FixedString</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
<span class="n">rate_code_id</span>            <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">pickup_longitude</span>        <span class="k">Nullable</span><span class="p">(</span><span class="n">Float64</span><span class="p">),</span>
<span class="n">pickup_latitude</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">Float64</span><span class="p">),</span>
<span class="n">dropoff_longitude</span>       <span class="k">Nullable</span><span class="p">(</span><span class="n">Float64</span><span class="p">),</span>
<span class="n">dropoff_latitude</span>        <span class="k">Nullable</span><span class="p">(</span><span class="n">Float64</span><span class="p">),</span>
<span class="n">passenger_count</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">trip_distance</span>           <span class="k">Nullable</span><span class="p">(</span><span class="n">Float64</span><span class="p">),</span>
<span class="n">fare_amount</span>             <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">extra</span>                   <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">mta_tax</span>                 <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">tip_amount</span>              <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">tolls_amount</span>            <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">ehail_fee</span>               <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">improvement_surcharge</span>   <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">total_amount</span>            <span class="k">Nullable</span><span class="p">(</span><span class="n">Float32</span><span class="p">),</span>
<span class="n">payment_type</span>            <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">trip_type</span>               <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">pickup</span>                  <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff</span>                 <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">cab_type</span>                <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">precipitation</span>           <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">snow_depth</span>              <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">snowfall</span>                <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">max_temperature</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">min_temperature</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">average_wind_speed</span>      <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">pickup_nyct2010_gid</span>     <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">pickup_ctlabel</span>          <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">pickup_borocode</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">pickup_boroname</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">pickup_ct2010</span>           <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">pickup_boroct2010</span>       <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">pickup_cdeligibil</span>       <span class="k">Nullable</span><span class="p">(</span><span class="n">FixedString</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
<span class="n">pickup_ntacode</span>          <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">pickup_ntaname</span>          <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">pickup_puma</span>             <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_nyct2010_gid</span>    <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">dropoff_ctlabel</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_borocode</span>        <span class="k">Nullable</span><span class="p">(</span><span class="n">UInt8</span><span class="p">),</span>
<span class="n">dropoff_boroname</span>        <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_ct2010</span>          <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_boroct2010</span>      <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_cdeligibil</span>      <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_ntacode</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_ntaname</span>         <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">),</span>
<span class="n">dropoff_puma</span>            <span class="k">Nullable</span><span class="p">(</span><span class="n">String</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Log</span><span class="p">;</span>
</pre></div>


<p>Она нужна для преобразование полей к более правильным типам данных и, если возможно, чтобы избавиться от NULL'ов.</p>
<div class="codehilite"><pre><span></span><span class="n">time</span> <span class="n">clickhouse</span><span class="o">-</span><span class="n">client</span> <span class="c1">--query=&quot;INSERT INTO trips FORMAT TabSeparated&quot; &lt; trips.tsv</span>

<span class="nb">real</span>    <span class="mi">75</span><span class="n">m56</span><span class="p">.</span><span class="mi">214</span><span class="n">s</span>
</pre></div>


<p>Данные читаются со скоростью 112-140 Мб в секунду.
Загрузка данных в таблицу типа Log в один поток заняла 76 минут.
Данные в этой таблице занимают 142 Гб.</p>
<p>(Импорт данных напрямую из Postgres также возможен с использованием <code>COPY ... TO PROGRAM</code>.)</p>
<p>К сожалению, все поля, связанные с погодой (precipitation...average_wind_speed) заполнены NULL. Из-за этого мы исключим их из финального набора данных.</p>
<p>Для начала мы создадим таблицу на одном сервере. Позже мы сделаем таблицу распределенной.</p>
<p>Создадим и заполним итоговую таблицу:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">trips_mergetree</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">MergeTree</span><span class="p">(</span><span class="n">pickup_date</span><span class="p">,</span> <span class="n">pickup_datetime</span><span class="p">,</span> <span class="mi">8192</span><span class="p">)</span>
<span class="k">AS</span> <span class="k">SELECT</span>

<span class="n">trip_id</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">(</span><span class="n">vendor_id</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39;1&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;CMT&#39;</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;VTS&#39;</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;DDS&#39;</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;B02512&#39;</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;B02598&#39;</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;B02617&#39;</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;B02682&#39;</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;B02764&#39;</span> <span class="o">=</span> <span class="mi">14</span><span class="p">))</span> <span class="k">AS</span> <span class="n">vendor_id</span><span class="p">,</span>
<span class="n">toDate</span><span class="p">(</span><span class="n">pickup_datetime</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_date</span><span class="p">,</span>
<span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_datetime</span><span class="p">,</span> <span class="n">toDateTime</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup_datetime</span><span class="p">,</span>
<span class="n">toDate</span><span class="p">(</span><span class="n">dropoff_datetime</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_date</span><span class="p">,</span>
<span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_datetime</span><span class="p">,</span> <span class="n">toDateTime</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff_datetime</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">store_and_fwd_flag</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span> <span class="k">AS</span> <span class="n">store_and_fwd_flag</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">rate_code_id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">rate_code_id</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">pickup_longitude</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_longitude</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">pickup_latitude</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_latitude</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">dropoff_longitude</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_longitude</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">dropoff_latitude</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_latitude</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">passenger_count</span><span class="p">)</span> <span class="k">AS</span> <span class="n">passenger_count</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">trip_distance</span><span class="p">)</span> <span class="k">AS</span> <span class="n">trip_distance</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">fare_amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">fare_amount</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">extra</span><span class="p">)</span> <span class="k">AS</span> <span class="n">extra</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">mta_tax</span><span class="p">)</span> <span class="k">AS</span> <span class="n">mta_tax</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">tip_amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">tip_amount</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">tolls_amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">tolls_amount</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">ehail_fee</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ehail_fee</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">improvement_surcharge</span><span class="p">)</span> <span class="k">AS</span> <span class="n">improvement_surcharge</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">total_amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total_amount</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">((</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">payment_type</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pt</span><span class="p">)</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;CSH&#39;</span><span class="p">,</span> <span class="s1">&#39;CASH&#39;</span><span class="p">,</span> <span class="s1">&#39;Cash&#39;</span><span class="p">,</span> <span class="s1">&#39;CAS&#39;</span><span class="p">,</span> <span class="s1">&#39;Cas&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;CSH&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="n">pt</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;CRD&#39;</span><span class="p">,</span> <span class="s1">&#39;Credit&#39;</span><span class="p">,</span> <span class="s1">&#39;Cre&#39;</span><span class="p">,</span> <span class="s1">&#39;CRE&#39;</span><span class="p">,</span> <span class="s1">&#39;CREDIT&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;CRE&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="n">pt</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;No Charge&#39;</span><span class="p">,</span> <span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;NOC&#39;</span> <span class="p">:</span> <span class="p">(</span><span class="n">pt</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">&#39;DIS&#39;</span><span class="p">,</span> <span class="s1">&#39;Dispute&#39;</span><span class="p">,</span> <span class="s1">&#39;Dis&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;DIS&#39;</span> <span class="p">:</span> <span class="s1">&#39;UNK&#39;</span><span class="p">)))</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39;CSH&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;CRE&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;UNK&#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;DIS&#39;</span> <span class="o">=</span> <span class="mi">4</span><span class="p">))</span> <span class="k">AS</span> <span class="n">payment_type_</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">trip_type</span><span class="p">)</span> <span class="k">AS</span> <span class="n">trip_type</span><span class="p">,</span>
<span class="n">ifNull</span><span class="p">(</span><span class="n">toFixedString</span><span class="p">(</span><span class="n">unhex</span><span class="p">(</span><span class="n">pickup</span><span class="p">),</span> <span class="mi">25</span><span class="p">),</span> <span class="n">toFixedString</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup</span><span class="p">,</span>
<span class="n">ifNull</span><span class="p">(</span><span class="n">toFixedString</span><span class="p">(</span><span class="n">unhex</span><span class="p">(</span><span class="n">dropoff</span><span class="p">),</span> <span class="mi">25</span><span class="p">),</span> <span class="n">toFixedString</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">cab_type</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;uber&#39;</span> <span class="o">=</span> <span class="mi">3</span><span class="p">))</span> <span class="k">AS</span> <span class="n">cab_type</span><span class="p">,</span>

<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">pickup_nyct2010_gid</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_nyct2010_gid</span><span class="p">,</span>
<span class="n">toFloat32</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_ctlabel</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup_ctlabel</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">pickup_borocode</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_borocode</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">pickup_boroname</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39;Manhattan&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Queens&#39;</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Brooklyn&#39;</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Bronx&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Staten Island&#39;</span> <span class="o">=</span> <span class="mi">5</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup_boroname</span><span class="p">,</span>
<span class="n">toFixedString</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_ct2010</span><span class="p">,</span> <span class="s1">&#39;000000&#39;</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_ct2010</span><span class="p">,</span>
<span class="n">toFixedString</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_boroct2010</span><span class="p">,</span> <span class="s1">&#39;0000000&#39;</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_boroct2010</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_cdeligibil</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">))</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup_cdeligibil</span><span class="p">,</span>
<span class="n">toFixedString</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_ntacode</span><span class="p">,</span> <span class="s1">&#39;0000&#39;</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="k">AS</span> <span class="n">pickup_ntacode</span><span class="p">,</span>

<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">pickup_ntaname</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Enum16</span><span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Airport&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Allerton-Pelham Gardens&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Annadale-Huguenot-Prince\&#39;</span><span class="n">s</span> <span class="n">Bay</span><span class="o">-</span><span class="n">Eltingville</span><span class="s1">&#39; = 3, &#39;</span><span class="n">Arden</span> <span class="n">Heights</span><span class="s1">&#39; = 4, &#39;</span><span class="n">Astoria</span><span class="s1">&#39; = 5, &#39;</span><span class="n">Auburndale</span><span class="s1">&#39; = 6, &#39;</span><span class="n">Baisley</span> <span class="n">Park</span><span class="s1">&#39; = 7, &#39;</span><span class="n">Bath</span> <span class="n">Beach</span><span class="s1">&#39; = 8, &#39;</span><span class="n">Battery</span> <span class="n">Park</span> <span class="n">City</span><span class="o">-</span><span class="k">Lower</span> <span class="n">Manhattan</span><span class="s1">&#39; = 9, &#39;</span><span class="n">Bay</span> <span class="n">Ridge</span><span class="s1">&#39; = 10, &#39;</span><span class="n">Bayside</span><span class="o">-</span><span class="n">Bayside</span> <span class="n">Hills</span><span class="s1">&#39; = 11, &#39;</span><span class="n">Bedford</span><span class="s1">&#39; = 12, &#39;</span><span class="n">Bedford</span> <span class="n">Park</span><span class="o">-</span><span class="n">Fordham</span> <span class="n">North</span><span class="s1">&#39; = 13, &#39;</span><span class="n">Bellerose</span><span class="s1">&#39; = 14, &#39;</span><span class="n">Belmont</span><span class="s1">&#39; = 15, &#39;</span><span class="n">Bensonhurst</span> <span class="n">East</span><span class="s1">&#39; = 16, &#39;</span><span class="n">Bensonhurst</span> <span class="n">West</span><span class="s1">&#39; = 17, &#39;</span><span class="n">Borough</span> <span class="n">Park</span><span class="s1">&#39; = 18, &#39;</span><span class="n">Breezy</span> <span class="n">Point</span><span class="o">-</span><span class="n">Belle</span> <span class="n">Harbor</span><span class="o">-</span><span class="n">Rockaway</span> <span class="n">Park</span><span class="o">-</span><span class="n">Broad</span> <span class="n">Channel</span><span class="s1">&#39; = 19, &#39;</span><span class="n">Briarwood</span><span class="o">-</span><span class="n">Jamaica</span> <span class="n">Hills</span><span class="s1">&#39; = 20, &#39;</span><span class="n">Brighton</span> <span class="n">Beach</span><span class="s1">&#39; = 21, &#39;</span><span class="n">Bronxdale</span><span class="s1">&#39; = 22, &#39;</span><span class="n">Brooklyn</span> <span class="n">Heights</span><span class="o">-</span><span class="n">Cobble</span> <span class="n">Hill</span><span class="s1">&#39; = 23, &#39;</span><span class="n">Brownsville</span><span class="s1">&#39; = 24, &#39;</span><span class="n">Bushwick</span> <span class="n">North</span><span class="s1">&#39; = 25, &#39;</span><span class="n">Bushwick</span> <span class="n">South</span><span class="s1">&#39; = 26, &#39;</span><span class="n">Cambria</span> <span class="n">Heights</span><span class="s1">&#39; = 27, &#39;</span><span class="n">Canarsie</span><span class="s1">&#39; = 28, &#39;</span><span class="n">Carroll</span> <span class="n">Gardens</span><span class="o">-</span><span class="n">Columbia</span> <span class="n">Street</span><span class="o">-</span><span class="n">Red</span> <span class="n">Hook</span><span class="s1">&#39; = 29, &#39;</span><span class="n">Central</span> <span class="n">Harlem</span> <span class="n">North</span><span class="o">-</span><span class="n">Polo</span> <span class="n">Grounds</span><span class="s1">&#39; = 30, &#39;</span><span class="n">Central</span> <span class="n">Harlem</span> <span class="n">South</span><span class="s1">&#39; = 31, &#39;</span><span class="n">Charleston</span><span class="o">-</span><span class="n">Richmond</span> <span class="n">Valley</span><span class="o">-</span><span class="n">Tottenville</span><span class="s1">&#39; = 32, &#39;</span><span class="n">Chinatown</span><span class="s1">&#39; = 33, &#39;</span><span class="n">Claremont</span><span class="o">-</span><span class="n">Bathgate</span><span class="s1">&#39; = 34, &#39;</span><span class="n">Clinton</span><span class="s1">&#39; = 35, &#39;</span><span class="n">Clinton</span> <span class="n">Hill</span><span class="s1">&#39; = 36, &#39;</span><span class="n">Co</span><span class="o">-</span><span class="n">op</span> <span class="n">City</span><span class="s1">&#39; = 37, &#39;</span><span class="n">College</span> <span class="n">Point</span><span class="s1">&#39; = 38, &#39;</span><span class="n">Corona</span><span class="s1">&#39; = 39, &#39;</span><span class="n">Crotona</span> <span class="n">Park</span> <span class="n">East</span><span class="s1">&#39; = 40, &#39;</span><span class="n">Crown</span> <span class="n">Heights</span> <span class="n">North</span><span class="s1">&#39; = 41, &#39;</span><span class="n">Crown</span> <span class="n">Heights</span> <span class="n">South</span><span class="s1">&#39; = 42, &#39;</span><span class="n">Cypress</span> <span class="n">Hills</span><span class="o">-</span><span class="n">City</span> <span class="n">Line</span><span class="s1">&#39; = 43, &#39;</span><span class="n">DUMBO</span><span class="o">-</span><span class="n">Vinegar</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Downtown</span> <span class="n">Brooklyn</span><span class="o">-</span><span class="n">Boerum</span> <span class="n">Hill</span><span class="s1">&#39; = 44, &#39;</span><span class="n">Douglas</span> <span class="n">Manor</span><span class="o">-</span><span class="n">Douglaston</span><span class="o">-</span><span class="n">Little</span> <span class="n">Neck</span><span class="s1">&#39; = 45, &#39;</span><span class="n">Dyker</span> <span class="n">Heights</span><span class="s1">&#39; = 46, &#39;</span><span class="n">East</span> <span class="n">Concourse</span><span class="o">-</span><span class="n">Concourse</span> <span class="n">Village</span><span class="s1">&#39; = 47, &#39;</span><span class="n">East</span> <span class="n">Elmhurst</span><span class="s1">&#39; = 48, &#39;</span><span class="n">East</span> <span class="n">Flatbush</span><span class="o">-</span><span class="n">Farragut</span><span class="s1">&#39; = 49, &#39;</span><span class="n">East</span> <span class="n">Flushing</span><span class="s1">&#39; = 50, &#39;</span><span class="n">East</span> <span class="n">Harlem</span> <span class="n">North</span><span class="s1">&#39; = 51, &#39;</span><span class="n">East</span> <span class="n">Harlem</span> <span class="n">South</span><span class="s1">&#39; = 52, &#39;</span><span class="n">East</span> <span class="k">New</span> <span class="n">York</span><span class="s1">&#39; = 53, &#39;</span><span class="n">East</span> <span class="k">New</span> <span class="n">York</span> <span class="p">(</span><span class="n">Pennsylvania</span> <span class="n">Ave</span><span class="p">)</span><span class="s1">&#39; = 54, &#39;</span><span class="n">East</span> <span class="n">Tremont</span><span class="s1">&#39; = 55, &#39;</span><span class="n">East</span> <span class="n">Village</span><span class="s1">&#39; = 56, &#39;</span><span class="n">East</span> <span class="n">Williamsburg</span><span class="s1">&#39; = 57, &#39;</span><span class="n">Eastchester</span><span class="o">-</span><span class="n">Edenwald</span><span class="o">-</span><span class="n">Baychester</span><span class="s1">&#39; = 58, &#39;</span><span class="n">Elmhurst</span><span class="s1">&#39; = 59, &#39;</span><span class="n">Elmhurst</span><span class="o">-</span><span class="n">Maspeth</span><span class="s1">&#39; = 60, &#39;</span><span class="n">Erasmus</span><span class="s1">&#39; = 61, &#39;</span><span class="n">Far</span> <span class="n">Rockaway</span><span class="o">-</span><span class="n">Bayswater</span><span class="s1">&#39; = 62, &#39;</span><span class="n">Flatbush</span><span class="s1">&#39; = 63, &#39;</span><span class="n">Flatlands</span><span class="s1">&#39; = 64, &#39;</span><span class="n">Flushing</span><span class="s1">&#39; = 65, &#39;</span><span class="n">Fordham</span> <span class="n">South</span><span class="s1">&#39; = 66, &#39;</span><span class="n">Forest</span> <span class="n">Hills</span><span class="s1">&#39; = 67, &#39;</span><span class="n">Fort</span> <span class="n">Greene</span><span class="s1">&#39; = 68, &#39;</span><span class="n">Fresh</span> <span class="n">Meadows</span><span class="o">-</span><span class="n">Utopia</span><span class="s1">&#39; = 69, &#39;</span><span class="n">Ft</span><span class="p">.</span> <span class="n">Totten</span><span class="o">-</span><span class="n">Bay</span> <span class="n">Terrace</span><span class="o">-</span><span class="n">Clearview</span><span class="s1">&#39; = 70, &#39;</span><span class="n">Georgetown</span><span class="o">-</span><span class="n">Marine</span> <span class="n">Park</span><span class="o">-</span><span class="n">Bergen</span> <span class="n">Beach</span><span class="o">-</span><span class="n">Mill</span> <span class="n">Basin</span><span class="s1">&#39; = 71, &#39;</span><span class="n">Glen</span> <span class="n">Oaks</span><span class="o">-</span><span class="n">Floral</span> <span class="n">Park</span><span class="o">-</span><span class="k">New</span> <span class="n">Hyde</span> <span class="n">Park</span><span class="s1">&#39; = 72, &#39;</span><span class="n">Glendale</span><span class="s1">&#39; = 73, &#39;</span><span class="n">Gramercy</span><span class="s1">&#39; = 74, &#39;</span><span class="n">Grasmere</span><span class="o">-</span><span class="n">Arrochar</span><span class="o">-</span><span class="n">Ft</span><span class="p">.</span> <span class="n">Wadsworth</span><span class="s1">&#39; = 75, &#39;</span><span class="n">Gravesend</span><span class="s1">&#39; = 76, &#39;</span><span class="n">Great</span> <span class="n">Kills</span><span class="s1">&#39; = 77, &#39;</span><span class="n">Greenpoint</span><span class="s1">&#39; = 78, &#39;</span><span class="n">Grymes</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Clifton</span><span class="o">-</span><span class="n">Fox</span> <span class="n">Hills</span><span class="s1">&#39; = 79, &#39;</span><span class="n">Hamilton</span> <span class="n">Heights</span><span class="s1">&#39; = 80, &#39;</span><span class="n">Hammels</span><span class="o">-</span><span class="n">Arverne</span><span class="o">-</span><span class="n">Edgemere</span><span class="s1">&#39; = 81, &#39;</span><span class="n">Highbridge</span><span class="s1">&#39; = 82, &#39;</span><span class="n">Hollis</span><span class="s1">&#39; = 83, &#39;</span><span class="n">Homecrest</span><span class="s1">&#39; = 84, &#39;</span><span class="n">Hudson</span> <span class="n">Yards</span><span class="o">-</span><span class="n">Chelsea</span><span class="o">-</span><span class="n">Flatiron</span><span class="o">-</span><span class="k">Union</span> <span class="n">Square</span><span class="s1">&#39; = 85, &#39;</span><span class="n">Hunters</span> <span class="n">Point</span><span class="o">-</span><span class="n">Sunnyside</span><span class="o">-</span><span class="n">West</span> <span class="n">Maspeth</span><span class="s1">&#39; = 86, &#39;</span><span class="n">Hunts</span> <span class="n">Point</span><span class="s1">&#39; = 87, &#39;</span><span class="n">Jackson</span> <span class="n">Heights</span><span class="s1">&#39; = 88, &#39;</span><span class="n">Jamaica</span><span class="s1">&#39; = 89, &#39;</span><span class="n">Jamaica</span> <span class="n">Estates</span><span class="o">-</span><span class="n">Holliswood</span><span class="s1">&#39; = 90, &#39;</span><span class="n">Kensington</span><span class="o">-</span><span class="n">Ocean</span> <span class="n">Parkway</span><span class="s1">&#39; = 91, &#39;</span><span class="n">Kew</span> <span class="n">Gardens</span><span class="s1">&#39; = 92, &#39;</span><span class="n">Kew</span> <span class="n">Gardens</span> <span class="n">Hills</span><span class="s1">&#39; = 93, &#39;</span><span class="n">Kingsbridge</span> <span class="n">Heights</span><span class="s1">&#39; = 94, &#39;</span><span class="n">Laurelton</span><span class="s1">&#39; = 95, &#39;</span><span class="n">Lenox</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Roosevelt</span> <span class="n">Island</span><span class="s1">&#39; = 96, &#39;</span><span class="n">Lincoln</span> <span class="n">Square</span><span class="s1">&#39; = 97, &#39;</span><span class="n">Lindenwood</span><span class="o">-</span><span class="n">Howard</span> <span class="n">Beach</span><span class="s1">&#39; = 98, &#39;</span><span class="n">Longwood</span><span class="s1">&#39; = 99, &#39;</span><span class="k">Lower</span> <span class="n">East</span> <span class="n">Side</span><span class="s1">&#39; = 100, &#39;</span><span class="n">Madison</span><span class="s1">&#39; = 101, &#39;</span><span class="n">Manhattanville</span><span class="s1">&#39; = 102, &#39;</span><span class="n">Marble</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Inwood</span><span class="s1">&#39; = 103, &#39;</span><span class="n">Mariner</span><span class="err">\</span><span class="s1">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class="o">=</span> <span class="mi">104</span><span class="p">,</span> <span class="s1">&#39;Maspeth&#39;</span> <span class="o">=</span> <span class="mi">105</span><span class="p">,</span> <span class="s1">&#39;Melrose South-Mott Haven North&#39;</span> <span class="o">=</span> <span class="mi">106</span><span class="p">,</span> <span class="s1">&#39;Middle Village&#39;</span> <span class="o">=</span> <span class="mi">107</span><span class="p">,</span> <span class="s1">&#39;Midtown-Midtown South&#39;</span> <span class="o">=</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">&#39;Midwood&#39;</span> <span class="o">=</span> <span class="mi">109</span><span class="p">,</span> <span class="s1">&#39;Morningside Heights&#39;</span> <span class="o">=</span> <span class="mi">110</span><span class="p">,</span> <span class="s1">&#39;Morrisania-Melrose&#39;</span> <span class="o">=</span> <span class="mi">111</span><span class="p">,</span> <span class="s1">&#39;Mott Haven-Port Morris&#39;</span> <span class="o">=</span> <span class="mi">112</span><span class="p">,</span> <span class="s1">&#39;Mount Hope&#39;</span> <span class="o">=</span> <span class="mi">113</span><span class="p">,</span> <span class="s1">&#39;Murray Hill&#39;</span> <span class="o">=</span> <span class="mi">114</span><span class="p">,</span> <span class="s1">&#39;Murray Hill-Kips Bay&#39;</span> <span class="o">=</span> <span class="mi">115</span><span class="p">,</span> <span class="s1">&#39;New Brighton-Silver Lake&#39;</span> <span class="o">=</span> <span class="mi">116</span><span class="p">,</span> <span class="s1">&#39;New Dorp-Midland Beach&#39;</span> <span class="o">=</span> <span class="mi">117</span><span class="p">,</span> <span class="s1">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class="o">=</span> <span class="mi">118</span><span class="p">,</span> <span class="s1">&#39;North Corona&#39;</span> <span class="o">=</span> <span class="mi">119</span><span class="p">,</span> <span class="s1">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class="o">=</span> <span class="mi">120</span><span class="p">,</span> <span class="s1">&#39;North Side-South Side&#39;</span> <span class="o">=</span> <span class="mi">121</span><span class="p">,</span> <span class="s1">&#39;Norwood&#39;</span> <span class="o">=</span> <span class="mi">122</span><span class="p">,</span> <span class="s1">&#39;Oakland Gardens&#39;</span> <span class="o">=</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;Oakwood-Oakwood Beach&#39;</span> <span class="o">=</span> <span class="mi">124</span><span class="p">,</span> <span class="s1">&#39;Ocean Hill&#39;</span> <span class="o">=</span> <span class="mi">125</span><span class="p">,</span> <span class="s1">&#39;Ocean Parkway South&#39;</span> <span class="o">=</span> <span class="mi">126</span><span class="p">,</span> <span class="s1">&#39;Old Astoria&#39;</span> <span class="o">=</span> <span class="mi">127</span><span class="p">,</span> <span class="s1">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span> <span class="s1">&#39;Ozone Park&#39;</span> <span class="o">=</span> <span class="mi">129</span><span class="p">,</span> <span class="s1">&#39;Park Slope-Gowanus&#39;</span> <span class="o">=</span> <span class="mi">130</span><span class="p">,</span> <span class="s1">&#39;Parkchester&#39;</span> <span class="o">=</span> <span class="mi">131</span><span class="p">,</span> <span class="s1">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class="o">=</span> <span class="mi">132</span><span class="p">,</span> <span class="s1">&#39;Pelham Parkway&#39;</span> <span class="o">=</span> <span class="mi">133</span><span class="p">,</span> <span class="s1">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class="o">=</span> <span class="mi">134</span><span class="p">,</span> <span class="s1">&#39;Port Richmond&#39;</span> <span class="o">=</span> <span class="mi">135</span><span class="p">,</span> <span class="s1">&#39;Prospect Heights&#39;</span> <span class="o">=</span> <span class="mi">136</span><span class="p">,</span> <span class="s1">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class="o">=</span> <span class="mi">137</span><span class="p">,</span> <span class="s1">&#39;Queens Village&#39;</span> <span class="o">=</span> <span class="mi">138</span><span class="p">,</span> <span class="s1">&#39;Queensboro Hill&#39;</span> <span class="o">=</span> <span class="mi">139</span><span class="p">,</span> <span class="s1">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class="o">=</span> <span class="mi">140</span><span class="p">,</span> <span class="s1">&#39;Rego Park&#39;</span> <span class="o">=</span> <span class="mi">141</span><span class="p">,</span> <span class="s1">&#39;Richmond Hill&#39;</span> <span class="o">=</span> <span class="mi">142</span><span class="p">,</span> <span class="s1">&#39;Ridgewood&#39;</span> <span class="o">=</span> <span class="mi">143</span><span class="p">,</span> <span class="s1">&#39;Rikers Island&#39;</span> <span class="o">=</span> <span class="mi">144</span><span class="p">,</span> <span class="s1">&#39;Rosedale&#39;</span> <span class="o">=</span> <span class="mi">145</span><span class="p">,</span> <span class="s1">&#39;Rossville-Woodrow&#39;</span> <span class="o">=</span> <span class="mi">146</span><span class="p">,</span> <span class="s1">&#39;Rugby-Remsen Village&#39;</span> <span class="o">=</span> <span class="mi">147</span><span class="p">,</span> <span class="s1">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class="o">=</span> <span class="mi">148</span><span class="p">,</span> <span class="s1">&#39;Seagate-Coney Island&#39;</span> <span class="o">=</span> <span class="mi">149</span><span class="p">,</span> <span class="s1">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="s1">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class="o">=</span> <span class="mi">151</span><span class="p">,</span> <span class="s1">&#39;Soundview-Bruckner&#39;</span> <span class="o">=</span> <span class="mi">152</span><span class="p">,</span> <span class="s1">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class="o">=</span> <span class="mi">153</span><span class="p">,</span> <span class="s1">&#39;South Jamaica&#39;</span> <span class="o">=</span> <span class="mi">154</span><span class="p">,</span> <span class="s1">&#39;South Ozone Park&#39;</span> <span class="o">=</span> <span class="mi">155</span><span class="p">,</span> <span class="s1">&#39;Springfield Gardens North&#39;</span> <span class="o">=</span> <span class="mi">156</span><span class="p">,</span> <span class="s1">&#39;Springfield Gardens South-Brookville&#39;</span> <span class="o">=</span> <span class="mi">157</span><span class="p">,</span> <span class="s1">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class="o">=</span> <span class="mi">158</span><span class="p">,</span> <span class="s1">&#39;St. Albans&#39;</span> <span class="o">=</span> <span class="mi">159</span><span class="p">,</span> <span class="s1">&#39;Stapleton-Rosebank&#39;</span> <span class="o">=</span> <span class="mi">160</span><span class="p">,</span> <span class="s1">&#39;Starrett City&#39;</span> <span class="o">=</span> <span class="mi">161</span><span class="p">,</span> <span class="s1">&#39;Steinway&#39;</span> <span class="o">=</span> <span class="mi">162</span><span class="p">,</span> <span class="s1">&#39;Stuyvesant Heights&#39;</span> <span class="o">=</span> <span class="mi">163</span><span class="p">,</span> <span class="s1">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class="o">=</span> <span class="mi">164</span><span class="p">,</span> <span class="s1">&#39;Sunset Park East&#39;</span> <span class="o">=</span> <span class="mi">165</span><span class="p">,</span> <span class="s1">&#39;Sunset Park West&#39;</span> <span class="o">=</span> <span class="mi">166</span><span class="p">,</span> <span class="s1">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class="o">=</span> <span class="mi">167</span><span class="p">,</span> <span class="s1">&#39;Turtle Bay-East Midtown&#39;</span> <span class="o">=</span> <span class="mi">168</span><span class="p">,</span> <span class="s1">&#39;University Heights-Morris Heights&#39;</span> <span class="o">=</span> <span class="mi">169</span><span class="p">,</span> <span class="s1">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class="o">=</span> <span class="mi">170</span><span class="p">,</span> <span class="s1">&#39;Upper West Side&#39;</span> <span class="o">=</span> <span class="mi">171</span><span class="p">,</span> <span class="s1">&#39;Van Cortlandt Village&#39;</span> <span class="o">=</span> <span class="mi">172</span><span class="p">,</span> <span class="s1">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class="o">=</span> <span class="mi">173</span><span class="p">,</span> <span class="s1">&#39;Washington Heights North&#39;</span> <span class="o">=</span> <span class="mi">174</span><span class="p">,</span> <span class="s1">&#39;Washington Heights South&#39;</span> <span class="o">=</span> <span class="mi">175</span><span class="p">,</span> <span class="s1">&#39;West Brighton&#39;</span> <span class="o">=</span> <span class="mi">176</span><span class="p">,</span> <span class="s1">&#39;West Concourse&#39;</span> <span class="o">=</span> <span class="mi">177</span><span class="p">,</span> <span class="s1">&#39;West Farms-Bronx River&#39;</span> <span class="o">=</span> <span class="mi">178</span><span class="p">,</span> <span class="s1">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class="o">=</span> <span class="mi">179</span><span class="p">,</span> <span class="s1">&#39;West Village&#39;</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span> <span class="s1">&#39;Westchester-Unionport&#39;</span> <span class="o">=</span> <span class="mi">181</span><span class="p">,</span> <span class="s1">&#39;Westerleigh&#39;</span> <span class="o">=</span> <span class="mi">182</span><span class="p">,</span> <span class="s1">&#39;Whitestone&#39;</span> <span class="o">=</span> <span class="mi">183</span><span class="p">,</span> <span class="s1">&#39;Williamsbridge-Olinville&#39;</span> <span class="o">=</span> <span class="mi">184</span><span class="p">,</span> <span class="s1">&#39;Williamsburg&#39;</span> <span class="o">=</span> <span class="mi">185</span><span class="p">,</span> <span class="s1">&#39;Windsor Terrace&#39;</span> <span class="o">=</span> <span class="mi">186</span><span class="p">,</span> <span class="s1">&#39;Woodhaven&#39;</span> <span class="o">=</span> <span class="mi">187</span><span class="p">,</span> <span class="s1">&#39;Woodlawn-Wakefield&#39;</span> <span class="o">=</span> <span class="mi">188</span><span class="p">,</span> <span class="s1">&#39;Woodside&#39;</span> <span class="o">=</span> <span class="mi">189</span><span class="p">,</span> <span class="s1">&#39;Yorkville&#39;</span> <span class="o">=</span> <span class="mi">190</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Bronx&#39;</span> <span class="o">=</span> <span class="mi">191</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class="o">=</span> <span class="mi">192</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class="o">=</span> <span class="mi">193</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Queens&#39;</span> <span class="o">=</span> <span class="mi">194</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class="o">=</span> <span class="mi">195</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup_ntaname</span><span class="p">,</span>

<span class="n">toUInt16</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">pickup_puma</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">))</span> <span class="k">AS</span> <span class="n">pickup_puma</span><span class="p">,</span>

<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">dropoff_nyct2010_gid</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_nyct2010_gid</span><span class="p">,</span>
<span class="n">toFloat32</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_ctlabel</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff_ctlabel</span><span class="p">,</span>
<span class="n">assumeNotNull</span><span class="p">(</span><span class="n">dropoff_borocode</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_borocode</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">dropoff_boroname</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39;Manhattan&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Queens&#39;</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Brooklyn&#39;</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Bronx&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Staten Island&#39;</span> <span class="o">=</span> <span class="mi">5</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff_boroname</span><span class="p">,</span>
<span class="n">toFixedString</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_ct2010</span><span class="p">,</span> <span class="s1">&#39;000000&#39;</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_ct2010</span><span class="p">,</span>
<span class="n">toFixedString</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_boroct2010</span><span class="p">,</span> <span class="s1">&#39;0000000&#39;</span><span class="p">),</span> <span class="mi">7</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_boroct2010</span><span class="p">,</span>
<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_cdeligibil</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">))</span> <span class="k">AS</span> <span class="n">Enum8</span><span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff_cdeligibil</span><span class="p">,</span>
<span class="n">toFixedString</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_ntacode</span><span class="p">,</span> <span class="s1">&#39;0000&#39;</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dropoff_ntacode</span><span class="p">,</span>

<span class="k">CAST</span><span class="p">(</span><span class="n">assumeNotNull</span><span class="p">(</span><span class="n">dropoff_ntaname</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Enum16</span><span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Airport&#39;</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Allerton-Pelham Gardens&#39;</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Annadale-Huguenot-Prince\&#39;</span><span class="n">s</span> <span class="n">Bay</span><span class="o">-</span><span class="n">Eltingville</span><span class="s1">&#39; = 3, &#39;</span><span class="n">Arden</span> <span class="n">Heights</span><span class="s1">&#39; = 4, &#39;</span><span class="n">Astoria</span><span class="s1">&#39; = 5, &#39;</span><span class="n">Auburndale</span><span class="s1">&#39; = 6, &#39;</span><span class="n">Baisley</span> <span class="n">Park</span><span class="s1">&#39; = 7, &#39;</span><span class="n">Bath</span> <span class="n">Beach</span><span class="s1">&#39; = 8, &#39;</span><span class="n">Battery</span> <span class="n">Park</span> <span class="n">City</span><span class="o">-</span><span class="k">Lower</span> <span class="n">Manhattan</span><span class="s1">&#39; = 9, &#39;</span><span class="n">Bay</span> <span class="n">Ridge</span><span class="s1">&#39; = 10, &#39;</span><span class="n">Bayside</span><span class="o">-</span><span class="n">Bayside</span> <span class="n">Hills</span><span class="s1">&#39; = 11, &#39;</span><span class="n">Bedford</span><span class="s1">&#39; = 12, &#39;</span><span class="n">Bedford</span> <span class="n">Park</span><span class="o">-</span><span class="n">Fordham</span> <span class="n">North</span><span class="s1">&#39; = 13, &#39;</span><span class="n">Bellerose</span><span class="s1">&#39; = 14, &#39;</span><span class="n">Belmont</span><span class="s1">&#39; = 15, &#39;</span><span class="n">Bensonhurst</span> <span class="n">East</span><span class="s1">&#39; = 16, &#39;</span><span class="n">Bensonhurst</span> <span class="n">West</span><span class="s1">&#39; = 17, &#39;</span><span class="n">Borough</span> <span class="n">Park</span><span class="s1">&#39; = 18, &#39;</span><span class="n">Breezy</span> <span class="n">Point</span><span class="o">-</span><span class="n">Belle</span> <span class="n">Harbor</span><span class="o">-</span><span class="n">Rockaway</span> <span class="n">Park</span><span class="o">-</span><span class="n">Broad</span> <span class="n">Channel</span><span class="s1">&#39; = 19, &#39;</span><span class="n">Briarwood</span><span class="o">-</span><span class="n">Jamaica</span> <span class="n">Hills</span><span class="s1">&#39; = 20, &#39;</span><span class="n">Brighton</span> <span class="n">Beach</span><span class="s1">&#39; = 21, &#39;</span><span class="n">Bronxdale</span><span class="s1">&#39; = 22, &#39;</span><span class="n">Brooklyn</span> <span class="n">Heights</span><span class="o">-</span><span class="n">Cobble</span> <span class="n">Hill</span><span class="s1">&#39; = 23, &#39;</span><span class="n">Brownsville</span><span class="s1">&#39; = 24, &#39;</span><span class="n">Bushwick</span> <span class="n">North</span><span class="s1">&#39; = 25, &#39;</span><span class="n">Bushwick</span> <span class="n">South</span><span class="s1">&#39; = 26, &#39;</span><span class="n">Cambria</span> <span class="n">Heights</span><span class="s1">&#39; = 27, &#39;</span><span class="n">Canarsie</span><span class="s1">&#39; = 28, &#39;</span><span class="n">Carroll</span> <span class="n">Gardens</span><span class="o">-</span><span class="n">Columbia</span> <span class="n">Street</span><span class="o">-</span><span class="n">Red</span> <span class="n">Hook</span><span class="s1">&#39; = 29, &#39;</span><span class="n">Central</span> <span class="n">Harlem</span> <span class="n">North</span><span class="o">-</span><span class="n">Polo</span> <span class="n">Grounds</span><span class="s1">&#39; = 30, &#39;</span><span class="n">Central</span> <span class="n">Harlem</span> <span class="n">South</span><span class="s1">&#39; = 31, &#39;</span><span class="n">Charleston</span><span class="o">-</span><span class="n">Richmond</span> <span class="n">Valley</span><span class="o">-</span><span class="n">Tottenville</span><span class="s1">&#39; = 32, &#39;</span><span class="n">Chinatown</span><span class="s1">&#39; = 33, &#39;</span><span class="n">Claremont</span><span class="o">-</span><span class="n">Bathgate</span><span class="s1">&#39; = 34, &#39;</span><span class="n">Clinton</span><span class="s1">&#39; = 35, &#39;</span><span class="n">Clinton</span> <span class="n">Hill</span><span class="s1">&#39; = 36, &#39;</span><span class="n">Co</span><span class="o">-</span><span class="n">op</span> <span class="n">City</span><span class="s1">&#39; = 37, &#39;</span><span class="n">College</span> <span class="n">Point</span><span class="s1">&#39; = 38, &#39;</span><span class="n">Corona</span><span class="s1">&#39; = 39, &#39;</span><span class="n">Crotona</span> <span class="n">Park</span> <span class="n">East</span><span class="s1">&#39; = 40, &#39;</span><span class="n">Crown</span> <span class="n">Heights</span> <span class="n">North</span><span class="s1">&#39; = 41, &#39;</span><span class="n">Crown</span> <span class="n">Heights</span> <span class="n">South</span><span class="s1">&#39; = 42, &#39;</span><span class="n">Cypress</span> <span class="n">Hills</span><span class="o">-</span><span class="n">City</span> <span class="n">Line</span><span class="s1">&#39; = 43, &#39;</span><span class="n">DUMBO</span><span class="o">-</span><span class="n">Vinegar</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Downtown</span> <span class="n">Brooklyn</span><span class="o">-</span><span class="n">Boerum</span> <span class="n">Hill</span><span class="s1">&#39; = 44, &#39;</span><span class="n">Douglas</span> <span class="n">Manor</span><span class="o">-</span><span class="n">Douglaston</span><span class="o">-</span><span class="n">Little</span> <span class="n">Neck</span><span class="s1">&#39; = 45, &#39;</span><span class="n">Dyker</span> <span class="n">Heights</span><span class="s1">&#39; = 46, &#39;</span><span class="n">East</span> <span class="n">Concourse</span><span class="o">-</span><span class="n">Concourse</span> <span class="n">Village</span><span class="s1">&#39; = 47, &#39;</span><span class="n">East</span> <span class="n">Elmhurst</span><span class="s1">&#39; = 48, &#39;</span><span class="n">East</span> <span class="n">Flatbush</span><span class="o">-</span><span class="n">Farragut</span><span class="s1">&#39; = 49, &#39;</span><span class="n">East</span> <span class="n">Flushing</span><span class="s1">&#39; = 50, &#39;</span><span class="n">East</span> <span class="n">Harlem</span> <span class="n">North</span><span class="s1">&#39; = 51, &#39;</span><span class="n">East</span> <span class="n">Harlem</span> <span class="n">South</span><span class="s1">&#39; = 52, &#39;</span><span class="n">East</span> <span class="k">New</span> <span class="n">York</span><span class="s1">&#39; = 53, &#39;</span><span class="n">East</span> <span class="k">New</span> <span class="n">York</span> <span class="p">(</span><span class="n">Pennsylvania</span> <span class="n">Ave</span><span class="p">)</span><span class="s1">&#39; = 54, &#39;</span><span class="n">East</span> <span class="n">Tremont</span><span class="s1">&#39; = 55, &#39;</span><span class="n">East</span> <span class="n">Village</span><span class="s1">&#39; = 56, &#39;</span><span class="n">East</span> <span class="n">Williamsburg</span><span class="s1">&#39; = 57, &#39;</span><span class="n">Eastchester</span><span class="o">-</span><span class="n">Edenwald</span><span class="o">-</span><span class="n">Baychester</span><span class="s1">&#39; = 58, &#39;</span><span class="n">Elmhurst</span><span class="s1">&#39; = 59, &#39;</span><span class="n">Elmhurst</span><span class="o">-</span><span class="n">Maspeth</span><span class="s1">&#39; = 60, &#39;</span><span class="n">Erasmus</span><span class="s1">&#39; = 61, &#39;</span><span class="n">Far</span> <span class="n">Rockaway</span><span class="o">-</span><span class="n">Bayswater</span><span class="s1">&#39; = 62, &#39;</span><span class="n">Flatbush</span><span class="s1">&#39; = 63, &#39;</span><span class="n">Flatlands</span><span class="s1">&#39; = 64, &#39;</span><span class="n">Flushing</span><span class="s1">&#39; = 65, &#39;</span><span class="n">Fordham</span> <span class="n">South</span><span class="s1">&#39; = 66, &#39;</span><span class="n">Forest</span> <span class="n">Hills</span><span class="s1">&#39; = 67, &#39;</span><span class="n">Fort</span> <span class="n">Greene</span><span class="s1">&#39; = 68, &#39;</span><span class="n">Fresh</span> <span class="n">Meadows</span><span class="o">-</span><span class="n">Utopia</span><span class="s1">&#39; = 69, &#39;</span><span class="n">Ft</span><span class="p">.</span> <span class="n">Totten</span><span class="o">-</span><span class="n">Bay</span> <span class="n">Terrace</span><span class="o">-</span><span class="n">Clearview</span><span class="s1">&#39; = 70, &#39;</span><span class="n">Georgetown</span><span class="o">-</span><span class="n">Marine</span> <span class="n">Park</span><span class="o">-</span><span class="n">Bergen</span> <span class="n">Beach</span><span class="o">-</span><span class="n">Mill</span> <span class="n">Basin</span><span class="s1">&#39; = 71, &#39;</span><span class="n">Glen</span> <span class="n">Oaks</span><span class="o">-</span><span class="n">Floral</span> <span class="n">Park</span><span class="o">-</span><span class="k">New</span> <span class="n">Hyde</span> <span class="n">Park</span><span class="s1">&#39; = 72, &#39;</span><span class="n">Glendale</span><span class="s1">&#39; = 73, &#39;</span><span class="n">Gramercy</span><span class="s1">&#39; = 74, &#39;</span><span class="n">Grasmere</span><span class="o">-</span><span class="n">Arrochar</span><span class="o">-</span><span class="n">Ft</span><span class="p">.</span> <span class="n">Wadsworth</span><span class="s1">&#39; = 75, &#39;</span><span class="n">Gravesend</span><span class="s1">&#39; = 76, &#39;</span><span class="n">Great</span> <span class="n">Kills</span><span class="s1">&#39; = 77, &#39;</span><span class="n">Greenpoint</span><span class="s1">&#39; = 78, &#39;</span><span class="n">Grymes</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Clifton</span><span class="o">-</span><span class="n">Fox</span> <span class="n">Hills</span><span class="s1">&#39; = 79, &#39;</span><span class="n">Hamilton</span> <span class="n">Heights</span><span class="s1">&#39; = 80, &#39;</span><span class="n">Hammels</span><span class="o">-</span><span class="n">Arverne</span><span class="o">-</span><span class="n">Edgemere</span><span class="s1">&#39; = 81, &#39;</span><span class="n">Highbridge</span><span class="s1">&#39; = 82, &#39;</span><span class="n">Hollis</span><span class="s1">&#39; = 83, &#39;</span><span class="n">Homecrest</span><span class="s1">&#39; = 84, &#39;</span><span class="n">Hudson</span> <span class="n">Yards</span><span class="o">-</span><span class="n">Chelsea</span><span class="o">-</span><span class="n">Flatiron</span><span class="o">-</span><span class="k">Union</span> <span class="n">Square</span><span class="s1">&#39; = 85, &#39;</span><span class="n">Hunters</span> <span class="n">Point</span><span class="o">-</span><span class="n">Sunnyside</span><span class="o">-</span><span class="n">West</span> <span class="n">Maspeth</span><span class="s1">&#39; = 86, &#39;</span><span class="n">Hunts</span> <span class="n">Point</span><span class="s1">&#39; = 87, &#39;</span><span class="n">Jackson</span> <span class="n">Heights</span><span class="s1">&#39; = 88, &#39;</span><span class="n">Jamaica</span><span class="s1">&#39; = 89, &#39;</span><span class="n">Jamaica</span> <span class="n">Estates</span><span class="o">-</span><span class="n">Holliswood</span><span class="s1">&#39; = 90, &#39;</span><span class="n">Kensington</span><span class="o">-</span><span class="n">Ocean</span> <span class="n">Parkway</span><span class="s1">&#39; = 91, &#39;</span><span class="n">Kew</span> <span class="n">Gardens</span><span class="s1">&#39; = 92, &#39;</span><span class="n">Kew</span> <span class="n">Gardens</span> <span class="n">Hills</span><span class="s1">&#39; = 93, &#39;</span><span class="n">Kingsbridge</span> <span class="n">Heights</span><span class="s1">&#39; = 94, &#39;</span><span class="n">Laurelton</span><span class="s1">&#39; = 95, &#39;</span><span class="n">Lenox</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Roosevelt</span> <span class="n">Island</span><span class="s1">&#39; = 96, &#39;</span><span class="n">Lincoln</span> <span class="n">Square</span><span class="s1">&#39; = 97, &#39;</span><span class="n">Lindenwood</span><span class="o">-</span><span class="n">Howard</span> <span class="n">Beach</span><span class="s1">&#39; = 98, &#39;</span><span class="n">Longwood</span><span class="s1">&#39; = 99, &#39;</span><span class="k">Lower</span> <span class="n">East</span> <span class="n">Side</span><span class="s1">&#39; = 100, &#39;</span><span class="n">Madison</span><span class="s1">&#39; = 101, &#39;</span><span class="n">Manhattanville</span><span class="s1">&#39; = 102, &#39;</span><span class="n">Marble</span> <span class="n">Hill</span><span class="o">-</span><span class="n">Inwood</span><span class="s1">&#39; = 103, &#39;</span><span class="n">Mariner</span><span class="err">\</span><span class="s1">&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39;</span> <span class="o">=</span> <span class="mi">104</span><span class="p">,</span> <span class="s1">&#39;Maspeth&#39;</span> <span class="o">=</span> <span class="mi">105</span><span class="p">,</span> <span class="s1">&#39;Melrose South-Mott Haven North&#39;</span> <span class="o">=</span> <span class="mi">106</span><span class="p">,</span> <span class="s1">&#39;Middle Village&#39;</span> <span class="o">=</span> <span class="mi">107</span><span class="p">,</span> <span class="s1">&#39;Midtown-Midtown South&#39;</span> <span class="o">=</span> <span class="mi">108</span><span class="p">,</span> <span class="s1">&#39;Midwood&#39;</span> <span class="o">=</span> <span class="mi">109</span><span class="p">,</span> <span class="s1">&#39;Morningside Heights&#39;</span> <span class="o">=</span> <span class="mi">110</span><span class="p">,</span> <span class="s1">&#39;Morrisania-Melrose&#39;</span> <span class="o">=</span> <span class="mi">111</span><span class="p">,</span> <span class="s1">&#39;Mott Haven-Port Morris&#39;</span> <span class="o">=</span> <span class="mi">112</span><span class="p">,</span> <span class="s1">&#39;Mount Hope&#39;</span> <span class="o">=</span> <span class="mi">113</span><span class="p">,</span> <span class="s1">&#39;Murray Hill&#39;</span> <span class="o">=</span> <span class="mi">114</span><span class="p">,</span> <span class="s1">&#39;Murray Hill-Kips Bay&#39;</span> <span class="o">=</span> <span class="mi">115</span><span class="p">,</span> <span class="s1">&#39;New Brighton-Silver Lake&#39;</span> <span class="o">=</span> <span class="mi">116</span><span class="p">,</span> <span class="s1">&#39;New Dorp-Midland Beach&#39;</span> <span class="o">=</span> <span class="mi">117</span><span class="p">,</span> <span class="s1">&#39;New Springville-Bloomfield-Travis&#39;</span> <span class="o">=</span> <span class="mi">118</span><span class="p">,</span> <span class="s1">&#39;North Corona&#39;</span> <span class="o">=</span> <span class="mi">119</span><span class="p">,</span> <span class="s1">&#39;North Riverdale-Fieldston-Riverdale&#39;</span> <span class="o">=</span> <span class="mi">120</span><span class="p">,</span> <span class="s1">&#39;North Side-South Side&#39;</span> <span class="o">=</span> <span class="mi">121</span><span class="p">,</span> <span class="s1">&#39;Norwood&#39;</span> <span class="o">=</span> <span class="mi">122</span><span class="p">,</span> <span class="s1">&#39;Oakland Gardens&#39;</span> <span class="o">=</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;Oakwood-Oakwood Beach&#39;</span> <span class="o">=</span> <span class="mi">124</span><span class="p">,</span> <span class="s1">&#39;Ocean Hill&#39;</span> <span class="o">=</span> <span class="mi">125</span><span class="p">,</span> <span class="s1">&#39;Ocean Parkway South&#39;</span> <span class="o">=</span> <span class="mi">126</span><span class="p">,</span> <span class="s1">&#39;Old Astoria&#39;</span> <span class="o">=</span> <span class="mi">127</span><span class="p">,</span> <span class="s1">&#39;Old Town-Dongan Hills-South Beach&#39;</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span> <span class="s1">&#39;Ozone Park&#39;</span> <span class="o">=</span> <span class="mi">129</span><span class="p">,</span> <span class="s1">&#39;Park Slope-Gowanus&#39;</span> <span class="o">=</span> <span class="mi">130</span><span class="p">,</span> <span class="s1">&#39;Parkchester&#39;</span> <span class="o">=</span> <span class="mi">131</span><span class="p">,</span> <span class="s1">&#39;Pelham Bay-Country Club-City Island&#39;</span> <span class="o">=</span> <span class="mi">132</span><span class="p">,</span> <span class="s1">&#39;Pelham Parkway&#39;</span> <span class="o">=</span> <span class="mi">133</span><span class="p">,</span> <span class="s1">&#39;Pomonok-Flushing Heights-Hillcrest&#39;</span> <span class="o">=</span> <span class="mi">134</span><span class="p">,</span> <span class="s1">&#39;Port Richmond&#39;</span> <span class="o">=</span> <span class="mi">135</span><span class="p">,</span> <span class="s1">&#39;Prospect Heights&#39;</span> <span class="o">=</span> <span class="mi">136</span><span class="p">,</span> <span class="s1">&#39;Prospect Lefferts Gardens-Wingate&#39;</span> <span class="o">=</span> <span class="mi">137</span><span class="p">,</span> <span class="s1">&#39;Queens Village&#39;</span> <span class="o">=</span> <span class="mi">138</span><span class="p">,</span> <span class="s1">&#39;Queensboro Hill&#39;</span> <span class="o">=</span> <span class="mi">139</span><span class="p">,</span> <span class="s1">&#39;Queensbridge-Ravenswood-Long Island City&#39;</span> <span class="o">=</span> <span class="mi">140</span><span class="p">,</span> <span class="s1">&#39;Rego Park&#39;</span> <span class="o">=</span> <span class="mi">141</span><span class="p">,</span> <span class="s1">&#39;Richmond Hill&#39;</span> <span class="o">=</span> <span class="mi">142</span><span class="p">,</span> <span class="s1">&#39;Ridgewood&#39;</span> <span class="o">=</span> <span class="mi">143</span><span class="p">,</span> <span class="s1">&#39;Rikers Island&#39;</span> <span class="o">=</span> <span class="mi">144</span><span class="p">,</span> <span class="s1">&#39;Rosedale&#39;</span> <span class="o">=</span> <span class="mi">145</span><span class="p">,</span> <span class="s1">&#39;Rossville-Woodrow&#39;</span> <span class="o">=</span> <span class="mi">146</span><span class="p">,</span> <span class="s1">&#39;Rugby-Remsen Village&#39;</span> <span class="o">=</span> <span class="mi">147</span><span class="p">,</span> <span class="s1">&#39;Schuylerville-Throgs Neck-Edgewater Park&#39;</span> <span class="o">=</span> <span class="mi">148</span><span class="p">,</span> <span class="s1">&#39;Seagate-Coney Island&#39;</span> <span class="o">=</span> <span class="mi">149</span><span class="p">,</span> <span class="s1">&#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39;</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="s1">&#39;SoHo-TriBeCa-Civic Center-Little Italy&#39;</span> <span class="o">=</span> <span class="mi">151</span><span class="p">,</span> <span class="s1">&#39;Soundview-Bruckner&#39;</span> <span class="o">=</span> <span class="mi">152</span><span class="p">,</span> <span class="s1">&#39;Soundview-Castle Hill-Clason Point-Harding Park&#39;</span> <span class="o">=</span> <span class="mi">153</span><span class="p">,</span> <span class="s1">&#39;South Jamaica&#39;</span> <span class="o">=</span> <span class="mi">154</span><span class="p">,</span> <span class="s1">&#39;South Ozone Park&#39;</span> <span class="o">=</span> <span class="mi">155</span><span class="p">,</span> <span class="s1">&#39;Springfield Gardens North&#39;</span> <span class="o">=</span> <span class="mi">156</span><span class="p">,</span> <span class="s1">&#39;Springfield Gardens South-Brookville&#39;</span> <span class="o">=</span> <span class="mi">157</span><span class="p">,</span> <span class="s1">&#39;Spuyten Duyvil-Kingsbridge&#39;</span> <span class="o">=</span> <span class="mi">158</span><span class="p">,</span> <span class="s1">&#39;St. Albans&#39;</span> <span class="o">=</span> <span class="mi">159</span><span class="p">,</span> <span class="s1">&#39;Stapleton-Rosebank&#39;</span> <span class="o">=</span> <span class="mi">160</span><span class="p">,</span> <span class="s1">&#39;Starrett City&#39;</span> <span class="o">=</span> <span class="mi">161</span><span class="p">,</span> <span class="s1">&#39;Steinway&#39;</span> <span class="o">=</span> <span class="mi">162</span><span class="p">,</span> <span class="s1">&#39;Stuyvesant Heights&#39;</span> <span class="o">=</span> <span class="mi">163</span><span class="p">,</span> <span class="s1">&#39;Stuyvesant Town-Cooper Village&#39;</span> <span class="o">=</span> <span class="mi">164</span><span class="p">,</span> <span class="s1">&#39;Sunset Park East&#39;</span> <span class="o">=</span> <span class="mi">165</span><span class="p">,</span> <span class="s1">&#39;Sunset Park West&#39;</span> <span class="o">=</span> <span class="mi">166</span><span class="p">,</span> <span class="s1">&#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39;</span> <span class="o">=</span> <span class="mi">167</span><span class="p">,</span> <span class="s1">&#39;Turtle Bay-East Midtown&#39;</span> <span class="o">=</span> <span class="mi">168</span><span class="p">,</span> <span class="s1">&#39;University Heights-Morris Heights&#39;</span> <span class="o">=</span> <span class="mi">169</span><span class="p">,</span> <span class="s1">&#39;Upper East Side-Carnegie Hill&#39;</span> <span class="o">=</span> <span class="mi">170</span><span class="p">,</span> <span class="s1">&#39;Upper West Side&#39;</span> <span class="o">=</span> <span class="mi">171</span><span class="p">,</span> <span class="s1">&#39;Van Cortlandt Village&#39;</span> <span class="o">=</span> <span class="mi">172</span><span class="p">,</span> <span class="s1">&#39;Van Nest-Morris Park-Westchester Square&#39;</span> <span class="o">=</span> <span class="mi">173</span><span class="p">,</span> <span class="s1">&#39;Washington Heights North&#39;</span> <span class="o">=</span> <span class="mi">174</span><span class="p">,</span> <span class="s1">&#39;Washington Heights South&#39;</span> <span class="o">=</span> <span class="mi">175</span><span class="p">,</span> <span class="s1">&#39;West Brighton&#39;</span> <span class="o">=</span> <span class="mi">176</span><span class="p">,</span> <span class="s1">&#39;West Concourse&#39;</span> <span class="o">=</span> <span class="mi">177</span><span class="p">,</span> <span class="s1">&#39;West Farms-Bronx River&#39;</span> <span class="o">=</span> <span class="mi">178</span><span class="p">,</span> <span class="s1">&#39;West New Brighton-New Brighton-St. George&#39;</span> <span class="o">=</span> <span class="mi">179</span><span class="p">,</span> <span class="s1">&#39;West Village&#39;</span> <span class="o">=</span> <span class="mi">180</span><span class="p">,</span> <span class="s1">&#39;Westchester-Unionport&#39;</span> <span class="o">=</span> <span class="mi">181</span><span class="p">,</span> <span class="s1">&#39;Westerleigh&#39;</span> <span class="o">=</span> <span class="mi">182</span><span class="p">,</span> <span class="s1">&#39;Whitestone&#39;</span> <span class="o">=</span> <span class="mi">183</span><span class="p">,</span> <span class="s1">&#39;Williamsbridge-Olinville&#39;</span> <span class="o">=</span> <span class="mi">184</span><span class="p">,</span> <span class="s1">&#39;Williamsburg&#39;</span> <span class="o">=</span> <span class="mi">185</span><span class="p">,</span> <span class="s1">&#39;Windsor Terrace&#39;</span> <span class="o">=</span> <span class="mi">186</span><span class="p">,</span> <span class="s1">&#39;Woodhaven&#39;</span> <span class="o">=</span> <span class="mi">187</span><span class="p">,</span> <span class="s1">&#39;Woodlawn-Wakefield&#39;</span> <span class="o">=</span> <span class="mi">188</span><span class="p">,</span> <span class="s1">&#39;Woodside&#39;</span> <span class="o">=</span> <span class="mi">189</span><span class="p">,</span> <span class="s1">&#39;Yorkville&#39;</span> <span class="o">=</span> <span class="mi">190</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Bronx&#39;</span> <span class="o">=</span> <span class="mi">191</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Brooklyn&#39;</span> <span class="o">=</span> <span class="mi">192</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Manhattan&#39;</span> <span class="o">=</span> <span class="mi">193</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Queens&#39;</span> <span class="o">=</span> <span class="mi">194</span><span class="p">,</span> <span class="s1">&#39;park-cemetery-etc-Staten Island&#39;</span> <span class="o">=</span> <span class="mi">195</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff_ntaname</span><span class="p">,</span>

<span class="n">toUInt16</span><span class="p">(</span><span class="n">ifNull</span><span class="p">(</span><span class="n">dropoff_puma</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">))</span> <span class="k">AS</span> <span class="n">dropoff_puma</span>

<span class="k">FROM</span> <span class="n">trips</span>
</pre></div>


<p>Это занимает 3030 секунд со скоростью около 428 тысяч строк в секунду.
Для более короткого времени загрузки, можно создать таблицу с движком <code>Log</code> вместо <code>MergeTree</code>. В этом случае загрузка отработает быстрее, чем за 200 секунд.</p>
<p>Таблица заняла 126 Гб дискового пространства.</p>
<div class="codehilite"><pre><span></span><span class="p">:)</span> <span class="k">SELECT</span> <span class="n">formatReadableSize</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">bytes</span><span class="p">))</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">parts</span> <span class="k">WHERE</span> <span class="k">table</span> <span class="o">=</span> <span class="s1">&#39;trips_mergetree&#39;</span> <span class="k">AND</span> <span class="n">active</span>

<span class="k">SELECT</span> <span class="n">formatReadableSize</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">bytes</span><span class="p">))</span>
<span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">parts</span>
<span class="k">WHERE</span> <span class="p">(</span><span class="k">table</span> <span class="o">=</span> <span class="s1">&#39;trips_mergetree&#39;</span><span class="p">)</span> <span class="k">AND</span> <span class="n">active</span>

<span class="err">┌─</span><span class="n">formatReadableSize</span><span class="p">(</span><span class="k">sum</span><span class="p">(</span><span class="n">bytes</span><span class="p">))</span><span class="err">─┐</span>
<span class="err">│</span> <span class="mi">126</span><span class="p">.</span><span class="mi">18</span> <span class="n">GiB</span>                     <span class="err">│</span>
<span class="err">└────────────────────────────────┘</span>
</pre></div>


<p>Между прочим, на MergeTree можно запустить запрос OPTIMIZE. Но это не обязательно, всё будет в порядке и без этого.</p>
<h2 id="skachivanie-gotovykh-partitsii">Скачивание готовых партиций<a class="headerlink" href="#skachivanie-gotovykh-partitsii" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>curl -O https://clickhouse-datasets.s3.yandex.net/trips_mergetree/partitions/trips_mergetree.tar
tar xvf trips_mergetree.tar -C /var/lib/clickhouse <span class="c1"># путь к папке с данными ClickHouse</span>
<span class="c1"># убедитесь, что установлены корректные права доступа на файлы</span>
sudo service clickhouse-server restart
clickhouse-client --query <span class="s2">&quot;SELECT COUNT(*) FROM datasets.trips_mergetree&quot;</span>
</pre></div>


<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Если вы собираетесь выполнять запросы, приведенные ниже, то к имени таблицы
нужно добавить имя базы, <code>datasets.trips_mergetree</code>.</p>
</div>
<h2 id="rezultaty-na-odnom-servere">Результаты на одном сервере<a class="headerlink" href="#rezultaty-na-odnom-servere" title="Permanent link">&para;</a></h2>
<p>Q1:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">cab_type</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">trips_mergetree</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">cab_type</span>
</pre></div>


<p>0.490 секунд.</p>
<p>Q2:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">passenger_count</span><span class="p">,</span> <span class="k">avg</span><span class="p">(</span><span class="n">total_amount</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">trips_mergetree</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">passenger_count</span>
</pre></div>


<p>1.224 секунд.</p>
<p>Q3:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">passenger_count</span><span class="p">,</span> <span class="n">toYear</span><span class="p">(</span><span class="n">pickup_date</span><span class="p">)</span> <span class="k">AS</span> <span class="k">year</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">trips_mergetree</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">passenger_count</span><span class="p">,</span> <span class="k">year</span>
</pre></div>


<p>2.104 секунд.</p>
<p>Q4:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">passenger_count</span><span class="p">,</span> <span class="n">toYear</span><span class="p">(</span><span class="n">pickup_date</span><span class="p">)</span> <span class="k">AS</span> <span class="k">year</span><span class="p">,</span> <span class="n">round</span><span class="p">(</span><span class="n">trip_distance</span><span class="p">)</span> <span class="k">AS</span> <span class="n">distance</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">trips_mergetree</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">passenger_count</span><span class="p">,</span> <span class="k">year</span><span class="p">,</span> <span class="n">distance</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="k">year</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">DESC</span>
</pre></div>


<p>3.593 секунд.</p>
<p>Использовался следующий сервер:</p>
<p>Два Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz, в сумме 16 физических ядер,
128 GiB RAM,
8x6 TB HD на программном RAID-5</p>
<p>Время выполнения — лучшее из трех запусков
На самом деле начиная со второго запуска, запросы читают данные из кеша страниц файловой системы. Никакого дальнейшего кеширования не происходит: данные зачитываются и обрабатываются при каждом запуске.</p>
<p>Создание таблицы на 3 серверах:</p>
<p>На каждом сервере:</p>
<div class="codehilite"><pre><span></span><span class="err">CREATE TABLE default.trips_mergetree_third ( trip_id UInt32, vendor_id Enum8(&#39;1&#39; = 1, &#39;2&#39; = 2, &#39;CMT&#39; = 3, &#39;VTS&#39; = 4, &#39;DDS&#39; = 5, &#39;B02512&#39; = 10, &#39;B02598&#39; = 11, &#39;B02617&#39; = 12, &#39;B02682&#39; = 13, &#39;B02764&#39; = 14), pickup_date Date, pickup_datetime DateTime, dropoff_date Date, dropoff_datetime DateTime, store_and_fwd_flag UInt8, rate_code_id UInt8, pickup_longitude Float64, pickup_latitude Float64, dropoff_longitude Float64, dropoff_latitude Float64, passenger_count UInt8, trip_distance Float64, fare_amount Float32, extra Float32, mta_tax Float32, tip_amount Float32, tolls_amount Float32, ehail_fee Float32, improvement_surcharge Float32, total_amount Float32, payment_type_ Enum8(&#39;UNK&#39; = 0, &#39;CSH&#39; = 1, &#39;CRE&#39; = 2, &#39;NOC&#39; = 3, &#39;DIS&#39; = 4), trip_type UInt8, pickup FixedString(25), dropoff FixedString(25), cab_type Enum8(&#39;yellow&#39; = 1, &#39;green&#39; = 2, &#39;uber&#39; = 3), pickup_nyct2010_gid UInt8, pickup_ctlabel Float32, pickup_borocode UInt8, pickup_boroname Enum8(&#39;&#39; = 0, &#39;Manhattan&#39; = 1, &#39;Bronx&#39; = 2, &#39;Brooklyn&#39; = 3, &#39;Queens&#39; = 4, &#39;Staten Island&#39; = 5), pickup_ct2010 FixedString(6), pickup_boroct2010 FixedString(7), pickup_cdeligibil Enum8(&#39; &#39; = 0, &#39;E&#39; = 1, &#39;I&#39; = 2), pickup_ntacode FixedString(4), pickup_ntaname Enum16(&#39;&#39; = 0, &#39;Airport&#39; = 1, &#39;Allerton-Pelham Gardens&#39; = 2, &#39;Annadale-Huguenot-Prince\&#39;s Bay-Eltingville&#39; = 3, &#39;Arden Heights&#39; = 4, &#39;Astoria&#39; = 5, &#39;Auburndale&#39; = 6, &#39;Baisley Park&#39; = 7, &#39;Bath Beach&#39; = 8, &#39;Battery Park City-Lower Manhattan&#39; = 9, &#39;Bay Ridge&#39; = 10, &#39;Bayside-Bayside Hills&#39; = 11, &#39;Bedford&#39; = 12, &#39;Bedford Park-Fordham North&#39; = 13, &#39;Bellerose&#39; = 14, &#39;Belmont&#39; = 15, &#39;Bensonhurst East&#39; = 16, &#39;Bensonhurst West&#39; = 17, &#39;Borough Park&#39; = 18, &#39;Breezy Point-Belle Harbor-Rockaway Park-Broad Channel&#39; = 19, &#39;Briarwood-Jamaica Hills&#39; = 20, &#39;Brighton Beach&#39; = 21, &#39;Bronxdale&#39; = 22, &#39;Brooklyn Heights-Cobble Hill&#39; = 23, &#39;Brownsville&#39; = 24, &#39;Bushwick North&#39; = 25, &#39;Bushwick South&#39; = 26, &#39;Cambria Heights&#39; = 27, &#39;Canarsie&#39; = 28, &#39;Carroll Gardens-Columbia Street-Red Hook&#39; = 29, &#39;Central Harlem North-Polo Grounds&#39; = 30, &#39;Central Harlem South&#39; = 31, &#39;Charleston-Richmond Valley-Tottenville&#39; = 32, &#39;Chinatown&#39; = 33, &#39;Claremont-Bathgate&#39; = 34, &#39;Clinton&#39; = 35, &#39;Clinton Hill&#39; = 36, &#39;Co-op City&#39; = 37, &#39;College Point&#39; = 38, &#39;Corona&#39; = 39, &#39;Crotona Park East&#39; = 40, &#39;Crown Heights North&#39; = 41, &#39;Crown Heights South&#39; = 42, &#39;Cypress Hills-City Line&#39; = 43, &#39;DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill&#39; = 44, &#39;Douglas Manor-Douglaston-Little Neck&#39; = 45, &#39;Dyker Heights&#39; = 46, &#39;East Concourse-Concourse Village&#39; = 47, &#39;East Elmhurst&#39; = 48, &#39;East Flatbush-Farragut&#39; = 49, &#39;East Flushing&#39; = 50, &#39;East Harlem North&#39; = 51, &#39;East Harlem South&#39; = 52, &#39;East New York&#39; = 53, &#39;East New York (Pennsylvania Ave)&#39; = 54, &#39;East Tremont&#39; = 55, &#39;East Village&#39; = 56, &#39;East Williamsburg&#39; = 57, &#39;Eastchester-Edenwald-Baychester&#39; = 58, &#39;Elmhurst&#39; = 59, &#39;Elmhurst-Maspeth&#39; = 60, &#39;Erasmus&#39; = 61, &#39;Far Rockaway-Bayswater&#39; = 62, &#39;Flatbush&#39; = 63, &#39;Flatlands&#39; = 64, &#39;Flushing&#39; = 65, &#39;Fordham South&#39; = 66, &#39;Forest Hills&#39; = 67, &#39;Fort Greene&#39; = 68, &#39;Fresh Meadows-Utopia&#39; = 69, &#39;Ft. Totten-Bay Terrace-Clearview&#39; = 70, &#39;Georgetown-Marine Park-Bergen Beach-Mill Basin&#39; = 71, &#39;Glen Oaks-Floral Park-New Hyde Park&#39; = 72, &#39;Glendale&#39; = 73, &#39;Gramercy&#39; = 74, &#39;Grasmere-Arrochar-Ft. Wadsworth&#39; = 75, &#39;Gravesend&#39; = 76, &#39;Great Kills&#39; = 77, &#39;Greenpoint&#39; = 78, &#39;Grymes Hill-Clifton-Fox Hills&#39; = 79, &#39;Hamilton Heights&#39; = 80, &#39;Hammels-Arverne-Edgemere&#39; = 81, &#39;Highbridge&#39; = 82, &#39;Hollis&#39; = 83, &#39;Homecrest&#39; = 84, &#39;Hudson Yards-Chelsea-Flatiron-Union Square&#39; = 85, &#39;Hunters Point-Sunnyside-West Maspeth&#39; = 86, &#39;Hunts Point&#39; = 87, &#39;Jackson Heights&#39; = 88, &#39;Jamaica&#39; = 89, &#39;Jamaica Estates-Holliswood&#39; = 90, &#39;Kensington-Ocean Parkway&#39; = 91, &#39;Kew Gardens&#39; = 92, &#39;Kew Gardens Hills&#39; = 93, &#39;Kingsbridge Heights&#39; = 94, &#39;Laurelton&#39; = 95, &#39;Lenox Hill-Roosevelt Island&#39; = 96, &#39;Lincoln Square&#39; = 97, &#39;Lindenwood-Howard Beach&#39; = 98, &#39;Longwood&#39; = 99, &#39;Lower East Side&#39; = 100, &#39;Madison&#39; = 101, &#39;Manhattanville&#39; = 102, &#39;Marble Hill-Inwood&#39; = 103, &#39;Mariner\&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39; = 104, &#39;Maspeth&#39; = 105, &#39;Melrose South-Mott Haven North&#39; = 106, &#39;Middle Village&#39; = 107, &#39;Midtown-Midtown South&#39; = 108, &#39;Midwood&#39; = 109, &#39;Morningside Heights&#39; = 110, &#39;Morrisania-Melrose&#39; = 111, &#39;Mott Haven-Port Morris&#39; = 112, &#39;Mount Hope&#39; = 113, &#39;Murray Hill&#39; = 114, &#39;Murray Hill-Kips Bay&#39; = 115, &#39;New Brighton-Silver Lake&#39; = 116, &#39;New Dorp-Midland Beach&#39; = 117, &#39;New Springville-Bloomfield-Travis&#39; = 118, &#39;North Corona&#39; = 119, &#39;North Riverdale-Fieldston-Riverdale&#39; = 120, &#39;North Side-South Side&#39; = 121, &#39;Norwood&#39; = 122, &#39;Oakland Gardens&#39; = 123, &#39;Oakwood-Oakwood Beach&#39; = 124, &#39;Ocean Hill&#39; = 125, &#39;Ocean Parkway South&#39; = 126, &#39;Old Astoria&#39; = 127, &#39;Old Town-Dongan Hills-South Beach&#39; = 128, &#39;Ozone Park&#39; = 129, &#39;Park Slope-Gowanus&#39; = 130, &#39;Parkchester&#39; = 131, &#39;Pelham Bay-Country Club-City Island&#39; = 132, &#39;Pelham Parkway&#39; = 133, &#39;Pomonok-Flushing Heights-Hillcrest&#39; = 134, &#39;Port Richmond&#39; = 135, &#39;Prospect Heights&#39; = 136, &#39;Prospect Lefferts Gardens-Wingate&#39; = 137, &#39;Queens Village&#39; = 138, &#39;Queensboro Hill&#39; = 139, &#39;Queensbridge-Ravenswood-Long Island City&#39; = 140, &#39;Rego Park&#39; = 141, &#39;Richmond Hill&#39; = 142, &#39;Ridgewood&#39; = 143, &#39;Rikers Island&#39; = 144, &#39;Rosedale&#39; = 145, &#39;Rossville-Woodrow&#39; = 146, &#39;Rugby-Remsen Village&#39; = 147, &#39;Schuylerville-Throgs Neck-Edgewater Park&#39; = 148, &#39;Seagate-Coney Island&#39; = 149, &#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39; = 150, &#39;SoHo-TriBeCa-Civic Center-Little Italy&#39; = 151, &#39;Soundview-Bruckner&#39; = 152, &#39;Soundview-Castle Hill-Clason Point-Harding Park&#39; = 153, &#39;South Jamaica&#39; = 154, &#39;South Ozone Park&#39; = 155, &#39;Springfield Gardens North&#39; = 156, &#39;Springfield Gardens South-Brookville&#39; = 157, &#39;Spuyten Duyvil-Kingsbridge&#39; = 158, &#39;St. Albans&#39; = 159, &#39;Stapleton-Rosebank&#39; = 160, &#39;Starrett City&#39; = 161, &#39;Steinway&#39; = 162, &#39;Stuyvesant Heights&#39; = 163, &#39;Stuyvesant Town-Cooper Village&#39; = 164, &#39;Sunset Park East&#39; = 165, &#39;Sunset Park West&#39; = 166, &#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39; = 167, &#39;Turtle Bay-East Midtown&#39; = 168, &#39;University Heights-Morris Heights&#39; = 169, &#39;Upper East Side-Carnegie Hill&#39; = 170, &#39;Upper West Side&#39; = 171, &#39;Van Cortlandt Village&#39; = 172, &#39;Van Nest-Morris Park-Westchester Square&#39; = 173, &#39;Washington Heights North&#39; = 174, &#39;Washington Heights South&#39; = 175, &#39;West Brighton&#39; = 176, &#39;West Concourse&#39; = 177, &#39;West Farms-Bronx River&#39; = 178, &#39;West New Brighton-New Brighton-St. George&#39; = 179, &#39;West Village&#39; = 180, &#39;Westchester-Unionport&#39; = 181, &#39;Westerleigh&#39; = 182, &#39;Whitestone&#39; = 183, &#39;Williamsbridge-Olinville&#39; = 184, &#39;Williamsburg&#39; = 185, &#39;Windsor Terrace&#39; = 186, &#39;Woodhaven&#39; = 187, &#39;Woodlawn-Wakefield&#39; = 188, &#39;Woodside&#39; = 189, &#39;Yorkville&#39; = 190, &#39;park-cemetery-etc-Bronx&#39; = 191, &#39;park-cemetery-etc-Brooklyn&#39; = 192, &#39;park-cemetery-etc-Manhattan&#39; = 193, &#39;park-cemetery-etc-Queens&#39; = 194, &#39;park-cemetery-etc-Staten Island&#39; = 195), pickup_puma UInt16, dropoff_nyct2010_gid UInt8, dropoff_ctlabel Float32, dropoff_borocode UInt8, dropoff_boroname Enum8(&#39;&#39; = 0, &#39;Manhattan&#39; = 1, &#39;Bronx&#39; = 2, &#39;Brooklyn&#39; = 3, &#39;Queens&#39; = 4, &#39;Staten Island&#39; = 5), dropoff_ct2010 FixedString(6), dropoff_boroct2010 FixedString(7), dropoff_cdeligibil Enum8(&#39; &#39; = 0, &#39;E&#39; = 1, &#39;I&#39; = 2), dropoff_ntacode FixedString(4), dropoff_ntaname Enum16(&#39;&#39; = 0, &#39;Airport&#39; = 1, &#39;Allerton-Pelham Gardens&#39; = 2, &#39;Annadale-Huguenot-Prince\&#39;s Bay-Eltingville&#39; = 3, &#39;Arden Heights&#39; = 4, &#39;Astoria&#39; = 5, &#39;Auburndale&#39; = 6, &#39;Baisley Park&#39; = 7, &#39;Bath Beach&#39; = 8, &#39;Battery Park City-Lower Manhattan&#39; = 9, &#39;Bay Ridge&#39; = 10, &#39;Bayside-Bayside Hills&#39; = 11, &#39;Bedford&#39; = 12, &#39;Bedford Park-Fordham North&#39; = 13, &#39;Bellerose&#39; = 14, &#39;Belmont&#39; = 15, &#39;Bensonhurst East&#39; = 16, &#39;Bensonhurst West&#39; = 17, &#39;Borough Park&#39; = 18, &#39;Breezy Point-Belle Harbor-Rockaway Park-Broad Channel&#39; = 19, &#39;Briarwood-Jamaica Hills&#39; = 20, &#39;Brighton Beach&#39; = 21, &#39;Bronxdale&#39; = 22, &#39;Brooklyn Heights-Cobble Hill&#39; = 23, &#39;Brownsville&#39; = 24, &#39;Bushwick North&#39; = 25, &#39;Bushwick South&#39; = 26, &#39;Cambria Heights&#39; = 27, &#39;Canarsie&#39; = 28, &#39;Carroll Gardens-Columbia Street-Red Hook&#39; = 29, &#39;Central Harlem North-Polo Grounds&#39; = 30, &#39;Central Harlem South&#39; = 31, &#39;Charleston-Richmond Valley-Tottenville&#39; = 32, &#39;Chinatown&#39; = 33, &#39;Claremont-Bathgate&#39; = 34, &#39;Clinton&#39; = 35, &#39;Clinton Hill&#39; = 36, &#39;Co-op City&#39; = 37, &#39;College Point&#39; = 38, &#39;Corona&#39; = 39, &#39;Crotona Park East&#39; = 40, &#39;Crown Heights North&#39; = 41, &#39;Crown Heights South&#39; = 42, &#39;Cypress Hills-City Line&#39; = 43, &#39;DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill&#39; = 44, &#39;Douglas Manor-Douglaston-Little Neck&#39; = 45, &#39;Dyker Heights&#39; = 46, &#39;East Concourse-Concourse Village&#39; = 47, &#39;East Elmhurst&#39; = 48, &#39;East Flatbush-Farragut&#39; = 49, &#39;East Flushing&#39; = 50, &#39;East Harlem North&#39; = 51, &#39;East Harlem South&#39; = 52, &#39;East New York&#39; = 53, &#39;East New York (Pennsylvania Ave)&#39; = 54, &#39;East Tremont&#39; = 55, &#39;East Village&#39; = 56, &#39;East Williamsburg&#39; = 57, &#39;Eastchester-Edenwald-Baychester&#39; = 58, &#39;Elmhurst&#39; = 59, &#39;Elmhurst-Maspeth&#39; = 60, &#39;Erasmus&#39; = 61, &#39;Far Rockaway-Bayswater&#39; = 62, &#39;Flatbush&#39; = 63, &#39;Flatlands&#39; = 64, &#39;Flushing&#39; = 65, &#39;Fordham South&#39; = 66, &#39;Forest Hills&#39; = 67, &#39;Fort Greene&#39; = 68, &#39;Fresh Meadows-Utopia&#39; = 69, &#39;Ft. Totten-Bay Terrace-Clearview&#39; = 70, &#39;Georgetown-Marine Park-Bergen Beach-Mill Basin&#39; = 71, &#39;Glen Oaks-Floral Park-New Hyde Park&#39; = 72, &#39;Glendale&#39; = 73, &#39;Gramercy&#39; = 74, &#39;Grasmere-Arrochar-Ft. Wadsworth&#39; = 75, &#39;Gravesend&#39; = 76, &#39;Great Kills&#39; = 77, &#39;Greenpoint&#39; = 78, &#39;Grymes Hill-Clifton-Fox Hills&#39; = 79, &#39;Hamilton Heights&#39; = 80, &#39;Hammels-Arverne-Edgemere&#39; = 81, &#39;Highbridge&#39; = 82, &#39;Hollis&#39; = 83, &#39;Homecrest&#39; = 84, &#39;Hudson Yards-Chelsea-Flatiron-Union Square&#39; = 85, &#39;Hunters Point-Sunnyside-West Maspeth&#39; = 86, &#39;Hunts Point&#39; = 87, &#39;Jackson Heights&#39; = 88, &#39;Jamaica&#39; = 89, &#39;Jamaica Estates-Holliswood&#39; = 90, &#39;Kensington-Ocean Parkway&#39; = 91, &#39;Kew Gardens&#39; = 92, &#39;Kew Gardens Hills&#39; = 93, &#39;Kingsbridge Heights&#39; = 94, &#39;Laurelton&#39; = 95, &#39;Lenox Hill-Roosevelt Island&#39; = 96, &#39;Lincoln Square&#39; = 97, &#39;Lindenwood-Howard Beach&#39; = 98, &#39;Longwood&#39; = 99, &#39;Lower East Side&#39; = 100, &#39;Madison&#39; = 101, &#39;Manhattanville&#39; = 102, &#39;Marble Hill-Inwood&#39; = 103, &#39;Mariner\&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39; = 104, &#39;Maspeth&#39; = 105, &#39;Melrose South-Mott Haven North&#39; = 106, &#39;Middle Village&#39; = 107, &#39;Midtown-Midtown South&#39; = 108, &#39;Midwood&#39; = 109, &#39;Morningside Heights&#39; = 110, &#39;Morrisania-Melrose&#39; = 111, &#39;Mott Haven-Port Morris&#39; = 112, &#39;Mount Hope&#39; = 113, &#39;Murray Hill&#39; = 114, &#39;Murray Hill-Kips Bay&#39; = 115, &#39;New Brighton-Silver Lake&#39; = 116, &#39;New Dorp-Midland Beach&#39; = 117, &#39;New Springville-Bloomfield-Travis&#39; = 118, &#39;North Corona&#39; = 119, &#39;North Riverdale-Fieldston-Riverdale&#39; = 120, &#39;North Side-South Side&#39; = 121, &#39;Norwood&#39; = 122, &#39;Oakland Gardens&#39; = 123, &#39;Oakwood-Oakwood Beach&#39; = 124, &#39;Ocean Hill&#39; = 125, &#39;Ocean Parkway South&#39; = 126, &#39;Old Astoria&#39; = 127, &#39;Old Town-Dongan Hills-South Beach&#39; = 128, &#39;Ozone Park&#39; = 129, &#39;Park Slope-Gowanus&#39; = 130, &#39;Parkchester&#39; = 131, &#39;Pelham Bay-Country Club-City Island&#39; = 132, &#39;Pelham Parkway&#39; = 133, &#39;Pomonok-Flushing Heights-Hillcrest&#39; = 134, &#39;Port Richmond&#39; = 135, &#39;Prospect Heights&#39; = 136, &#39;Prospect Lefferts Gardens-Wingate&#39; = 137, &#39;Queens Village&#39; = 138, &#39;Queensboro Hill&#39; = 139, &#39;Queensbridge-Ravenswood-Long Island City&#39; = 140, &#39;Rego Park&#39; = 141, &#39;Richmond Hill&#39; = 142, &#39;Ridgewood&#39; = 143, &#39;Rikers Island&#39; = 144, &#39;Rosedale&#39; = 145, &#39;Rossville-Woodrow&#39; = 146, &#39;Rugby-Remsen Village&#39; = 147, &#39;Schuylerville-Throgs Neck-Edgewater Park&#39; = 148, &#39;Seagate-Coney Island&#39; = 149, &#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39; = 150, &#39;SoHo-TriBeCa-Civic Center-Little Italy&#39; = 151, &#39;Soundview-Bruckner&#39; = 152, &#39;Soundview-Castle Hill-Clason Point-Harding Park&#39; = 153, &#39;South Jamaica&#39; = 154, &#39;South Ozone Park&#39; = 155, &#39;Springfield Gardens North&#39; = 156, &#39;Springfield Gardens South-Brookville&#39; = 157, &#39;Spuyten Duyvil-Kingsbridge&#39; = 158, &#39;St. Albans&#39; = 159, &#39;Stapleton-Rosebank&#39; = 160, &#39;Starrett City&#39; = 161, &#39;Steinway&#39; = 162, &#39;Stuyvesant Heights&#39; = 163, &#39;Stuyvesant Town-Cooper Village&#39; = 164, &#39;Sunset Park East&#39; = 165, &#39;Sunset Park West&#39; = 166, &#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39; = 167, &#39;Turtle Bay-East Midtown&#39; = 168, &#39;University Heights-Morris Heights&#39; = 169, &#39;Upper East Side-Carnegie Hill&#39; = 170, &#39;Upper West Side&#39; = 171, &#39;Van Cortlandt Village&#39; = 172, &#39;Van Nest-Morris Park-Westchester Square&#39; = 173, &#39;Washington Heights North&#39; = 174, &#39;Washington Heights South&#39; = 175, &#39;West Brighton&#39; = 176, &#39;West Concourse&#39; = 177, &#39;West Farms-Bronx River&#39; = 178, &#39;West New Brighton-New Brighton-St. George&#39; = 179, &#39;West Village&#39; = 180, &#39;Westchester-Unionport&#39; = 181, &#39;Westerleigh&#39; = 182, &#39;Whitestone&#39; = 183, &#39;Williamsbridge-Olinville&#39; = 184, &#39;Williamsburg&#39; = 185, &#39;Windsor Terrace&#39; = 186, &#39;Woodhaven&#39; = 187, &#39;Woodlawn-Wakefield&#39; = 188, &#39;Woodside&#39; = 189, &#39;Yorkville&#39; = 190, &#39;park-cemetery-etc-Bronx&#39; = 191, &#39;park-cemetery-etc-Brooklyn&#39; = 192, &#39;park-cemetery-etc-Manhattan&#39; = 193, &#39;park-cemetery-etc-Queens&#39; = 194, &#39;park-cemetery-etc-Staten Island&#39; = 195), dropoff_puma UInt16) ENGINE = MergeTree(pickup_date, pickup_datetime, 8192)</span>
</pre></div>


<p>На исходном сервере:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">trips_mergetree_x3</span> <span class="k">AS</span> <span class="n">trips_mergetree_third</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Distributed</span><span class="p">(</span><span class="n">perftest</span><span class="p">,</span> <span class="k">default</span><span class="p">,</span> <span class="n">trips_mergetree_third</span><span class="p">,</span> <span class="n">rand</span><span class="p">())</span>
</pre></div>


<p>Следующим запрос перераспределит данные:</p>
<div class="codehilite"><pre><span></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">trips_mergetree_x3</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">trips_mergetree</span>
</pre></div>


<p>Это занимает 2454 секунд.</p>
<p>На трёх серверах:</p>
<p>Q1: 0.212 секунд.
Q2: 0.438 секунд.
Q3: 0.733 секунд.
Q4: 1.241 секунд.</p>
<p>Никакого сюрприза, так как запросы масштабируются линейно.</p>
<p>Также у нас есть результаты с кластера из 140 серверов:</p>
<p>Q1: 0.028 sec.
Q2: 0.043 sec.
Q3: 0.051 sec.
Q4: 0.072 sec.</p>
<p>В этом случае, время выполнения запросов определяется в первую очередь сетевыми задержками.
Мы выполняли запросы с помощью клиента, расположенного в датацентре Яндекса в Мянтсяля (Финляндия), на кластер в России, что добавляет порядка 20 мс задержки.</p>
<h2 id="reziume">Резюме<a class="headerlink" href="#reziume" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>серверов</th>
<th>Q1</th>
<th>Q2</th>
<th>Q3</th>
<th>Q4</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0.490</td>
<td>1.224</td>
<td>2.104</td>
<td>3.593</td>
</tr>
<tr>
<td>3</td>
<td>0.212</td>
<td>0.438</td>
<td>0.733</td>
<td>1.241</td>
</tr>
<tr>
<td>140</td>
<td>0.028</td>
<td>0.043</td>
<td>0.051</td>
<td>0.072</td>
</tr>
</tbody>
</table>
                
                </div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../getting_started/example_datasets/ontime/" title="OnTime" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Назад
                </span>
                OnTime
              </span>
            </div>
          </a>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../getting_started/example_datasets/amplab_benchmark/" title="AMPLab Big Data Benchmark" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Вперед
                </span>
                AMPLab Big Data Benchmark
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2016–2020 Yandex LLC
          </div>
        
      </div>
      
        <div class="md-footer-social">
  <span class="md-footer-copyright__highlight">Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/69ad5cf04e2d78bb10ce6a3091341fa8ba769a8e" rel="external nofollow">69ad5cf</a></span>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      
        <script src="../../../assets/javascripts/modernizr.js"></script>
      
      <script src="../../../assets/javascripts/application.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../../assets/javascripts/lunr/lunr.ru.js"></script>
            
          
          
            <script src="../../../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      
    
    
      
    

    <script type="text/javascript">
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'ru';
            }
          )
      });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:ru"]
},
debug: false
});
</script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/18343495" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>