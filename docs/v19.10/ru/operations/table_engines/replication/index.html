



<!DOCTYPE html>
<html lang="ru" class="no-js" data-version="v19.10" data-single-page="false">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://clickhouse.yandex/docs/ru/operations/table_engines/replication/">
      
      
      
      <meta name="lang:clipboard.copy" content="Копировать в буфер">
      
      <meta name="lang:clipboard.copied" content="Скопировано в буфер">
      
      <meta name="lang:search.language" content="ru">
      
      <meta name="lang:search.pipeline.stopwords" content="">
      
      <meta name="lang:search.pipeline.trimmer" content="">
      
      <meta name="lang:search.result.none" content="Совпадений не найдено">
      
      <meta name="lang:search.result.one" content="Найдено 1 совпадение">
      
      <meta name="lang:search.result.other" content="Найдено # совпадений">
      
      <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
    
    
      
        <title>Репликация данных - Документация ClickHouse v19.10</title>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
      <link rel="stylesheet" href="../../../assets/stylesheets/application.2a88008a.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom.css?69ad5cf?1582277226">
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="white" class="md-lang-ru">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">

  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="/" title="Документация ClickHouse v19.10" class="md-header-nav__button md-logo">
          
            <img src="../../../images/logo.svg" width="40" height="40">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Документация ClickHouse v19.10
              </span>
              <span class="md-header-nav__topic">
                Репликация данных
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" id="md-search__input" class="md-search__input" name="query" required placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Начните печатать для поиска
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div id="md-language-switch" class="md-header-nav__source">
            

  <a class="md-alt-lang"
     href="../../../../en/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../ru/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../fa/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      <nav class="md-nav md-nav--primary" data-md-level="0">
  
  <label class="md-nav__title md-nav__title--site" for="drawer">
    Документация ClickHouse v19.10
  </label>

  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Введение
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Введение
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../" title="Обзор" class="md-nav__link">
      Обзор
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/distinctive_features/" title="Отличительные возможности ClickHouse" class="md-nav__link">
      Отличительные возможности ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/features_considered_disadvantages/" title="Особенности ClickHouse, которые могут считаться недостатками" class="md-nav__link">
      Особенности ClickHouse, которые могут считаться недостатками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/performance/" title="Производительность" class="md-nav__link">
      Производительность
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/ya_metrika_task/" title="Постановка задачи в Яндекс.Метрике" class="md-nav__link">
      Постановка задачи в Яндекс.Метрике
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/info/" title="Информационная поддержка" class="md-nav__link">
      Информационная поддержка
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Начало работы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Начало работы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/" title="Установка и запуск" class="md-nav__link">
      Установка и запуск
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Тестовые наборы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Тестовые наборы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/ontime/" title="OnTime" class="md-nav__link">
      OnTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/nyc_taxi/" title="Данные о такси в Нью-Йорке" class="md-nav__link">
      Данные о такси в Нью-Йорке
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/amplab_benchmark/" title="AMPLab Big Data Benchmark" class="md-nav__link">
      AMPLab Big Data Benchmark
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/wikistat/" title="WikiStat" class="md-nav__link">
      WikiStat
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/criteo/" title="Терабайт логов кликов от Criteo" class="md-nav__link">
      Терабайт логов кликов от Criteo
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/star_schema/" title="Схема «Звезда»" class="md-nav__link">
      Схема «Звезда»
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/metrica/" title="Данные Яндекс.Метрики" class="md-nav__link">
      Данные Яндекс.Метрики
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Интерфейсы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Интерфейсы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/cli/" title="Клиент командной строки" class="md-nav__link">
      Клиент командной строки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/tcp/" title="Нативный интерфейс (TCP)" class="md-nav__link">
      Нативный интерфейс (TCP)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/http/" title="HTTP-интерфейс" class="md-nav__link">
      HTTP-интерфейс
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/formats/" title="Форматы входных и выходных данных" class="md-nav__link">
      Форматы входных и выходных данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/jdbc/" title="JDBC-драйвер" class="md-nav__link">
      JDBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/odbc/" title="ODBC-драйвер" class="md-nav__link">
      ODBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8" type="checkbox" id="nav-3-8">
    
    <label class="md-nav__link" for="nav-3-8">
      От сторонних разработчиков
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        От сторонних разработчиков
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/client_libraries/" title="Клиентские библиотеки" class="md-nav__link">
      Клиентские библиотеки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/integrations/" title="Интеграции" class="md-nav__link">
      Интеграции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/gui/" title="Визуальные интерфейсы" class="md-nav__link">
      Визуальные интерфейсы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/proxy/" title="Прокси" class="md-nav__link">
      Прокси
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/int_uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="md-nav__link">
      UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/float/" title="Float32, Float64" class="md-nav__link">
      Float32, Float64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/decimal/" title="Decimal" class="md-nav__link">
      Decimal
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/boolean/" title="Булевы значения" class="md-nav__link">
      Булевы значения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/fixedstring/" title="FixedString(N)" class="md-nav__link">
      FixedString(N)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/uuid/" title="UUID" class="md-nav__link">
      UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/datetime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/array/" title="Array(T)" class="md-nav__link">
      Array(T)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/aggregatefunction/" title="AggregateFunction(name, types_of_arguments...)" class="md-nav__link">
      AggregateFunction(name, types_of_arguments...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/tuple/" title="Tuple(T1, T2, ...)" class="md-nav__link">
      Tuple(T1, T2, ...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nullable/" title="Nullable" class="md-nav__link">
      Nullable
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-16" type="checkbox" id="nav-4-16">
    
    <label class="md-nav__link" for="nav-4-16">
      Вложенные структуры данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-16">
        Вложенные структуры данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="md-nav__link">
      Nested(Name1 Type1, Name2 Type2, ...)
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-17" type="checkbox" id="nav-4-17">
    
    <label class="md-nav__link" for="nav-4-17">
      Служебные типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-17">
        Служебные типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/expression/" title="Expression" class="md-nav__link">
      Expression
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/nothing/" title="Nothing" class="md-nav__link">
      Nothing
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-18" type="checkbox" id="nav-4-18">
    
    <label class="md-nav__link" for="nav-4-18">
      Domains
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-18">
        Domains
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/ipv4/" title="IPv4" class="md-nav__link">
      IPv4
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/ipv6/" title="IPv6" class="md-nav__link">
      IPv6
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Движки таблиц
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Движки таблиц
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2" checked>
    
    <label class="md-nav__link" for="nav-5-2">
      Семейство MergeTree
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Семейство MergeTree
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mergetree/" title="MergeTree" class="md-nav__link">
      MergeTree
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Репликация данных
      </label>
    
    <a href="../../../operations/table_engines/replication/" title="Репликация данных" class="md-nav__link md-nav__link--active">
      <strong>Репликация данных</strong>
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-replicated-tables" title="Создание реплицируемых таблиц" class="md-nav__link">
    Создание реплицируемых таблиц
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vosstanovlenie-posle-sboia" title="Восстановление после сбоя" class="md-nav__link">
    Восстановление после сбоя
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vosstanovlenie-v-sluchae-poteri-vsekh-dannykh" title="Восстановление в случае потери всех данных" class="md-nav__link">
    Восстановление в случае потери всех данных
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preobrazovanie-iz-mergetree-v-replicatedmergetree" title="Преобразование из MergeTree в ReplicatedMergeTree" class="md-nav__link">
    Преобразование из MergeTree в ReplicatedMergeTree
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preobrazovanie-iz-replicatedmergetree-v-mergetree" title="Преобразование из ReplicatedMergeTree в MergeTree" class="md-nav__link">
    Преобразование из ReplicatedMergeTree в MergeTree
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vosstanovlenie-v-sluchae-poteri-ili-povrezhdeniia-metadannykh-na-zookeeper-klastere" title="Восстановление в случае потери или повреждения метаданных на ZooKeeper кластере" class="md-nav__link">
    Восстановление в случае потери или повреждения метаданных на ZooKeeper кластере
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/custom_partitioning_key/" title="Произвольный ключ партиционирования" class="md-nav__link">
      Произвольный ключ партиционирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replacingmergetree/" title="ReplacingMergeTree" class="md-nav__link">
      ReplacingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/summingmergetree/" title="SummingMergeTree" class="md-nav__link">
      SummingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/aggregatingmergetree/" title="AggregatingMergeTree" class="md-nav__link">
      AggregatingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/collapsingmergetree/" title="CollapsingMergeTree" class="md-nav__link">
      CollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="md-nav__link">
      VersionedCollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/graphitemergetree/" title="GraphiteMergeTree" class="md-nav__link">
      GraphiteMergeTree
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Семейство Log
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Семейство Log
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log_family/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/stripelog/" title="StripeLog" class="md-nav__link">
      StripeLog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log/" title="Log" class="md-nav__link">
      Log
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/tinylog/" title="TinyLog" class="md-nav__link">
      TinyLog
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Интеграции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Интеграции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Особые
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        Особые
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/distributed/" title="Distributed" class="md-nav__link">
      Distributed
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/external_data/" title="Внешние данные" class="md-nav__link">
      Внешние данные
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/dictionary/" title="Dictionary" class="md-nav__link">
      Dictionary
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/merge/" title="Merge" class="md-nav__link">
      Merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/join/" title="Join" class="md-nav__link">
      Join
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/url/" title="URL" class="md-nav__link">
      URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/view/" title="View" class="md-nav__link">
      View
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/materializedview/" title="MaterializedView" class="md-nav__link">
      MaterializedView
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/buffer/" title="Buffer" class="md-nav__link">
      Buffer
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/jdbc/" title="JDBC" class="md-nav__link">
      JDBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/odbc/" title="ODBC" class="md-nav__link">
      ODBC
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Справка по SQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Справка по SQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/select/" title="SELECT" class="md-nav__link">
      SELECT
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/insert_into/" title="INSERT INTO" class="md-nav__link">
      INSERT INTO
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/create/" title="CREATE" class="md-nav__link">
      CREATE
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/alter/" title="ALTER" class="md-nav__link">
      ALTER
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/misc/" title="Прочие виды запросов" class="md-nav__link">
      Прочие виды запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7">
    
    <label class="md-nav__link" for="nav-6-7">
      Функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        Функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/arithmetic_functions/" title="Арифметические функции" class="md-nav__link">
      Арифметические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/comparison_functions/" title="Функции сравнения" class="md-nav__link">
      Функции сравнения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/logical_functions/" title="Логические функции" class="md-nav__link">
      Логические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/type_conversion_functions/" title="Функции преобразования типов" class="md-nav__link">
      Функции преобразования типов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/date_time_functions/" title="Функции для работы с датами и временем" class="md-nav__link">
      Функции для работы с датами и временем
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_functions/" title="Функции для работы со строками" class="md-nav__link">
      Функции для работы со строками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_search_functions/" title="Функции поиска в строках" class="md-nav__link">
      Функции поиска в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_replace_functions/" title="Функции поиска и замены в строках" class="md-nav__link">
      Функции поиска и замены в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/conditional_functions/" title="Условные функции" class="md-nav__link">
      Условные функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/math_functions/" title="Математические функции" class="md-nav__link">
      Математические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/rounding_functions/" title="Функции округления" class="md-nav__link">
      Функции округления
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_functions/" title="Функции по работе с массивами" class="md-nav__link">
      Функции по работе с массивами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/splitting_merging_functions/" title="Функции разбиения и слияния строк и массивов" class="md-nav__link">
      Функции разбиения и слияния строк и массивов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bit_functions/" title="Битовые функции" class="md-nav__link">
      Битовые функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bitmap_functions/" title="Функции для битмапов" class="md-nav__link">
      Функции для битмапов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/hash_functions/" title="Функции хэширования" class="md-nav__link">
      Функции хэширования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/random_functions/" title="Функции генерации псевдослучайных чисел" class="md-nav__link">
      Функции генерации псевдослучайных чисел
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/uuid_functions/" title="Функции для работы с UUID" class="md-nav__link">
      Функции для работы с UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/encoding_functions/" title="Функции кодирования" class="md-nav__link">
      Функции кодирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/url_functions/" title="Функции для работы с URL" class="md-nav__link">
      Функции для работы с URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ip_address_functions/" title="Функции для работы с IP-адресами" class="md-nav__link">
      Функции для работы с IP-адресами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/json_functions/" title="Функции для работы с JSON." class="md-nav__link">
      Функции для работы с JSON.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/higher_order_functions/" title="Функции высшего порядка" class="md-nav__link">
      Функции высшего порядка
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ext_dict_functions/" title="Функции для работы с внешними словарями" class="md-nav__link">
      Функции для работы с внешними словарями
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ym_dict_functions/" title="Функции для работы со словарями Яндекс.Метрики" class="md-nav__link">
      Функции для работы со словарями Яндекс.Метрики
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/in_functions/" title="Функции для реализации оператора IN." class="md-nav__link">
      Функции для реализации оператора IN.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_join/" title="Функция arrayJoin" class="md-nav__link">
      Функция arrayJoin
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/geo/" title="Функции для работы с географическими координатами" class="md-nav__link">
      Функции для работы с географическими координатами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/functions_for_nulls/" title="Функции c Nullable агрументами" class="md-nav__link">
      Функции c Nullable агрументами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/machine_learning_functions/" title="Функции машинного обучения" class="md-nav__link">
      Функции машинного обучения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/other_functions/" title="Прочие функции" class="md-nav__link">
      Прочие функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-8" type="checkbox" id="nav-6-8">
    
    <label class="md-nav__link" for="nav-6-8">
      Агрегатные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-8">
        Агрегатные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/reference/" title="Справочник функций" class="md-nav__link">
      Справочник функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/combinators/" title="Комбинаторы агрегатных функций" class="md-nav__link">
      Комбинаторы агрегатных функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/parametric_functions/" title="Параметрические агрегатные функции" class="md-nav__link">
      Параметрические агрегатные функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9" type="checkbox" id="nav-6-9">
    
    <label class="md-nav__link" for="nav-6-9">
      Табличные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-9">
        Табличные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/file/" title="file" class="md-nav__link">
      file
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/merge/" title="merge" class="md-nav__link">
      merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/numbers/" title="numbers" class="md-nav__link">
      numbers
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/remote/" title="remote" class="md-nav__link">
      remote
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/url/" title="url" class="md-nav__link">
      url
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/mysql/" title="mysql" class="md-nav__link">
      mysql
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/jdbc/" title="jdbc" class="md-nav__link">
      jdbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/odbc/" title="odbc" class="md-nav__link">
      odbc
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10" type="checkbox" id="nav-6-10">
    
    <label class="md-nav__link" for="nav-6-10">
      Словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-10">
        Словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10-2" type="checkbox" id="nav-6-10-2">
    
    <label class="md-nav__link" for="nav-6-10-2">
      Внешние словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-10-2">
        Внешние словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts/" title="Общее описание" class="md-nav__link">
      Общее описание
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict/" title="Настройка внешнего словаря" class="md-nav__link">
      Настройка внешнего словаря
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_layout/" title="Хранение словарей в памяти" class="md-nav__link">
      Хранение словарей в памяти
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_lifetime/" title="Обновление словарей" class="md-nav__link">
      Обновление словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_sources/" title="Источники внешних словарей" class="md-nav__link">
      Источники внешних словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_structure/" title="Ключ и поля словаря" class="md-nav__link">
      Ключ и поля словаря
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/internal_dicts/" title="Встроенные словари" class="md-nav__link">
      Встроенные словари
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/operators/" title="Операторы" class="md-nav__link">
      Операторы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/syntax/" title="Общий синтаксис" class="md-nav__link">
      Общий синтаксис
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Эксплуатация
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Эксплуатация
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/requirements/" title="Требования" class="md-nav__link">
      Требования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/monitoring/" title="Мониторинг" class="md-nav__link">
      Мониторинг
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/troubleshooting/" title="Устранение неисправностей" class="md-nav__link">
      Устранение неисправностей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/tips/" title="Советы по эксплуатации" class="md-nav__link">
      Советы по эксплуатации
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/update/" title="Обновление ClickHouse" class="md-nav__link">
      Обновление ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/access_rights/" title="Права доступа" class="md-nav__link">
      Права доступа
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/backup/" title="Резервное копирование" class="md-nav__link">
      Резервное копирование
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/configuration_files/" title="Конфигурационные файлы" class="md-nav__link">
      Конфигурационные файлы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/quotas/" title="Квоты" class="md-nav__link">
      Квоты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/system_tables/" title="Системные таблицы" class="md-nav__link">
      Системные таблицы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-12" type="checkbox" id="nav-7-12">
    
    <label class="md-nav__link" for="nav-7-12">
      Конфигурационные параметры сервера
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-12">
        Конфигурационные параметры сервера
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/settings/" title="Серверные настройки" class="md-nav__link">
      Серверные настройки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-13" type="checkbox" id="nav-7-13">
    
    <label class="md-nav__link" for="nav-7-13">
      Настройки
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-13">
        Настройки
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/permissions_for_queries/" title="Разрешения на выполнение запросов" class="md-nav__link">
      Разрешения на выполнение запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/query_complexity/" title="Ограничения на сложность запроса" class="md-nav__link">
      Ограничения на сложность запроса
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings/" title="Настройки" class="md-nav__link">
      Настройки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/constraints_on_settings/" title="Ограничения на изменение настроек" class="md-nav__link">
      Ограничения на изменение настроек
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings_profiles/" title="Профили настроек" class="md-nav__link">
      Профили настроек
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-14" type="checkbox" id="nav-7-14">
    
    <label class="md-nav__link" for="nav-7-14">
      Утилиты
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-14">
        Утилиты
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-copier/" title="clickhouse-copier" class="md-nav__link">
      clickhouse-copier
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-local/" title="clickhouse-local" class="md-nav__link">
      clickhouse-local
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      F.A.Q.
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        F.A.Q.
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../faq/general/" title="Общие вопросы" class="md-nav__link">
      Общие вопросы
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Разработка
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Разработка
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/architecture/" title="Обзор архитектуры ClickHouse" class="md-nav__link">
      Обзор архитектуры ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build/" title="Как собрать ClickHouse на Linux" class="md-nav__link">
      Как собрать ClickHouse на Linux
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build_osx/" title="Как собрать ClickHouse на Mac OS X" class="md-nav__link">
      Как собрать ClickHouse на Mac OS X
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/style/" title="Как писать код на C++" class="md-nav__link">
      Как писать код на C++
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/tests/" title="Как запустить тесты" class="md-nav__link">
      Как запустить тесты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/contrib/" title="Сторонние библиотеки" class="md-nav__link">
      Сторонние библиотеки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Что нового
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Что нового
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../security_changelog/" title="Security changelog" class="md-nav__link">
      Security changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
  </ul>
  

  <ul id="md-extra-nav" class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item md-nav__item--active">
      Релиз:
      <span class="md-selector">
        <select id="releases-selector">
          <option value="">последний</option>
          
            <option value="v20.1"
              
            >v20.1</option>
          
            <option value="v19.17"
              
            >v19.17</option>
          
            <option value="v19.16"
              
            >v19.16</option>
          
            <option value="v19.15"
              
            >v19.15</option>
          
            <option value="v19.14"
              
            >v19.14</option>
          
            <option value="v19.13"
              
            >v19.13</option>
          
            <option value="v19.11"
              
            >v19.11</option>
          
            <option value="v19.10"
              
                selected="selected"
              
            >v19.10</option>
          
            <option value="v19.9"
              
            >v19.9</option>
          
            <option value="v19.8"
              
            >v19.8</option>
          
            <option value="v19.7"
              
            >v19.7</option>
          
        </select><span id="releases-selector-after">&nbsp;▾</span>
      </span>
    </li>
    <li class="md-nav__item md-nav__item--active">
        
          <a href="../../../single/" class="md-nav__link md-nav__link--active">Одностраничная версия</a>
        
    </li>
    <li class="md-nav__item md-nav__item--active">
          <a href="../../../single/clickhouse_ru.pdf" class="md-nav__link md-nav__link--active">PDF версия</a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
      <a href="https://github.com/ClickHouse/ClickHouse/" rel="external nofollow" target="_blank" class="md-nav__link">
        Исходный код ClickHouse
      </a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
        <span id="md-sidebar-flags" class="md-nav__link">
        

  <a class="md-alt-lang"
     href="../../../../en/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../ru/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../fa/operations/table_engines/replication/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

        </span>
    </li>
  </ul>
</nav>
                    
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-replicated-tables" title="Создание реплицируемых таблиц" class="md-nav__link">
    Создание реплицируемых таблиц
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vosstanovlenie-posle-sboia" title="Восстановление после сбоя" class="md-nav__link">
    Восстановление после сбоя
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vosstanovlenie-v-sluchae-poteri-vsekh-dannykh" title="Восстановление в случае потери всех данных" class="md-nav__link">
    Восстановление в случае потери всех данных
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preobrazovanie-iz-mergetree-v-replicatedmergetree" title="Преобразование из MergeTree в ReplicatedMergeTree" class="md-nav__link">
    Преобразование из MergeTree в ReplicatedMergeTree
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preobrazovanie-iz-replicatedmergetree-v-mergetree" title="Преобразование из ReplicatedMergeTree в MergeTree" class="md-nav__link">
    Преобразование из ReplicatedMergeTree в MergeTree
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vosstanovlenie-v-sluchae-poteri-ili-povrezhdeniia-metadannykh-na-zookeeper-klastere" title="Восстановление в случае потери или повреждения метаданных на ZooKeeper кластере" class="md-nav__link">
    Восстановление в случае потери или повреждения метаданных на ZooKeeper кластере
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                    
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                    <a href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/operations/table_engines/replication.md" title="Редактировать страницу" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a>
                  
                
                
                <div id="content">
                
                  <h1 id="table_engines-replication">Репликация данных<a class="headerlink" href="#table_engines-replication" title="Permanent link">&para;</a></h1>
<p>Репликация поддерживается только для таблиц семейства MergeTree:</p>
<ul>
<li>ReplicatedMergeTree</li>
<li>ReplicatedSummingMergeTree</li>
<li>ReplicatedReplacingMergeTree</li>
<li>ReplicatedAggregatingMergeTree</li>
<li>ReplicatedCollapsingMergeTree</li>
<li>ReplicatedVersionedCollapsingMergeTree</li>
<li>ReplicatedGraphiteMergeTree</li>
</ul>
<p>Репликация работает на уровне отдельных таблиц, а не всего сервера. То есть, на сервере могут быть расположены одновременно реплицируемые и не реплицируемые таблицы.</p>
<p>Репликация не зависит от шардирования. На каждом шарде репликация работает независимо.</p>
<p>Реплицируются сжатые данные запросов <code>INSERT</code>, <code>ALTER</code> (см. подробности в описании запроса <a href="../../../query_language/alter/#query_language_queries_alter">ALTER</a>).</p>
<p>Запросы <code>CREATE</code>, <code>DROP</code>, <code>ATTACH</code>, <code>DETACH</code> и <code>RENAME</code> выполняются на одном сервере и не реплицируются:</p>
<ul>
<li>Запрос <code>CREATE TABLE</code> создаёт новую реплицируемую таблицу на том сервере, где его выполнили. Если таблица уже существует на других серверах, запрос добавляет новую реплику.</li>
<li><code>DROP TABLE</code> удаляет реплику, расположенную на том сервере, где выполняется запрос.</li>
<li>Запрос <code>RENAME</code> переименовывает таблицу на одной реплик. Другими словами, реплицируемые таблицы на разных репликах могут называться по-разному.</li>
</ul>
<p>Чтобы использовать репликацию, укажите в конфигурационном файле адреса ZooKeeper кластера. Пример:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;zookeeper&gt;</span>
    <span class="nt">&lt;node</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;host&gt;</span>example1<span class="nt">&lt;/host&gt;</span>
        <span class="nt">&lt;port&gt;</span>2181<span class="nt">&lt;/port&gt;</span>
    <span class="nt">&lt;/node&gt;</span>
    <span class="nt">&lt;node</span> <span class="na">index=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;host&gt;</span>example2<span class="nt">&lt;/host&gt;</span>
        <span class="nt">&lt;port&gt;</span>2181<span class="nt">&lt;/port&gt;</span>
    <span class="nt">&lt;/node&gt;</span>
    <span class="nt">&lt;node</span> <span class="na">index=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;host&gt;</span>example3<span class="nt">&lt;/host&gt;</span>
        <span class="nt">&lt;port&gt;</span>2181<span class="nt">&lt;/port&gt;</span>
    <span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/zookeeper&gt;</span>
</pre></div>


<p>Используйте ZooKeeper версии 3.4.5 или более новый.</p>
<p>Можно указать любой имеющийся у вас ZooKeeper-кластер - система будет использовать в нём одну директорию для своих данных (директория указывается при создании реплицируемой таблицы).</p>
<p>Если в конфигурационном файле не настроен ZooKeeper, то вы не сможете создать реплицируемые таблицы, а уже имеющиеся реплицируемые таблицы будут доступны в режиме только на чтение.</p>
<p>При запросах <code>SELECT</code>, ZooKeeper не используется, т.е. репликация не влияет на производительность <code>SELECT</code> и запросы работают так же быстро, как и для нереплицируемых таблиц. При запросах к распределенным реплицированным таблицам поведение ClickHouse регулируется настройками <a href="../../settings/settings/#settings-max_replica_delay_for_distributed_queries">max_replica_delay_for_distributed_queries</a> and <a href="../../settings/settings/">fallback_to_stale_replicas_for_distributed_queries</a>.</p>
<p>При каждом запросе <code>INSERT</code>, делается около десятка записей в ZooKeeper в рамках нескольких транзакций. (Чтобы быть более точным, это для каждого вставленного блока данных; запрос INSERT содержит один блок или один блок на <code>max_insert_block_size = 1048576</code> строк.) Это приводит к некоторому увеличению задержек при <code>INSERT</code>, по сравнению с нереплицируемыми таблицами. Но если придерживаться обычных рекомендаций - вставлять данные пачками не более одного <code>INSERT</code> в секунду, то это не составляет проблем. На всём кластере ClickHouse, использующим для координации один кластер ZooKeeper, может быть в совокупности несколько сотен <code>INSERT</code> в секунду. Пропускная способность при вставке данных (количество строчек в секунду) такая же высокая, как для нереплицируемых таблиц.</p>
<p>Для очень больших кластеров, можно использовать разные кластеры ZooKeeper для разных шардов. Впрочем, на кластере Яндекс.Метрики (примерно 300 серверов) такой необходимости не возникает.</p>
<p>Репликация асинхронная, мульти-мастер. Запросы <code>INSERT</code> и <code>ALTER</code> можно направлять на любой доступный сервер. Данные вставятся на сервер, где выполнен запрос, а затем скопируются на остальные серверы. В связи с асинхронностью, только что вставленные данные появляются на остальных репликах с небольшой задержкой. Если часть реплик недоступна, данные на них запишутся тогда, когда они станут доступны. Если реплика доступна, то задержка составляет столько времени, сколько требуется для передачи блока сжатых данных по сети.</p>
<p>По умолчанию, запрос INSERT ждёт подтверждения записи только от одной реплики. Если данные были успешно записаны только на одну реплику, и сервер с этой репликой перестал существовать, то записанные данные будут потеряны. Вы можете включить подтверждение записи от нескольких реплик, используя настройку <code>insert_quorum</code>.</p>
<p>Каждый блок данных записывается атомарно. Запрос INSERT разбивается на блоки данных размером до <code>max_insert_block_size = 1048576</code> строк. То есть, если в запросе <code>INSERT</code> менее 1048576 строк, то он делается атомарно.</p>
<p>Блоки данных дедуплицируются. При многократной записи одного и того же блока данных (блоков данных одинакового размера, содержащих одни и те же строчки в одном и том же порядке), блок будет записан только один раз. Это сделано для того, чтобы в случае сбоя в сети, когда клиентское приложение не может понять, были ли данные записаны в БД, можно было просто повторить запрос <code>INSERT</code>. При этом не имеет значения, на какую реплику будут отправлены INSERT-ы с одинаковыми данными. Запрос <code>INSERT</code> идемпотентный. Параметры дедуплицирования регулируются настройками сервера <a href="../../server_settings/settings/#server_settings-merge_tree">merge_tree</a></p>
<p>При репликации, по сети передаются только исходные вставляемые данные. Дальнейшие преобразования данных (слияния) координируются и делаются на всех репликах одинаковым образом. За счёт этого минимизируется использование сети, и благодаря этому, репликация хорошо работает при расположении реплик в разных датацентрах. (Стоит заметить, что дублирование данных в разных датацентрах, по сути, является основной задачей репликации).</p>
<p>Количество реплик одних и тех же данных может быть произвольным. В Яндекс.Метрике в продакшене используется двухкратная репликация. На каждом сервере используется RAID-5 или RAID-6, в некоторых случаях RAID-10. Это является сравнительно надёжным и удобным для эксплуатации решением.</p>
<p>Система следит за синхронностью данных на репликах и умеет восстанавливаться после сбоя. Восстановление после сбоя автоматическое (в случае небольших различий в данных) или полуавтоматическое (когда данные отличаются слишком сильно, что может свидетельствовать об ошибке конфигурации).</p>
<h2 id="creating-replicated-tables">Создание реплицируемых таблиц<a class="headerlink" href="#creating-replicated-tables" title="Permanent link">&para;</a></h2>
<p>В начало имени движка таблицы добавляется <code>Replicated</code>. Например, <code>ReplicatedMergeTree</code>.</p>
<p><strong>Параметры Replicated*MergeTree</strong></p>
<ul>
<li><code>zoo_path</code> — путь к таблице в ZooKeeper.</li>
<li><code>replica_name</code>  — имя реплики в ZooKeeper.</li>
</ul>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">table_name</span>
<span class="p">(</span>
    <span class="n">EventDate</span> <span class="n">DateTime</span><span class="p">,</span>
    <span class="n">CounterID</span> <span class="n">UInt32</span><span class="p">,</span>
    <span class="n">UserID</span> <span class="n">UInt32</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">ReplicatedMergeTree</span><span class="p">(</span><span class="s1">&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;{replica}&#39;</span><span class="p">)</span>
<span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">toYYYYMM</span><span class="p">(</span><span class="n">EventDate</span><span class="p">)</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="p">(</span><span class="n">CounterID</span><span class="p">,</span> <span class="n">EventDate</span><span class="p">,</span> <span class="n">intHash32</span><span class="p">(</span><span class="n">UserID</span><span class="p">))</span>
<span class="n">SAMPLE</span> <span class="k">BY</span> <span class="n">intHash32</span><span class="p">(</span><span class="n">UserID</span><span class="p">)</span>
</pre></div>


<p><details><summary>Пример в устаревшем синтаксисе</summary></p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">table_name</span>
<span class="p">(</span>
    <span class="n">EventDate</span> <span class="n">DateTime</span><span class="p">,</span>
    <span class="n">CounterID</span> <span class="n">UInt32</span><span class="p">,</span>
    <span class="n">UserID</span> <span class="n">UInt32</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">ReplicatedMergeTree</span><span class="p">(</span><span class="s1">&#39;/clickhouse/tables/{layer}-{shard}/table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;{replica}&#39;</span><span class="p">,</span> <span class="n">EventDate</span><span class="p">,</span> <span class="n">intHash32</span><span class="p">(</span><span class="n">UserID</span><span class="p">),</span> <span class="p">(</span><span class="n">CounterID</span><span class="p">,</span> <span class="n">EventDate</span><span class="p">,</span> <span class="n">intHash32</span><span class="p">(</span><span class="n">UserID</span><span class="p">),</span> <span class="n">EventTime</span><span class="p">),</span> <span class="mi">8192</span><span class="p">)</span>
</pre></div>


<p></details></p>
<p>Как видно в примере, эти параметры могут содержать подстановки в фигурных скобках. Подставляемые значения достаются из конфигурационного файла, из секции <code>macros</code>. Пример:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;macros&gt;</span>
    <span class="nt">&lt;layer&gt;</span>05<span class="nt">&lt;/layer&gt;</span>
    <span class="nt">&lt;shard&gt;</span>02<span class="nt">&lt;/shard&gt;</span>
    <span class="nt">&lt;replica&gt;</span>example05-02-1.yandex.ru<span class="nt">&lt;/replica&gt;</span>
<span class="nt">&lt;/macros&gt;</span>
</pre></div>


<p>Путь к таблице в ZooKeeper должен быть разным для каждой реплицируемой таблицы. В том числе, для таблиц на разных шардах, должны быть разные пути.
В данном случае, путь состоит из следующих частей:</p>
<p><code>/clickhouse/tables/</code>  — общий префикс. Рекомендуется использовать именно его.</p>
<p><code>{layer}-{shard}</code>  — идентификатор шарда. В данном примере он состоит из двух частей, так как на кластере Яндекс.Метрики используется двухуровневое шардирование. Для большинства задач, оставьте только подстановку {shard}, которая будет раскрываться в идентификатор шарда.</p>
<p><code>table_name</code> - имя узла для таблицы в ZooKeeper. Разумно делать его таким же, как имя таблицы. Оно указывается явно, так как, в отличие от имени таблицы, оно не меняется после запроса RENAME.<br />
<em>Подсказка</em>: можно также указать имя базы данных перед <code>table_name</code>, например <code>db_name.table_name</code></p>
<p>Имя реплики  — то, что идентифицирует разные реплики одной и той же таблицы. Можно использовать для него имя сервера, как показано в примере. Впрочем, достаточно, чтобы имя было уникально лишь в пределах каждого шарда.</p>
<p>Можно не использовать подстановки, а указать соответствующие параметры явно. Это может быть удобным для тестирования и при настройке маленьких кластеров. Однако в этом случае нельзя пользоваться распределенными DDL-запросами (<code>ON CLUSTER</code>).</p>
<p>При работе с большими кластерами мы рекомендуем использовать подстановки, они уменьшают вероятность ошибки.</p>
<p>Выполните запрос <code>CREATE TABLE</code> на каждой реплике. Запрос создаёт новую реплицируемую таблицу, или добавляет новую реплику к имеющимся.</p>
<p>Если вы добавляете новую реплику после того, как таблица на других репликах уже содержит некоторые данные, то после выполнения запроса, данные на новую реплику будут скачаны с других реплик. То есть, новая реплика синхронизирует себя с остальными.</p>
<p>Для удаления реплики, выполните запрос <code>DROP TABLE</code>. При этом, удаляется только одна реплика  — расположенная на том сервере, где вы выполняете запрос.</p>
<h2 id="vosstanovlenie-posle-sboia">Восстановление после сбоя<a class="headerlink" href="#vosstanovlenie-posle-sboia" title="Permanent link">&para;</a></h2>
<p>Если при старте сервера, недоступен ZooKeeper, реплицируемые таблицы переходят в режим только для чтения. Система будет пытаться периодически установить соединение с ZooKeeper.</p>
<p>Если при <code>INSERT</code> недоступен ZooKeeper, или происходит ошибка при взаимодействии с ним, будет выкинуто исключение.</p>
<p>При подключении к ZooKeeper, система проверяет соответствие между имеющимся в локальной файловой системе набором данных и ожидаемым набором данных (информация о котором хранится в ZooKeeper). Если имеются небольшие несоответствия, то система устраняет их, синхронизируя данные с реплик.</p>
<p>Обнаруженные битые куски данных (с файлами несоответствующего размера) или неизвестные куски (куски, записанные в файловую систему, но информация о которых не была записана в ZooKeeper) переносятся в поддиректорию detached (не удаляются). Недостающие куски скачиваются с реплик.</p>
<p>Стоит заметить, что ClickHouse не делает самостоятельно никаких деструктивных действий типа автоматического удаления большого количества данных.</p>
<p>При старте сервера (или создании новой сессии с ZooKeeper), проверяется только количество и размеры всех файлов. Если у файлов совпадают размеры, но изменены байты где-то посередине, то это обнаруживается не сразу, а только при попытке их прочитать при каком-либо запросе <code>SELECT</code>. Запрос кинет исключение о несоответствующей чексумме или размере сжатого блока. В этом случае, куски данных добавляются в очередь на проверку, и при необходимости, скачиваются с реплик.</p>
<p>Если обнаруживается, что локальный набор данных слишком сильно отличается от ожидаемого, то срабатывает защитный механизм. Сервер сообщает об этом в лог и отказывается запускаться. Это сделано, так как такой случай может свидетельствовать об ошибке конфигурации - например, если реплика одного шарда была случайно сконфигурирована, как реплика другого шарда. Тем не менее, пороги защитного механизма поставлены довольно низкими, и такая ситуация может возникнуть и при обычном восстановлении после сбоя. В этом случае, восстановление делается полуавтоматически - "по кнопке".</p>
<p>Для запуска восстановления, создайте в ZooKeeper узел <code>/path_to_table/replica_name/flags/force_restore_data</code> с любым содержимым или выполните команду для восстановления всех реплицируемых таблиц:</p>
<div class="codehilite"><pre><span></span>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data
</pre></div>


<p>Затем запустите сервер. При старте, сервер удалит эти флаги и запустит восстановление.</p>
<h2 id="vosstanovlenie-v-sluchae-poteri-vsekh-dannykh">Восстановление в случае потери всех данных<a class="headerlink" href="#vosstanovlenie-v-sluchae-poteri-vsekh-dannykh" title="Permanent link">&para;</a></h2>
<p>Если на одном из серверов исчезли все данные и метаданные, восстановление делается следующим образом:</p>
<ol>
<li>Установите на сервер ClickHouse. Корректно пропишите подстановки в конфигурационном файле, отвечающие за идентификатор шарда и реплики, если вы их используете.</li>
<li>Если у вас были нереплицируемые таблицы, которые должны быть вручную продублированы на серверах, скопируйте их данные (в директории <code>/var/lib/clickhouse/data/db_name/table_name/</code>) с реплики.</li>
<li>Скопируйте с реплики определения таблиц, находящиеся в <code>/var/lib/clickhouse/metadata/</code>. Если в определениях таблиц, идентификатор шарда или реплики, прописаны в явном виде - исправьте их, чтобы они соответствовали данной реплике. (Альтернативный вариант - запустить сервер и сделать самостоятельно все запросы <code>ATTACH TABLE</code>, которые должны были бы быть в соответствующих .sql файлах в <code>/var/lib/clickhouse/metadata/</code>.)</li>
<li>Создайте в ZooKeeper узел <code>/path_to_table/replica_name/flags/force_restore_data</code> с любым содержимым или выполните команду для восстановления всех реплицируемых таблиц: <code>sudo -u clickhouse touch /var/lib/clickhouse/flags/force_restore_data</code></li>
</ol>
<p>Затем запустите сервер (перезапустите, если уже запущен). Данные будут скачаны с реплик.</p>
<p>В качестве альтернативного варианта восстановления, вы можете удалить из ZooKeeper информацию о потерянной реплике (<code>/path_to_table/replica_name</code>), и затем создать реплику заново, как написано в разделе <a href="#creating-replicated-tables">Создание реплицированных таблиц</a> .</p>
<p>Отсутствует ограничение на использование сетевой полосы при восстановлении. Имейте это ввиду, если восстанавливаете сразу много реплик.</p>
<h2 id="preobrazovanie-iz-mergetree-v-replicatedmergetree">Преобразование из MergeTree в ReplicatedMergeTree<a class="headerlink" href="#preobrazovanie-iz-mergetree-v-replicatedmergetree" title="Permanent link">&para;</a></h2>
<p>Здесь и далее, под <code>MergeTree</code> подразумеваются все движки таблиц семейства <code>MergeTree</code>, так же для <code>ReplicatedMergeTree</code>.</p>
<p>Если у вас была таблица типа <code>MergeTree</code>, репликация которой делалась вручную, вы можете преобразовать её в реплицируемую таблицу. Это может понадобиться лишь в случаях, когда вы уже успели накопить большое количество данных в таблице типа <code>MergeTree</code>, а сейчас хотите включить репликацию.</p>
<p>Если на разных репликах данные отличаются, то сначала синхронизируйте их, либо удалите эти данные на всех репликах кроме одной.</p>
<p>Переименуйте имеющуюся MergeTree таблицу, затем создайте со старым именем таблицу типа <code>ReplicatedMergeTree</code>.
Перенесите данные из старой таблицы в поддиректорию detached в директории с данными новой таблицы (<code>/var/lib/clickhouse/data/db_name/table_name/</code>).
Затем добавьте эти куски данных в рабочий набор с помощью выполнения запросов <code>ALTER TABLE ATTACH PARTITION</code> на одной из реплик.</p>
<h2 id="preobrazovanie-iz-replicatedmergetree-v-mergetree">Преобразование из ReplicatedMergeTree в MergeTree<a class="headerlink" href="#preobrazovanie-iz-replicatedmergetree-v-mergetree" title="Permanent link">&para;</a></h2>
<p>Создайте таблицу типа MergeTree с другим именем. Перенесите в её директорию с данными все данные из директории с данными таблицы типа <code>ReplicatedMergeTree</code>. Затем удалите таблицу типа <code>ReplicatedMergeTree</code> и перезапустите сервер.</p>
<p>Если вы хотите избавиться от таблицы <code>ReplicatedMergeTree</code>, не запуская сервер, то</p>
<ul>
<li>удалите соответствующий файл <code>.sql</code> в директории с метаданными (<code>/var/lib/clickhouse/metadata/</code>);</li>
<li>удалите соответствующий путь в ZooKeeper (<code>/path_to_table/replica_name</code>);</li>
</ul>
<p>После этого, вы можете запустить сервер, создать таблицу типа <code>MergeTree</code>, перенести данные в её директорию, и перезапустить сервер.</p>
<h2 id="vosstanovlenie-v-sluchae-poteri-ili-povrezhdeniia-metadannykh-na-zookeeper-klastere">Восстановление в случае потери или повреждения метаданных на ZooKeeper кластере<a class="headerlink" href="#vosstanovlenie-v-sluchae-poteri-ili-povrezhdeniia-metadannykh-na-zookeeper-klastere" title="Permanent link">&para;</a></h2>
<p>Если данные в ZooKeeper оказались утеряны или повреждены, то вы можете сохранить данные, переместив их в нереплицируемую таблицу, как описано в пункте выше.</p>
                
                </div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../operations/table_engines/mergetree/" title="MergeTree" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Назад
                </span>
                MergeTree
              </span>
            </div>
          </a>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../operations/table_engines/custom_partitioning_key/" title="Произвольный ключ партиционирования" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Вперед
                </span>
                Произвольный ключ партиционирования
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2016–2020 Yandex LLC
          </div>
        
      </div>
      
        <div class="md-footer-social">
  <span class="md-footer-copyright__highlight">Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/69ad5cf04e2d78bb10ce6a3091341fa8ba769a8e" rel="external nofollow">69ad5cf</a></span>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      
        <script src="../../../assets/javascripts/modernizr.js"></script>
      
      <script src="../../../assets/javascripts/application.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../../assets/javascripts/lunr/lunr.ru.js"></script>
            
          
          
            <script src="../../../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      
    
    
      
    

    <script type="text/javascript">
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'ru';
            }
          )
      });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:ru"]
},
debug: false
});
</script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/18343495" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>