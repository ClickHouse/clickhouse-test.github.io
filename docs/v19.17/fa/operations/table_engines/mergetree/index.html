<!DOCTYPE html><html lang=fa class=no-js data-version=v19.17 data-single-page=false> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=https://clickhouse.yandex/docs/fa/operations/table_engines/mergetree/ rel=canonical><meta name=lang:clipboard.copy content="کپی کردن"><meta name=lang:clipboard.copied content="کپی شد"><meta name=lang:search.language content=fa><meta name=lang:search.pipeline.stopwords content=False><meta name=lang:search.pipeline.trimmer content=False><meta name=lang:search.result.none content="سندی یافت نشد"><meta name=lang:search.result.one content="1 سند یافت شد"><meta name=lang:search.result.other content="# سند یافت شد"><meta name=lang:search.tokenizer content><link rel="shortcut icon" href=../../../assets/images/favicon.ico><title>MergeTree - مستندات v19.17ClickHouse</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><link rel=stylesheet href=../../../assets/stylesheets/application.2a88008a.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.792431c1.css><link rel=stylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel=stylesheet href=../../../assets/stylesheets/custom.css?1582326640></head> <body dir=rtl data-md-color-primary=white data-md-color-accent=white class=md-lang-fa> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=drawer> <input class=md-toggle data-md-toggle=search type=checkbox id=search> <label class=md-overlay data-md-component=overlay for=drawer></label> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=/ title="مستندات  v19.17ClickHouse" class="md-header-nav__button md-logo"> <img src=../../../images/logo.svg width=40 height=40> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> مستندات v19.17ClickHouse </span> <span class=md-header-nav__topic> MergeTree </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=search></label> <div class=md-search__inner> <form class=md-search__form name=search> <input type=text id=md-search__input class=md-search__input name=query required placeholder=جستجو autocapitalize=off autocorrect=off autocomplete=off spellcheck=false> <label class="md-icon md-search__icon" for=search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset>&#xE5CD;</button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> برای شروع جستجو تایپ کنید </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div id=md-language-switch class=md-header-nav__source> <a class=md-alt-lang href=../../../../en/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=English> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 60 30" preserveaspectratio=none> <clippath id=t> <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/> </clippath> <path fill=#00247d d="M0,0 v30 h60 v-30 z"/> <path stroke=#fff stroke-width=6 d="M0,0 L60,30 M60,0 L0,30"/> <path clip-path=url(#t) stroke=#cf142b stroke-width=4 d="M0,0 L60,30 M60,0 L0,30"/> <path stroke=#fff stroke-width=10 d="M30,0 v30 M0,15 h60"/> <path stroke=#cf142b stroke-width=6 d="M30,0 v30 M0,15 h60"/> </svg> </a> <a class=md-alt-lang href=../../../../ru/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Russian> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 9 6" preserveaspectratio=none> <rect fill=#fff width=9 height=3 /> <rect fill=#d52b1e y=3 width=9 height=3 /> <rect fill=#0039a6 y=2 width=9 height=2 /> </svg> </a> <a class=md-alt-lang href=../../../../zh/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Chinese> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 30 20" preserveaspectratio=none> <defs> <path id=s fill=#ffde00 d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/> </defs> <rect width=30 height=20 fill=#de2910 /> <use xlink:href=#s transform="translate(5,5) scale(3)"/> <use xlink:href=#s transform="translate(10,2) rotate(23.036243)"/> <use xlink:href=#s transform="translate(12,4) rotate(45.869898)"/> <use xlink:href=#s transform="translate(12,7) rotate(69.945396)"/> <use xlink:href=#s transform="translate(10,9) rotate(20.659808)"/> </svg> </a> <a class=md-alt-lang href=../../../../ja/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Japanese> <?xml version="1.0" encoding="UTF-8"?> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink width=90px height=60px viewbox="0 0 90 60" version=1.1> <g id=surface1> <rect x=0 y=0 width=90 height=60 style=fill:rgb(62.7451%,62.7451%,62.7451%);fill-opacity:1;stroke:none; /> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562 "/> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(74.509805%,0%,14.901961%);fill-opacity:1;" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30 "/> </g> </svg> </a> <a class="md-alt-lang md-current-lang" href=../../../../fa/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Farsi> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 630 360" preserveaspectratio=none> <rect width=630 height=360 fill=#da0000 /> <rect width=630 height=240 fill=#fff /> <rect width=630 height=120 fill=#239f40 /> <g transform=translate(8.4,100.4)> <g id=tb4> <g id=tb1 fill=none stroke=#fff stroke-width=2> <path id=tbp1 d=M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9 transform=scale(1.4) /> <path id=tbp2 d=M0,7H9M10,7H19 transform=scale(2.8) /> <use xlink:href=#tbp2 y=120 /> <use xlink:href=#tbp1 y=145.2 /> </g> <g id=tb3> <use xlink:href=#tb1 x=56 /> <use xlink:href=#tb1 x=112 /> <use xlink:href=#tb1 x=168 /> </g> </g> <use xlink:href=#tb3 x=168 /> <use xlink:href=#tb4 x=392 /> </g> <g fill=#da0000 transform=matrix(45,0,0,45,315,180)> <g id=emblem_half> <path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/> <path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/> <path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/> <path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/> </g> <use xlink:href=#emblem_half transform=scale(-1,1) /> </g> </svg> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=drawer> مستندات v19.17ClickHouse </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Introduction </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ title="ClickHouse چیست؟" class=md-nav__link> ClickHouse چیست؟ </a> </li> <li class=md-nav__item> <a href=../../../introduction/distinctive_features/ title=" ویژگی های برجسته ClickHouse" class=md-nav__link> ویژگی های برجسته ClickHouse </a> </li> <li class=md-nav__item> <a href=../../../introduction/features_considered_disadvantages/ title=" ویژگی های از ClickHouse که می تواند معایبی باشد" class=md-nav__link> ویژگی های از ClickHouse که می تواند معایبی باشد </a> </li> <li class=md-nav__item> <a href=../../../introduction/performance/ title=Performance class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../../introduction/ya_metrika_task/ title="The Yandex.Metrica task" class=md-nav__link> The Yandex.Metrica task </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Getting started </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting_started/ title=" شروع به کار" class=md-nav__link> شروع به کار </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Example datasets </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-2> Example datasets </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class=md-nav__link> OnTime </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/nyc_taxi/ title=" داده های تاکسی New York" class=md-nav__link> داده های تاکسی New York </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title=" بنچمارک AMPLab Big Data" class=md-nav__link> بنچمارک AMPLab Big Data </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class=md-nav__link> WikiStat </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/criteo/ title=" ترابایت از لاگ های کلیک از سرویس Criteo" class=md-nav__link> ترابایت از لاگ های کلیک از سرویس Criteo </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/star_schema/ title=" بنچمارک Star Schema" class=md-nav__link> بنچمارک Star Schema </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class=md-nav__link> Yandex.Metrica Data </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Interfaces </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Interfaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../interfaces/ title="Interface ها" class=md-nav__link> Interface ها </a> </li> <li class=md-nav__item> <a href=../../../interfaces/cli/ title=" کلاینت Command-line" class=md-nav__link> کلاینت Command-line </a> </li> <li class=md-nav__item> <a href=../../../interfaces/tcp/ title="Native interface (TCP)" class=md-nav__link> Native interface (TCP) </a> </li> <li class=md-nav__item> <a href=../../../interfaces/http/ title="HTTP interface" class=md-nav__link> HTTP interface </a> </li> <li class=md-nav__item> <a href=../../../interfaces/formats/ title=" فرمت های Input و Output" class=md-nav__link> فرمت های Input و Output </a> </li> <li class=md-nav__item> <a href=../../../interfaces/jdbc/ title=" درایور JDBC" class=md-nav__link> درایور JDBC </a> </li> <li class=md-nav__item> <a href=../../../interfaces/odbc/ title=" درایور ODBC" class=md-nav__link> درایور ODBC </a> </li> <li class=md-nav__item> <a href=../../../interfaces/cpp/ title="C ++ کتابخانه مشتری" class=md-nav__link> C ++ کتابخانه مشتری </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-9 type=checkbox id=nav-3-9> <label class=md-nav__link for=nav-3-9> Third-party </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-9> Third-party </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../interfaces/third-party/client_libraries/ title="کتابخانه های مشتری" class=md-nav__link> کتابخانه های مشتری </a> </li> <li class=md-nav__item> <a href=../../../interfaces/third-party/integrations/ title=یکپارچگی class=md-nav__link> یکپارچگی </a> </li> <li class=md-nav__item> <a href=../../../interfaces/third-party/gui/ title="رابط های بصری" class=md-nav__link> رابط های بصری </a> </li> <li class=md-nav__item> <a href=../../../interfaces/third-party/proxy/ title=پروکسی class=md-nav__link> پروکسی </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Data types </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Data types </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class=md-nav__link> UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64 </a> </li> <li class=md-nav__item> <a href=../../../data_types/float/ title="Float32, Float64" class=md-nav__link> Float32, Float64 </a> </li> <li class=md-nav__item> <a href=../../../data_types/decimal/ title=Decimal class=md-nav__link> Decimal </a> </li> <li class=md-nav__item> <a href=../../../data_types/boolean/ title=" مقادیر Boolean" class=md-nav__link> مقادیر Boolean </a> </li> <li class=md-nav__item> <a href=../../../data_types/string/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../../data_types/fixedstring/ title=FixedString(N) class=md-nav__link> FixedString(N) </a> </li> <li class=md-nav__item> <a href=../../../data_types/uuid/ title=UUID class=md-nav__link> UUID </a> </li> <li class=md-nav__item> <a href=../../../data_types/date/ title=Date class=md-nav__link> Date </a> </li> <li class=md-nav__item> <a href=../../../data_types/datetime/ title=DateTime class=md-nav__link> DateTime </a> </li> <li class=md-nav__item> <a href=../../../data_types/enum/ title=Enum class=md-nav__link> Enum </a> </li> <li class=md-nav__item> <a href=../../../data_types/array/ title=Array(T) class=md-nav__link> Array(T) </a> </li> <li class=md-nav__item> <a href=../../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class=md-nav__link> AggregateFunction(name, types_of_arguments...) </a> </li> <li class=md-nav__item> <a href=../../../data_types/tuple/ title="Tuple(T1, T2, ...)" class=md-nav__link> Tuple(T1, T2, ...) </a> </li> <li class=md-nav__item> <a href=../../../data_types/nullable/ title=Nullable class=md-nav__link> Nullable </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-16 type=checkbox id=nav-4-16> <label class=md-nav__link for=nav-4-16> Nested data structures </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-16> Nested data structures </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class=md-nav__link> Nested(Name1 Type1, Name2 Type2, ...) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-17 type=checkbox id=nav-4-17> <label class=md-nav__link for=nav-4-17> Special data types </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-17> Special data types </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/special_data_types/expression/ title=Expression class=md-nav__link> Expression </a> </li> <li class=md-nav__item> <a href=../../../data_types/special_data_types/set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../../../data_types/special_data_types/nothing/ title=Nothing class=md-nav__link> Nothing </a> </li> <li class=md-nav__item> <a href=../../../data_types/special_data_types/interval/ title=Interval class=md-nav__link> Interval </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-18 type=checkbox id=nav-4-18> <label class=md-nav__link for=nav-4-18> Domains </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-18> Domains </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/domains/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../data_types/domains/ipv4/ title=IPv4 class=md-nav__link> IPv4 </a> </li> <li class=md-nav__item> <a href=../../../data_types/domains/ipv6/ title=IPv6 class=md-nav__link> IPv6 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Database Engines </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Database Engines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../database_engines/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../database_engines/mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../database_engines/lazy/ title=Lazy class=md-nav__link> Lazy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6 checked> <label class=md-nav__link for=nav-6> Table Engines </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> Table Engines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2 checked> <label class=md-nav__link for=nav-6-2> MergeTree Family </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-2> MergeTree Family </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=toc> <label class="md-nav__link md-nav__link--active" for=toc> MergeTree </label> <a href=../../../operations/table_engines/mergetree/ title=MergeTree class="md-nav__link md-nav__link--active"> <strong>MergeTree</strong> </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=toc>فهرست موضوعات</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#table_engine-mergetree-creating-a-table title="Creating a Table" class=md-nav__link> Creating a Table </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#query-clauses title="Query Clauses" class=md-nav__link> Query Clauses </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mergetree-data-storage title="Data Storage" class=md-nav__link> Data Storage </a> </li> <li class=md-nav__item> <a href=#primary-keys-and-indexes-in-queries title="Primary Keys and Indexes in Queries" class=md-nav__link> Primary Keys and Indexes in Queries </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#selecting-the-primary-key title="Selecting the Primary Key" class=md-nav__link> Selecting the Primary Key </a> </li> <li class=md-nav__item> <a href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Choosing a Primary Key that Differs from the Sorting Key" class=md-nav__link> Choosing a Primary Key that Differs from the Sorting Key </a> </li> <li class=md-nav__item> <a href=#use-of-indexes-and-partitions-in-queries title="Use of Indexes and Partitions in Queries" class=md-nav__link> Use of Indexes and Partitions in Queries </a> </li> <li class=md-nav__item> <a href=#use-of-index-for-partially-monotonic-primary-keys title="Use of Index for Partially-Monotonic Primary Keys" class=md-nav__link> Use of Index for Partially-Monotonic Primary Keys </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-data_skipping-indexes title="Data Skipping Indexes (Experimental)" class=md-nav__link> Data Skipping Indexes (Experimental) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#available-types-of-indices title="Available Types of Indices" class=md-nav__link> Available Types of Indices </a> </li> <li class=md-nav__item> <a href=#functions-support title="Functions Support" class=md-nav__link> Functions Support </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#concurrent-data-access title="Concurrent Data Access" class=md-nav__link> Concurrent Data Access </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-ttl title="TTL for Columns and Tables" class=md-nav__link> TTL for Columns and Tables </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-multiple-volumes title="Using Multiple Block Devices for Data Storage" class=md-nav__link> Using Multiple Block Devices for Data Storage </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#terms title=Terms class=md-nav__link> Terms </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-multiple-volumes_configure title=Configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#details title=Details class=md-nav__link> Details </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/replication/ title="Data Replication" class=md-nav__link> Data Replication </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class=md-nav__link> Custom Partitioning Key </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class=md-nav__link> ReplacingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/summingmergetree/ title=SummingMergeTree class=md-nav__link> SummingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class=md-nav__link> AggregatingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class=md-nav__link> CollapsingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class=md-nav__link> VersionedCollapsingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class=md-nav__link> GraphiteMergeTree </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-3 type=checkbox id=nav-6-3> <label class=md-nav__link for=nav-6-3> Log Family </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-3> Log Family </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/log_family/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/stripelog/ title=StripeLog class=md-nav__link> StripeLog </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/log/ title=Log class=md-nav__link> Log </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/tinylog/ title=TinyLog class=md-nav__link> TinyLog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-4 type=checkbox id=nav-6-4> <label class=md-nav__link for=nav-6-4> Integrations </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-4> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/kafka/ title=Kafka class=md-nav__link> Kafka </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/jdbc/ title=JDBC class=md-nav__link> JDBC </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/odbc/ title=ODBC class=md-nav__link> ODBC </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/hdfs/ title=HDFS class=md-nav__link> HDFS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-5 type=checkbox id=nav-6-5> <label class=md-nav__link for=nav-6-5> Special </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-5> Special </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/distributed/ title=Distributed class=md-nav__link> Distributed </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/external_data/ title="External data" class=md-nav__link> External data </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/dictionary/ title=Dictionary class=md-nav__link> Dictionary </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/merge/ title=Merge class=md-nav__link> Merge </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/file/ title=File class=md-nav__link> File </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/null/ title=Null class=md-nav__link> Null </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/join/ title=Join class=md-nav__link> Join </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/url/ title=URL class=md-nav__link> URL </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/view/ title=View class=md-nav__link> View </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/materializedview/ title=MaterializedView class=md-nav__link> MaterializedView </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/memory/ title=Memory class=md-nav__link> Memory </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/buffer/ title=Buffer class=md-nav__link> Buffer </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> SQL Reference </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> SQL Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/select/ title=SELECT class=md-nav__link> SELECT </a> </li> <li class=md-nav__item> <a href=../../../query_language/insert_into/ title="INSERT INTO" class=md-nav__link> INSERT INTO </a> </li> <li class=md-nav__item> <a href=../../../query_language/create/ title=CREATE class=md-nav__link> CREATE </a> </li> <li class=md-nav__item> <a href=../../../query_language/alter/ title=ALTER class=md-nav__link> ALTER </a> </li> <li class=md-nav__item> <a href=../../../query_language/system/ title=SYSTEM class=md-nav__link> SYSTEM </a> </li> <li class=md-nav__item> <a href=../../../query_language/show/ title=SYSTEM class=md-nav__link> SYSTEM </a> </li> <li class=md-nav__item> <a href=../../../query_language/misc/ title="Other Kinds of Queries" class=md-nav__link> Other Kinds of Queries </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-9 type=checkbox id=nav-7-9> <label class=md-nav__link for=nav-7-9> Functions </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-9> Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/functions/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/arithmetic_functions/ title=Arithmetic class=md-nav__link> Arithmetic </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/comparison_functions/ title=Comparison class=md-nav__link> Comparison </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/logical_functions/ title=Logical class=md-nav__link> Logical </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/type_conversion_functions/ title="Type Conversion" class=md-nav__link> Type Conversion </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/date_time_functions/ title="Working with Dates and Times" class=md-nav__link> Working with Dates and Times </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/string_functions/ title="Working with strings" class=md-nav__link> Working with strings </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/string_search_functions/ title="For Searching Strings" class=md-nav__link> For Searching Strings </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/string_replace_functions/ title="For Replacing in Strings" class=md-nav__link> For Replacing in Strings </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/conditional_functions/ title="Conditional " class=md-nav__link> Conditional </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/math_functions/ title=Mathematical class=md-nav__link> Mathematical </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/rounding_functions/ title=Rounding class=md-nav__link> Rounding </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/array_functions/ title="Working with Arrays" class=md-nav__link> Working with Arrays </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class=md-nav__link> Splitting and Merging Strings and Arrays </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/bit_functions/ title=Bit class=md-nav__link> Bit </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/bitmap_functions/ title=Bitmap class=md-nav__link> Bitmap </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/hash_functions/ title=Hash class=md-nav__link> Hash </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/random_functions/ title="Generating Pseudo-Random Numbers" class=md-nav__link> Generating Pseudo-Random Numbers </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/encoding_functions/ title=Encoding class=md-nav__link> Encoding </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/uuid_functions/ title="Working with UUID" class=md-nav__link> Working with UUID </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/url_functions/ title="Working with URLs" class=md-nav__link> Working with URLs </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/ip_address_functions/ title="Working with IP Addresses" class=md-nav__link> Working with IP Addresses </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/json_functions/ title="Working with JSON." class=md-nav__link> Working with JSON. </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/higher_order_functions/ title=Higher-Order class=md-nav__link> Higher-Order </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/ext_dict_functions/ title="Working with External Dictionaries" class=md-nav__link> Working with External Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class=md-nav__link> Working with Yandex.Metrica Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/in_functions/ title="Implementing the IN Operator" class=md-nav__link> Implementing the IN Operator </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/array_join/ title=arrayJoin class=md-nav__link> arrayJoin </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/geo/ title="Working with geographical coordinates" class=md-nav__link> Working with geographical coordinates </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/functions_for_nulls/ title="Working with Nullable arguments" class=md-nav__link> Working with Nullable arguments </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/machine_learning_functions/ title="Machine Learning Functions" class=md-nav__link> Machine Learning Functions </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/other_functions/ title=Other class=md-nav__link> Other </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-10 type=checkbox id=nav-7-10> <label class=md-nav__link for=nav-7-10> Aggregate Functions </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-10> Aggregate Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/agg_functions/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../query_language/agg_functions/reference/ title=Reference class=md-nav__link> Reference </a> </li> <li class=md-nav__item> <a href=../../../query_language/agg_functions/combinators/ title="Aggregate function combinators" class=md-nav__link> Aggregate function combinators </a> </li> <li class=md-nav__item> <a href=../../../query_language/agg_functions/parametric_functions/ title="Parametric aggregate functions" class=md-nav__link> Parametric aggregate functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-11 type=checkbox id=nav-7-11> <label class=md-nav__link for=nav-7-11> Table Functions </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-11> Table Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/table_functions/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/file/ title=file class=md-nav__link> file </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/merge/ title=merge class=md-nav__link> merge </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/numbers/ title=numbers class=md-nav__link> numbers </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/remote/ title=remote class=md-nav__link> remote </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/url/ title=url class=md-nav__link> url </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/mysql/ title=mysql class=md-nav__link> mysql </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/jdbc/ title=jdbc class=md-nav__link> jdbc </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/odbc/ title=odbc class=md-nav__link> odbc </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/hdfs/ title=hdfs class=md-nav__link> hdfs </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/input/ title=input class=md-nav__link> input </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-12 type=checkbox id=nav-7-12> <label class=md-nav__link for=nav-7-12> Dictionaries </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-12> Dictionaries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/dicts/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-12-2 type=checkbox id=nav-7-12-2> <label class=md-nav__link for=nav-7-12-2> External Dictionaries </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-7-12-2> External Dictionaries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts/ title="General Description" class=md-nav__link> General Description </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict/ title="Configuring an External Dictionary" class=md-nav__link> Configuring an External Dictionary </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class=md-nav__link> Storing Dictionaries in Memory </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_lifetime/ title="Dictionary Updates" class=md-nav__link> Dictionary Updates </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_sources/ title="Sources of External Dictionaries" class=md-nav__link> Sources of External Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_structure/ title="Dictionary Key and Fields" class=md-nav__link> Dictionary Key and Fields </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/internal_dicts/ title="Internal Dictionaries" class=md-nav__link> Internal Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/operators/ title=Operators class=md-nav__link> Operators </a> </li> <li class=md-nav__item> <a href=../../../query_language/syntax/ title="General Syntax" class=md-nav__link> General Syntax </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> Operations </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-8> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/requirements/ title=Requirements class=md-nav__link> Requirements </a> </li> <li class=md-nav__item> <a href=../../../operations/monitoring/ title=Monitoring class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=../../../operations/troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../operations/tips/ title="Usage Recommendations" class=md-nav__link> Usage Recommendations </a> </li> <li class=md-nav__item> <a href=../../../operations/update/ title="ClickHouse Update" class=md-nav__link> ClickHouse Update </a> </li> <li class=md-nav__item> <a href=../../../operations/access_rights/ title="Access Rights" class=md-nav__link> Access Rights </a> </li> <li class=md-nav__item> <a href=../../../operations/backup/ title="Data Backup" class=md-nav__link> Data Backup </a> </li> <li class=md-nav__item> <a href=../../../operations/configuration_files/ title="Configuration Files" class=md-nav__link> Configuration Files </a> </li> <li class=md-nav__item> <a href=../../../operations/quotas/ title=Quotas class=md-nav__link> Quotas </a> </li> <li class=md-nav__item> <a href=../../../operations/system_tables/ title="System Tables" class=md-nav__link> System Tables </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-12 type=checkbox id=nav-8-12> <label class=md-nav__link for=nav-8-12> Server Configuration Parameters </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-12> Server Configuration Parameters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/server_settings/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/server_settings/settings/ title="Server Settings" class=md-nav__link> Server Settings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-13 type=checkbox id=nav-8-13> <label class=md-nav__link for=nav-8-13> Settings </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-13> Settings </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/settings/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class=md-nav__link> Permissions for Queries </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class=md-nav__link> Restrictions on Query Complexity </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/settings/ title=Settings class=md-nav__link> Settings </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/settings_profiles/ title="Settings Profiles" class=md-nav__link> Settings Profiles </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/settings_users/ title="User Settings" class=md-nav__link> User Settings </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class=md-nav__link> Constraints on Settings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8-14 type=checkbox id=nav-8-14> <label class=md-nav__link for=nav-8-14> Utilities </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-8-14> Utilities </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/utils/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../operations/utils/clickhouse-copier/ title=clickhouse-copier class=md-nav__link> clickhouse-copier </a> </li> <li class=md-nav__item> <a href=../../../operations/utils/clickhouse-local/ title=clickhouse-local class=md-nav__link> clickhouse-local </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> F.A.Q. </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-9> F.A.Q. </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../faq/general/ title="General Questions" class=md-nav__link> General Questions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class=md-nav__link for=nav-10> Development </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-10> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/architecture/ title="Overview of ClickHouse Architecture" class=md-nav__link> Overview of ClickHouse Architecture </a> </li> <li class=md-nav__item> <a href=../../../development/build/ title="How to Build ClickHouse on Linux" class=md-nav__link> How to Build ClickHouse on Linux </a> </li> <li class=md-nav__item> <a href=../../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class=md-nav__link> How to Build ClickHouse on Mac OS X </a> </li> <li class=md-nav__item> <a href=../../../development/style/ title="How to Write C++ code" class=md-nav__link> How to Write C++ code </a> </li> <li class=md-nav__item> <a href=../../../development/tests/ title="How to Run ClickHouse Tests" class=md-nav__link> How to Run ClickHouse Tests </a> </li> <li class=md-nav__item> <a href=../../../development/contrib/ title="Third-Party Libraries Used" class=md-nav__link> Third-Party Libraries Used </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-11 type=checkbox id=nav-11> <label class=md-nav__link for=nav-11> What's New </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-11> What's New </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roadmap/ title=Roadmap class=md-nav__link> Roadmap </a> </li> <li class=md-nav__item> <a href=../../../changelog/ title=Changelog class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../../security_changelog/ title="Security Changelog" class=md-nav__link> Security Changelog </a> </li> </ul> </nav> </li> </ul> <ul id=md-extra-nav class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> رهایی: <span class=md-selector> <select id=releases-selector> <option value>آخرین</option> <option value=v20.1>v20.1</option> <option value=v19.17 selected=selected>v19.17</option> <option value=v19.16>v19.16</option> <option value=v19.15>v19.15</option> <option value=v19.14>v19.14</option> <option value=v19.13>v19.13</option> <option value=v19.11>v19.11</option> <option value=v19.10>v19.10</option> <option value=v19.9>v19.9</option> <option value=v19.8>v19.8</option> <option value=v19.7>v19.7</option> </select><span id=releases-selector-after>&nbsp;▾</span> </span> </li> <li class="md-nav__item md-nav__item--active"> <a href=../../../single/ class="md-nav__link md-nav__link--active">نسخه تک صفحه</a> </li> <li class="md-nav__item md-nav__item--active"> <a href=../../../single/clickhouse_fa.pdf class="md-nav__link md-nav__link--active">نسخه PDF</a> </li> <li class="md-nav__item md-nav__item--active"> <a href=https://github.com/ClickHouse/ClickHouse/ rel="external nofollow" target=_blank class=md-nav__link> کد منبع کلیک </a> </li> <li class="md-nav__item md-nav__item--active"> <span id=md-sidebar-flags class=md-nav__link> <a class=md-alt-lang href=../../../../en/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=English> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 60 30" preserveaspectratio=none> <clippath id=t> <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/> </clippath> <path fill=#00247d d="M0,0 v30 h60 v-30 z"/> <path stroke=#fff stroke-width=6 d="M0,0 L60,30 M60,0 L0,30"/> <path clip-path=url(#t) stroke=#cf142b stroke-width=4 d="M0,0 L60,30 M60,0 L0,30"/> <path stroke=#fff stroke-width=10 d="M30,0 v30 M0,15 h60"/> <path stroke=#cf142b stroke-width=6 d="M30,0 v30 M0,15 h60"/> </svg> </a> <a class=md-alt-lang href=../../../../ru/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Russian> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 9 6" preserveaspectratio=none> <rect fill=#fff width=9 height=3 /> <rect fill=#d52b1e y=3 width=9 height=3 /> <rect fill=#0039a6 y=2 width=9 height=2 /> </svg> </a> <a class=md-alt-lang href=../../../../zh/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Chinese> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 30 20" preserveaspectratio=none> <defs> <path id=s fill=#ffde00 d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/> </defs> <rect width=30 height=20 fill=#de2910 /> <use xlink:href=#s transform="translate(5,5) scale(3)"/> <use xlink:href=#s transform="translate(10,2) rotate(23.036243)"/> <use xlink:href=#s transform="translate(12,4) rotate(45.869898)"/> <use xlink:href=#s transform="translate(12,7) rotate(69.945396)"/> <use xlink:href=#s transform="translate(10,9) rotate(20.659808)"/> </svg> </a> <a class=md-alt-lang href=../../../../ja/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Japanese> <?xml version="1.0" encoding="UTF-8"?> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink width=90px height=60px viewbox="0 0 90 60" version=1.1> <g id=surface1> <rect x=0 y=0 width=90 height=60 style=fill:rgb(62.7451%,62.7451%,62.7451%);fill-opacity:1;stroke:none; /> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562 "/> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(74.509805%,0%,14.901961%);fill-opacity:1;" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30 "/> </g> </svg> </a> <a class="md-alt-lang md-current-lang" href=../../../../fa/operations/table_engines/mergetree/ class="md-flex__ellipsis md-header-nav__title" title=Farsi> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 630 360" preserveaspectratio=none> <rect width=630 height=360 fill=#da0000 /> <rect width=630 height=240 fill=#fff /> <rect width=630 height=120 fill=#239f40 /> <g transform=translate(8.4,100.4)> <g id=tb4> <g id=tb1 fill=none stroke=#fff stroke-width=2> <path id=tbp1 d=M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9 transform=scale(1.4) /> <path id=tbp2 d=M0,7H9M10,7H19 transform=scale(2.8) /> <use xlink:href=#tbp2 y=120 /> <use xlink:href=#tbp1 y=145.2 /> </g> <g id=tb3> <use xlink:href=#tb1 x=56 /> <use xlink:href=#tb1 x=112 /> <use xlink:href=#tb1 x=168 /> </g> </g> <use xlink:href=#tb3 x=168 /> <use xlink:href=#tb4 x=392 /> </g> <g fill=#da0000 transform=matrix(45,0,0,45,315,180)> <g id=emblem_half> <path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/> <path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/> <path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/> <path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/> </g> <use xlink:href=#emblem_half transform=scale(-1,1) /> </g> </svg> </a> </span> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=toc>فهرست موضوعات</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#table_engine-mergetree-creating-a-table title="Creating a Table" class=md-nav__link> Creating a Table </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#query-clauses title="Query Clauses" class=md-nav__link> Query Clauses </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mergetree-data-storage title="Data Storage" class=md-nav__link> Data Storage </a> </li> <li class=md-nav__item> <a href=#primary-keys-and-indexes-in-queries title="Primary Keys and Indexes in Queries" class=md-nav__link> Primary Keys and Indexes in Queries </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#selecting-the-primary-key title="Selecting the Primary Key" class=md-nav__link> Selecting the Primary Key </a> </li> <li class=md-nav__item> <a href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Choosing a Primary Key that Differs from the Sorting Key" class=md-nav__link> Choosing a Primary Key that Differs from the Sorting Key </a> </li> <li class=md-nav__item> <a href=#use-of-indexes-and-partitions-in-queries title="Use of Indexes and Partitions in Queries" class=md-nav__link> Use of Indexes and Partitions in Queries </a> </li> <li class=md-nav__item> <a href=#use-of-index-for-partially-monotonic-primary-keys title="Use of Index for Partially-Monotonic Primary Keys" class=md-nav__link> Use of Index for Partially-Monotonic Primary Keys </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-data_skipping-indexes title="Data Skipping Indexes (Experimental)" class=md-nav__link> Data Skipping Indexes (Experimental) </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#available-types-of-indices title="Available Types of Indices" class=md-nav__link> Available Types of Indices </a> </li> <li class=md-nav__item> <a href=#functions-support title="Functions Support" class=md-nav__link> Functions Support </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#concurrent-data-access title="Concurrent Data Access" class=md-nav__link> Concurrent Data Access </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-ttl title="TTL for Columns and Tables" class=md-nav__link> TTL for Columns and Tables </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-multiple-volumes title="Using Multiple Block Devices for Data Storage" class=md-nav__link> Using Multiple Block Devices for Data Storage </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduction title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#terms title=Terms class=md-nav__link> Terms </a> </li> <li class=md-nav__item> <a href=#table_engine-mergetree-multiple-volumes_configure title=Configuration class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=#details title=Details class=md-nav__link> Details </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fa/operations/table_engines/mergetree.md title="این صفحه را ویرایش کنید" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a> <div id=content> <h1 id=table_engines-mergetree>MergeTree<a class=headerlink href=#table_engines-mergetree title="Permanent link">&para;</a></h1> <p>The <code>MergeTree</code> engine and other engines of this family (<code>*MergeTree</code>) are the most robust ClickHouse table engines.</p> <p>Engines in the <code>MergeTree</code> family are designed for inserting a very large amount of data into a table. The data is quickly written to the table part by part, then rules are applied for merging the parts in the background. This method is much more efficient than continually rewriting the data in storage during insert.</p> <p>Main features:</p> <ul> <li> <p>Stores data sorted by primary key.</p> <p>This allows you to create a small sparse index that helps find data faster.</p> </li> <li> <p>Partitions can be used if the <a href=../custom_partitioning_key/ >partitioning key</a> is specified.</p> <p>ClickHouse supports certain operations with partitions that are more effective than general operations on the same data with the same result. ClickHouse also automatically cuts off the partition data where the partitioning key is specified in the query. This also improves query performance.</p> </li> <li> <p>Data replication support.</p> <p>The family of <code>ReplicatedMergeTree</code> tables provides data replication. For more information, see <a href=../replication/ >Data replication</a>.</p> </li> <li> <p>Data sampling support.</p> <p>If necessary, you can set the data sampling method in the table.</p> </li> </ul> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The <a href=../merge/ >Merge</a> engine does not belong to the <code>*MergeTree</code> family.</p> </div> <h2 id=table_engine-mergetree-creating-a-table>Creating a Table<a class=headerlink href=#table_engine-mergetree-creating-a-table title="Permanent link">&para;</a></h2> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
    <span class=k>INDEX</span> <span class=n>index_name1</span> <span class=n>expr1</span> <span class=k>TYPE</span> <span class=n>type1</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>value1</span><span class=p>,</span>
    <span class=k>INDEX</span> <span class=n>index_name2</span> <span class=n>expr2</span> <span class=k>TYPE</span> <span class=n>type2</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>value2</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=p>[</span><span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>ORDER</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>TTL</span> <span class=n>expr</span><span class=p>]</span>
<span class=p>[</span><span class=n>SETTINGS</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>,</span> <span class=p>...]</span>
</pre></div> <p>For a description of parameters, see the <a href=../../../query_language/create/ >CREATE query description</a>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>INDEX</code> is an experimental feature, see <a href=#table_engine-mergetree-data_skipping-indexes>Data Skipping Indexes</a>.</p> </div> <h3 id=query-clauses>Query Clauses<a class=headerlink href=#query-clauses title="Permanent link">&para;</a></h3> <ul> <li> <p><code>ENGINE</code> — Name and parameters of the engine. <code>ENGINE = MergeTree()</code>. The <code>MergeTree</code> engine does not have parameters.</p> </li> <li> <p><code>PARTITION BY</code> — The <a href=../custom_partitioning_key/ >partitioning key</a>.</p> <p>For partitioning by month, use the <code>toYYYYMM(date_column)</code> expression, where <code>date_column</code> is a column with a date of the type <a href=../../../data_types/date/ >Date</a>. The partition names here have the <code>"YYYYMM"</code> format.</p> </li> <li> <p><code>ORDER BY</code> — The sorting key.</p> <p>A tuple of columns or arbitrary expressions. Example: <code>ORDER BY (CounterID, EventDate)</code>.</p> </li> <li> <p><code>PRIMARY KEY</code> — The primary key if it <a href=./ >differs from the sorting key</a>.</p> <p>By default the primary key is the same as the sorting key (which is specified by the <code>ORDER BY</code> clause). Thus in most cases it is unnecessary to specify a separate <code>PRIMARY KEY</code> clause.</p> </li> <li> <p><code>SAMPLE BY</code> — An expression for sampling.</p> <p>If a sampling expression is used, the primary key must contain it. Example: <code>SAMPLE BY intHash32(UserID) ORDER BY (CounterID, EventDate, intHash32(UserID))</code>.</p> </li> <li> <p><code>TTL</code> — An expression for setting storage time for rows.</p> <p>It must depend on the <code>Date</code> or <code>DateTime</code> column and have one <code>Date</code> or <code>DateTime</code> column as a result. Example: <code>TTL date + INTERVAL 1 DAY</code></p> <p>For more details, see <a href=#table_engine-mergetree-ttl>TTL for columns and tables</a></p> </li> <li> <p><code>SETTINGS</code> — Additional parameters that control the behavior of the <code>MergeTree</code>:</p> <ul> <li><code>index_granularity</code> — Maximum number of data rows between the marks of an index. Default value: 8192. See <a href=#mergetree-data-storage>Data Storage</a>.</li> <li><code>index_granularity_bytes</code> — Maximum size of data granules in bytes. Default value: 10Mb. To restrict the granule size only by number of rows, set to 0 (not recommended). See <a href=#mergetree-data-storage>Data Storage</a>.</li> <li><code>enable_mixed_granularity_parts</code> — Enables or disables transitioning to control the granule size with the <code>index_granularity_bytes</code> setting. Before version 19.11, there was only the <code>index_granularity</code> setting for restricting granule size. The <code>index_granularity_bytes</code> setting improves ClickHouse performance when selecting data from tables with big rows (tens and hundreds of megabytes). If you have tables with big rows, you can enable this setting for the tables to improve the efficiency of <code>SELECT</code> queries.</li> <li><code>use_minimalistic_part_header_in_zookeeper</code> — Storage method of the data parts headers in ZooKeeper. If <code>use_minimalistic_part_header_in_zookeeper=1</code>, then ZooKeeper stores less data. For more information, see the <a href=../../server_settings/settings/#server-settings-use_minimalistic_part_header_in_zookeeper>setting description</a> in "Server configuration parameters".</li> <li><code>min_merge_bytes_to_use_direct_io</code> — The minimum data volume for merge operation that is required for using direct I/O access to the storage disk. When merging data parts, ClickHouse calculates the total storage volume of all the data to be merged. If the volume exceeds <code>min_merge_bytes_to_use_direct_io</code> bytes, ClickHouse reads and writes the data to the storage disk using the direct I/O interface (<code>O_DIRECT</code> option). If <code>min_merge_bytes_to_use_direct_io = 0</code>, then direct I/O is disabled. Default value: <code>10 * 1024 * 1024 * 1024</code> bytes. <a name=mergetree_setting-merge_with_ttl_timeout></a></li> <li><code>merge_with_ttl_timeout</code> — Minimum delay in seconds before repeating a merge with TTL. Default value: 86400 (1 day).</li> <li><code>write_final_mark</code> — Enables or disables writing the final index mark at the end of data part. Default value: 1. Don't turn it off.</li> <li><code>storage_policy</code> — Storage policy. See <a href=#table_engine-mergetree-multiple-volumes>Using Multiple Block Devices for Data Storage</a>.</li> </ul> </li> </ul> <p><strong>Example of Sections Setting</strong></p> <div class=codehilite><pre><span></span><span class=n>ENGINE</span> <span class=n>MergeTree</span><span class=p>()</span> <span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>))</span> <span class=n>SAMPLE</span> <span class=k>BY</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>index_granularity</span><span class=o>=</span><span class=mi>8192</span>
</pre></div> <p>In the example, we set partitioning by month.</p> <p>We also set an expression for sampling as a hash by the user ID. This allows you to pseudorandomize the data in the table for each <code>CounterID</code> and <code>EventDate</code>. If you define a <a href=../../../query_language/select/#select-sample-clause>SAMPLE</a> clause when selecting the data, ClickHouse will return an evenly pseudorandom data sample for a subset of users.</p> <p>The <code>index_granularity</code> setting can be omitted because 8192 is the default value.</p> <p><details markdown=1><summary>Deprecated Method for Creating a Table</summary></p> <div class="admonition attention"> <p class=admonition-title>Attention</p> <p>Do not use this method in new projects. If possible, switch old projects to the method described above.</p> </div> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table_name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span>
<span class=p>(</span>
    <span class=n>name1</span> <span class=p>[</span><span class=n>type1</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr1</span><span class=p>],</span>
    <span class=n>name2</span> <span class=p>[</span><span class=n>type2</span><span class=p>]</span> <span class=p>[</span><span class=k>DEFAULT</span><span class=o>|</span><span class=n>MATERIALIZED</span><span class=o>|</span><span class=k>ALIAS</span> <span class=n>expr2</span><span class=p>],</span>
    <span class=p>...</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>MergeTree</span><span class=p>(</span><span class=nb>date</span><span class=o>-</span><span class=k>column</span> <span class=p>[,</span> <span class=n>sampling_expression</span><span class=p>],</span> <span class=p>(</span><span class=k>primary</span><span class=p>,</span> <span class=k>key</span><span class=p>),</span> <span class=n>index_granularity</span><span class=p>)</span>
</pre></div> <p><strong>MergeTree() Parameters</strong></p> <ul> <li><code>date-column</code> — The name of a column of the <a href=../../../data_types/date/ >Date</a> type. ClickHouse automatically creates partitions by month based on this column. The partition names are in the <code>"YYYYMM"</code> format.</li> <li><code>sampling_expression</code> — An expression for sampling.</li> <li><code>(primary, key)</code> — Primary key. Type: <a href=../../../data_types/tuple/ >Tuple()</a></li> <li><code>index_granularity</code> — The granularity of an index. The number of data rows between the "marks" of an index. The value 8192 is appropriate for most tasks.</li> </ul> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><span class=n>MergeTree</span><span class=p>(</span><span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>),</span> <span class=p>(</span><span class=n>CounterID</span><span class=p>,</span> <span class=n>EventDate</span><span class=p>,</span> <span class=n>intHash32</span><span class=p>(</span><span class=n>UserID</span><span class=p>)),</span> <span class=mi>8192</span><span class=p>)</span>
</pre></div> <p>The <code>MergeTree</code> engine is configured in the same way as in the example above for the main engine configuration method. </details></p> <h2 id=mergetree-data-storage>Data Storage<a class=headerlink href=#mergetree-data-storage title="Permanent link">&para;</a></h2> <p>A table consists of data parts sorted by primary key.</p> <p>When data is inserted in a table, separate data parts are created and each of them is lexicographically sorted by primary key. For example, if the primary key is <code>(CounterID, Date)</code>, the data in the part is sorted by <code>CounterID</code>, and within each <code>CounterID</code>, it is ordered by <code>Date</code>.</p> <p>Data belonging to different partitions are separated into different parts. In the background, ClickHouse merges data parts for more efficient storage. Parts belonging to different partitions are not merged. The merge mechanism does not guarantee that all rows with the same primary key will be in the same data part.</p> <p>Each data part is logically divided into granules. A granule is the smallest indivisible data set that ClickHouse reads when selecting data. ClickHouse doesn't split rows or values, so each granule always contains an integer number of rows. The first row of a granule is marked with the value of the primary key for the row. For each data part, ClickHouse creates an index file that stores the marks. For each column, whether it's in the primary key or not, ClickHouse also stores the same marks. These marks let you find data directly in column files.</p> <p>The granule size is restricted by the <code>index_granularity</code> and <code>index_granularity_bytes</code> settings of the table engine. The number of rows in a granule lays in the <code>[1, index_granularity]</code> range, depending on the size of the rows. The size of a granule can exceed <code>index_granularity_bytes</code> if the size of a single row is greater than the value of the setting. In this case, the size of the granule equals the size of the row.</p> <h2 id=primary-keys-and-indexes-in-queries>Primary Keys and Indexes in Queries<a class=headerlink href=#primary-keys-and-indexes-in-queries title="Permanent link">&para;</a></h2> <p>Take the <code>(CounterID, Date)</code> primary key as an example. In this case, the sorting and index can be illustrated as follows:</p> <div class=codehilite><pre><span></span>Whole data:     [-------------------------------------------------------------------------]
CounterID:      [aaaaaaaaaaaaaaaaaabbbbcdeeeeeeeeeeeeefgggggggghhhhhhhhhiiiiiiiiikllllllll]
Date:           [1111111222222233331233211111222222333211111112122222223111112223311122333]
Marks:           |      |      |      |      |      |      |      |      |      |      |
                a,1    a,2    a,3    b,3    e,2    e,3    g,1    h,2    i,1    i,3    l,3
Marks numbers:   0      1      2      3      4      5      6      7      8      9      10
</pre></div> <p>If the data query specifies:</p> <ul> <li><code>CounterID in ('a', 'h')</code>, the server reads the data in the ranges of marks <code>[0, 3)</code> and <code>[6, 8)</code>.</li> <li><code>CounterID IN ('a', 'h') AND Date = 3</code>, the server reads the data in the ranges of marks <code>[1, 3)</code> and <code>[7, 8)</code>.</li> <li><code>Date = 3</code>, the server reads the data in the range of marks <code>[1, 10]</code>.</li> </ul> <p>The examples above show that it is always more effective to use an index than a full scan.</p> <p>A sparse index allows extra data to be read. When reading a single range of the primary key, up to <code>index_granularity * 2</code> extra rows in each data block can be read.</p> <p>Sparse indexes allow you to work with a very large number of table rows, because in most cases, such indexes fit in the computer's RAM.</p> <p>ClickHouse does not require a unique primary key. You can insert multiple rows with the same primary key.</p> <h3 id=selecting-the-primary-key>Selecting the Primary Key<a class=headerlink href=#selecting-the-primary-key title="Permanent link">&para;</a></h3> <p>The number of columns in the primary key is not explicitly limited. Depending on the data structure, you can include more or fewer columns in the primary key. This may:</p> <ul> <li> <p>Improve the performance of an index.</p> <p>If the primary key is <code>(a, b)</code>, then adding another column <code>c</code> will improve the performance if the following conditions are met:</p> <ul> <li>There are queries with a condition on column <code>c</code>.</li> <li>Long data ranges (several times longer than the <code>index_granularity</code>) with identical values for <code>(a, b)</code> are common. In other words, when adding another column allows you to skip quite long data ranges.</li> </ul> </li> <li> <p>Improve data compression.</p> <p>ClickHouse sorts data by primary key, so the higher the consistency, the better the compression.</p> </li> <li> <p>Provide additional logic when merging data parts in the <a href=../collapsingmergetree/#table_engine-collapsingmergetree>CollapsingMergeTree</a> and <a href=../summingmergetree/ >SummingMergeTree</a> engines.</p> <p>In this case it makes sense to specify the <em>sorting key</em> that is different from the primary key.</p> </li> </ul> <p>A long primary key will negatively affect the insert performance and memory consumption, but extra columns in the primary key do not affect ClickHouse performance during <code>SELECT</code> queries.</p> <h3 id=choosing-a-primary-key-that-differs-from-the-sorting-key>Choosing a Primary Key that Differs from the Sorting Key<a class=headerlink href=#choosing-a-primary-key-that-differs-from-the-sorting-key title="Permanent link">&para;</a></h3> <p>It is possible to specify a primary key (an expression with values that are written in the index file for each mark) that is different from the sorting key (an expression for sorting the rows in data parts). In this case the primary key expression tuple must be a prefix of the sorting key expression tuple.</p> <p>This feature is helpful when using the <a href=../summingmergetree/ >SummingMergeTree</a> and <a href=../aggregatingmergetree/ >AggregatingMergeTree</a> table engines. In a common case when using these engines, the table has two types of columns: <em>dimensions</em> and <em>measures</em>. Typical queries aggregate values of measure columns with arbitrary <code>GROUP BY</code> and filtering by dimensions. Because SummingMergeTree and AggregatingMergeTree aggregate rows with the same value of the sorting key, it is natural to add all dimensions to it. As a result, the key expression consists of a long list of columns and this list must be frequently updated with newly added dimensions.</p> <p>In this case it makes sense to leave only a few columns in the primary key that will provide efficient range scans and add the remaining dimension columns to the sorting key tuple.</p> <p><a href=../../../query_language/alter/ >ALTER</a> of the sorting key is a lightweight operation because when a new column is simultaneously added to the table and to the sorting key, existing data parts don't need to be changed. Since the old sorting key is a prefix of the new sorting key and there is no data in the newly added column, the data is sorted by both the old and new sorting keys at the moment of table modification.</p> <h3 id=use-of-indexes-and-partitions-in-queries>Use of Indexes and Partitions in Queries<a class=headerlink href=#use-of-indexes-and-partitions-in-queries title="Permanent link">&para;</a></h3> <p>For <code>SELECT</code> queries, ClickHouse analyzes whether an index can be used. An index can be used if the <code>WHERE/PREWHERE</code> clause has an expression (as one of the conjunction elements, or entirely) that represents an equality or inequality comparison operation, or if it has <code>IN</code> or <code>LIKE</code> with a fixed prefix on columns or expressions that are in the primary key or partitioning key, or on certain partially repetitive functions of these columns, or logical relationships of these expressions.</p> <p>Thus, it is possible to quickly run queries on one or many ranges of the primary key. In this example, queries will be fast when run for a specific tracking tag, for a specific tag and date range, for a specific tag and date, for multiple tags with a date range, and so on.</p> <p>Let's look at the engine configured as follows:</p> <div class=codehilite><pre><span></span>ENGINE MergeTree() PARTITION BY toYYYYMM(EventDate) ORDER BY (CounterID, EventDate) SETTINGS index_granularity=8192
</pre></div> <p>In this case, in queries:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>now</span><span class=p>())</span> <span class=k>AND</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=n>now</span><span class=p>())</span> <span class=k>AND</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span> <span class=k>OR</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>42</span><span class=p>)</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=p>((</span><span class=n>EventDate</span> <span class=o>&gt;=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-01-01&#39;</span><span class=p>)</span> <span class=k>AND</span> <span class=n>EventDate</span> <span class=o>&lt;=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-01-31&#39;</span><span class=p>))</span> <span class=k>OR</span> <span class=n>EventDate</span> <span class=o>=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-05-01&#39;</span><span class=p>))</span> <span class=k>AND</span> <span class=n>CounterID</span> <span class=k>IN</span> <span class=p>(</span><span class=mi>101500</span><span class=p>,</span> <span class=mi>731962</span><span class=p>,</span> <span class=mi>160656</span><span class=p>)</span> <span class=k>AND</span> <span class=p>(</span><span class=n>CounterID</span> <span class=o>=</span> <span class=mi>101500</span> <span class=k>OR</span> <span class=n>EventDate</span> <span class=o>!=</span> <span class=n>toDate</span><span class=p>(</span><span class=s1>&#39;2014-05-01&#39;</span><span class=p>))</span>
</pre></div> <p>ClickHouse will use the primary key index to trim improper data and the monthly partitioning key to trim partitions that are in improper date ranges.</p> <p>The queries above show that the index is used even for complex expressions. Reading from the table is organized so that using the index can't be slower than a full scan.</p> <p>In the example below, the index can't be used.</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>CounterID</span> <span class=o>=</span> <span class=mi>34</span> <span class=k>OR</span> <span class=n>URL</span> <span class=k>LIKE</span> <span class=s1>&#39;%upyachka%&#39;</span>
</pre></div> <p>To check whether ClickHouse can use the index when running a query, use the settings <a href=../../settings/settings/#settings-force_index_by_date>force_index_by_date</a> and <a href=../../settings/settings/ >force_primary_key</a>.</p> <p>The key for partitioning by month allows reading only those data blocks which contain dates from the proper range. In this case, the data block may contain data for many dates (up to an entire month). Within a block, data is sorted by primary key, which might not contain the date as the first column. Because of this, using a query with only a date condition that does not specify the primary key prefix will cause more data to be read than for a single date.</p> <h3 id=use-of-index-for-partially-monotonic-primary-keys>Use of Index for Partially-Monotonic Primary Keys<a class=headerlink href=#use-of-index-for-partially-monotonic-primary-keys title="Permanent link">&para;</a></h3> <p>Consider, for example, the days of the month. They form a <a href=https://en.wikipedia.org/wiki/Monotonic_function rel="external nofollow">monotonic sequence</a> for one month, but not monotonic for more extended periods. This is a partially-monotonic sequence. If a user creates the table with partially-monotonic primary key, ClickHouse creates a sparse index as usual. When a user selects data from this kind of table, ClickHouse analyzes the query conditions. If the user wants to get data between two marks of the index and both these marks fall within one month, ClickHouse can use the index in this particular case because it can calculate the distance between the parameters of a query and index marks.</p> <p>ClickHouse cannot use an index if the values of the primary key in the query parameter range don't represent a monotonic sequence. In this case, ClickHouse uses the full scan method.</p> <p>ClickHouse uses this logic not only for days of the month sequences, but for any primary key that represents a partially-monotonic sequence.</p> <h3 id=table_engine-mergetree-data_skipping-indexes>Data Skipping Indexes (Experimental)<a class=headerlink href=#table_engine-mergetree-data_skipping-indexes title="Permanent link">&para;</a></h3> <p>You need to set <code>allow_experimental_data_skipping_indices</code> to 1 to use indices. (run <code>SET allow_experimental_data_skipping_indices = 1</code>).</p> <p>The index declaration is in the columns section of the <code>CREATE</code> query.</p> <div class=codehilite><pre><span></span><span class=k>INDEX</span> <span class=n>index_name</span> <span class=n>expr</span> <span class=k>TYPE</span> <span class=k>type</span><span class=p>(...)</span> <span class=n>GRANULARITY</span> <span class=n>granularity_value</span>
</pre></div> <p>For tables from the <code>*MergeTree</code> family, data skipping indices can be specified.</p> <p>These indices aggregate some information about the specified expression on blocks, which consist of <code>granularity_value</code> granules (the size of the granule is specified using the <code>index_granularity</code> setting in the table engine). Then these aggregates are used in <code>SELECT</code> queries for reducing the amount of data to read from the disk by skipping big blocks of data where the <code>where</code> query cannot be satisfied.</p> <p><strong>Example</strong></p> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>table_name</span>
<span class=p>(</span>
    <span class=n>u64</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>i32</span> <span class=n>Int32</span><span class=p>,</span>
    <span class=n>s</span> <span class=n>String</span><span class=p>,</span>
    <span class=p>...</span>
    <span class=k>INDEX</span> <span class=n>a</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=n>i32</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=k>TYPE</span> <span class=n>minmax</span> <span class=n>GRANULARITY</span> <span class=mi>3</span><span class=p>,</span>
    <span class=k>INDEX</span> <span class=n>b</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>))</span> <span class=k>TYPE</span> <span class=k>set</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span><span class=p>()</span>
<span class=p>...</span>
</pre></div> <p>Indices from the example can be used by ClickHouse to reduce the amount of data to read from disk in the following queries:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>s</span> <span class=o>&lt;</span> <span class=s1>&#39;z&#39;</span>
<span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=k>table</span> <span class=k>WHERE</span> <span class=n>u64</span> <span class=o>*</span> <span class=n>i32</span> <span class=o>==</span> <span class=mi>10</span> <span class=k>AND</span> <span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>1234</span>
</pre></div> <h4 id=available-types-of-indices>Available Types of Indices<a class=headerlink href=#available-types-of-indices title="Permanent link">&para;</a></h4> <ul> <li> <p><code>minmax</code></p> <p>Stores extremes of the specified expression (if the expression is <code>tuple</code>, then it stores extremes for each element of <code>tuple</code>), uses stored info for skipping blocks of data like the primary key.</p> </li> <li> <p><code>set(max_rows)</code></p> <p>Stores unique values of the specified expression (no more than <code>max_rows</code> rows, <code>max_rows=0</code> means "no limits"). Uses the values to check if the <code>WHERE</code> expression is not satisfiable on a block of data. </p> </li> <li> <p><code>ngrambf_v1(n, size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p> <p>Stores a <a href=https://en.wikipedia.org/wiki/Bloom_filter rel="external nofollow">Bloom filter</a> that contains all ngrams from a block of data. Works only with strings. Can be used for optimization of <code>equals</code>, <code>like</code> and <code>in</code> expressions.</p> <ul> <li><code>n</code> — ngram size,</li> <li><code>size_of_bloom_filter_in_bytes</code> — Bloom filter size in bytes (you can use large values here, for example, 256 or 512, because it can be compressed well).</li> <li><code>number_of_hash_functions</code> — The number of hash functions used in the Bloom filter.</li> <li><code>random_seed</code> — The seed for Bloom filter hash functions.</li> </ul> </li> <li> <p><code>tokenbf_v1(size_of_bloom_filter_in_bytes, number_of_hash_functions, random_seed)</code></p> <p>The same as <code>ngrambf_v1</code>, but stores tokens instead of ngrams. Tokens are sequences separated by non-alphanumeric characters.</p> </li> <li> <p><code>bloom_filter([false_positive])</code> — Stores a <a href=https://en.wikipedia.org/wiki/Bloom_filter rel="external nofollow">Bloom filter</a> for the specified columns.</p> <p>The optional <code>false_positive</code> parameter is the probability of receiving a false positive response from the filter. Possible values: (0, 1). Default value: 0.025.</p> <p>Supported data types: <code>Int*</code>, <code>UInt*</code>, <code>Float*</code>, <code>Enum</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>, <code>FixedString</code>, <code>Array</code>, <code>LowCardinality</code>, <code>Nullable</code>.</p> <p>The following functions can use it: <a href=../../../query_language/functions/comparison_functions/ >equals</a>, <a href=../../../query_language/functions/comparison_functions/ >notEquals</a>, <a href=../../../query_language/functions/in_functions/ >in</a>, <a href=../../../query_language/functions/in_functions/ >notIn</a>, <a href=../../../query_language/functions/array_functions/ >has</a>.</p> </li> </ul> <div class=codehilite><pre><span></span><span class=k>INDEX</span> <span class=n>sample_index</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>s</span><span class=p>))</span> <span class=k>TYPE</span> <span class=n>minmax</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=k>INDEX</span> <span class=n>sample_index2</span> <span class=p>(</span><span class=n>u64</span> <span class=o>*</span> <span class=k>length</span><span class=p>(</span><span class=n>str</span><span class=p>),</span> <span class=n>i32</span> <span class=o>+</span> <span class=n>f64</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span> <span class=nb>date</span><span class=p>,</span> <span class=n>str</span><span class=p>)</span> <span class=k>TYPE</span> <span class=k>set</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
<span class=k>INDEX</span> <span class=n>sample_index3</span> <span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=n>str</span><span class=p>),</span> <span class=n>str</span><span class=p>)</span> <span class=k>TYPE</span> <span class=n>ngrambf_v1</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>256</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=n>GRANULARITY</span> <span class=mi>4</span>
</pre></div> <h4 id=functions-support>Functions Support<a class=headerlink href=#functions-support title="Permanent link">&para;</a></h4> <p>Conditions in the <code>WHERE</code> clause contains calls of the functions that operate with columns. If the column is a part of an index, ClickHouse tries to use this index when performing the functions. ClickHouse supports different subsets of functions for using indexes.</p> <p>The <code>set</code> index can be used with all functions. Function subsets for other indexes are shown in the table below.</p> <table> <thead> <tr> <th>Function (operator) / Index</th> <th>primary key</th> <th>minmax</th> <th>ngrambf_v1</th> <th>tokenbf_v1</th> <th>bloom_filter</th> </tr> </thead> <tbody> <tr> <td><a href=../../../query_language/functions/comparison_functions/#function-equals>equals (=, ==)</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../query_language/functions/comparison_functions/#function-notequals>notEquals(!=, &lt;&gt;)</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../query_language/functions/string_search_functions/#function-like>like</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/string_search_functions/#function-notlike>notLike</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/string_functions/#function-startswith>startsWith</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/string_functions/#function-endswith>endsWith</a></td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/string_search_functions/#function-multisearchany>multiSearchAny</a></td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✔</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/in_functions/#in-functions>in</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../query_language/functions/in_functions/#in-functions>notIn</a></td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> <td>✔</td> </tr> <tr> <td><a href=../../../query_language/functions/comparison_functions/#function-less>less (&lt;)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/comparison_functions/#function-greater>greater (&gt;)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/comparison_functions/#function-lessorequals>lessOrEquals (&lt;=)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/comparison_functions/#function-greaterorequals>greaterOrEquals (&gt;=)</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/array_functions/#function-empty>empty</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td><a href=../../../query_language/functions/array_functions/#function-notempty>notEmpty</a></td> <td>✔</td> <td>✔</td> <td>✗</td> <td>✗</td> <td>✗</td> </tr> <tr> <td>hasToken</td> <td>✗</td> <td>✗</td> <td>✗</td> <td>✔</td> <td>✗</td> </tr> </tbody> </table> <p>Functions with a constant argument that is less than ngram size can't be used by <code>ngrambf_v1</code> for query optimization.</p> <p>Bloom filters can have false positive matches, so the <code>ngrambf_v1</code>, <code>tokenbf_v1</code>, and <code>bloom_filter</code> indexes can't be used for optimizing queries where the result of a function is expected to be false, for example:</p> <ul> <li>Can be optimized:<ul> <li><code>s LIKE '%test%'</code></li> <li><code>NOT s NOT LIKE '%test%'</code></li> <li><code>s = 1</code></li> <li><code>NOT s != 1</code></li> <li><code>startsWith(s, 'test')</code></li> </ul> </li> <li>Can't be optimized:<ul> <li><code>NOT s LIKE '%test%'</code></li> <li><code>s NOT LIKE '%test%'</code></li> <li><code>NOT s = 1</code></li> <li><code>s != 1</code></li> <li><code>NOT startsWith(s, 'test')</code></li> </ul> </li> </ul> <h2 id=concurrent-data-access>Concurrent Data Access<a class=headerlink href=#concurrent-data-access title="Permanent link">&para;</a></h2> <p>For concurrent table access, we use multi-versioning. In other words, when a table is simultaneously read and updated, data is read from a set of parts that is current at the time of the query. There are no lengthy locks. Inserts do not get in the way of read operations.</p> <p>Reading from a table is automatically parallelized.</p> <h2 id=table_engine-mergetree-ttl>TTL for Columns and Tables<a class=headerlink href=#table_engine-mergetree-ttl title="Permanent link">&para;</a></h2> <p>Determines the lifetime of values.</p> <p>The <code>TTL</code> clause can be set for the whole table and for each individual column. If both <code>TTL</code> are set, ClickHouse uses that <code>TTL</code> which expires earlier.</p> <p>The table must have the column in the <a href=../../../data_types/date/ >Date</a> or <a href=../../../data_types/datetime/ >DateTime</a> data type. To define the lifetime of data, use operations on this time column, for example:</p> <div class=codehilite><pre><span></span><span class=n>TTL</span> <span class=n>time_column</span>
<span class=n>TTL</span> <span class=n>time_column</span> <span class=o>+</span> <span class=nb>interval</span>
</pre></div> <p>To define <code>interval</code>, use <a href=../../../query_language/operators/#operators-datetime>time interval</a> operators.</p> <div class=codehilite><pre><span></span><span class=n>TTL</span> <span class=n>date_time</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span>
<span class=n>TTL</span> <span class=n>date_time</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>15</span> <span class=n>HOUR</span>
</pre></div> <p><strong>Column TTL</strong></p> <p>When the values in the column expire, ClickHouse replaces them with the default values for the column data type. If all the column values in the data part expire, ClickHouse deletes this column from the data part in a filesystem.</p> <p>The <code>TTL</code> clause can't be used for key columns.</p> <p>Examples:</p> <p>Creating a table with TTL</p> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>example_table</span> 
<span class=p>(</span>
    <span class=n>d</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>a</span> <span class=nb>Int</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>,</span>
    <span class=n>b</span> <span class=nb>Int</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>,</span>
    <span class=k>c</span> <span class=n>String</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>d</span><span class=p>;</span>
</pre></div> <p>Adding TTL to a column of an existing table</p> <div class=codehilite><pre><span></span><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=k>COLUMN</span>
    <span class=k>c</span> <span class=n>String</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>DAY</span><span class=p>;</span>
</pre></div> <p>Altering TTL of the column</p> <div class=codehilite><pre><span></span><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=k>COLUMN</span>
    <span class=k>c</span> <span class=n>String</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>;</span>
</pre></div> <p><strong>Table TTL</strong></p> <p>When data in a table expires, ClickHouse deletes all corresponding rows.</p> <p>Examples:</p> <p>Creating a table with TTL</p> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>example_table</span> 
<span class=p>(</span>
    <span class=n>d</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>a</span> <span class=nb>Int</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>d</span>
<span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>MONTH</span><span class=p>;</span>
</pre></div> <p>Altering TTL of the table</p> <div class=codehilite><pre><span></span><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>example_table</span>
    <span class=k>MODIFY</span> <span class=n>TTL</span> <span class=n>d</span> <span class=o>+</span> <span class=nb>INTERVAL</span> <span class=mi>1</span> <span class=k>DAY</span><span class=p>;</span>
</pre></div> <p><strong>Removing Data</strong></p> <p>Data with an expired TTL is removed when ClickHouse merges data parts.</p> <p>When ClickHouse see that data is expired, it performs an off-schedule merge. To control the frequency of such merges, you can set <a href=#mergetree_setting-merge_with_ttl_timeout>merge_with_ttl_timeout</a>. If the value is too low, it will perform many off-schedule merges that may consume a lot of resources.</p> <p>If you perform the <code>SELECT</code> query between merges, you may get expired data. To avoid it, use the <a href=../../../query_language/misc/#misc_operations-optimize>OPTIMIZE</a> query before <code>SELECT</code>.</p> <h2 id=table_engine-mergetree-multiple-volumes>Using Multiple Block Devices for Data Storage<a class=headerlink href=#table_engine-mergetree-multiple-volumes title="Permanent link">&para;</a></h2> <h3 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h3> <p><code>MergeTree</code> family table engines can store data on multiple block devices. For example, it can be useful when the data of a certain table are implicitly split into "hot" and "cold". The most recent data is regularly requested but requires only a small amount of space. On the contrary, the fat-tailed historical data is requested rarely. If several disks are available, the "hot" data may be located on fast disks (for example, NVMe SSDs or in memory), while the "cold" data - on relatively slow ones (for example, HDD).</p> <p>Data part is the minimum movable unit for <code>MergeTree</code>-engine tables. The data belonging to one part are stored on one disk. Data parts can be moved between disks in the background (according to user settings) as well as by means of the <a href=../../../query_language/alter/#alter_move-partition>ALTER</a> queries. </p> <h3 id=terms>Terms<a class=headerlink href=#terms title="Permanent link">&para;</a></h3> <ul> <li>Disk — Block device mounted to the filesystem.</li> <li>Default disk — Disk that stores the path specified in the <a href=../../server_settings/settings/#server_settings-path>path</a> server setting.</li> <li>Volume — Ordered set of equal disks (similar to <a href=https://en.wikipedia.org/wiki/Non-RAID_drive_architectures rel="external nofollow">JBOD</a>).</li> <li>Storage policy — Set of volumes and the rules for moving data between them.</li> </ul> <p>The names given to the described entities can be found in the system tables, <a href=../../system_tables/#system_tables-storage_policies>system.storage_policies</a> and <a href=../../system_tables/#system_tables-disks>system.disks</a>. To apply one of the configured storage policies for a table, use the <code>storage_policy</code> setting of <code>MergeTree</code>-engine family tables.</p> <h3 id=table_engine-mergetree-multiple-volumes_configure>Configuration<a class=headerlink href=#table_engine-mergetree-multiple-volumes_configure title="Permanent link">&para;</a></h3> <p>Disks, volumes and storage policies should be declared inside the <code>&lt;storage_configuration&gt;</code> tag either in the main file <code>config.xml</code> or in a distinct file in the <code>config.d</code> directory. </p> <p>Configuration structure:</p> <div class=codehilite><pre><span></span><span class=nt>&lt;disks&gt;</span>
    <span class=nt>&lt;disk_name_1&gt;</span> <span class=c>&lt;!-- disk name --&gt;</span>
        <span class=nt>&lt;path&gt;</span>/mnt/fast_ssd/clickhouse<span class=nt>&lt;/path&gt;</span>
    <span class=nt>&lt;/disk_name_1&gt;</span>
    <span class=nt>&lt;disk_name_2&gt;</span>
        <span class=nt>&lt;path&gt;</span>/mnt/hdd1/clickhouse<span class=nt>&lt;/path&gt;</span>
        <span class=nt>&lt;keep_free_space_bytes&gt;</span>10485760<span class=nt>&lt;/keep_free_space_bytes&gt;</span>_
    <span class=nt>&lt;/disk_name_2&gt;</span>
    <span class=nt>&lt;disk_name_3&gt;</span>
        <span class=nt>&lt;path&gt;</span>/mnt/hdd2/clickhouse<span class=nt>&lt;/path&gt;</span>
        <span class=nt>&lt;keep_free_space_bytes&gt;</span>10485760<span class=nt>&lt;/keep_free_space_bytes&gt;</span>_
    <span class=nt>&lt;/disk_name_3&gt;</span>

    ...
<span class=nt>&lt;/disks&gt;</span>
</pre></div> <p>Tags:</p> <ul> <li><code>&lt;disk_name_N&gt;</code> — Disk name. Names must be different for all disks.</li> <li><code>path</code> — path under which a server will store data (<code>data</code> and <code>shadow</code> folders), should be terminated with '/'.</li> <li><code>keep_free_space_bytes</code> — the amount of free disk space to be reserved.</li> </ul> <p>The order of the disk definition is not important.</p> <p>Storage policies configuration markup:</p> <div class=codehilite><pre><span></span><span class=nt>&lt;policies&gt;</span>
    <span class=nt>&lt;policy_name_1&gt;</span>
        <span class=nt>&lt;volumes&gt;</span>
            <span class=nt>&lt;volume_name_1&gt;</span>
                <span class=nt>&lt;disk&gt;</span>disk_name_from_disks_configuration<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;max_data_part_size_bytes&gt;</span>1073741824<span class=nt>&lt;/max_data_part_size_bytes&gt;</span>
            <span class=nt>&lt;/volume_name_1&gt;</span>
            <span class=nt>&lt;volume_name_2&gt;</span>
                <span class=c>&lt;!-- configuration --&gt;</span>
            <span class=nt>&lt;/volume_name_2&gt;</span>
            <span class=c>&lt;!-- more volumes --&gt;</span>
        <span class=nt>&lt;/volumes&gt;</span>
        <span class=nt>&lt;move_factor&gt;</span>0.2<span class=nt>&lt;/move_factor&gt;</span>
    <span class=nt>&lt;/policy_name_1&gt;</span>
    <span class=nt>&lt;policy_name_2&gt;</span>
        <span class=c>&lt;!-- configuration --&gt;</span>
    <span class=nt>&lt;/policy_name_2&gt;</span>

    <span class=c>&lt;!-- more policies --&gt;</span>
<span class=nt>&lt;/policies&gt;</span>
</pre></div> <p>Tags:</p> <ul> <li><code>policy_name_N</code> — Policy name. Policy names must be unique.</li> <li><code>volume_name_N</code> — Volume name. Volume names must be unique.</li> <li><code>disk</code> — a disk within a volume.</li> <li><code>max_data_part_size_bytes</code> — the maximum size of a part that can be stored on any of the volume's disks.</li> <li><code>move_factor</code> — when the amount of available space gets lower than this factor, data automatically start to move on the next volume if any (by default, 0.1).</li> </ul> <p>Cofiguration examples:</p> <div class=codehilite><pre><span></span><span class=nt>&lt;policies&gt;</span>
    <span class=nt>&lt;hdd_in_order&gt;</span> <span class=c>&lt;!-- policy name --&gt;</span>
        <span class=nt>&lt;volumes&gt;</span>
            <span class=nt>&lt;single&gt;</span> <span class=c>&lt;!-- volume name --&gt;</span>
                <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;disk&gt;</span>disk2<span class=nt>&lt;/disk&gt;</span>
            <span class=nt>&lt;/single&gt;</span>
        <span class=nt>&lt;/volumes&gt;</span>
    <span class=nt>&lt;/hdd_in_order&gt;</span>

    <span class=nt>&lt;moving_from_ssd_to_hdd&gt;</span>
        <span class=nt>&lt;volumes&gt;</span>
            <span class=nt>&lt;hot&gt;</span>
                <span class=nt>&lt;disk&gt;</span>fast_ssd<span class=nt>&lt;/disk&gt;</span>
                <span class=nt>&lt;max_data_part_size_bytes&gt;</span>1073741824<span class=nt>&lt;/max_data_part_size_bytes&gt;</span>
            <span class=nt>&lt;/hot&gt;</span>
            <span class=nt>&lt;cold&gt;</span>
                <span class=nt>&lt;disk&gt;</span>disk1<span class=nt>&lt;/disk&gt;</span>
            <span class=nt>&lt;/cold&gt;</span>            
        <span class=nt>&lt;/volumes&gt;</span>
        <span class=nt>&lt;move_factor&gt;</span>0.2<span class=nt>&lt;/move_factor&gt;</span>
    <span class=nt>&lt;/moving_from_ssd_to_hdd&gt;</span>
<span class=nt>&lt;/policies&gt;</span>
</pre></div> <p>In given example, the <code>hdd_in_order</code> policy implements the <a href=https://en.wikipedia.org/wiki/Round-robin_scheduling rel="external nofollow">round-robin</a> approach. Thus this policy defines only one volume (<code>single</code>), the data parts are stored on all its disks in circular order. Such policy can be quite useful if there are several similar disks are mounted to the system, but RAID is not configured. Keep in mind that each individual disk drive is not reliable and you might want to compensate it with replication factor of 3 or more.</p> <p>If there are different kinds of disks available in the system, <code>moving_from_ssd_to_hdd</code> policy can be used instead. The volume <code>hot</code> consists of an SSD disk (<code>fast_ssd</code>), and the maximum size of a part that can be stored on this volume is 1GB. All the parts with the size larger than 1GB will be stored directly on the <code>cold</code> volume, which contains an HDD disk <code>disk1</code>. Also, once the disk <code>fast_ssd</code> gets filled by more than 80%, data will be transferred to the <code>disk1</code> by a background process.</p> <p>The order of volume enumeration within a storage policy is important. Once a volume is overfilled, data are moved to the next one. The order of disk enumeration is important as well because data are stored on them in turns. </p> <p>When creating a table, one can apply one of the configured storage policies to it: </p> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>table_with_non_default_policy</span> <span class=p>(</span>
    <span class=n>EventDate</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>OrderID</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>BannerID</span> <span class=n>UInt64</span><span class=p>,</span>
    <span class=n>SearchPhrase</span> <span class=n>String</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=p>(</span><span class=n>OrderID</span><span class=p>,</span> <span class=n>BannerID</span><span class=p>)</span>
<span class=n>PARTITION</span> <span class=k>BY</span> <span class=n>toYYYYMM</span><span class=p>(</span><span class=n>EventDate</span><span class=p>)</span>
<span class=n>SETTINGS</span> <span class=n>storage_policy</span> <span class=o>=</span> <span class=s1>&#39;moving_from_ssd_to_hdd&#39;</span>
</pre></div> <p>The <code>default</code> storage policy implies using only one volume, which consists of only one disk given in <code>&lt;path&gt;</code>. Once a table is created, its storage policy cannot be changed. </p> <h3 id=details>Details<a class=headerlink href=#details title="Permanent link">&para;</a></h3> <p>In the case of <code>MergeTree</code> tables, data is getting to disk in different ways:</p> <ul> <li>As a result of an insert (<code>INSERT</code> query).</li> <li>During background merges and <a href=../../../query_language/alter/#alter-mutations>mutations</a>.</li> <li>When downloading from another replica.</li> <li>As a result of partition freezing <a href=../../../query_language/alter/#alter_freeze-partition>ALTER TABLE ... FREEZE PARTITION</a>.</li> </ul> <p>In all these cases except for mutations and partition freezing, a part is stored on a volume and a disk according to the given storage policy:</p> <ol> <li>The first volume (in the order of definition) that has enough disk space for storing a part (<code>unreserved_space &gt; current_part_size</code>) and allows for storing parts of a given size (<code>max_data_part_size_bytes &gt; current_part_size</code>) is chosen.</li> <li>Within this volume, that disk is chosen that follows the one, which was used for storing the previous chunk of data, and that has free space more than the part size (<code>unreserved_space - keep_free_space_bytes &gt; current_part_size</code>). </li> </ol> <p>Under the hood, mutations and partition freezing make use of <a href=https://en.wikipedia.org/wiki/Hard_link rel="external nofollow">hard links</a>. Hard links between different disks are not supported, therefore in such cases the resulting parts are stored on the same disks as the initial ones. </p> <p>In the background, parts are moved between volumes on the basis of the amount of free space (<code>move_factor</code> parameter) according to the order the volumes are declared in the configuration file. Data is never transferred from the last one and into the first one. One may use system tables <a href=../../system_tables/#system_tables-part-log>system.part_log</a> (field <code>type = MOVE_PART</code>) and <a href=../../system_tables/#system_tables-parts>system.parts</a> (fields <code>path</code> and <code>disk</code>) to monitor background moves. Also, the detailed information can be found in server logs.</p> <p>User can force moving a part or a partition from one volume to another using the query <a href=../../../query_language/alter/#alter_move-partition>ALTER TABLE ... MOVE PART|PARTITION ... TO VOLUME|DISK ...</a>, all the restrictions for background operations are taken into account. The query initiates a move on its own and does not wait for background operations to be completed. User will get an error message if not enough free space is available or if any of the required conditions are not met.</p> <p>Moving data does not interfere with data replication. Therefore, different storage policies can be specified for the same table on different replicas.</p> <p>After the completion of background merges and mutations, old parts are removed only after a certain amount of time (<code>old_parts_lifetime</code>). During this time, they are not moved to other volumes or disks. Therefore, until the parts are finally removed, they are still taken into account for evaluation of the occupied disk space.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../../operations/table_engines/ title=Introduction class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> قبلی </span> Introduction </span> </div> </a> <a href=../../../operations/table_engines/replication/ title="Data Replication" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> بعدی </span> Data Replication </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> ©2016–2020 Yandex LLC </div> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/modernizr.js></script> <script src=../../../assets/javascripts/application.js></script> <script src=../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../assets/javascripts/lunr/lunr.fa.js></script> <script src=../../../assets/javascripts/lunr/lunr.multi.js></script> <script type=text/javascript>
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'fa';
            }
          )
      });
    </script> <script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script> <script type=text/javascript> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:fa"]
},
debug: false
});
</script> <!-- Yandex.Metrika counter --> <script type=text/javascript>
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 style="position:absolute; left:-9999px;" alt></div> </noscript> <!-- /Yandex.Metrika counter --> </body> </html>