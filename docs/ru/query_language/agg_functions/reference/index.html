



<!DOCTYPE html>
<html lang="ru" class="no-js" data-version="master" data-single-page="false">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://clickhouse.yandex/docs/ru/query_language/agg_functions/reference/">
      
      
      
      <meta name="lang:clipboard.copy" content="Копировать в буфер">
      
      <meta name="lang:clipboard.copied" content="Скопировано в буфер">
      
      <meta name="lang:search.language" content="ru">
      
      <meta name="lang:search.pipeline.stopwords" content="">
      
      <meta name="lang:search.pipeline.trimmer" content="">
      
      <meta name="lang:search.result.none" content="Совпадений не найдено">
      
      <meta name="lang:search.result.one" content="Найдено 1 совпадение">
      
      <meta name="lang:search.result.other" content="Найдено # совпадений">
      
      <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
    
    
      
        <title>Справочник функций - Документация ClickHouse </title>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
      <link rel="stylesheet" href="../../../assets/stylesheets/application.2a88008a.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/custom.css?7bc0aa2?1582278607">
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="white" class="md-lang-ru">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">

  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="/" title="Документация ClickHouse " class="md-header-nav__button md-logo">
          
            <img src="../../../images/logo.svg" width="40" height="40">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Документация ClickHouse 
              </span>
              <span class="md-header-nav__topic">
                Справочник функций
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" id="md-search__input" class="md-search__input" name="query" required placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Начните печатать для поиска
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div id="md-language-switch" class="md-header-nav__source">
            

  <a class="md-alt-lang"
     href="../../../../en/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../ru/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../fa/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      <nav class="md-nav md-nav--primary" data-md-level="0">
  
  <label class="md-nav__title md-nav__title--site" for="drawer">
    Документация ClickHouse 
  </label>

  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Введение
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Введение
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../" title="Обзор" class="md-nav__link">
      Обзор
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/distinctive_features/" title="Отличительные возможности ClickHouse" class="md-nav__link">
      Отличительные возможности ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/features_considered_disadvantages/" title="Особенности ClickHouse, которые могут считаться недостатками" class="md-nav__link">
      Особенности ClickHouse, которые могут считаться недостатками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/performance/" title="Производительность" class="md-nav__link">
      Производительность
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/history/" title="История" class="md-nav__link">
      История
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/info/" title="Информационная поддержка" class="md-nav__link">
      Информационная поддержка
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../introduction/adopters/" title="Пользователи" class="md-nav__link">
      Пользователи
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Начало работы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Начало работы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/install/" title="Установка" class="md-nav__link">
      Установка
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/tutorial/" title="Руководство для начинающих" class="md-nav__link">
      Руководство для начинающих
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Тестовые наборы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Тестовые наборы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/ontime/" title="OnTime" class="md-nav__link">
      OnTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/nyc_taxi/" title="Данные о такси в Нью-Йорке" class="md-nav__link">
      Данные о такси в Нью-Йорке
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/amplab_benchmark/" title="AMPLab Big Data Benchmark" class="md-nav__link">
      AMPLab Big Data Benchmark
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/wikistat/" title="WikiStat" class="md-nav__link">
      WikiStat
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/criteo/" title="Терабайт логов кликов от Criteo" class="md-nav__link">
      Терабайт логов кликов от Criteo
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/star_schema/" title="Схема «Звезда»" class="md-nav__link">
      Схема «Звезда»
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../getting_started/example_datasets/metrica/" title="Данные Яндекс.Метрики" class="md-nav__link">
      Данные Яндекс.Метрики
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Интерфейсы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Интерфейсы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/cli/" title="Клиент командной строки" class="md-nav__link">
      Клиент командной строки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/tcp/" title="Нативный интерфейс (TCP)" class="md-nav__link">
      Нативный интерфейс (TCP)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/http/" title="HTTP-интерфейс" class="md-nav__link">
      HTTP-интерфейс
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/mysql/" title="MySQL-интерфейс" class="md-nav__link">
      MySQL-интерфейс
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/formats/" title="Форматы входных и выходных данных" class="md-nav__link">
      Форматы входных и выходных данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/jdbc/" title="JDBC-драйвер" class="md-nav__link">
      JDBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/odbc/" title="ODBC-драйвер" class="md-nav__link">
      ODBC-драйвер
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/cpp/" title="C++ клиентская библиотека" class="md-nav__link">
      C++ клиентская библиотека
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-10" type="checkbox" id="nav-3-10">
    
    <label class="md-nav__link" for="nav-3-10">
      От сторонних разработчиков
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-10">
        От сторонних разработчиков
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/client_libraries/" title="Клиентские библиотеки" class="md-nav__link">
      Клиентские библиотеки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/integrations/" title="Интеграции" class="md-nav__link">
      Интеграции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/gui/" title="Визуальные интерфейсы" class="md-nav__link">
      Визуальные интерфейсы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../interfaces/third-party/proxy/" title="Прокси" class="md-nav__link">
      Прокси
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Движки баз данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Движки баз данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../database_engines/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../database_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Движки таблиц
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Движки таблиц
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Семейство MergeTree
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Семейство MergeTree
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mergetree/" title="MergeTree" class="md-nav__link">
      MergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replication/" title="Репликация данных" class="md-nav__link">
      Репликация данных
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/custom_partitioning_key/" title="Произвольный ключ партиционирования" class="md-nav__link">
      Произвольный ключ партиционирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/replacingmergetree/" title="ReplacingMergeTree" class="md-nav__link">
      ReplacingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/summingmergetree/" title="SummingMergeTree" class="md-nav__link">
      SummingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/aggregatingmergetree/" title="AggregatingMergeTree" class="md-nav__link">
      AggregatingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/collapsingmergetree/" title="CollapsingMergeTree" class="md-nav__link">
      CollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="md-nav__link">
      VersionedCollapsingMergeTree
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/graphitemergetree/" title="GraphiteMergeTree" class="md-nav__link">
      GraphiteMergeTree
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Семейство Log
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Семейство Log
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log_family/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/stripelog/" title="StripeLog" class="md-nav__link">
      StripeLog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/log/" title="Log" class="md-nav__link">
      Log
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/tinylog/" title="TinyLog" class="md-nav__link">
      TinyLog
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Интеграции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Интеграции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/jdbc/" title="JDBC" class="md-nav__link">
      JDBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/odbc/" title="ODBC" class="md-nav__link">
      ODBC
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/hdfs/" title="HDFS" class="md-nav__link">
      HDFS
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Особые
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        Особые
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/distributed/" title="Distributed" class="md-nav__link">
      Distributed
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/external_data/" title="Внешние данные" class="md-nav__link">
      Внешние данные
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/dictionary/" title="Dictionary" class="md-nav__link">
      Dictionary
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/merge/" title="Merge" class="md-nav__link">
      Merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/join/" title="Join" class="md-nav__link">
      Join
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/url/" title="URL" class="md-nav__link">
      URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/view/" title="View" class="md-nav__link">
      View
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/materializedview/" title="MaterializedView" class="md-nav__link">
      MaterializedView
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/table_engines/buffer/" title="Buffer" class="md-nav__link">
      Buffer
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Справка по SQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Справка по SQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/syntax/" title="Общий синтаксис" class="md-nav__link">
      Общий синтаксис
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Запросы
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Запросы
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/select/" title="SELECT" class="md-nav__link">
      SELECT
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/insert_into/" title="INSERT INTO" class="md-nav__link">
      INSERT INTO
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/create/" title="CREATE" class="md-nav__link">
      CREATE
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/alter/" title="ALTER" class="md-nav__link">
      ALTER
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/system/" title="SYSTEM" class="md-nav__link">
      SYSTEM
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/show/" title="SHOW" class="md-nav__link">
      SHOW
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/misc/" title="Прочие" class="md-nav__link">
      Прочие
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4">
    
    <label class="md-nav__link" for="nav-6-4">
      Функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        Функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/arithmetic_functions/" title="Арифметические функции" class="md-nav__link">
      Арифметические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/comparison_functions/" title="Функции сравнения" class="md-nav__link">
      Функции сравнения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/logical_functions/" title="Логические функции" class="md-nav__link">
      Логические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/type_conversion_functions/" title="Функции преобразования типов" class="md-nav__link">
      Функции преобразования типов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/date_time_functions/" title="Функции для работы с датами и временем" class="md-nav__link">
      Функции для работы с датами и временем
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_functions/" title="Функции для работы со строками" class="md-nav__link">
      Функции для работы со строками
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_search_functions/" title="Функции поиска в строках" class="md-nav__link">
      Функции поиска в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/string_replace_functions/" title="Функции поиска и замены в строках" class="md-nav__link">
      Функции поиска и замены в строках
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/conditional_functions/" title="Условные функции" class="md-nav__link">
      Условные функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/math_functions/" title="Математические функции" class="md-nav__link">
      Математические функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/rounding_functions/" title="Функции округления" class="md-nav__link">
      Функции округления
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_functions/" title="Функции по работе с массивами" class="md-nav__link">
      Функции по работе с массивами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/splitting_merging_functions/" title="Функции разбиения и слияния строк и массивов" class="md-nav__link">
      Функции разбиения и слияния строк и массивов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bit_functions/" title="Битовые функции" class="md-nav__link">
      Битовые функции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/bitmap_functions/" title="Функции для битмапов" class="md-nav__link">
      Функции для битмапов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/hash_functions/" title="Функции хэширования" class="md-nav__link">
      Функции хэширования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/random_functions/" title="Функции генерации псевдослучайных чисел" class="md-nav__link">
      Функции генерации псевдослучайных чисел
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/uuid_functions/" title="Функции для работы с UUID" class="md-nav__link">
      Функции для работы с UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/encoding_functions/" title="Функции кодирования" class="md-nav__link">
      Функции кодирования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/url_functions/" title="Функции для работы с URL" class="md-nav__link">
      Функции для работы с URL
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ip_address_functions/" title="Функции для работы с IP-адресами" class="md-nav__link">
      Функции для работы с IP-адресами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/json_functions/" title="Функции для работы с JSON." class="md-nav__link">
      Функции для работы с JSON.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/higher_order_functions/" title="Функции высшего порядка" class="md-nav__link">
      Функции высшего порядка
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ext_dict_functions/" title="Функции для работы с внешними словарями" class="md-nav__link">
      Функции для работы с внешними словарями
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/ym_dict_functions/" title="Функции для работы со словарями Яндекс.Метрики" class="md-nav__link">
      Функции для работы со словарями Яндекс.Метрики
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/in_functions/" title="Функции для реализации оператора IN." class="md-nav__link">
      Функции для реализации оператора IN.
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/array_join/" title="Функция arrayJoin" class="md-nav__link">
      Функция arrayJoin
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/geo/" title="Функции для работы с географическими координатами" class="md-nav__link">
      Функции для работы с географическими координатами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/functions_for_nulls/" title="Функции c Nullable аргументами" class="md-nav__link">
      Функции c Nullable аргументами
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/machine_learning_functions/" title="Функции машинного обучения" class="md-nav__link">
      Функции машинного обучения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/introspection/" title="Функции для интроспекции" class="md-nav__link">
      Функции для интроспекции
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/functions/other_functions/" title="Прочие функции" class="md-nav__link">
      Прочие функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5" checked>
    
    <label class="md-nav__link" for="nav-6-5">
      Агрегатные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Агрегатные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Справочник функций
      </label>
    
    <a href="../../../query_language/agg_functions/reference/" title="Справочник функций" class="md-nav__link md-nav__link--active">
      <strong>Справочник функций</strong>
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agg_function-count" title="count" class="md-nav__link">
    count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-any" title="any(x)" class="md-nav__link">
    any(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-anyHeavy" title="anyHeavy(x)" class="md-nav__link">
    anyHeavy(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-anyLast" title="anyLast(x)" class="md-nav__link">
    anyLast(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitand" title="groupBitAnd" class="md-nav__link">
    groupBitAnd
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitor" title="groupBitOr" class="md-nav__link">
    groupBitOr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitxor" title="groupBitXor" class="md-nav__link">
    groupBitXor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitmap" title="groupBitmap" class="md-nav__link">
    groupBitmap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-min" title="min(x)" class="md-nav__link">
    min(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-max" title="max(x)" class="md-nav__link">
    max(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMin" title="argMin(arg, val)" class="md-nav__link">
    argMin(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMax" title="argMax(arg, val)" class="md-nav__link">
    argMax(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-sum" title="sum(x)" class="md-nav__link">
    sum(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-sumWithOverflow" title="sumWithOverflow(x)" class="md-nav__link">
    sumWithOverflow(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summap-key-value" title="sumMap(key, value)" class="md-nav__link">
    sumMap(key, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewpop" title="skewPop" class="md-nav__link">
    skewPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewsamp" title="skewSamp" class="md-nav__link">
    skewSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtpop" title="kurtPop" class="md-nav__link">
    kurtPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtsamp" title="kurtSamp" class="md-nav__link">
    kurtSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupsum" title="timeSeriesGroupSum(uid, timestamp, value)" class="md-nav__link">
    timeSeriesGroupSum(uid, timestamp, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupratesum" title="timeSeriesGroupRateSum(uid, ts, val)" class="md-nav__link">
    timeSeriesGroupRateSum(uid, ts, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-avg" title="avg(x)" class="md-nav__link">
    avg(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniq" title="uniq" class="md-nav__link">
    uniq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqcombined" title="uniqCombined" class="md-nav__link">
    uniqCombined
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqcombined64" title="uniqCombined64" class="md-nav__link">
    uniqCombined64
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqhll12" title="uniqHLL12" class="md-nav__link">
    uniqHLL12
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqexact" title="uniqExact" class="md-nav__link">
    uniqExact
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparray" title="groupArray(x), groupArray(max_size)(x)" class="md-nav__link">
    groupArray(x), groupArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grouparrayinsertat-x" title="groupArrayInsertAt(x)" class="md-nav__link">
    groupArrayInsertAt(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingsum" title="groupArrayMovingSum" class="md-nav__link">
    groupArrayMovingSum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingavg" title="groupArrayMovingAvg" class="md-nav__link">
    groupArrayMovingAvg
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupuniqarray-x-groupuniqarray-max-size-x" title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="md-nav__link">
    groupUniqArray(x), groupUniqArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantile" title="quantile(level)(x)" class="md-nav__link">
    quantile(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiledeterministic-level-x-determinator" title="quantileDeterministic(level)(x, determinator)" class="md-nav__link">
    quantileDeterministic(level)(x, determinator)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantiletiming" title="quantileTiming" class="md-nav__link">
    quantileTiming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletimingweighted-level-x-weight" title="quantileTimingWeighted(level)(x, weight)" class="md-nav__link">
    quantileTimingWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexact-level-x" title="quantileExact(level)(x)" class="md-nav__link">
    quantileExact(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexactweighted-level-x-weight" title="quantileExactWeighted(level)(x, weight)" class="md-nav__link">
    quantileExactWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletdigest-level-x" title="quantileTDigest(level)(x)" class="md-nav__link">
    quantileTDigest(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#median-x" title="median(x)" class="md-nav__link">
    median(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiles-level1-level2-x" title="quantiles(level1, level2, ...)(x)" class="md-nav__link">
    quantiles(level1, level2, ...)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varsamp-x" title="varSamp(x)" class="md-nav__link">
    varSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varpop-x" title="varPop(x)" class="md-nav__link">
    varPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevsamp-x" title="stddevSamp(x)" class="md-nav__link">
    stddevSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevpop-x" title="stddevPop(x)" class="md-nav__link">
    stddevPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topk-n-column" title="topK(N)(column)" class="md-nav__link">
    topK(N)(column)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topkweighted" title="topKWeighted" class="md-nav__link">
    topKWeighted
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarsamp-x-y" title="covarSamp(x, y)" class="md-nav__link">
    covarSamp(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarpop-x-y" title="covarPop(x, y)" class="md-nav__link">
    covarPop(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corr-x-y" title="corr(x, y)" class="md-nav__link">
    corr(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplelinearregression" title="simpleLinearRegression" class="md-nav__link">
    simpleLinearRegression
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression" title="stochasticLinearRegression" class="md-nav__link">
    stochasticLinearRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-parameters" title="Параметры" class="md-nav__link">
    Параметры
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-usage" title="Использование" class="md-nav__link">
    Использование
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-notes" title="Примечания" class="md-nav__link">
    Примечания
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression" title="stochasticLogisticRegression" class="md-nav__link">
    stochasticLogisticRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression-parameters" title="Параметры" class="md-nav__link">
    Параметры
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/combinators/" title="Комбинаторы агрегатных функций" class="md-nav__link">
      Комбинаторы агрегатных функций
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/agg_functions/parametric_functions/" title="Параметрические агрегатные функции" class="md-nav__link">
      Параметрические агрегатные функции
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6" type="checkbox" id="nav-6-6">
    
    <label class="md-nav__link" for="nav-6-6">
      Табличные функции
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-6">
        Табличные функции
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/file/" title="file" class="md-nav__link">
      file
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/merge/" title="merge" class="md-nav__link">
      merge
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/numbers/" title="numbers" class="md-nav__link">
      numbers
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/remote/" title="remote" class="md-nav__link">
      remote
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/url/" title="url" class="md-nav__link">
      url
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/mysql/" title="mysql" class="md-nav__link">
      mysql
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/jdbc/" title="jdbc" class="md-nav__link">
      jdbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/odbc/" title="odbc" class="md-nav__link">
      odbc
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/hdfs/" title="hdfs" class="md-nav__link">
      hdfs
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/table_functions/input/" title="input" class="md-nav__link">
      input
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7">
    
    <label class="md-nav__link" for="nav-6-7">
      Словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        Словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7-2" type="checkbox" id="nav-6-7-2">
    
    <label class="md-nav__link" for="nav-6-7-2">
      Внешние словари
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-2">
        Внешние словари
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts/" title="Общее описание" class="md-nav__link">
      Общее описание
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict/" title="Настройка внешнего словаря" class="md-nav__link">
      Настройка внешнего словаря
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_layout/" title="Хранение словарей в памяти" class="md-nav__link">
      Хранение словарей в памяти
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_lifetime/" title="Обновление словарей" class="md-nav__link">
      Обновление словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_sources/" title="Источники внешних словарей" class="md-nav__link">
      Источники внешних словарей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_structure/" title="Ключ и поля словаря" class="md-nav__link">
      Ключ и поля словаря
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/external_dicts_dict_hierarchical/" title="Иерархические словари" class="md-nav__link">
      Иерархические словари
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/dicts/internal_dicts/" title="Встроенные словари" class="md-nav__link">
      Встроенные словари
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../query_language/operators/" title="Операторы" class="md-nav__link">
      Операторы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9" type="checkbox" id="nav-6-9">
    
    <label class="md-nav__link" for="nav-6-9">
      Типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-9">
        Типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/int_uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="md-nav__link">
      UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/float/" title="Float32, Float64" class="md-nav__link">
      Float32, Float64
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/decimal/" title="Decimal" class="md-nav__link">
      Decimal
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/boolean/" title="Булевы значения" class="md-nav__link">
      Булевы значения
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/fixedstring/" title="FixedString(N)" class="md-nav__link">
      FixedString(N)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/uuid/" title="UUID" class="md-nav__link">
      UUID
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/datetime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/array/" title="Array(T)" class="md-nav__link">
      Array(T)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/aggregatefunction/" title="AggregateFunction(name, types_of_arguments...)" class="md-nav__link">
      AggregateFunction(name, types_of_arguments...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/tuple/" title="Tuple(T1, T2, ...)" class="md-nav__link">
      Tuple(T1, T2, ...)
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nullable/" title="Nullable" class="md-nav__link">
      Nullable
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9-16" type="checkbox" id="nav-6-9-16">
    
    <label class="md-nav__link" for="nav-6-9-16">
      Вложенные структуры данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-9-16">
        Вложенные структуры данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/nested_data_structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="md-nav__link">
      Nested(Name1 Type1, Name2 Type2, ...)
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9-17" type="checkbox" id="nav-6-9-17">
    
    <label class="md-nav__link" for="nav-6-9-17">
      Служебные типы данных
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-9-17">
        Служебные типы данных
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/expression/" title="Expression" class="md-nav__link">
      Expression
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/nothing/" title="Nothing" class="md-nav__link">
      Nothing
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/special_data_types/interval/" title="Interval" class="md-nav__link">
      Interval
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-9-18" type="checkbox" id="nav-6-9-18">
    
    <label class="md-nav__link" for="nav-6-9-18">
      Domains
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-9-18">
        Domains
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/ipv4/" title="IPv4" class="md-nav__link">
      IPv4
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../data_types/domains/ipv6/" title="IPv6" class="md-nav__link">
      IPv6
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Руководства
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Руководства
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../guides/" title="Обзор" class="md-nav__link">
      Обзор
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../guides/apply_catboost_model/" title="Применение CatBoost моделей" class="md-nav__link">
      Применение CatBoost моделей
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Эксплуатация
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Эксплуатация
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/requirements/" title="Требования" class="md-nav__link">
      Требования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/monitoring/" title="Мониторинг" class="md-nav__link">
      Мониторинг
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/troubleshooting/" title="Устранение неисправностей" class="md-nav__link">
      Устранение неисправностей
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/tips/" title="Советы по эксплуатации" class="md-nav__link">
      Советы по эксплуатации
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/update/" title="Обновление ClickHouse" class="md-nav__link">
      Обновление ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/access_rights/" title="Права доступа" class="md-nav__link">
      Права доступа
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/backup/" title="Резервное копирование" class="md-nav__link">
      Резервное копирование
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/configuration_files/" title="Конфигурационные файлы" class="md-nav__link">
      Конфигурационные файлы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/quotas/" title="Квоты" class="md-nav__link">
      Квоты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/system_tables/" title="Системные таблицы" class="md-nav__link">
      Системные таблицы
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-12" type="checkbox" id="nav-8-12">
    
    <label class="md-nav__link" for="nav-8-12">
      Оптимизация производительности
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-12">
        Оптимизация производительности
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/performance/sampling_query_profiler/" title="Профилирование запросов" class="md-nav__link">
      Профилирование запросов
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/performance_test/" title="Тестирование оборудования" class="md-nav__link">
      Тестирование оборудования
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-14" type="checkbox" id="nav-8-14">
    
    <label class="md-nav__link" for="nav-8-14">
      Конфигурационные параметры сервера
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-14">
        Конфигурационные параметры сервера
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/server_settings/settings/" title="Серверные настройки" class="md-nav__link">
      Серверные настройки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-15" type="checkbox" id="nav-8-15">
    
    <label class="md-nav__link" for="nav-8-15">
      Настройки
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-15">
        Настройки
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/permissions_for_queries/" title="Разрешения на выполнение запросов" class="md-nav__link">
      Разрешения на выполнение запросов
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/query_complexity/" title="Ограничения на сложность запроса" class="md-nav__link">
      Ограничения на сложность запроса
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings/" title="Настройки" class="md-nav__link">
      Настройки
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/constraints_on_settings/" title="Ограничения на изменение настроек" class="md-nav__link">
      Ограничения на изменение настроек
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings_profiles/" title="Профили настроек" class="md-nav__link">
      Профили настроек
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/settings/settings_users/" title="Настройки пользователей" class="md-nav__link">
      Настройки пользователей
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
          
          
          



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-16" type="checkbox" id="nav-8-16">
    
    <label class="md-nav__link" for="nav-8-16">
      Утилиты
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-16">
        Утилиты
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/" title="Введение" class="md-nav__link">
      Введение
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-copier/" title="clickhouse-copier" class="md-nav__link">
      clickhouse-copier
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../operations/utils/clickhouse-local/" title="clickhouse-local" class="md-nav__link">
      clickhouse-local
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Разработка
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Разработка
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/developer_instruction/" title="Инструкция для начинающего разработчика ClickHouse" class="md-nav__link">
      Инструкция для начинающего разработчика ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/architecture/" title="Обзор архитектуры ClickHouse" class="md-nav__link">
      Обзор архитектуры ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/browse_code/" title="Навигация по коду ClickHouse" class="md-nav__link">
      Навигация по коду ClickHouse
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build/" title="Как собрать ClickHouse на Linux" class="md-nav__link">
      Как собрать ClickHouse на Linux
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build_osx/" title="Как собрать ClickHouse на Mac OS X" class="md-nav__link">
      Как собрать ClickHouse на Mac OS X
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/build_cross_osx/" title="Как собрать ClickHouse на Linux для Mac OS X" class="md-nav__link">
      Как собрать ClickHouse на Linux для Mac OS X
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/style/" title="Как писать код на C++" class="md-nav__link">
      Как писать код на C++
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/tests/" title="Как запустить тесты" class="md-nav__link">
      Как запустить тесты
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../development/contrib/" title="Сторонние библиотеки" class="md-nav__link">
      Сторонние библиотеки
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Что нового
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Что нового
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../security_changelog/" title="Security changelog" class="md-nav__link">
      Security changelog
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>


        
          
          
          



  <li class="md-nav__item">
    <a href="../../../extended_roadmap/" title="Подробный roadmap 2020" class="md-nav__link">
      Подробный roadmap 2020
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
      
      
      



  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      F.A.Q.
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        F.A.Q.
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../../faq/general/" title="Общие вопросы" class="md-nav__link">
      Общие вопросы
    </a>
  </li>


        
      </ul>
    </nav>
  </li>


    
  </ul>
  

  <ul id="md-extra-nav" class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item md-nav__item--active">
      Релиз:
      <span class="md-selector">
        <select id="releases-selector">
          <option value="">последний</option>
          
            <option value="v20.1"
              
            >v20.1</option>
          
            <option value="v19.17"
              
            >v19.17</option>
          
            <option value="v19.16"
              
            >v19.16</option>
          
            <option value="v19.15"
              
            >v19.15</option>
          
            <option value="v19.14"
              
            >v19.14</option>
          
            <option value="v19.13"
              
            >v19.13</option>
          
            <option value="v19.11"
              
            >v19.11</option>
          
            <option value="v19.10"
              
            >v19.10</option>
          
            <option value="v19.9"
              
            >v19.9</option>
          
            <option value="v19.8"
              
            >v19.8</option>
          
            <option value="v19.7"
              
            >v19.7</option>
          
        </select><span id="releases-selector-after">&nbsp;▾</span>
      </span>
    </li>
    <li class="md-nav__item md-nav__item--active">
        
          <a href="../../../single/" class="md-nav__link md-nav__link--active">Одностраничная версия</a>
        
    </li>
    <li class="md-nav__item md-nav__item--active">
          <a href="../../../single/clickhouse_ru.pdf" class="md-nav__link md-nav__link--active">PDF версия</a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
      <a href="https://github.com/ClickHouse/ClickHouse/" rel="external nofollow" target="_blank" class="md-nav__link">
        Исходный код ClickHouse
      </a>
    </li>
    
    <li class="md-nav__item md-nav__item--active">
        <span id="md-sidebar-flags" class="md-nav__link">
        

  <a class="md-alt-lang"
     href="../../../../en/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="English">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path fill="#00247d" d="M0,0 v30 h60 v-30 z"/><path stroke="#fff" stroke-width="6" d="M0,0 L60,30 M60,0 L0,30"/><path stroke="#cf142b" stroke-width="4" d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)"/><path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/><path stroke="#cf142b" stroke-width="6" d="M30,0 v30 M0,15 h60"/></svg>
  </a>

  <a class="md-alt-lang md-current-lang"
     href="../../../../ru/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Russian">
    <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 9 6"><rect width="9" height="3" fill="#fff"/><rect width="9" height="3" y="3" fill="#d52b1e"/><rect width="9" height="2" y="2" fill="#0039a6"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../zh/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Chinese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 30 20"><defs><path id="s" fill="#ffde00" d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/></defs><rect width="30" height="20" fill="#de2910"/><use transform="translate(5,5) scale(3)" xlink:href="#s"/><use transform="translate(10,2) rotate(23.036243)" xlink:href="#s"/><use transform="translate(12,4) rotate(45.869898)" xlink:href="#s"/><use transform="translate(12,7) rotate(69.945396)" xlink:href="#s"/><use transform="translate(10,9) rotate(20.659808)" xlink:href="#s"/></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../ja/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Japanese">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="90" height="60" version="1.1" viewBox="0 0 90 60"><g id="surface1"><rect width="90" height="60" x="0" y="0" fill="#A0A0A0" fill-opacity="1" stroke="none"/><path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562"/><path fill="#BE0026" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30"/></g></svg>
  </a>

  <a class="md-alt-lang"
     href="../../../../fa/query_language/agg_functions/reference/" class="md-flex__ellipsis md-header-nav__title"
     title="Farsi">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" viewBox="0 0 630 360"><rect width="630" height="360" fill="#da0000"/><rect width="630" height="240" fill="#fff"/><rect width="630" height="120" fill="#239f40"/><g transform="translate(8.4,100.4)"><g id="tb4"><g id="tb1" fill="none" stroke="#fff" stroke-width="2"><path id="tbp1" d="M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9" transform="scale(1.4)"/><path id="tbp2" d="M0,7H9M10,7H19" transform="scale(2.8)"/><use y="120" xlink:href="#tbp2"/><use y="145.2" xlink:href="#tbp1"/></g><g id="tb3"><use x="56" xlink:href="#tb1"/><use x="112" xlink:href="#tb1"/><use x="168" xlink:href="#tb1"/></g></g><use x="168" xlink:href="#tb3"/><use x="392" xlink:href="#tb4"/></g><g fill="#da0000" transform="matrix(45,0,0,45,315,180)"><g id="emblem_half"><path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/><path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/><path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/><path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/></g><use transform="scale(-1,1)" xlink:href="#emblem_half"/></g></svg>
  </a>

        </span>
    </li>
  </ul>
</nav>
                    
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
                      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Содержание</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#agg_function-count" title="count" class="md-nav__link">
    count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-any" title="any(x)" class="md-nav__link">
    any(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-anyHeavy" title="anyHeavy(x)" class="md-nav__link">
    anyHeavy(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-anyLast" title="anyLast(x)" class="md-nav__link">
    anyLast(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitand" title="groupBitAnd" class="md-nav__link">
    groupBitAnd
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitor" title="groupBitOr" class="md-nav__link">
    groupBitOr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitxor" title="groupBitXor" class="md-nav__link">
    groupBitXor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupbitmap" title="groupBitmap" class="md-nav__link">
    groupBitmap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-min" title="min(x)" class="md-nav__link">
    min(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-max" title="max(x)" class="md-nav__link">
    max(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMin" title="argMin(arg, val)" class="md-nav__link">
    argMin(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-argMax" title="argMax(arg, val)" class="md-nav__link">
    argMax(arg, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-sum" title="sum(x)" class="md-nav__link">
    sum(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-sumWithOverflow" title="sumWithOverflow(x)" class="md-nav__link">
    sumWithOverflow(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summap-key-value" title="sumMap(key, value)" class="md-nav__link">
    sumMap(key, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewpop" title="skewPop" class="md-nav__link">
    skewPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skewsamp" title="skewSamp" class="md-nav__link">
    skewSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtpop" title="kurtPop" class="md-nav__link">
    kurtPop
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kurtsamp" title="kurtSamp" class="md-nav__link">
    kurtSamp
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupsum" title="timeSeriesGroupSum(uid, timestamp, value)" class="md-nav__link">
    timeSeriesGroupSum(uid, timestamp, value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-timeseriesgroupratesum" title="timeSeriesGroupRateSum(uid, ts, val)" class="md-nav__link">
    timeSeriesGroupRateSum(uid, ts, val)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-avg" title="avg(x)" class="md-nav__link">
    avg(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniq" title="uniq" class="md-nav__link">
    uniq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqcombined" title="uniqCombined" class="md-nav__link">
    uniqCombined
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqcombined64" title="uniqCombined64" class="md-nav__link">
    uniqCombined64
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqhll12" title="uniqHLL12" class="md-nav__link">
    uniqHLL12
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-uniqexact" title="uniqExact" class="md-nav__link">
    uniqExact
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparray" title="groupArray(x), groupArray(max_size)(x)" class="md-nav__link">
    groupArray(x), groupArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grouparrayinsertat-x" title="groupArrayInsertAt(x)" class="md-nav__link">
    groupArrayInsertAt(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingsum" title="groupArrayMovingSum" class="md-nav__link">
    groupArrayMovingSum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-grouparraymovingavg" title="groupArrayMovingAvg" class="md-nav__link">
    groupArrayMovingAvg
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupuniqarray-x-groupuniqarray-max-size-x" title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="md-nav__link">
    groupUniqArray(x), groupUniqArray(max_size)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantile" title="quantile(level)(x)" class="md-nav__link">
    quantile(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiledeterministic-level-x-determinator" title="quantileDeterministic(level)(x, determinator)" class="md-nav__link">
    quantileDeterministic(level)(x, determinator)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_function-quantiletiming" title="quantileTiming" class="md-nav__link">
    quantileTiming
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletimingweighted-level-x-weight" title="quantileTimingWeighted(level)(x, weight)" class="md-nav__link">
    quantileTimingWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexact-level-x" title="quantileExact(level)(x)" class="md-nav__link">
    quantileExact(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantileexactweighted-level-x-weight" title="quantileExactWeighted(level)(x, weight)" class="md-nav__link">
    quantileExactWeighted(level)(x, weight)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiletdigest-level-x" title="quantileTDigest(level)(x)" class="md-nav__link">
    quantileTDigest(level)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#median-x" title="median(x)" class="md-nav__link">
    median(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantiles-level1-level2-x" title="quantiles(level1, level2, ...)(x)" class="md-nav__link">
    quantiles(level1, level2, ...)(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varsamp-x" title="varSamp(x)" class="md-nav__link">
    varSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varpop-x" title="varPop(x)" class="md-nav__link">
    varPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevsamp-x" title="stddevSamp(x)" class="md-nav__link">
    stddevSamp(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stddevpop-x" title="stddevPop(x)" class="md-nav__link">
    stddevPop(x)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topk-n-column" title="topK(N)(column)" class="md-nav__link">
    topK(N)(column)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topkweighted" title="topKWeighted" class="md-nav__link">
    topKWeighted
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarsamp-x-y" title="covarSamp(x, y)" class="md-nav__link">
    covarSamp(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#covarpop-x-y" title="covarPop(x, y)" class="md-nav__link">
    covarPop(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corr-x-y" title="corr(x, y)" class="md-nav__link">
    corr(x, y)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplelinearregression" title="simpleLinearRegression" class="md-nav__link">
    simpleLinearRegression
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression" title="stochasticLinearRegression" class="md-nav__link">
    stochasticLinearRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-parameters" title="Параметры" class="md-nav__link">
    Параметры
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-usage" title="Использование" class="md-nav__link">
    Использование
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlinearregression-notes" title="Примечания" class="md-nav__link">
    Примечания
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression" title="stochasticLogisticRegression" class="md-nav__link">
    stochasticLogisticRegression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agg_functions-stochasticlogisticregression-parameters" title="Параметры" class="md-nav__link">
    Параметры
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                    
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                    <a href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/query_language/agg_functions/reference.md" title="Редактировать страницу" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a>
                  
                
                
                <div id="content">
                
                  <h1 id="spravochnik-funktsii">Справочник функций<a class="headerlink" href="#spravochnik-funktsii" title="Permanent link">&para;</a></h1>
<h2 id="agg_function-count">count<a class="headerlink" href="#agg_function-count" title="Permanent link">&para;</a></h2>
<p>Вычисляет количество строк или не NULL значений .</p>
<p>ClickHouse поддерживает следующие виды синтаксиса для <code>count</code>:</p>
<ul>
<li><code>count(expr)</code> или <code>COUNT(DISTINCT expr)</code>.</li>
<li><code>count()</code> или <code>COUNT(*)</code>. Синтаксис <code>count()</code> специфичен для ClickHouse.</li>
</ul>
<p><strong>Параметры</strong></p>
<p>Функция может принимать:</p>
<ul>
<li>Ноль параметров.</li>
<li>Одно <a href="../../syntax/#syntax-expressions">выражение</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Если функция вызывается без параметров, она вычисляет количество строк.</li>
<li>Если передаётся <a href="../../syntax/#syntax-expressions">выражение</a> , то функция вычисляет количество раз, когда выражение возвращает не NULL. Если выражение возвращает значение типа <a href="../../../data_types/nullable/">Nullable</a>, то результат <code>count</code> не становится <code>Nullable</code>. Функция возвращает 0, если выражение возвращает <code>NULL</code> для всех строк.</li>
</ul>
<p>В обоих случаях тип возвращаемого значения <a href="../../../data_types/int_uint/">UInt64</a>.</p>
<p><strong>Подробности</strong></p>
<p>ClickHouse поддерживает синтаксис <code>COUNT(DISTINCT ...)</code>. Поведение этой конструкции зависит от настройки <a href="../../../operations/settings/settings/#settings-count_distinct_implementation">count_distinct_implementation</a>. Она определяет, какая из функций <a href="#agg_function-uniq">uniq*</a> используется для выполнения операции. По умолчанию — функция <a href="#agg_function-uniqexact">uniqExact</a>.</p>
<p>Запрос <code>SELECT count() FROM table</code> не оптимизирован, поскольку количество записей в таблице не хранится отдельно. Он выбирает небольшой столбец из таблицы и подсчитывает количество значений в нём.</p>
<p><strong>Примеры</strong></p>
<p>Пример 1:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">()</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─count()─┐
│       5 │
└─────────┘
</pre></div>


<p>Пример 2:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">settings</span> <span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;count_distinct_implementation&#39;</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─name──────────────────────────┬─value─────┐
│ count_distinct_implementation │ uniqExact │
└───────────────────────────────┴───────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─uniqExact(num)─┐
│              3 │
└────────────────┘
</pre></div>


<p>Этот пример показывает, что <code>count(DISTINCT num)</code> выполняется с помощью функции <code>uniqExact</code> в соответствии со значением настройки <code>count_distinct_implementation</code>.</p>
<h2 id="agg_function-any">any(x)<a class="headerlink" href="#agg_function-any" title="Permanent link">&para;</a></h2>
<p>Выбирает первое попавшееся значение.
Порядок выполнения запроса может быть произвольным и даже каждый раз разным, поэтому результат данной функции недетерминирован.
Для получения детерминированного результата, можно использовать функции min или max вместо any.</p>
<p>В некоторых случаях, вы всё-таки можете рассчитывать на порядок выполнения запроса. Это - случаи, когда SELECT идёт из подзапроса, в котором используется ORDER BY.</p>
<p>При наличии в запросе <code>SELECT</code> секции <code>GROUP BY</code> или хотя бы одной агрегатной функции, ClickHouse (в отличие от, например, MySQL) требует, чтобы все выражения в секциях <code>SELECT</code>, <code>HAVING</code>, <code>ORDER BY</code> вычислялись из ключей или из агрегатных функций. То есть, каждый выбираемый из таблицы столбец, должен использоваться либо в ключах, либо внутри агрегатных функций. Чтобы получить поведение, как в MySQL, вы можете поместить остальные столбцы в агрегатную функцию <code>any</code>.</p>
<h2 id="agg_function-anyHeavy">anyHeavy(x)<a class="headerlink" href="#agg_function-anyHeavy" title="Permanent link">&para;</a></h2>
<p>Выбирает часто встречающееся значение с помощью алгоритма "<a href="http://www.cs.umd.edu/~samir/498/karp.pdf" rel="external nofollow">heavy hitters</a>". Если существует значение, которое встречается чаще, чем в половине случаев, в каждом потоке выполнения запроса, то возвращается данное значение. В общем случае, результат недетерминирован.</p>
<div class="codehilite"><pre><span></span><span class="n">anyHeavy</span><span class="p">(</span><span class="k">column</span><span class="p">)</span>
</pre></div>


<p><strong>Аргументы</strong></p>
<ul>
<li><code>column</code> — имя столбца.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Возьмём набор данных <a href="../../../getting_started/example_datasets/ontime/">OnTime</a> и выберем произвольное часто встречающееся значение в столбце <code>AirlineID</code>.</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">anyHeavy</span><span class="p">(</span><span class="n">AirlineID</span><span class="p">)</span> <span class="k">AS</span> <span class="n">res</span>
<span class="k">FROM</span> <span class="n">ontime</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌───res─┐
│ 19690 │
└───────┘
</pre></div>


<h2 id="agg_function-anyLast">anyLast(x)<a class="headerlink" href="#agg_function-anyLast" title="Permanent link">&para;</a></h2>
<p>Выбирает последнее попавшееся значение.
Результат так же недетерминирован, как и для функции <code>any</code>.</p>
<h2 id="groupbitand">groupBitAnd<a class="headerlink" href="#groupbitand" title="Permanent link">&para;</a></h2>
<p>Применяет побитовое <code>И</code> для последовательности чисел.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitAnd</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> – выражение, результат которого имеет тип данных <code>UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code>UInt*</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</pre></div>


<p>Запрос:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitAnd</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Где <code>num</code> — столбец с тестовыми данными.</p>
<p>Результат:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00000100 = 4
</pre></div>


<h2 id="groupbitor">groupBitOr<a class="headerlink" href="#groupbitor" title="Permanent link">&para;</a></h2>
<p>Применяет побитовое <code>ИЛИ</code> для последовательности чисел.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitOr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> – выражение, результат которого имеет тип данных <code>UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code>UInt*</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</pre></div>


<p>Запрос:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitOr</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Где <code>num</code> — столбец с тестовыми данными.</p>
<p>Результат:</p>
<div class="codehilite"><pre><span></span>binary     decimal
01111101 = 125
</pre></div>


<h2 id="groupbitxor">groupBitXor<a class="headerlink" href="#groupbitxor" title="Permanent link">&para;</a></h2>
<p>Применяет побитовое <code>ИСКЛЮЧАЮЩЕЕ ИЛИ</code> для последовательности чисел.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitXor</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> – выражение, результат которого имеет тип данных <code>UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code>UInt*</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</pre></div>


<p>Запрос:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitXor</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Где <code>num</code> — столбец с тестовыми данными.</p>
<p>Результат:</p>
<div class="codehilite"><pre><span></span>binary     decimal
01101000 = 104
</pre></div>


<h2 id="groupbitmap">groupBitmap<a class="headerlink" href="#groupbitmap" title="Permanent link">&para;</a></h2>
<p>Bitmap или агрегатные вычисления для столбца с типом данных <code>UInt*</code>, возвращают кардинальность в виде значения типа UInt64, если добавить суффикс -State, то возвращают <a href="../../functions/bitmap_functions/">объект bitmap</a>.</p>
<div class="codehilite"><pre><span></span><span class="n">groupBitmap</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> – выражение, результат которого имеет тип данных <code>UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code>UInt64</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span>UserID
1
1
2
3
</pre></div>


<p>Запрос:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">groupBitmap</span><span class="p">(</span><span class="n">UserID</span><span class="p">)</span> <span class="k">as</span> <span class="n">num</span> <span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<p>Результат:</p>
<div class="codehilite"><pre><span></span>num
3
</pre></div>


<h2 id="agg_function-min">min(x)<a class="headerlink" href="#agg_function-min" title="Permanent link">&para;</a></h2>
<p>Вычисляет минимум.</p>
<h2 id="agg_function-max">max(x)<a class="headerlink" href="#agg_function-max" title="Permanent link">&para;</a></h2>
<p>Вычисляет максимум.</p>
<h2 id="agg_function-argMin">argMin(arg, val)<a class="headerlink" href="#agg_function-argMin" title="Permanent link">&para;</a></h2>
<p>Вычисляет значение arg при минимальном значении val. Если есть несколько разных значений arg для минимальных значений val, то выдаётся первое попавшееся из таких значений.</p>
<p><strong>Пример:</strong></p>
<div class="codehilite"><pre><span></span>┌─user─────┬─salary─┐
│ director │   5000 │
│ manager  │   3000 │
│ worker   │   1000 │
└──────────┴────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">argMin</span><span class="p">(</span><span class="k">user</span><span class="p">,</span> <span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">salary</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─argMin(user, salary)─┐
│ worker               │
└──────────────────────┘
</pre></div>


<h2 id="agg_function-argMax">argMax(arg, val)<a class="headerlink" href="#agg_function-argMax" title="Permanent link">&para;</a></h2>
<p>Вычисляет значение arg при максимальном значении val. Если есть несколько разных значений arg для максимальных значений val, то выдаётся первое попавшееся из таких значений.</p>
<h2 id="agg_function-sum">sum(x)<a class="headerlink" href="#agg_function-sum" title="Permanent link">&para;</a></h2>
<p>Вычисляет сумму.
Работает только для чисел.</p>
<h2 id="agg_function-sumWithOverflow">sumWithOverflow(x)<a class="headerlink" href="#agg_function-sumWithOverflow" title="Permanent link">&para;</a></h2>
<p>Вычисляет сумму чисел, используя для результата тот же тип данных, что и для входных параметров. Если сумма выйдет за максимальное значение для заданного типа данных, то функция вернёт ошибку.</p>
<p>Работает только для чисел.</p>
<h2 id="summap-key-value">sumMap(key, value)<a class="headerlink" href="#summap-key-value" title="Permanent link">&para;</a></h2>
<p>Производит суммирование массива 'value' по соответствующим ключам заданным в массиве 'key'.
Количество элементов в 'key' и 'value' должно быть одинаковым для каждой строки, для которой происходит суммирование.
Возвращает кортеж из двух массивов - ключи в отсортированном порядке и значения, просуммированные по соответствующим ключам.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">sum_map</span><span class="p">(</span>
    <span class="nb">date</span> <span class="nb">Date</span><span class="p">,</span>
    <span class="n">timeslot</span> <span class="n">DateTime</span><span class="p">,</span>
    <span class="n">statusMap</span> <span class="n">Nested</span><span class="p">(</span>
        <span class="n">status</span> <span class="n">UInt16</span><span class="p">,</span>
        <span class="n">requests</span> <span class="n">UInt64</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Log</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">sum_map</span> <span class="k">VALUES</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:00:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:00:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:01:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-01-01 00:01:00&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]);</span>
<span class="k">SELECT</span>
    <span class="n">timeslot</span><span class="p">,</span>
    <span class="n">sumMap</span><span class="p">(</span><span class="n">statusMap</span><span class="p">.</span><span class="n">status</span><span class="p">,</span> <span class="n">statusMap</span><span class="p">.</span><span class="n">requests</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">sum_map</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">timeslot</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┐
│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │
│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │
└─────────────────────┴──────────────────────────────────────────────┘
</pre></div>


<h2 id="skewpop">skewPop<a class="headerlink" href="#skewpop" title="Permanent link">&para;</a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Коэффициент_асимметрии" rel="external nofollow">коэффициент асимметрии</a> для последовательности.</p>
<div class="codehilite"><pre><span></span><span class="n">skewPop</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент асимметрии заданного распределения. Тип — <a href="../../../data_types/float/">Float64</a></p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">skewPop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="skewsamp">skewSamp<a class="headerlink" href="#skewsamp" title="Permanent link">&para;</a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Статистика_(функция_выборки)" rel="external nofollow">выборочный коэффициент асимметрии</a>  для последовательности.</p>
<p>Он представляет собой несмещенную оценку асимметрии случайной величины, если переданные значения образуют ее выборку.</p>
<div class="codehilite"><pre><span></span><span class="n">skewSamp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент асимметрии заданного распределения. Тип — <a href="../../../data_types/float/">Float64</a>. Если <code>n &lt;= 1</code> (<code>n</code> — размер выборки), тогда функция возвращает <code>nan</code>.</p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">skewSamp</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="kurtpop">kurtPop<a class="headerlink" href="#kurtpop" title="Permanent link">&para;</a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Коэффициент_эксцесса" rel="external nofollow">коэффициент эксцесса</a> последовательности.</p>
<div class="codehilite"><pre><span></span><span class="n">kurtPop</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент эксцесса заданного распределения. Тип — <a href="../../../data_types/float/">Float64</a></p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">kurtPop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="kurtsamp">kurtSamp<a class="headerlink" href="#kurtsamp" title="Permanent link">&para;</a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Статистика_(функция_выборки)" rel="external nofollow">выборочный коэффициент эксцесса</a> для последовательности.</p>
<p>Он представляет собой несмещенную оценку эксцесса случайной величины, если переданные значения образуют ее выборку.</p>
<div class="codehilite"><pre><span></span><span class="n">kurtSamp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент эксцесса заданного распределения. Тип — <a href="../../../data_types/float/">Float64</a>. Если <code>n &lt;= 1</code> (<code>n</code> — размер выборки), тогда функция возвращает <code>nan</code>.</p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">kurtSamp</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</pre></div>


<h2 id="agg_function-timeseriesgroupsum">timeSeriesGroupSum(uid, timestamp, value)<a class="headerlink" href="#agg_function-timeseriesgroupsum" title="Permanent link">&para;</a></h2>
<p><code>timeSeriesGroupSum</code> агрегирует временные ряды в которых не совпадают моменты.
Функция использует линейную интерполяцию между двумя значениями времени, а затем суммирует значения для одного и того же момента (как измеренные так и интерполированные) по всем рядам.</p>
<ul>
<li><code>uid</code> уникальный идентификатор временного ряда, <code>UInt64</code>.</li>
<li><code>timestamp</code> имеет тип <code>Int64</code> чтобы можно было учитывать милли и микросекунды.</li>
<li><code>value</code> представляет собой значение метрики.</li>
</ul>
<p>Функция возвращает массив кортежей с парами <code>(timestamp, aggregated_value)</code>.</p>
<p>Временные ряды должны быть отсортированы по возрастанию <code>timestamp</code>.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span>┌─uid─┬─timestamp─┬─value─┐
│ 1   │     2     │   0.2 │
│ 1   │     7     │   0.7 │
│ 1   │    12     │   1.2 │
│ 1   │    17     │   1.7 │
│ 1   │    25     │   2.5 │
│ 2   │     3     │   0.6 │
│ 2   │     8     │   1.6 │
│ 2   │    12     │   2.4 │
│ 2   │    18     │   3.6 │
│ 2   │    24     │   4.8 │
└─────┴───────────┴───────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">time_series</span><span class="p">(</span>
    <span class="n">uid</span>       <span class="n">UInt64</span><span class="p">,</span>
    <span class="k">timestamp</span> <span class="n">Int64</span><span class="p">,</span>
    <span class="n">value</span>     <span class="n">Float64</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">time_series</span> <span class="k">VALUES</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">7</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">4</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">3</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="n">timeSeriesGroupSum</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="k">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">time_series</span> <span class="k">order</span> <span class="k">by</span> <span class="k">timestamp</span> <span class="k">ASC</span>
<span class="p">);</span>
</pre></div>


<p>И результат будет:</p>
<div class="codehilite"><pre><span></span>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]
</pre></div>


<h2 id="agg_function-timeseriesgroupratesum">timeSeriesGroupRateSum(uid, ts, val)<a class="headerlink" href="#agg_function-timeseriesgroupratesum" title="Permanent link">&para;</a></h2>
<p>Аналогично timeSeriesGroupRateSum, timeSeriesGroupRateSum будет вычислять производные по timestamp для рядов, а затем суммировать полученные производные для всех рядов для одного значения timestamp.
Также ряды должны быть отсортированы по возрастанию timestamp.</p>
<p>Для пример из описания timeSeriesGroupRateSum результат будет следующим:</p>
<div class="codehilite"><pre><span></span>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]
</pre></div>


<h2 id="agg_function-avg">avg(x)<a class="headerlink" href="#agg_function-avg" title="Permanent link">&para;</a></h2>
<p>Вычисляет среднее.
Работает только для чисел.
Результат всегда Float64.</p>
<h2 id="agg_function-uniq">uniq<a class="headerlink" href="#agg_function-uniq" title="Permanent link">&para;</a></h2>
<p>Приближённо вычисляет количество различных значений аргумента.</p>
<div class="codehilite"><pre><span></span><span class="n">uniq</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Значение с типом данных <a href="../../../data_types/int_uint/">UInt64</a>.</li>
</ul>
<p><strong>Детали реализации</strong></p>
<p>Функция:</p>
<ul>
<li>
<p>Вычисляет хэш для всех параметров агрегации, а затем использует его в вычислениях.</p>
</li>
<li>
<p>Использует адаптивный алгоритм выборки. В качестве состояния вычисления функция использует выборку хэш-значений элементов  размером до 65536.</p>
<p>Этот алгоритм очень точен и очень эффективен по использованию CPU. Если запрос содержит небольшое количество этих функций, использование <code>uniq</code> почти так же эффективно,  как и использование других агрегатных функций.</p>
</li>
<li>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
</li>
</ul>
<p>Эту функцию рекомендуется использовать практически во всех сценариях.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqcombined64">uniqCombined64</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqcombined">uniqCombined<a class="headerlink" href="#agg_function-uniqcombined" title="Permanent link">&para;</a></h2>
<p>Приближённо вычисляет количество различных значений аргумента.</p>
<div class="codehilite"><pre><span></span><span class="n">uniqCombined</span><span class="p">(</span><span class="n">HLL_precision</span><span class="p">)(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p>Функция <code>uniqCombined</code> — это хороший выбор для вычисления количества различных значений.</p>
<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>.</p>
<p><code>HLL_precision</code> — это логарифм по основанию 2 от числа ячеек в <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="external nofollow">HyperLogLog</a>. Необязательный, можно использовать функцию как <code>uniqCombined (x [,...])</code>. Для <code>HLL_precision</code>  значение по умолчанию  — 17, что фактически составляет 96 КБ пространства (2^17 ячеек, 6 бит каждая).</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Число типа <a href="../../../data_types/int_uint/">UInt64</a>.</li>
</ul>
<p><strong>Детали реализации</strong></p>
<p>Функция:</p>
<ul>
<li>
<p>Вычисляет хэш (64-битный для <code>String</code> и 32-битный для всех остальных типов) для всех параметров агрегации, а затем использует его в вычислениях.</p>
</li>
<li>
<p>Используется комбинация трёх алгоритмов: массив, хэш-таблица и HyperLogLog с таблицей коррекции погрешности.</p>
<p>Для небольшого количества различных значений используется массив. Если размер набора больше, используется хэш-таблица. При дальнейшем увеличении количества значений, используется структура HyperLogLog, имеющая фиксированный размер в памяти.</p>
</li>
<li>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Так как используется 32-битный хэш для не-<code>String</code> типов, результат будет иметь очень очень большую ошибку для количества разичных элементов существенно больше <code>UINT_MAX</code> (ошибка быстро растёт начиная с нескольких десятков миллиардов различных значений), таким образом в этом случае нужно использовать <a href="#agg_function-uniqcombined64">uniqCombined64</a></p>
</div>
<p>По сравнению с функцией <a href="#agg_function-uniq">uniq</a>, <code>uniqCombined</code>:</p>
<ul>
<li>Потребляет в несколько раз меньше памяти.</li>
<li>Вычисляет с в несколько раз более высокой точностью.</li>
<li>Обычно имеет немного более низкую производительность. В некоторых сценариях <code>uniqCombined</code> может показывать более высокую производительность, чем  <code>uniq</code>, например, в случае распределенных запросов, при которых по сети передаётся большое количество состояний агрегации.</li>
</ul>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined64">uniqCombined64</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqcombined64">uniqCombined64<a class="headerlink" href="#agg_function-uniqcombined64" title="Permanent link">&para;</a></h2>
<p>Использует 64-битный хэш для всех типов, в отличие от <a href="#agg_function-uniqcombined">uniqCombined</a>.</p>
<h2 id="agg_function-uniqhll12">uniqHLL12<a class="headerlink" href="#agg_function-uniqhll12" title="Permanent link">&para;</a></h2>
<p>Вычисляет приблизительное число различных значений аргументов, используя алгоритм <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="external nofollow">HyperLogLog</a>.</p>
<div class="codehilite"><pre><span></span><span class="n">uniqHLL12</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Значение хэша с типом данных <a href="../../../data_types/int_uint/">UInt64</a>.</li>
</ul>
<p><strong>Детали реализации</strong></p>
<p>Функция:</p>
<ul>
<li>
<p>Вычисляет хэш для всех параметров агрегации, а затем использует его в вычислениях.</p>
</li>
<li>
<p>Использует алгоритм HyperLogLog для аппроксимации числа различных значений аргументов.</p>
<p>Используется 212 5-битовых ячеек. Размер состояния чуть больше 2.5 КБ. Результат не точный (ошибка до ~10%) для небольших множеств (&lt;10K элементов). Однако для множеств большой кардинальности (10K - 100M) результат довольно точен (ошибка до ~1.6%). Начиная с 100M ошибка оценки будет только расти и для множеств огромной кардинальности (1B+ элементов) функция возвращает результат с очень большой неточностью.</p>
</li>
<li>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
</li>
</ul>
<p>Мы не рекомендуем использовать эту функцию. В большинстве случаев используйте функцию <a href="#agg_function-uniq">uniq</a> или <a href="#agg_function-uniqcombined">uniqCombined</a>.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqexact">uniqExact<a class="headerlink" href="#agg_function-uniqexact" title="Permanent link">&para;</a></h2>
<p>Вычисляет точное количество различных значений аргументов.</p>
<div class="codehilite"><pre><span></span><span class="n">uniqExact</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</pre></div>


<p>Функцию <code>uniqExact</code> следует использовать, если вам обязательно нужен точный результат. В противном случае используйте функцию <a href="#agg_function-uniq">uniq</a>.</p>
<p>Функция <code>uniqExact</code> расходует больше оперативной памяти, чем функция <code>uniq</code>, так как размер состояния неограниченно растёт по мере роста количества различных значений.</p>
<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code>Tuple</code>, <code>Array</code>, <code>Date</code>, <code>DateTime</code>, <code>String</code>.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
</ul>
<h2 id="agg_function-grouparray">groupArray(x), groupArray(max_size)(x)<a class="headerlink" href="#agg_function-grouparray" title="Permanent link">&para;</a></h2>
<p>Составляет массив из значений аргумента.
Значения в массив могут быть добавлены в любом (недетерминированном) порядке.</p>
<p>Вторая версия (с параметром <code>max_size</code>) ограничивает размер результирующего массива <code>max_size</code> элементами.
Например, <code>groupArray(1)(x)</code> эквивалентно <code>[any(x)]</code>.</p>
<p>В некоторых случаях, вы всё же можете рассчитывать на порядок выполнения запроса. Это — случаи, когда <code>SELECT</code> идёт из подзапроса, в котором используется <code>ORDER BY</code>.</p>
<h2 id="grouparrayinsertat-x">groupArrayInsertAt(x)<a class="headerlink" href="#grouparrayinsertat-x" title="Permanent link">&para;</a></h2>
<p>Вставляет в массив значение в заданную позицию.</p>
<p>Принимает на вход значение и позицию. Если на одну и ту же позицию вставляется несколько значений, в результирующем массиве может оказаться любое (первое в случае однопоточного выполнения). Если в позицию не вставляется ни одного значения, то позиции присваивается значение по умолчанию.</p>
<p>Опциональные параметры:</p>
<ul>
<li>Значение по умолчанию для подстановки на пустые позиции.</li>
<li>Длина результирующего массива. Например, если вы хотите получать массивы одинакового размера для всех агрегатных ключей. При использовании этого параметра значение по умолчанию задавать обязательно.</li>
</ul>
<h2 id="agg_function-grouparraymovingsum">groupArrayMovingSum<a class="headerlink" href="#agg_function-grouparraymovingsum" title="Permanent link">&para;</a></h2>
<p>Вычисляет скользящую сумму входных значений.</p>
<div class="codehilite"><pre><span></span><span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
<span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="n">window_size</span><span class="p">)(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
</pre></div>


<p>Функция может принимать размер окна в качестве параметра. Если окно не указано, то функция использует размер окна, равный количеству строк в столбце.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code>numbers_for_summing</code> — <a href="../../syntax/#syntax-expressions">выражение</a>, возвращающее значение числового типа.</li>
<li><code>window_size</code> — размер окна.</li>
</ul>
<p><strong>Возвращаемые значения</strong></p>
<ul>
<li>Массив того же размера и типа, что и входные данные.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Таблица с исходными данными:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span>
<span class="p">(</span>
    <span class="o">`</span><span class="nb">int</span><span class="o">`</span> <span class="n">UInt8</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">float</span><span class="o">`</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">dec</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">TinyLog</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</pre></div>


<p>Запросы:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</pre></div>


<h2 id="agg_function-grouparraymovingavg">groupArrayMovingAvg<a class="headerlink" href="#agg_function-grouparraymovingavg" title="Permanent link">&para;</a></h2>
<p>Вычисляет скользящее среднее для входных значений.</p>
<div class="codehilite"><pre><span></span><span class="err">groupArrayMovingAvg(numbers_for_summing)</span>
<span class="err">groupArrayMovingAvg(window_size)(numbers_for_summing)</span>
</pre></div>


<p>Функция может принимать размер окна в качестве параметра. Если окно не указано, то функция использует размер окна, равный количеству строк в столбце.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code>numbers_for_summing</code> — <a href="../../syntax/#syntax-expressions">выражение</a>, возвращающее значение числового типа.</li>
<li><code>window_size</code> — размер окна.</li>
</ul>
<p><strong>Возвращаемые значения</strong></p>
<ul>
<li>Массив того же размера и типа, что и входные данные.</li>
</ul>
<p>Функция использует <a href="https://ru.wikipedia.org/wiki/Округление#Методы" rel="external nofollow">округление к меньшему по модулю</a>. Оно усекает десятичные разряды, незначимые для результирующего типа данных.</p>
<p><strong>Пример</strong></p>
<p>Таблица с исходными данными:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span>
<span class="p">(</span>
    <span class="o">`</span><span class="nb">int</span><span class="o">`</span> <span class="n">UInt8</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">float</span><span class="o">`</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">dec</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">TinyLog</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</pre></div>


<p>Запросы:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I─────────┬─F───────────────────────────────────┬─D─────────────────────┐
│ [0,0,1,3] │ [0.275,0.82500005,1.9250001,3.8675] │ [0.27,0.82,1.92,3.86] │
└───────────┴─────────────────────────────────────┴───────────────────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─I─────────┬─F────────────────────────────────┬─D─────────────────────┐
│ [0,1,3,5] │ [0.55,1.6500001,3.3000002,6.085] │ [0.55,1.65,3.30,6.08] │
└───────────┴──────────────────────────────────┴───────────────────────┘
</pre></div>


<h2 id="groupuniqarray-x-groupuniqarray-max-size-x">groupUniqArray(x), groupUniqArray(max_size)(x)<a class="headerlink" href="#groupuniqarray-x-groupuniqarray-max-size-x" title="Permanent link">&para;</a></h2>
<p>Составляет массив из различных значений аргумента. Расход оперативной памяти такой же, как у функции <code>uniqExact</code>.</p>
<p>Функция <code>groupUniqArray(max_size)(x)</code> ограничивает размер результирующего массива до <code>max_size</code> элементов. Например, <code>groupUniqArray(1)(x)</code> равнозначно <code>[any(x)]</code>.</p>
<h2 id="agg_function-quantile">quantile(level)(x)<a class="headerlink" href="#agg_function-quantile" title="Permanent link">&para;</a></h2>
<p>Приближённо вычисляет квантиль уровня level. level - константа, число с плавающей запятой от 0 до 1.
Рекомендуется использовать значения level в диапазоне <code>[0.01, 0.99]</code>.
Не используйте значение 'level' равное 0 или 1 – используйте функции 'min' и 'max' для этих случаев.</p>
<p>В этой функции, равно как и во всех функциях для расчёта квантилей, параметр level может быть не указан. В таком случае, он принимается равным 0.5 - то есть, функция будет вычислять медиану.</p>
<p>Работает для чисел, дат, дат-с-временем.
Для чисел возвращает Float64, для дат - дату, для дат-с-временем - дату-с-временем.</p>
<p>Используется <a href="https://en.wikipedia.org/wiki/Reservoir_sampling" rel="external nofollow">reservoir sampling</a> с размером резервуара до 8192.
При необходимости, результат выдаётся с линейной аппроксимацией из двух соседних значений.
Этот алгоритм обеспечивает весьма низкую точность расчёта. Смотрите также функции <code>quantileTiming</code>, <code>quantileTDigest</code>, <code>quantileExact</code>.</p>
<p>Результат зависит от порядка выполнения запроса, и является недетерминированным.</p>
<p>При использовании нескольких функций <code>quantile</code> (и аналогичных) с разными уровнями в запросе, внутренние состояния не объединяются (то есть, запрос работает менее эффективно, чем мог бы). В этом случае, используйте функцию <code>quantiles</code> (и аналогичные).</p>
<h2 id="quantiledeterministic-level-x-determinator">quantileDeterministic(level)(x, determinator)<a class="headerlink" href="#quantiledeterministic-level-x-determinator" title="Permanent link">&para;</a></h2>
<p>Работает аналогично функции <code>quantile</code>, но, в отличие от неё, результат является детерминированным и не зависит от порядка выполнения запроса.</p>
<p>Для этого, функция принимает второй аргумент - «детерминатор». Это некоторое число, хэш от которого используется вместо генератора случайных чисел в алгоритме reservoir sampling. Для правильной работы функции, одно и то же значение детерминатора не должно встречаться слишком часто. В качестве детерминатора вы можете использовать идентификатор события, идентификатор посетителя и т. п.</p>
<p>Не используйте эту функцию для расчёта таймингов. Для этого есть более подходящая функция - <code>quantileTiming</code>.</p>
<h2 id="agg_function-quantiletiming">quantileTiming<a class="headerlink" href="#agg_function-quantiletiming" title="Permanent link">&para;</a></h2>
<p>Вычисляет квантиль заданного уровня с детерминированной точностью. Функция предназначена для расчётов квантилей времени загрузки страниц в миллисекундах.</p>
<div class="codehilite"><pre><span></span><span class="err">quantileTiming(level)(expr)</span>
</pre></div>


<p><strong>Параметры</strong></p>
<ul>
<li><code>level</code> — уровень квантили. Диапазон: [0, 1].</li>
<li>
<p><code>expr</code> — <a href="../../syntax/#syntax-expressions">выражение</a>, возвращающее число типа <a href="../../../data_types/float/">Float*</a>. Функция ожидает на вход значения в фомате UNIX-время в миллисекундах, но не проверяет формат входных значений.</p>
<ul>
<li>Поведение функции не определено для отрицательных входных значений.</li>
<li>Если входное значение больше 30,000 (т.е. время загрузки страницы превышает 30 секунд), оно приравнивается к 30,000.</li>
</ul>
</li>
</ul>
<p><strong>Точность</strong></p>
<p>Вычисления точны если:</p>
<ul>
<li>Общее количество значений не превышает 5670.</li>
<li>Общее количество значений больше 5670, но времена загрузки страниц меньше 1024мс.</li>
</ul>
<p>В противном случае, результат рассчетов округляется до ближайшего числа, кратного 16мс.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Для расчёта квантилей времени загрузки страниц, функция работает эффективней и с более высокой точностью, чем функция <a href="#agg_function-quantile">quantile</a>.</p>
</div>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Квантиль заданного уровня.</li>
</ul>
<p>Тип: <code>Float32</code>.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Если в функцию не передано значений (для <code>quantileTimingIf</code>), возвращается <a href="../../../data_types/float/#data_type-float-nan-inf">NaN</a>. Это необходимо для того, что бы отделить такие случаи от случаев, в которых результат 0. Смотрите замечания о сортировке значений <code>NaN</code> в разделе <a href="../../select/#select-order-by">Секция ORDER BY</a>.</p>
</div>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">quantileTiming</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)(</span><span class="nb">number</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─quantileTiming(0.5)(divide(number, 2))─┐
│                                      2 │
└────────────────────────────────────────┘
</pre></div>


<h2 id="quantiletimingweighted-level-x-weight">quantileTimingWeighted(level)(x, weight)<a class="headerlink" href="#quantiletimingweighted-level-x-weight" title="Permanent link">&para;</a></h2>
<p>Отличается от функции <code>quantileTiming</code> наличием второго аргумента - «веса». Вес - неотрицательное целое число.
Результат считается так же, как если бы в функцию <code>quantileTiming</code> значение <code>x</code> было передано <code>weight</code> количество раз.</p>
<h2 id="quantileexact-level-x">quantileExact(level)(x)<a class="headerlink" href="#quantileexact-level-x" title="Permanent link">&para;</a></h2>
<p>Вычисляет квантиль уровня level точно. Для этого, все переданные значения складываются в массив, который затем частично сортируется. Поэтому, функция потребляет O(n) памяти, где n - количество переданных значений. Впрочем, для случая маленького количества значений, функция весьма эффективна.</p>
<h2 id="quantileexactweighted-level-x-weight">quantileExactWeighted(level)(x, weight)<a class="headerlink" href="#quantileexactweighted-level-x-weight" title="Permanent link">&para;</a></h2>
<p>Вычисляет квантиль уровня level точно. При этом, каждое значение учитывается с весом weight - как будто оно присутствует weight раз. Аргументы функции можно рассматривать как гистограммы, где значению x соответствует «столбик» гистограммы высоты weight, а саму функцию можно рассматривать как суммирование гистограмм.</p>
<p>В качестве алгоритма используется хэш-таблица. Из-за этого, в случае, если передаваемые значения часто повторяются, функция потребляет меньше оперативки, чем <code>quantileExact</code>. Вы можете использовать эту функцию вместо <code>quantileExact</code>, указав в качестве веса число 1.</p>
<h2 id="quantiletdigest-level-x">quantileTDigest(level)(x)<a class="headerlink" href="#quantiletdigest-level-x" title="Permanent link">&para;</a></h2>
<p>Вычисляет квантиль уровня level приближенно, с использованием алгоритма <a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf" rel="external nofollow">t-digest</a>. Максимальная погрешность составляет 1%. Расход памяти на состояние пропорционален логарифму от количества переданных значений.</p>
<p>Производительность функции ниже <code>quantile</code>, <code>quantileTiming</code>. По соотношению размера состояния и точности, функция существенно лучше, чем <code>quantile</code>.</p>
<p>Результат зависит от порядка выполнения запроса, и является недетерминированным.</p>
<h2 id="median-x">median(x)<a class="headerlink" href="#median-x" title="Permanent link">&para;</a></h2>
<p>Для всех quantile-функций, также присутствуют соответствующие median-функции: <code>median</code>, <code>medianDeterministic</code>, <code>medianTiming</code>, <code>medianTimingWeighted</code>, <code>medianExact</code>, <code>medianExactWeighted</code>, <code>medianTDigest</code>. Они являются синонимами и их поведение ничем не отличается.</p>
<h2 id="quantiles-level1-level2-x">quantiles(level1, level2, ...)(x)<a class="headerlink" href="#quantiles-level1-level2-x" title="Permanent link">&para;</a></h2>
<p>Для всех quantile-функций, также присутствуют соответствующие quantiles-функции: <code>quantiles</code>, <code>quantilesDeterministic</code>, <code>quantilesTiming</code>, <code>quantilesTimingWeighted</code>, <code>quantilesExact</code>, <code>quantilesExactWeighted</code>, <code>quantilesTDigest</code>. Эти функции за один проход вычисляют все квантили перечисленных уровней и возвращают массив вычисленных значений.</p>
<h2 id="varsamp-x">varSamp(x)<a class="headerlink" href="#varsamp-x" title="Permanent link">&para;</a></h2>
<p>Вычисляет величину <code>Σ((x - x̅)^2) / (n - 1)</code>, где <code>n</code> - размер выборки, <code>x̅</code>- среднее значение <code>x</code>.</p>
<p>Она представляет собой несмещённую оценку дисперсии случайной величины, если переданные в функцию значения являются выборкой этой случайной величины.</p>
<p>Возвращает <code>Float64</code>. В случае, когда <code>n &lt;= 1</code>, возвращается <code>+∞</code>.</p>
<h2 id="varpop-x">varPop(x)<a class="headerlink" href="#varpop-x" title="Permanent link">&para;</a></h2>
<p>Вычисляет величину <code>Σ((x - x̅)^2) / n</code>, где <code>n</code> - размер выборки, <code>x̅</code>- среднее значение <code>x</code>.</p>
<p>То есть, дисперсию для множества значений. Возвращает <code>Float64</code>.</p>
<h2 id="stddevsamp-x">stddevSamp(x)<a class="headerlink" href="#stddevsamp-x" title="Permanent link">&para;</a></h2>
<p>Результат равен квадратному корню от <code>varSamp(x)</code>.</p>
<h2 id="stddevpop-x">stddevPop(x)<a class="headerlink" href="#stddevpop-x" title="Permanent link">&para;</a></h2>
<p>Результат равен квадратному корню от <code>varPop(x)</code>.</p>
<h2 id="topk-n-column">topK(N)(column)<a class="headerlink" href="#topk-n-column" title="Permanent link">&para;</a></h2>
<p>Возвращает массив наиболее часто встречающихся значений в указанном столбце. Результирующий массив упорядочен по убыванию частоты значения (не по самим значениям).</p>
<p>Реализует <a href="http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf" rel="external nofollow">Filtered Space-Saving</a> алгоритм для анализа TopK, на основе reduce-and-combine алгоритма из методики <a href="https://arxiv.org/pdf/1401.0702.pdf" rel="external nofollow">Parallel Space Saving</a>.</p>
<div class="codehilite"><pre><span></span><span class="n">topK</span><span class="p">(</span><span class="n">N</span><span class="p">)(</span><span class="k">column</span><span class="p">)</span>
</pre></div>


<p>Функция не дает гарантированного результата. В некоторых ситуациях могут возникать ошибки, и функция возвращает частые, но не наиболее частые значения.</p>
<p>Рекомендуем использовать значения <code>N &lt; 10</code>, при больших <code>N</code> снижается производительность. Максимально возможное значение <code>N = 65536</code>.</p>
<p><strong>Аргументы</strong></p>
<ul>
<li>'N' - Количество значений.</li>
<li>'x' – Столбец.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Возьмём набор данных <a href="../../../getting_started/example_datasets/ontime/">OnTime</a> и выберем 3 наиболее часто встречающихся значения в столбце <code>AirlineID</code>.</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">topK</span><span class="p">(</span><span class="mi">3</span><span class="p">)(</span><span class="n">AirlineID</span><span class="p">)</span> <span class="k">AS</span> <span class="n">res</span>
<span class="k">FROM</span> <span class="n">ontime</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─res─────────────────┐
│ [19393,19790,19805] │
└─────────────────────┘
</pre></div>


<h2 id="topkweighted">topKWeighted<a class="headerlink" href="#topkweighted" title="Permanent link">&para;</a></h2>
<p>Similar to <code>topK</code> but takes one additional argument of integer type - <code>weight</code>. Every value is accounted <code>weight</code> times for frequency calculation.</p>
<p><strong>Syntax</strong></p>
<div class="codehilite"><pre><span></span><span class="n">topKWeighted</span><span class="p">(</span><span class="n">N</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</pre></div>


<p><strong>Parameters</strong></p>
<ul>
<li><code>N</code> — The number of elements to return.</li>
</ul>
<p><strong>Arguments</strong></p>
<ul>
<li><code>x</code> – The value.</li>
<li><code>weight</code> — The weight. <a href="../../../data_types/int_uint/">UInt8</a>.</li>
</ul>
<p><strong>Returned value</strong></p>
<p>Returns an array of the values with maximum approximate sum of weights.</p>
<p><strong>Example</strong></p>
<p>Query:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">topKWeighted</span><span class="p">(</span><span class="mi">10</span><span class="p">)(</span><span class="nb">number</span><span class="p">,</span> <span class="nb">number</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>


<p>Result:</p>
<div class="codehilite"><pre><span></span>┌─topKWeighted(10)(number, number)──────────┐
│ [999,998,997,996,995,994,993,992,991,990] │
└───────────────────────────────────────────┘
</pre></div>


<h2 id="covarsamp-x-y">covarSamp(x, y)<a class="headerlink" href="#covarsamp-x-y" title="Permanent link">&para;</a></h2>
<p>Вычисляет величину <code>Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p>
<p>Возвращает Float64. В случае, когда <code>n &lt;= 1</code>, возвращается +∞.</p>
<h2 id="covarpop-x-y">covarPop(x, y)<a class="headerlink" href="#covarpop-x-y" title="Permanent link">&para;</a></h2>
<p>Вычисляет величину <code>Σ((x - x̅)(y - y̅)) / n</code>.</p>
<h2 id="corr-x-y">corr(x, y)<a class="headerlink" href="#corr-x-y" title="Permanent link">&para;</a></h2>
<p>Вычисляет коэффициент корреляции Пирсона: <code>Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p>
<h2 id="simplelinearregression">simpleLinearRegression<a class="headerlink" href="#simplelinearregression" title="Permanent link">&para;</a></h2>
<p>Выполняет простую (одномерную) линейную регрессию.</p>
<div class="codehilite"><pre><span></span><span class="n">simpleLinearRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>


<p>Параметры:</p>
<ul>
<li><code>x</code> — столбец со значениями зависимой переменной.</li>
<li><code>y</code> — столбец со значениями наблюдаемой переменной.</li>
</ul>
<p>Возвращаемые значения:</p>
<p>Константы <code>(a, b)</code> результирующей прямой <code>y = a*x + b</code>.</p>
<p><strong>Примеры</strong></p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">arrayReduce</span><span class="p">(</span><span class="s1">&#39;simpleLinearRegression&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</pre></div>


<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="n">arrayReduce</span><span class="p">(</span><span class="s1">&#39;simpleLinearRegression&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</pre></div>


<div class="codehilite"><pre><span></span>┌─arrayReduce(&#39;simpleLinearRegression&#39;, [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</pre></div>


<h2 id="agg_functions-stochasticlinearregression">stochasticLinearRegression<a class="headerlink" href="#agg_functions-stochasticlinearregression" title="Permanent link">&para;</a></h2>
<p>Функция реализует стохастическую линейную регрессию. Поддерживает пользовательские параметры для скорости обучения, коэффициента регуляризации L2, размера mini-batch и имеет несколько методов обновления весов (<a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam" rel="external nofollow">Adam</a> (по умолчанию), <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent" rel="external nofollow">simple SGD</a>, <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum" rel="external nofollow">Momentum</a>, <a href="https://mipt.ru/upload/medialibrary/d7e/41-91.pdf" rel="external nofollow">Nesterov</a>).</p>
<h3 id="agg_functions-stochasticlinearregression-parameters">Параметры<a class="headerlink" href="#agg_functions-stochasticlinearregression-parameters" title="Permanent link">&para;</a></h3>
<p>Есть 4 настраиваемых параметра. Они передаются в функцию последовательно, однако не обязательно указывать все, используются значения по умолчанию, однако хорошая модель требует некоторой настройки параметров.</p>
<div class="codehilite"><pre><span></span>stochasticLinearRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</pre></div>


<ol>
<li>Скорость обучения — коэффициент длины шага, при выполнении градиентного спуска. Слишком большая скорость обучения может привести к бесконечным весам модели. По умолчанию <code>0.00001</code>.</li>
<li>Коэффициент регуляризации l2. Помогает предотвратить подгонку. По умолчанию <code>0.1</code>.</li>
<li>Размер mini-batch задаёт количество элементов, чьи градиенты будут вычислены и просуммированы при выполнении одного шага градиентного спуска. Чистый стохастический спуск использует один элемент, однако использование mini-batch (около 10 элементов) делает градиентные шаги более стабильными. По умолчанию <code>15</code>.</li>
<li>Метод обновления весов, можно выбрать один из следующих: <code>Adam</code> (по умолчанию), <code>SGD</code>, <code>Momentum</code>, <code>Nesterov</code>. <code>Momentum</code> и <code>Nesterov</code> более требовательные к вычислительным ресурсам и памяти, однако они имеют высокую скорость схождения и устойчивости методов стохастического градиента.</li>
</ol>
<h3 id="agg_functions-stochasticlinearregression-usage">Использование<a class="headerlink" href="#agg_functions-stochasticlinearregression-usage" title="Permanent link">&para;</a></h3>
<p><code>stochasticLinearRegression</code> используется на двух этапах: построение модели и предсказание новых данных. Чтобы построить модель и сохранить её состояние для дальнейшего использования, мы используем комбинатор <code>-State</code>.
Для прогнозирования мы используем функцию <a href="../../functions/machine_learning_functions/#machine_learning_methods-evalmlmethod">evalMLMethod</a>, которая принимает в качестве аргументов состояние и свойства для прогнозирования.</p>
<p><a name="stochasticlinearregression-usage-fitting"></a></p>
<p><strong>1.</strong> Построение модели</p>
<p>Пример запроса:</p>
<div class="codehilite"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">train_data</span>
<span class="p">(</span>
    <span class="n">param1</span> <span class="n">Float64</span><span class="p">,</span>
    <span class="n">param2</span> <span class="n">Float64</span><span class="p">,</span>
    <span class="n">target</span> <span class="n">Float64</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">your_model</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span> <span class="k">AS</span> <span class="k">SELECT</span>
<span class="n">stochasticLinearRegressionState</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;SGD&#39;</span><span class="p">)(</span><span class="n">target</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">)</span>
<span class="k">AS</span> <span class="k">state</span> <span class="k">FROM</span> <span class="n">train_data</span><span class="p">;</span>
</pre></div>


<p>Здесь нам также нужно вставить данные в таблицу <code>train_data</code>. Количество параметров не фиксировано, оно зависит только от количества аргументов, перешедших в <code>linearRegressionState</code>. Все они должны быть числовыми значениями.
Обратите внимание, что столбец с целевым значением (которое мы хотели бы научиться предсказывать) вставляется в качестве первого аргумента.</p>
<p><strong>2.</strong> Прогнозирование</p>
<p>После сохранения состояния в таблице мы можем использовать его несколько раз для прогнозирования или смёржить с другими состояниями и создать новые, улучшенные модели.</p>
<div class="codehilite"><pre><span></span><span class="k">WITH</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">state</span> <span class="k">FROM</span> <span class="n">your_model</span><span class="p">)</span> <span class="k">AS</span> <span class="n">model</span> <span class="k">SELECT</span>
<span class="n">evalMLMethod</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">test_data</span>
</pre></div>


<p>Запрос возвращает столбец прогнозируемых значений. Обратите внимание, что первый аргумент <code>evalMLMethod</code> это объект <code>AggregateFunctionState</code>, далее идут столбцы свойств.</p>
<p><code>test_data</code> — это таблица, подобная <code>train_data</code>, но при этом может не содержать целевое значение.</p>
<h3 id="agg_functions-stochasticlinearregression-notes">Примечания<a class="headerlink" href="#agg_functions-stochasticlinearregression-notes" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Объединить две модели можно следующим запросом:</p>
<p><code>sql
SELECT state1 + state2 FROM your_models</code></p>
<p>где таблица <code>your_models</code> содержит обе модели. Запрос вернёт новый объект <code>AggregateFunctionState</code>.</p>
</li>
<li>
<p>Пользователь может получать веса созданной модели для своих целей без сохранения модели, если не использовать комбинатор  <code>-State</code>.</p>
<p><code>sql
SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code></p>
<p>Подобный запрос строит модель и возвращает её веса, отвечающие параметрам моделей и смещение. Таким образом, в приведенном выше примере запрос вернет столбец с тремя значениями.</p>
</li>
</ol>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_functions-stochasticlogisticregression">stochasticLogisticRegression</a></li>
<li><a href="https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression" rel="external nofollow">Отличие линейной от логистической регрессии.</a></li>
</ul>
<h2 id="agg_functions-stochasticlogisticregression">stochasticLogisticRegression<a class="headerlink" href="#agg_functions-stochasticlogisticregression" title="Permanent link">&para;</a></h2>
<p>Функция реализует стохастическую логистическую регрессию. Её можно использовать для задачи бинарной классификации, функция поддерживает те же пользовательские параметры, что и stochasticLinearRegression и работает таким же образом.</p>
<h3 id="agg_functions-stochasticlogisticregression-parameters">Параметры<a class="headerlink" href="#agg_functions-stochasticlogisticregression-parameters" title="Permanent link">&para;</a></h3>
<p>Параметры те же, что и в stochasticLinearRegression:
<code>learning rate</code>, <code>l2 regularization coefficient</code>, <code>mini-batch size</code>, <code>method for updating weights</code>.
Смотрите раздел <a href="#agg_functions-stochasticlinearregression-parameters">parameters</a>.</p>
<div class="codehilite"><pre><span></span>stochasticLogisticRegression(1.0, 1.0, 10, &#39;SGD&#39;)
</pre></div>


<ol>
<li>
<p>Построение модели</p>
<p>Смотрите раздел <code>Построение модели</code> в описании <a href="#stochasticlinearregression-usage-fitting">stochasticLinearRegression</a> .</p>
<p>Прогнозируемые метки должны быть в диапазоне [-1, 1].</p>
</li>
<li>
<p>Прогнозирование</p>
<p>Используя сохраненное состояние, можно предсказать вероятность наличия у объекта метки <code>1</code>.</p>
<p><code>sql
WITH (SELECT state FROM your_model) AS model SELECT
evalMLMethod(model, param1, param2) FROM test_data</code></p>
<p>Запрос возвращает столбец вероятностей. Обратите внимание, что первый аргумент <code>evalMLMethod</code> это объект <code>AggregateFunctionState</code>, далее идут столбцы свойств.</p>
<p>Мы также можем установить границу вероятности, которая присваивает элементам различные метки.</p>
<p><code>sql
SELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM
(WITH (SELECT state FROM your_model) AS model SELECT
evalMLMethod(model, param1, param2) AS ans FROM test_data)</code></p>
<p>Тогда результатом будут метки.</p>
<p><code>test_data</code> — это таблица, подобная <code>train_data</code>, но при этом может не содержать целевое значение.</p>
</li>
</ol>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_functions-stochasticlinearregression">stochasticLinearRegression</a></li>
<li><a href="https://moredez.ru/q/51225972/" rel="external nofollow">Отличие линейной от логистической регрессии</a></li>
</ul>
                
                </div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../query_language/agg_functions/" title="Введение" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Назад
                </span>
                Введение
              </span>
            </div>
          </a>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        
          <a href="../../../query_language/agg_functions/combinators/" title="Комбинаторы агрегатных функций" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Вперед
                </span>
                Комбинаторы агрегатных функций
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2016–2020 Yandex LLC
          </div>
        
      </div>
      
        <div class="md-footer-social">
  <span class="md-footer-copyright__highlight">Built from <a href="https://github.com/ClickHouse/ClickHouse/commit/7bc0aa2bed65a44161006cea8efad249600ac881" rel="external nofollow">7bc0aa2</a></span>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      
        <script src="../../../assets/javascripts/modernizr.js"></script>
      
      <script src="../../../assets/javascripts/application.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../../assets/javascripts/lunr/lunr.ru.js"></script>
            
          
          
            <script src="../../../assets/javascripts/lunr/lunr.multi.js"></script>
          
        
      
      
    
    
      
    

    <script type="text/javascript">
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'ru';
            }
          )
      });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:ru"]
},
debug: false
});
</script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/18343495" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>