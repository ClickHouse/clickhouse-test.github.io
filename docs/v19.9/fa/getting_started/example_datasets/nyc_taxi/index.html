<!DOCTYPE html><html lang=fa class=no-js data-version=v19.9 data-single-page=false> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=https://clickhouse.yandex/docs/fa/getting_started/example_datasets/nyc_taxi/ rel=canonical><meta name=lang:clipboard.copy content="کپی کردن"><meta name=lang:clipboard.copied content="کپی شد"><meta name=lang:search.language content=fa><meta name=lang:search.pipeline.stopwords content=False><meta name=lang:search.pipeline.trimmer content=False><meta name=lang:search.result.none content="سندی یافت نشد"><meta name=lang:search.result.one content="1 سند یافت شد"><meta name=lang:search.result.other content="# سند یافت شد"><meta name=lang:search.tokenizer content><link rel="shortcut icon" href=../../../assets/images/favicon.ico><title>داده های تاکسی New York - مستندات v19.9ClickHouse</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css><link rel=stylesheet href=../../../assets/stylesheets/application.2a88008a.css><link rel=stylesheet href=../../../assets/stylesheets/application-palette.792431c1.css><link rel=stylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel=stylesheet href=../../../assets/stylesheets/custom.css?1582324181></head> <body dir=rtl data-md-color-primary=white data-md-color-accent=white class=md-lang-fa> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=drawer> <input class=md-toggle data-md-toggle=search type=checkbox id=search> <label class=md-overlay data-md-component=overlay for=drawer></label> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=/ title="مستندات  v19.9ClickHouse" class="md-header-nav__button md-logo"> <img src=../../../images/logo.svg width=40 height=40> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> مستندات v19.9ClickHouse </span> <span class=md-header-nav__topic> داده های تاکسی New York </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=search></label> <div class=md-search__inner> <form class=md-search__form name=search> <input type=text id=md-search__input class=md-search__input name=query required placeholder=جستجو autocapitalize=off autocorrect=off autocomplete=off spellcheck=false> <label class="md-icon md-search__icon" for=search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset>&#xE5CD;</button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> برای شروع جستجو تایپ کنید </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div id=md-language-switch class=md-header-nav__source> <a class=md-alt-lang href=../../../../en/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=English> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 60 30" preserveaspectratio=none> <clippath id=t> <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/> </clippath> <path fill=#00247d d="M0,0 v30 h60 v-30 z"/> <path stroke=#fff stroke-width=6 d="M0,0 L60,30 M60,0 L0,30"/> <path clip-path=url(#t) stroke=#cf142b stroke-width=4 d="M0,0 L60,30 M60,0 L0,30"/> <path stroke=#fff stroke-width=10 d="M30,0 v30 M0,15 h60"/> <path stroke=#cf142b stroke-width=6 d="M30,0 v30 M0,15 h60"/> </svg> </a> <a class=md-alt-lang href=../../../../ru/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Russian> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 9 6" preserveaspectratio=none> <rect fill=#fff width=9 height=3 /> <rect fill=#d52b1e y=3 width=9 height=3 /> <rect fill=#0039a6 y=2 width=9 height=2 /> </svg> </a> <a class=md-alt-lang href=../../../../zh/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Chinese> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 30 20" preserveaspectratio=none> <defs> <path id=s fill=#ffde00 d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/> </defs> <rect width=30 height=20 fill=#de2910 /> <use xlink:href=#s transform="translate(5,5) scale(3)"/> <use xlink:href=#s transform="translate(10,2) rotate(23.036243)"/> <use xlink:href=#s transform="translate(12,4) rotate(45.869898)"/> <use xlink:href=#s transform="translate(12,7) rotate(69.945396)"/> <use xlink:href=#s transform="translate(10,9) rotate(20.659808)"/> </svg> </a> <a class=md-alt-lang href=../../../../ja/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Japanese> <?xml version="1.0" encoding="UTF-8"?> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink width=90px height=60px viewbox="0 0 90 60" version=1.1> <g id=surface1> <rect x=0 y=0 width=90 height=60 style=fill:rgb(62.7451%,62.7451%,62.7451%);fill-opacity:1;stroke:none; /> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562 "/> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(74.509805%,0%,14.901961%);fill-opacity:1;" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30 "/> </g> </svg> </a> <a class="md-alt-lang md-current-lang" href=../../../../fa/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Farsi> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 630 360" preserveaspectratio=none> <rect width=630 height=360 fill=#da0000 /> <rect width=630 height=240 fill=#fff /> <rect width=630 height=120 fill=#239f40 /> <g transform=translate(8.4,100.4)> <g id=tb4> <g id=tb1 fill=none stroke=#fff stroke-width=2> <path id=tbp1 d=M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9 transform=scale(1.4) /> <path id=tbp2 d=M0,7H9M10,7H19 transform=scale(2.8) /> <use xlink:href=#tbp2 y=120 /> <use xlink:href=#tbp1 y=145.2 /> </g> <g id=tb3> <use xlink:href=#tb1 x=56 /> <use xlink:href=#tb1 x=112 /> <use xlink:href=#tb1 x=168 /> </g> </g> <use xlink:href=#tb3 x=168 /> <use xlink:href=#tb4 x=392 /> </g> <g fill=#da0000 transform=matrix(45,0,0,45,315,180)> <g id=emblem_half> <path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/> <path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/> <path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/> <path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/> </g> <use xlink:href=#emblem_half transform=scale(-1,1) /> </g> </svg> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=drawer> مستندات v19.9ClickHouse </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Introduction </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-1> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ title="ClickHouse چیست؟" class=md-nav__link> ClickHouse چیست؟ </a> </li> <li class=md-nav__item> <a href=../../../introduction/distinctive_features/ title=" ویژگی های برجسته ClickHouse" class=md-nav__link> ویژگی های برجسته ClickHouse </a> </li> <li class=md-nav__item> <a href=../../../introduction/features_considered_disadvantages/ title=" ویژگی های از ClickHouse که می تواند معایبی باشد" class=md-nav__link> ویژگی های از ClickHouse که می تواند معایبی باشد </a> </li> <li class=md-nav__item> <a href=../../../introduction/performance/ title=Performance class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../../introduction/ya_metrika_task/ title="The Yandex.Metrica task" class=md-nav__link> The Yandex.Metrica task </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Getting started </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-2> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting_started/ title=" شروع به کار" class=md-nav__link> شروع به کار </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2 checked> <label class=md-nav__link for=nav-2-2> Example datasets </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-2-2> Example datasets </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class=md-nav__link> OnTime </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=toc> <label class="md-nav__link md-nav__link--active" for=toc> داده های تاکسی New York </label> <a href=../../../getting_started/example_datasets/nyc_taxi/ title=" داده های تاکسی New York" class="md-nav__link md-nav__link--active"> <strong> داده های تاکسی New York</strong> </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=toc>فهرست موضوعات</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#chtwr-ddh-hy-raw-r-import-khnym title="چطور داده های raw را import کنیم" class=md-nav__link> چطور داده های raw را import کنیم </a> </li> <li class=md-nav__item> <a href=#ntyj-br-rwy-ykh-srwr title="نتایج بر روی یک سرور" class=md-nav__link> نتایج بر روی یک سرور </a> </li> <li class=md-nav__item> <a href=#ntyj title=نتایج class=md-nav__link> نتایج </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title=" بنچمارک AMPLab Big Data" class=md-nav__link> بنچمارک AMPLab Big Data </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/wikistat/ title=WikiStat class=md-nav__link> WikiStat </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/criteo/ title=" ترابایت از لاگ های کلیک از سرویس Criteo" class=md-nav__link> ترابایت از لاگ های کلیک از سرویس Criteo </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/star_schema/ title=" بنچمارک Star Schema" class=md-nav__link> بنچمارک Star Schema </a> </li> <li class=md-nav__item> <a href=../../../getting_started/example_datasets/metrica/ title="Yandex.Metrica Data" class=md-nav__link> Yandex.Metrica Data </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Interfaces </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-3> Interfaces </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../interfaces/ title="Interface ها" class=md-nav__link> Interface ها </a> </li> <li class=md-nav__item> <a href=../../../interfaces/cli/ title=" کلاینت Command-line" class=md-nav__link> کلاینت Command-line </a> </li> <li class=md-nav__item> <a href=../../../interfaces/tcp/ title="Native interface (TCP)" class=md-nav__link> Native interface (TCP) </a> </li> <li class=md-nav__item> <a href=../../../interfaces/http/ title="HTTP interface" class=md-nav__link> HTTP interface </a> </li> <li class=md-nav__item> <a href=../../../interfaces/formats/ title=" فرمت های Input و Output" class=md-nav__link> فرمت های Input و Output </a> </li> <li class=md-nav__item> <a href=../../../interfaces/jdbc/ title=" درایور JDBC" class=md-nav__link> درایور JDBC </a> </li> <li class=md-nav__item> <a href=../../../interfaces/odbc/ title=" درایور ODBC" class=md-nav__link> درایور ODBC </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3-8 type=checkbox id=nav-3-8> <label class=md-nav__link for=nav-3-8> Third-party </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-3-8> Third-party </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../interfaces/third-party/client_libraries/ title="کتابخانه های مشتری" class=md-nav__link> کتابخانه های مشتری </a> </li> <li class=md-nav__item> <a href=../../../interfaces/third-party/integrations/ title=یکپارچگی class=md-nav__link> یکپارچگی </a> </li> <li class=md-nav__item> <a href=../../../interfaces/third-party/gui/ title="رابط های بصری" class=md-nav__link> رابط های بصری </a> </li> <li class=md-nav__item> <a href=../../../interfaces/third-party/proxy/ title=پروکسی class=md-nav__link> پروکسی </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Data types </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-4> Data types </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../data_types/int_uint/ title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class=md-nav__link> UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64 </a> </li> <li class=md-nav__item> <a href=../../../data_types/float/ title="Float32, Float64" class=md-nav__link> Float32, Float64 </a> </li> <li class=md-nav__item> <a href=../../../data_types/decimal/ title=Decimal class=md-nav__link> Decimal </a> </li> <li class=md-nav__item> <a href=../../../data_types/boolean/ title=" مقادیر Boolean" class=md-nav__link> مقادیر Boolean </a> </li> <li class=md-nav__item> <a href=../../../data_types/string/ title=String class=md-nav__link> String </a> </li> <li class=md-nav__item> <a href=../../../data_types/fixedstring/ title=FixedString(N) class=md-nav__link> FixedString(N) </a> </li> <li class=md-nav__item> <a href=../../../data_types/uuid/ title=UUID class=md-nav__link> UUID </a> </li> <li class=md-nav__item> <a href=../../../data_types/date/ title=Date class=md-nav__link> Date </a> </li> <li class=md-nav__item> <a href=../../../data_types/datetime/ title=DateTime class=md-nav__link> DateTime </a> </li> <li class=md-nav__item> <a href=../../../data_types/enum/ title=Enum class=md-nav__link> Enum </a> </li> <li class=md-nav__item> <a href=../../../data_types/array/ title=Array(T) class=md-nav__link> Array(T) </a> </li> <li class=md-nav__item> <a href=../../../data_types/nested_data_structures/aggregatefunction/ title="AggregateFunction(name, types_of_arguments...)" class=md-nav__link> AggregateFunction(name, types_of_arguments...) </a> </li> <li class=md-nav__item> <a href=../../../data_types/tuple/ title="Tuple(T1, T2, ...)" class=md-nav__link> Tuple(T1, T2, ...) </a> </li> <li class=md-nav__item> <a href=../../../data_types/nullable/ title=Nullable class=md-nav__link> Nullable </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-16 type=checkbox id=nav-4-16> <label class=md-nav__link for=nav-4-16> Nested data structures </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-16> Nested data structures </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/nested_data_structures/nested/ title="Nested(Name1 Type1, Name2 Type2, ...)" class=md-nav__link> Nested(Name1 Type1, Name2 Type2, ...) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-17 type=checkbox id=nav-4-17> <label class=md-nav__link for=nav-4-17> Special data types </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-17> Special data types </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/special_data_types/expression/ title=Expression class=md-nav__link> Expression </a> </li> <li class=md-nav__item> <a href=../../../data_types/special_data_types/set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../../../data_types/special_data_types/nothing/ title=Nothing class=md-nav__link> Nothing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-18 type=checkbox id=nav-4-18> <label class=md-nav__link for=nav-4-18> Domains </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-4-18> Domains </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../data_types/domains/overview/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../data_types/domains/ipv4/ title=IPv4 class=md-nav__link> IPv4 </a> </li> <li class=md-nav__item> <a href=../../../data_types/domains/ipv6/ title=IPv6 class=md-nav__link> IPv6 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Table Engines </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-5> Table Engines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> MergeTree Family </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-2> MergeTree Family </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/mergetree/ title=MergeTree class=md-nav__link> MergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/replication/ title="Data Replication" class=md-nav__link> Data Replication </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/custom_partitioning_key/ title="Custom Partitioning Key" class=md-nav__link> Custom Partitioning Key </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/replacingmergetree/ title=ReplacingMergeTree class=md-nav__link> ReplacingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/summingmergetree/ title=SummingMergeTree class=md-nav__link> SummingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/aggregatingmergetree/ title=AggregatingMergeTree class=md-nav__link> AggregatingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/collapsingmergetree/ title=CollapsingMergeTree class=md-nav__link> CollapsingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/versionedcollapsingmergetree/ title=VersionedCollapsingMergeTree class=md-nav__link> VersionedCollapsingMergeTree </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/graphitemergetree/ title=GraphiteMergeTree class=md-nav__link> GraphiteMergeTree </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> Log Family </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-3> Log Family </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/log_family/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/stripelog/ title=StripeLog class=md-nav__link> StripeLog </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/log/ title=Log class=md-nav__link> Log </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/tinylog/ title=TinyLog class=md-nav__link> TinyLog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-4 type=checkbox id=nav-5-4> <label class=md-nav__link for=nav-5-4> Integrations </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-4> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/kafka/ title=Kafka class=md-nav__link> Kafka </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/mysql/ title=MySQL class=md-nav__link> MySQL </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5-5 type=checkbox id=nav-5-5> <label class=md-nav__link for=nav-5-5> Special </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-5-5> Special </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/table_engines/distributed/ title=Distributed class=md-nav__link> Distributed </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/external_data/ title="External data" class=md-nav__link> External data </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/dictionary/ title=Dictionary class=md-nav__link> Dictionary </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/merge/ title=Merge class=md-nav__link> Merge </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/file/ title=File class=md-nav__link> File </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/null/ title=Null class=md-nav__link> Null </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/set/ title=Set class=md-nav__link> Set </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/join/ title=Join class=md-nav__link> Join </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/url/ title=URL class=md-nav__link> URL </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/view/ title=View class=md-nav__link> View </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/materializedview/ title=MaterializedView class=md-nav__link> MaterializedView </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/memory/ title=Memory class=md-nav__link> Memory </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/buffer/ title=Buffer class=md-nav__link> Buffer </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/jdbc/ title=JDBC class=md-nav__link> JDBC </a> </li> <li class=md-nav__item> <a href=../../../operations/table_engines/odbc/ title=ODBC class=md-nav__link> ODBC </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> SQL Reference </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-6> SQL Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/select/ title=SELECT class=md-nav__link> SELECT </a> </li> <li class=md-nav__item> <a href=../../../query_language/insert_into/ title="INSERT INTO" class=md-nav__link> INSERT INTO </a> </li> <li class=md-nav__item> <a href=../../../query_language/create/ title=CREATE class=md-nav__link> CREATE </a> </li> <li class=md-nav__item> <a href=../../../query_language/alter/ title=ALTER class=md-nav__link> ALTER </a> </li> <li class=md-nav__item> <a href=../../../query_language/misc/ title="Other Kinds of Queries" class=md-nav__link> Other Kinds of Queries </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-7 type=checkbox id=nav-6-7> <label class=md-nav__link for=nav-6-7> Functions </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-7> Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/functions/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/arithmetic_functions/ title=Arithmetic class=md-nav__link> Arithmetic </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/comparison_functions/ title=Comparison class=md-nav__link> Comparison </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/logical_functions/ title=Logical class=md-nav__link> Logical </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/type_conversion_functions/ title="Type Conversion" class=md-nav__link> Type Conversion </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/date_time_functions/ title="Working with Dates and Times" class=md-nav__link> Working with Dates and Times </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/string_functions/ title="Working with strings" class=md-nav__link> Working with strings </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/string_search_functions/ title="For Searching Strings" class=md-nav__link> For Searching Strings </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/string_replace_functions/ title="For Replacing in Strings" class=md-nav__link> For Replacing in Strings </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/conditional_functions/ title="Conditional " class=md-nav__link> Conditional </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/math_functions/ title=Mathematical class=md-nav__link> Mathematical </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/rounding_functions/ title=Rounding class=md-nav__link> Rounding </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/array_functions/ title="Working with Arrays" class=md-nav__link> Working with Arrays </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/splitting_merging_functions/ title="Splitting and Merging Strings and Arrays" class=md-nav__link> Splitting and Merging Strings and Arrays </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/bit_functions/ title=Bit class=md-nav__link> Bit </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/bitmap_functions/ title=Bitmap class=md-nav__link> Bitmap </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/hash_functions/ title=Hash class=md-nav__link> Hash </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/random_functions/ title="Generating Pseudo-Random Numbers" class=md-nav__link> Generating Pseudo-Random Numbers </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/encoding_functions/ title=Encoding class=md-nav__link> Encoding </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/uuid_functions/ title="Working with UUID" class=md-nav__link> Working with UUID </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/url_functions/ title="Working with URLs" class=md-nav__link> Working with URLs </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/ip_address_functions/ title="Working with IP Addresses" class=md-nav__link> Working with IP Addresses </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/json_functions/ title="Working with JSON." class=md-nav__link> Working with JSON. </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/higher_order_functions/ title=Higher-Order class=md-nav__link> Higher-Order </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/ext_dict_functions/ title="Working with External Dictionaries" class=md-nav__link> Working with External Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/ym_dict_functions/ title="Working with Yandex.Metrica Dictionaries" class=md-nav__link> Working with Yandex.Metrica Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/in_functions/ title="Implementing the IN Operator" class=md-nav__link> Implementing the IN Operator </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/array_join/ title=arrayJoin class=md-nav__link> arrayJoin </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/geo/ title="Working with geographical coordinates" class=md-nav__link> Working with geographical coordinates </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/functions_for_nulls/ title="Working with Nullable arguments" class=md-nav__link> Working with Nullable arguments </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/machine_learning_functions/ title="Machine Learning Functions" class=md-nav__link> Machine Learning Functions </a> </li> <li class=md-nav__item> <a href=../../../query_language/functions/other_functions/ title=Other class=md-nav__link> Other </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-8 type=checkbox id=nav-6-8> <label class=md-nav__link for=nav-6-8> Aggregate Functions </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-8> Aggregate Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/agg_functions/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../query_language/agg_functions/reference/ title=Reference class=md-nav__link> Reference </a> </li> <li class=md-nav__item> <a href=../../../query_language/agg_functions/combinators/ title="Aggregate function combinators" class=md-nav__link> Aggregate function combinators </a> </li> <li class=md-nav__item> <a href=../../../query_language/agg_functions/parametric_functions/ title="Parametric aggregate functions" class=md-nav__link> Parametric aggregate functions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-9 type=checkbox id=nav-6-9> <label class=md-nav__link for=nav-6-9> Table Functions </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-9> Table Functions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/table_functions/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/file/ title=file class=md-nav__link> file </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/merge/ title=merge class=md-nav__link> merge </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/numbers/ title=numbers class=md-nav__link> numbers </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/remote/ title=remote class=md-nav__link> remote </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/url/ title=url class=md-nav__link> url </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/mysql/ title=mysql class=md-nav__link> mysql </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/jdbc/ title=jdbc class=md-nav__link> jdbc </a> </li> <li class=md-nav__item> <a href=../../../query_language/table_functions/odbc/ title=odbc class=md-nav__link> odbc </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-10 type=checkbox id=nav-6-10> <label class=md-nav__link for=nav-6-10> Dictionaries </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-6-10> Dictionaries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/dicts/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6-10-2 type=checkbox id=nav-6-10-2> <label class=md-nav__link for=nav-6-10-2> External Dictionaries </label> <nav class=md-nav data-md-component=collapsible data-md-level=3> <label class=md-nav__title for=nav-6-10-2> External Dictionaries </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts/ title="General Description" class=md-nav__link> General Description </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict/ title="Configuring an External Dictionary" class=md-nav__link> Configuring an External Dictionary </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_layout/ title="Storing Dictionaries in Memory" class=md-nav__link> Storing Dictionaries in Memory </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_lifetime/ title="Dictionary Updates" class=md-nav__link> Dictionary Updates </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_sources/ title="Sources of External Dictionaries" class=md-nav__link> Sources of External Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/external_dicts_dict_structure/ title="Dictionary Key and Fields" class=md-nav__link> Dictionary Key and Fields </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../query_language/dicts/internal_dicts/ title="Internal Dictionaries" class=md-nav__link> Internal Dictionaries </a> </li> <li class=md-nav__item> <a href=../../../query_language/operators/ title=Operators class=md-nav__link> Operators </a> </li> <li class=md-nav__item> <a href=../../../query_language/syntax/ title="General Syntax" class=md-nav__link> General Syntax </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class=md-nav__link for=nav-7> Operations </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-7> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/requirements/ title=Requirements class=md-nav__link> Requirements </a> </li> <li class=md-nav__item> <a href=../../../operations/monitoring/ title=Monitoring class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=../../../operations/troubleshooting/ title=Troubleshooting class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../operations/tips/ title="Usage Recommendations" class=md-nav__link> Usage Recommendations </a> </li> <li class=md-nav__item> <a href=../../../operations/update/ title="ClickHouse Update" class=md-nav__link> ClickHouse Update </a> </li> <li class=md-nav__item> <a href=../../../operations/access_rights/ title="Access Rights" class=md-nav__link> Access Rights </a> </li> <li class=md-nav__item> <a href=../../../operations/backup/ title="Data Backup" class=md-nav__link> Data Backup </a> </li> <li class=md-nav__item> <a href=../../../operations/configuration_files/ title="Configuration Files" class=md-nav__link> Configuration Files </a> </li> <li class=md-nav__item> <a href=../../../operations/quotas/ title=Quotas class=md-nav__link> Quotas </a> </li> <li class=md-nav__item> <a href=../../../operations/system_tables/ title="System Tables" class=md-nav__link> System Tables </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-12 type=checkbox id=nav-7-12> <label class=md-nav__link for=nav-7-12> Server Configuration Parameters </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-12> Server Configuration Parameters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/server_settings/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/server_settings/settings/ title="Server Settings" class=md-nav__link> Server Settings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-13 type=checkbox id=nav-7-13> <label class=md-nav__link for=nav-7-13> Settings </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-13> Settings </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/settings/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/permissions_for_queries/ title="Permissions for Queries" class=md-nav__link> Permissions for Queries </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/query_complexity/ title="Restrictions on Query Complexity" class=md-nav__link> Restrictions on Query Complexity </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/settings/ title=Settings class=md-nav__link> Settings </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/settings_profiles/ title="Settings Profiles" class=md-nav__link> Settings Profiles </a> </li> <li class=md-nav__item> <a href=../../../operations/settings/constraints_on_settings/ title="Constraints on Settings" class=md-nav__link> Constraints on Settings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7-14 type=checkbox id=nav-7-14> <label class=md-nav__link for=nav-7-14> Utilities </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class=md-nav__title for=nav-7-14> Utilities </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/utils/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../operations/utils/clickhouse-copier/ title=clickhouse-copier class=md-nav__link> clickhouse-copier </a> </li> <li class=md-nav__item> <a href=../../../operations/utils/clickhouse-local/ title=clickhouse-local class=md-nav__link> clickhouse-local </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class=md-nav__link for=nav-8> F.A.Q. </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-8> F.A.Q. </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../faq/general/ title="General Questions" class=md-nav__link> General Questions </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class=md-nav__link for=nav-9> Development </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-9> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../development/architecture/ title="Overview of ClickHouse Architecture" class=md-nav__link> Overview of ClickHouse Architecture </a> </li> <li class=md-nav__item> <a href=../../../development/build/ title="How to Build ClickHouse on Linux" class=md-nav__link> How to Build ClickHouse on Linux </a> </li> <li class=md-nav__item> <a href=../../../development/build_osx/ title="How to Build ClickHouse on Mac OS X" class=md-nav__link> How to Build ClickHouse on Mac OS X </a> </li> <li class=md-nav__item> <a href=../../../development/style/ title="How to Write C++ code" class=md-nav__link> How to Write C++ code </a> </li> <li class=md-nav__item> <a href=../../../development/tests/ title="How to Run ClickHouse Tests" class=md-nav__link> How to Run ClickHouse Tests </a> </li> <li class=md-nav__item> <a href=../../../development/contrib/ title="Third-Party Libraries Used" class=md-nav__link> Third-Party Libraries Used </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class=md-nav__link for=nav-10> What's New </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class=md-nav__title for=nav-10> What's New </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../roadmap/ title=Roadmap class=md-nav__link> Roadmap </a> </li> <li class=md-nav__item> <a href=../../../changelog/ title=Changelog class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../../security_changelog/ title="Security Changelog" class=md-nav__link> Security Changelog </a> </li> </ul> </nav> </li> </ul> <ul id=md-extra-nav class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> رهایی: <span class=md-selector> <select id=releases-selector> <option value>آخرین</option> <option value=v20.1>v20.1</option> <option value=v19.17>v19.17</option> <option value=v19.16>v19.16</option> <option value=v19.15>v19.15</option> <option value=v19.14>v19.14</option> <option value=v19.13>v19.13</option> <option value=v19.11>v19.11</option> <option value=v19.10>v19.10</option> <option value=v19.9 selected=selected>v19.9</option> <option value=v19.8>v19.8</option> <option value=v19.7>v19.7</option> </select><span id=releases-selector-after>&nbsp;▾</span> </span> </li> <li class="md-nav__item md-nav__item--active"> <a href=../../../single/ class="md-nav__link md-nav__link--active">نسخه تک صفحه</a> </li> <li class="md-nav__item md-nav__item--active"> <a href=../../../single/clickhouse_fa.pdf class="md-nav__link md-nav__link--active">نسخه PDF</a> </li> <li class="md-nav__item md-nav__item--active"> <a href=https://github.com/ClickHouse/ClickHouse/ rel="external nofollow" target=_blank class=md-nav__link> کد منبع کلیک </a> </li> <li class="md-nav__item md-nav__item--active"> <span id=md-sidebar-flags class=md-nav__link> <a class=md-alt-lang href=../../../../en/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=English> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 60 30" preserveaspectratio=none> <clippath id=t> <path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/> </clippath> <path fill=#00247d d="M0,0 v30 h60 v-30 z"/> <path stroke=#fff stroke-width=6 d="M0,0 L60,30 M60,0 L0,30"/> <path clip-path=url(#t) stroke=#cf142b stroke-width=4 d="M0,0 L60,30 M60,0 L0,30"/> <path stroke=#fff stroke-width=10 d="M30,0 v30 M0,15 h60"/> <path stroke=#cf142b stroke-width=6 d="M30,0 v30 M0,15 h60"/> </svg> </a> <a class=md-alt-lang href=../../../../ru/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Russian> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 9 6" preserveaspectratio=none> <rect fill=#fff width=9 height=3 /> <rect fill=#d52b1e y=3 width=9 height=3 /> <rect fill=#0039a6 y=2 width=9 height=2 /> </svg> </a> <a class=md-alt-lang href=../../../../zh/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Chinese> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 30 20" preserveaspectratio=none> <defs> <path id=s fill=#ffde00 d="M0,-1 0.587785,0.809017 -0.951057,-0.309017H0.951057L-0.587785,0.809017z"/> </defs> <rect width=30 height=20 fill=#de2910 /> <use xlink:href=#s transform="translate(5,5) scale(3)"/> <use xlink:href=#s transform="translate(10,2) rotate(23.036243)"/> <use xlink:href=#s transform="translate(12,4) rotate(45.869898)"/> <use xlink:href=#s transform="translate(12,7) rotate(69.945396)"/> <use xlink:href=#s transform="translate(10,9) rotate(20.659808)"/> </svg> </a> <a class=md-alt-lang href=../../../../ja/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Japanese> <?xml version="1.0" encoding="UTF-8"?> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink width=90px height=60px viewbox="0 0 90 60" version=1.1> <g id=surface1> <rect x=0 y=0 width=90 height=60 style=fill:rgb(62.7451%,62.7451%,62.7451%);fill-opacity:1;stroke:none; /> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 0.601562 0.601562 L 89.398438 0.601562 L 89.398438 59.398438 L 0.601562 59.398438 Z M 0.601562 0.601562 "/> <path style=" stroke:none;fill-rule:nonzero;fill:rgb(74.509805%,0%,14.901961%);fill-opacity:1;" d="M 63 30 C 63 39.941406 54.941406 48 45 48 C 35.058594 48 27 39.941406 27 30 C 27 20.058594 35.058594 12 45 12 C 54.941406 12 63 20.058594 63 30 Z M 63 30 "/> </g> </svg> </a> <a class="md-alt-lang md-current-lang" href=../../../../fa/getting_started/example_datasets/nyc_taxi/ class="md-flex__ellipsis md-header-nav__title" title=Farsi> <svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewbox="0 0 630 360" preserveaspectratio=none> <rect width=630 height=360 fill=#da0000 /> <rect width=630 height=240 fill=#fff /> <rect width=630 height=120 fill=#239f40 /> <g transform=translate(8.4,100.4)> <g id=tb4> <g id=tb1 fill=none stroke=#fff stroke-width=2> <path id=tbp1 d=M0,1H26M1,10V5H9V9H17V5H12M4,9H6M26,9H21V5H29M29,0V9H37V0M33,0V9 transform=scale(1.4) /> <path id=tbp2 d=M0,7H9M10,7H19 transform=scale(2.8) /> <use xlink:href=#tbp2 y=120 /> <use xlink:href=#tbp1 y=145.2 /> </g> <g id=tb3> <use xlink:href=#tb1 x=56 /> <use xlink:href=#tb1 x=112 /> <use xlink:href=#tb1 x=168 /> </g> </g> <use xlink:href=#tb3 x=168 /> <use xlink:href=#tb4 x=392 /> </g> <g fill=#da0000 transform=matrix(45,0,0,45,315,180)> <g id=emblem_half> <path d="M-0.54815,0.83638A0.912046,0.912046 0 0,0 0.328544,-0.722384A1,1 0 0,1 -0.54815,0.83638"/> <path d="M0.618339,0.661409A0.763932,0.763932 0 0,0 0.421644,-0.741049A1,1 0 0,1 0.618339,0.661409"/> <path d="M0,1 -0.05,0 0,-0.787278A0.309995,0.309995 0 0,0 0.118034,-0.688191V-0.100406L0.077809,0.892905z"/> <path d="M-0.02,-0.85 0,-0.831217A0.14431,0.14431 0 0,0 0.252075,-0.967708A0.136408,0.136408 0 0,1 0,-0.924634"/> </g> <use xlink:href=#emblem_half transform=scale(-1,1) /> </g> </svg> </a> </span> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=toc>فهرست موضوعات</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#chtwr-ddh-hy-raw-r-import-khnym title="چطور داده های raw را import کنیم" class=md-nav__link> چطور داده های raw را import کنیم </a> </li> <li class=md-nav__item> <a href=#ntyj-br-rwy-ykh-srwr title="نتایج بر روی یک سرور" class=md-nav__link> نتایج بر روی یک سرور </a> </li> <li class=md-nav__item> <a href=#ntyj title=نتایج class=md-nav__link> نتایج </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ClickHouse/ClickHouse/edit/master/docs/fa/getting_started/example_datasets/nyc_taxi.md title="این صفحه را ویرایش کنید" class="md-icon md-content__icon" rel="external nofollow">&#xE3C9;</a> <div id=content> <div dir=rtl> <h1 id=ddh-hy-tkhsy-new-york>داده های تاکسی New York<a class=headerlink href=#ddh-hy-tkhsy-new-york title="Permanent link">&para;</a></h1> <h2 id=chtwr-ddh-hy-raw-r-import-khnym>چطور داده های raw را import کنیم<a class=headerlink href=#chtwr-ddh-hy-raw-r-import-khnym title="Permanent link">&para;</a></h2> <p>برای توضیحات بیشتر در ارتباط با دیتاست و موارد مربوط به دانلود به دو لینک <a href=https://github.com/toddwschneider/nyc-taxi-data rel="external nofollow">https://github.com/toddwschneider/nyc-taxi-data</a> و <a href=http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html rel="external nofollow">http://tech.marksblogg.com/billion-nyc-taxi-rides-redshift.html</a> مراجعه کنید.</p> <p>دانلود فایل ها حدود 277 گیگابایت داده ی غیرفشرده در قالب فایل های CSV می باشد. دانلود با استفاده ازبیش از یک کانکشن 1 Gbit نزدیک 1 ساعت طول می کشد (دانلود موازی از s3.amazonaws.com حداقل نصف کانال 1 Gbit رو جبران می کند). بعضی از فایل ها ممکن است به طول کامل دانلود نشوند. اندازه فایل ها را بررسی کنید و اگر فایلی مشکوک بود، مجددا دانلود کنید.</p> <p>بعضی از فایل ها ممکن است دارای سطرهای نامعتبر باشه. با اجرای دستورات زیر این موارد برطرف می شود:</p> </div> <div class=codehilite><pre><span></span>sed -E <span class=s1>&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-02.csv &gt; data/yellow_tripdata_2010-02.csv_
sed -E <span class=s1>&#39;/(.*,){18,}/d&#39;</span> data/yellow_tripdata_2010-03.csv &gt; data/yellow_tripdata_2010-03.csv_
mv data/yellow_tripdata_2010-02.csv_ data/yellow_tripdata_2010-02.csv
mv data/yellow_tripdata_2010-03.csv_ data/yellow_tripdata_2010-03.csv
</pre></div> <div dir=rtl> <p>سپس داده ها باید در PostgreSQL پیش پردازش شوند. این کار نقاط انتخابی چند ضلعی را ایجاد می کند (برای مطابقت با نقاط بر روی نقشه با مناطق شهر نیویورک) و تمام داده ها را با استفاده از JOIN در یک جدول flat و denormal ترکیب می کند. برای این کار شما نیاز به نصب PostgreSQL با پشتیبانی از PostGIS دارید.</p> <p>در هنگام اجرای <code>initialize_database.sh</code> مراقب باشید و به صورت دستی مجددا تمام جداول را چک کنید.</p> <p>PostgreSQL تقریبا 20 تا 30 دقیقه برای پردازش هر ماه زمان نیاز میگیرد، در مجموع حدود 48 ساعت این عملیات طول می کشد.</p> <p>از طریق دستور زیر شما می توانید تعداد سطرهای دانلود شده را دریافت کنید:</p> </div> <div class=codehilite><pre><span></span>time psql nyc-taxi-data -c &quot;SELECT count(*) FROM trips;&quot;
##    count
 1298979494
(1 row)

real    7m9.164s
</pre></div> <div dir=rtl> <p>(در یکی از پست های مقالات Mark Litwintschik این کمی بیشتر از 1.1 میلیارد سطر گزارش شده است.)</p> <p>حجم داده ها در PostgreSQL 370 گیگابایت می باشد.</p> <p>Export گیری داده ها از PostgreSQL:</p> </div> <div class=codehilite><pre><span></span><span class=k>COPY</span>
<span class=p>(</span>
    <span class=k>SELECT</span> <span class=n>trips</span><span class=p>.</span><span class=n>id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>vendor_id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_datetime</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_datetime</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>store_and_fwd_flag</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>rate_code_id</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_longitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup_latitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_longitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_latitude</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>passenger_count</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>trip_distance</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>fare_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>extra</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>mta_tax</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>tip_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>tolls_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>ehail_fee</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>improvement_surcharge</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>total_amount</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>payment_type</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>trip_type</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>pickup</span><span class=p>,</span>
           <span class=n>trips</span><span class=p>.</span><span class=n>dropoff</span><span class=p>,</span>

           <span class=n>cab_types</span><span class=p>.</span><span class=k>type</span> <span class=n>cab_type</span><span class=p>,</span>

           <span class=n>weather</span><span class=p>.</span><span class=n>precipitation_tenths_of_mm</span> <span class=n>rain</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>snow_depth_mm</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>snowfall_mm</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>max_temperature_tenths_degrees_celsius</span> <span class=n>max_temp</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>min_temperature_tenths_degrees_celsius</span> <span class=n>min_temp</span><span class=p>,</span>
           <span class=n>weather</span><span class=p>.</span><span class=n>average_wind_speed_tenths_of_meters_per_second</span> <span class=n>wind</span><span class=p>,</span>

           <span class=n>pick_up</span><span class=p>.</span><span class=n>gid</span> <span class=n>pickup_nyct2010_gid</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ctlabel</span> <span class=n>pickup_ctlabel</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>borocode</span> <span class=n>pickup_borocode</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>boroname</span> <span class=n>pickup_boroname</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ct2010</span> <span class=n>pickup_ct2010</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>boroct2010</span> <span class=n>pickup_boroct2010</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>cdeligibil</span> <span class=n>pickup_cdeligibil</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ntacode</span> <span class=n>pickup_ntacode</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>ntaname</span> <span class=n>pickup_ntaname</span><span class=p>,</span>
           <span class=n>pick_up</span><span class=p>.</span><span class=n>puma</span> <span class=n>pickup_puma</span><span class=p>,</span>

           <span class=n>drop_off</span><span class=p>.</span><span class=n>gid</span> <span class=n>dropoff_nyct2010_gid</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ctlabel</span> <span class=n>dropoff_ctlabel</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>borocode</span> <span class=n>dropoff_borocode</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>boroname</span> <span class=n>dropoff_boroname</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ct2010</span> <span class=n>dropoff_ct2010</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>boroct2010</span> <span class=n>dropoff_boroct2010</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>cdeligibil</span> <span class=n>dropoff_cdeligibil</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ntacode</span> <span class=n>dropoff_ntacode</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>ntaname</span> <span class=n>dropoff_ntaname</span><span class=p>,</span>
           <span class=n>drop_off</span><span class=p>.</span><span class=n>puma</span> <span class=n>dropoff_puma</span>
    <span class=k>FROM</span> <span class=n>trips</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>cab_types</span>
        <span class=k>ON</span> <span class=n>trips</span><span class=p>.</span><span class=n>cab_type_id</span> <span class=o>=</span> <span class=n>cab_types</span><span class=p>.</span><span class=n>id</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>central_park_weather_observations_raw</span> <span class=n>weather</span>
        <span class=k>ON</span> <span class=n>weather</span><span class=p>.</span><span class=nb>date</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>pickup_datetime</span><span class=p>::</span><span class=nb>date</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>nyct2010</span> <span class=n>pick_up</span>
        <span class=k>ON</span> <span class=n>pick_up</span><span class=p>.</span><span class=n>gid</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>pickup_nyct2010_gid</span>
    <span class=k>LEFT</span> <span class=k>JOIN</span> <span class=n>nyct2010</span> <span class=n>drop_off</span>
        <span class=k>ON</span> <span class=n>drop_off</span><span class=p>.</span><span class=n>gid</span> <span class=o>=</span> <span class=n>trips</span><span class=p>.</span><span class=n>dropoff_nyct2010_gid</span>
<span class=p>)</span> <span class=k>TO</span> <span class=s1>&#39;/opt/milovidov/nyc-taxi-data/trips.tsv&#39;</span><span class=p>;</span>
</pre></div> <div dir=rtl> <p>snapshot از داده ها با سرعت 50 مگابایت در ثانیه انجام می شود. در هنگام ایجاد snapshot، PostgreSQL داده ها را با سرعت 28 مگابایت در ثانیه از روی می خواند. این کار حدود 5 ساعت زمان میبرد. نتیجه کار فایل TSV با حجم 590612904969 بایت می باشد.</p> <p>ساخت جدول temporary در ClickHouse:</p> </div> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips</span>
<span class=p>(</span>
<span class=n>trip_id</span>                 <span class=n>UInt32</span><span class=p>,</span>
<span class=n>vendor_id</span>               <span class=n>String</span><span class=p>,</span>
<span class=n>pickup_datetime</span>         <span class=n>DateTime</span><span class=p>,</span>
<span class=n>dropoff_datetime</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>DateTime</span><span class=p>),</span>
<span class=n>store_and_fwd_flag</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>)),</span>
<span class=n>rate_code_id</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_longitude</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>pickup_latitude</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>dropoff_longitude</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>dropoff_latitude</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>passenger_count</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>trip_distance</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>Float64</span><span class=p>),</span>
<span class=n>fare_amount</span>             <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>extra</span>                   <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>mta_tax</span>                 <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>tip_amount</span>              <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>tolls_amount</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>ehail_fee</span>               <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>improvement_surcharge</span>   <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>total_amount</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>Float32</span><span class=p>),</span>
<span class=n>payment_type</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>trip_type</span>               <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup</span>                  <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff</span>                 <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>cab_type</span>                <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>precipitation</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>snow_depth</span>              <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>snowfall</span>                <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>max_temperature</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>min_temperature</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>average_wind_speed</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_nyct2010_gid</span>     <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_ctlabel</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_borocode</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>pickup_boroname</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_ct2010</span>           <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_boroct2010</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_cdeligibil</span>       <span class=k>Nullable</span><span class=p>(</span><span class=n>FixedString</span><span class=p>(</span><span class=mi>1</span><span class=p>)),</span>
<span class=n>pickup_ntacode</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_ntaname</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>pickup_puma</span>             <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_nyct2010_gid</span>    <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>dropoff_ctlabel</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_borocode</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>UInt8</span><span class=p>),</span>
<span class=n>dropoff_boroname</span>        <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ct2010</span>          <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_boroct2010</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_cdeligibil</span>      <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ntacode</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_ntaname</span>         <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>),</span>
<span class=n>dropoff_puma</span>            <span class=k>Nullable</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
</pre></div> <div dir=rtl> <p>برای تبدیل فیلد ها به data type های صحیح تر و در صورت امکان، حذف NULL ها لازم است.</p> </div> <div class=codehilite><pre><span></span>time clickhouse-client --query=&quot;INSERT INTO trips FORMAT TabSeparated&quot; &lt; trips.tsv

real    75m56.214s
</pre></div> <div dir=rtl> <p>داده ها با سرعت 112 تا 140 مگابیت در ثانیه خوانده می شوند. load کردن داده ها در جدول Log Type در یک Stream، 76 دقیقه زمان کشید. این داده ها در این جدول 142 گیگابایت فضا اشغال می کنند.</p> <p>(import کردن داده ها به صورت مستقیم از Postgres با استفاده از <code>COPY ... TO PROGRAM</code> هم امکان پذیر است.)</p> <p>متاسفانه، تمام فیلد های مرتبط با آب و هوا (precipitation...average_wind_speed) با Null پر شدند. به خاطر همین، ما از دیتاست نهایی اینها رو حذف کردیم.</p> <p>برای شروع، ما یک جدول در یک سرور ایجاد کردیم. بعدا ما یک جدول توزیع شده می سازیم.</p> <p>یک جدول خلاصه ایجاد و پر کنید:</p> </div> <div class=codehilite><pre><span></span>CREATE TABLE trips_mergetree
ENGINE = MergeTree(pickup_date, pickup_datetime, 8192)
AS SELECT

trip_id,
CAST(vendor_id AS Enum8(&#39;1&#39; = 1, &#39;2&#39; = 2, &#39;CMT&#39; = 3, &#39;VTS&#39; = 4, &#39;DDS&#39; = 5, &#39;B02512&#39; = 10, &#39;B02598&#39; = 11, &#39;B02617&#39; = 12, &#39;B02682&#39; = 13, &#39;B02764&#39; = 14)) AS vendor_id,
toDate(pickup_datetime) AS pickup_date,
ifNull(pickup_datetime, toDateTime(0)) AS pickup_datetime,
toDate(dropoff_datetime) AS dropoff_date,
ifNull(dropoff_datetime, toDateTime(0)) AS dropoff_datetime,
assumeNotNull(store_and_fwd_flag) IN (&#39;Y&#39;, &#39;1&#39;, &#39;2&#39;) AS store_and_fwd_flag,
assumeNotNull(rate_code_id) AS rate_code_id,
assumeNotNull(pickup_longitude) AS pickup_longitude,
assumeNotNull(pickup_latitude) AS pickup_latitude,
assumeNotNull(dropoff_longitude) AS dropoff_longitude,
assumeNotNull(dropoff_latitude) AS dropoff_latitude,
assumeNotNull(passenger_count) AS passenger_count,
assumeNotNull(trip_distance) AS trip_distance,
assumeNotNull(fare_amount) AS fare_amount,
assumeNotNull(extra) AS extra,
assumeNotNull(mta_tax) AS mta_tax,
assumeNotNull(tip_amount) AS tip_amount,
assumeNotNull(tolls_amount) AS tolls_amount,
assumeNotNull(ehail_fee) AS ehail_fee,
assumeNotNull(improvement_surcharge) AS improvement_surcharge,
assumeNotNull(total_amount) AS total_amount,
CAST((assumeNotNull(payment_type) AS pt) IN (&#39;CSH&#39;, &#39;CASH&#39;, &#39;Cash&#39;, &#39;CAS&#39;, &#39;Cas&#39;, &#39;1&#39;) ? &#39;CSH&#39; : (pt IN (&#39;CRD&#39;, &#39;Credit&#39;, &#39;Cre&#39;, &#39;CRE&#39;, &#39;CREDIT&#39;, &#39;2&#39;) ? &#39;CRE&#39; : (pt IN (&#39;NOC&#39;, &#39;No Charge&#39;, &#39;No&#39;, &#39;3&#39;) ? &#39;NOC&#39; : (pt IN (&#39;DIS&#39;, &#39;Dispute&#39;, &#39;Dis&#39;, &#39;4&#39;) ? &#39;DIS&#39; : &#39;UNK&#39;))) AS Enum8(&#39;CSH&#39; = 1, &#39;CRE&#39; = 2, &#39;UNK&#39; = 0, &#39;NOC&#39; = 3, &#39;DIS&#39; = 4)) AS payment_type_,
assumeNotNull(trip_type) AS trip_type,
ifNull(toFixedString(unhex(pickup), 25), toFixedString(&#39;&#39;, 25)) AS pickup,
ifNull(toFixedString(unhex(dropoff), 25), toFixedString(&#39;&#39;, 25)) AS dropoff,
CAST(assumeNotNull(cab_type) AS Enum8(&#39;yellow&#39; = 1, &#39;green&#39; = 2, &#39;uber&#39; = 3)) AS cab_type,

assumeNotNull(pickup_nyct2010_gid) AS pickup_nyct2010_gid,
toFloat32(ifNull(pickup_ctlabel, &#39;0&#39;)) AS pickup_ctlabel,
assumeNotNull(pickup_borocode) AS pickup_borocode,
CAST(assumeNotNull(pickup_boroname) AS Enum8(&#39;Manhattan&#39; = 1, &#39;Queens&#39; = 4, &#39;Brooklyn&#39; = 3, &#39;&#39; = 0, &#39;Bronx&#39; = 2, &#39;Staten Island&#39; = 5)) AS pickup_boroname,
toFixedString(ifNull(pickup_ct2010, &#39;000000&#39;), 6) AS pickup_ct2010,
toFixedString(ifNull(pickup_boroct2010, &#39;0000000&#39;), 7) AS pickup_boroct2010,
CAST(assumeNotNull(ifNull(pickup_cdeligibil, &#39; &#39;)) AS Enum8(&#39; &#39; = 0, &#39;E&#39; = 1, &#39;I&#39; = 2)) AS pickup_cdeligibil,
toFixedString(ifNull(pickup_ntacode, &#39;0000&#39;), 4) AS pickup_ntacode,

CAST(assumeNotNull(pickup_ntaname) AS Enum16(&#39;&#39; = 0, &#39;Airport&#39; = 1, &#39;Allerton-Pelham Gardens&#39; = 2, &#39;Annadale-Huguenot-Prince\&#39;s Bay-Eltingville&#39; = 3, &#39;Arden Heights&#39; = 4, &#39;Astoria&#39; = 5, &#39;Auburndale&#39; = 6, &#39;Baisley Park&#39; = 7, &#39;Bath Beach&#39; = 8, &#39;Battery Park City-Lower Manhattan&#39; = 9, &#39;Bay Ridge&#39; = 10, &#39;Bayside-Bayside Hills&#39; = 11, &#39;Bedford&#39; = 12, &#39;Bedford Park-Fordham North&#39; = 13, &#39;Bellerose&#39; = 14, &#39;Belmont&#39; = 15, &#39;Bensonhurst East&#39; = 16, &#39;Bensonhurst West&#39; = 17, &#39;Borough Park&#39; = 18, &#39;Breezy Point-Belle Harbor-Rockaway Park-Broad Channel&#39; = 19, &#39;Briarwood-Jamaica Hills&#39; = 20, &#39;Brighton Beach&#39; = 21, &#39;Bronxdale&#39; = 22, &#39;Brooklyn Heights-Cobble Hill&#39; = 23, &#39;Brownsville&#39; = 24, &#39;Bushwick North&#39; = 25, &#39;Bushwick South&#39; = 26, &#39;Cambria Heights&#39; = 27, &#39;Canarsie&#39; = 28, &#39;Carroll Gardens-Columbia Street-Red Hook&#39; = 29, &#39;Central Harlem North-Polo Grounds&#39; = 30, &#39;Central Harlem South&#39; = 31, &#39;Charleston-Richmond Valley-Tottenville&#39; = 32, &#39;Chinatown&#39; = 33, &#39;Claremont-Bathgate&#39; = 34, &#39;Clinton&#39; = 35, &#39;Clinton Hill&#39; = 36, &#39;Co-op City&#39; = 37, &#39;College Point&#39; = 38, &#39;Corona&#39; = 39, &#39;Crotona Park East&#39; = 40, &#39;Crown Heights North&#39; = 41, &#39;Crown Heights South&#39; = 42, &#39;Cypress Hills-City Line&#39; = 43, &#39;DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill&#39; = 44, &#39;Douglas Manor-Douglaston-Little Neck&#39; = 45, &#39;Dyker Heights&#39; = 46, &#39;East Concourse-Concourse Village&#39; = 47, &#39;East Elmhurst&#39; = 48, &#39;East Flatbush-Farragut&#39; = 49, &#39;East Flushing&#39; = 50, &#39;East Harlem North&#39; = 51, &#39;East Harlem South&#39; = 52, &#39;East New York&#39; = 53, &#39;East New York (Pennsylvania Ave)&#39; = 54, &#39;East Tremont&#39; = 55, &#39;East Village&#39; = 56, &#39;East Williamsburg&#39; = 57, &#39;Eastchester-Edenwald-Baychester&#39; = 58, &#39;Elmhurst&#39; = 59, &#39;Elmhurst-Maspeth&#39; = 60, &#39;Erasmus&#39; = 61, &#39;Far Rockaway-Bayswater&#39; = 62, &#39;Flatbush&#39; = 63, &#39;Flatlands&#39; = 64, &#39;Flushing&#39; = 65, &#39;Fordham South&#39; = 66, &#39;Forest Hills&#39; = 67, &#39;Fort Greene&#39; = 68, &#39;Fresh Meadows-Utopia&#39; = 69, &#39;Ft. Totten-Bay Terrace-Clearview&#39; = 70, &#39;Georgetown-Marine Park-Bergen Beach-Mill Basin&#39; = 71, &#39;Glen Oaks-Floral Park-New Hyde Park&#39; = 72, &#39;Glendale&#39; = 73, &#39;Gramercy&#39; = 74, &#39;Grasmere-Arrochar-Ft. Wadsworth&#39; = 75, &#39;Gravesend&#39; = 76, &#39;Great Kills&#39; = 77, &#39;Greenpoint&#39; = 78, &#39;Grymes Hill-Clifton-Fox Hills&#39; = 79, &#39;Hamilton Heights&#39; = 80, &#39;Hammels-Arverne-Edgemere&#39; = 81, &#39;Highbridge&#39; = 82, &#39;Hollis&#39; = 83, &#39;Homecrest&#39; = 84, &#39;Hudson Yards-Chelsea-Flatiron-Union Square&#39; = 85, &#39;Hunters Point-Sunnyside-West Maspeth&#39; = 86, &#39;Hunts Point&#39; = 87, &#39;Jackson Heights&#39; = 88, &#39;Jamaica&#39; = 89, &#39;Jamaica Estates-Holliswood&#39; = 90, &#39;Kensington-Ocean Parkway&#39; = 91, &#39;Kew Gardens&#39; = 92, &#39;Kew Gardens Hills&#39; = 93, &#39;Kingsbridge Heights&#39; = 94, &#39;Laurelton&#39; = 95, &#39;Lenox Hill-Roosevelt Island&#39; = 96, &#39;Lincoln Square&#39; = 97, &#39;Lindenwood-Howard Beach&#39; = 98, &#39;Longwood&#39; = 99, &#39;Lower East Side&#39; = 100, &#39;Madison&#39; = 101, &#39;Manhattanville&#39; = 102, &#39;Marble Hill-Inwood&#39; = 103, &#39;Mariner\&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39; = 104, &#39;Maspeth&#39; = 105, &#39;Melrose South-Mott Haven North&#39; = 106, &#39;Middle Village&#39; = 107, &#39;Midtown-Midtown South&#39; = 108, &#39;Midwood&#39; = 109, &#39;Morningside Heights&#39; = 110, &#39;Morrisania-Melrose&#39; = 111, &#39;Mott Haven-Port Morris&#39; = 112, &#39;Mount Hope&#39; = 113, &#39;Murray Hill&#39; = 114, &#39;Murray Hill-Kips Bay&#39; = 115, &#39;New Brighton-Silver Lake&#39; = 116, &#39;New Dorp-Midland Beach&#39; = 117, &#39;New Springville-Bloomfield-Travis&#39; = 118, &#39;North Corona&#39; = 119, &#39;North Riverdale-Fieldston-Riverdale&#39; = 120, &#39;North Side-South Side&#39; = 121, &#39;Norwood&#39; = 122, &#39;Oakland Gardens&#39; = 123, &#39;Oakwood-Oakwood Beach&#39; = 124, &#39;Ocean Hill&#39; = 125, &#39;Ocean Parkway South&#39; = 126, &#39;Old Astoria&#39; = 127, &#39;Old Town-Dongan Hills-South Beach&#39; = 128, &#39;Ozone Park&#39; = 129, &#39;Park Slope-Gowanus&#39; = 130, &#39;Parkchester&#39; = 131, &#39;Pelham Bay-Country Club-City Island&#39; = 132, &#39;Pelham Parkway&#39; = 133, &#39;Pomonok-Flushing Heights-Hillcrest&#39; = 134, &#39;Port Richmond&#39; = 135, &#39;Prospect Heights&#39; = 136, &#39;Prospect Lefferts Gardens-Wingate&#39; = 137, &#39;Queens Village&#39; = 138, &#39;Queensboro Hill&#39; = 139, &#39;Queensbridge-Ravenswood-Long Island City&#39; = 140, &#39;Rego Park&#39; = 141, &#39;Richmond Hill&#39; = 142, &#39;Ridgewood&#39; = 143, &#39;Rikers Island&#39; = 144, &#39;Rosedale&#39; = 145, &#39;Rossville-Woodrow&#39; = 146, &#39;Rugby-Remsen Village&#39; = 147, &#39;Schuylerville-Throgs Neck-Edgewater Park&#39; = 148, &#39;Seagate-Coney Island&#39; = 149, &#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39; = 150, &#39;SoHo-TriBeCa-Civic Center-Little Italy&#39; = 151, &#39;Soundview-Bruckner&#39; = 152, &#39;Soundview-Castle Hill-Clason Point-Harding Park&#39; = 153, &#39;South Jamaica&#39; = 154, &#39;South Ozone Park&#39; = 155, &#39;Springfield Gardens North&#39; = 156, &#39;Springfield Gardens South-Brookville&#39; = 157, &#39;Spuyten Duyvil-Kingsbridge&#39; = 158, &#39;St. Albans&#39; = 159, &#39;Stapleton-Rosebank&#39; = 160, &#39;Starrett City&#39; = 161, &#39;Steinway&#39; = 162, &#39;Stuyvesant Heights&#39; = 163, &#39;Stuyvesant Town-Cooper Village&#39; = 164, &#39;Sunset Park East&#39; = 165, &#39;Sunset Park West&#39; = 166, &#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39; = 167, &#39;Turtle Bay-East Midtown&#39; = 168, &#39;University Heights-Morris Heights&#39; = 169, &#39;Upper East Side-Carnegie Hill&#39; = 170, &#39;Upper West Side&#39; = 171, &#39;Van Cortlandt Village&#39; = 172, &#39;Van Nest-Morris Park-Westchester Square&#39; = 173, &#39;Washington Heights North&#39; = 174, &#39;Washington Heights South&#39; = 175, &#39;West Brighton&#39; = 176, &#39;West Concourse&#39; = 177, &#39;West Farms-Bronx River&#39; = 178, &#39;West New Brighton-New Brighton-St. George&#39; = 179, &#39;West Village&#39; = 180, &#39;Westchester-Unionport&#39; = 181, &#39;Westerleigh&#39; = 182, &#39;Whitestone&#39; = 183, &#39;Williamsbridge-Olinville&#39; = 184, &#39;Williamsburg&#39; = 185, &#39;Windsor Terrace&#39; = 186, &#39;Woodhaven&#39; = 187, &#39;Woodlawn-Wakefield&#39; = 188, &#39;Woodside&#39; = 189, &#39;Yorkville&#39; = 190, &#39;park-cemetery-etc-Bronx&#39; = 191, &#39;park-cemetery-etc-Brooklyn&#39; = 192, &#39;park-cemetery-etc-Manhattan&#39; = 193, &#39;park-cemetery-etc-Queens&#39; = 194, &#39;park-cemetery-etc-Staten Island&#39; = 195)) AS pickup_ntaname,

toUInt16(ifNull(pickup_puma, &#39;0&#39;)) AS pickup_puma,

assumeNotNull(dropoff_nyct2010_gid) AS dropoff_nyct2010_gid,
toFloat32(ifNull(dropoff_ctlabel, &#39;0&#39;)) AS dropoff_ctlabel,
assumeNotNull(dropoff_borocode) AS dropoff_borocode,
CAST(assumeNotNull(dropoff_boroname) AS Enum8(&#39;Manhattan&#39; = 1, &#39;Queens&#39; = 4, &#39;Brooklyn&#39; = 3, &#39;&#39; = 0, &#39;Bronx&#39; = 2, &#39;Staten Island&#39; = 5)) AS dropoff_boroname,
toFixedString(ifNull(dropoff_ct2010, &#39;000000&#39;), 6) AS dropoff_ct2010,
toFixedString(ifNull(dropoff_boroct2010, &#39;0000000&#39;), 7) AS dropoff_boroct2010,
CAST(assumeNotNull(ifNull(dropoff_cdeligibil, &#39; &#39;)) AS Enum8(&#39; &#39; = 0, &#39;E&#39; = 1, &#39;I&#39; = 2)) AS dropoff_cdeligibil,
toFixedString(ifNull(dropoff_ntacode, &#39;0000&#39;), 4) AS dropoff_ntacode,

CAST(assumeNotNull(dropoff_ntaname) AS Enum16(&#39;&#39; = 0, &#39;Airport&#39; = 1, &#39;Allerton-Pelham Gardens&#39; = 2, &#39;Annadale-Huguenot-Prince\&#39;s Bay-Eltingville&#39; = 3, &#39;Arden Heights&#39; = 4, &#39;Astoria&#39; = 5, &#39;Auburndale&#39; = 6, &#39;Baisley Park&#39; = 7, &#39;Bath Beach&#39; = 8, &#39;Battery Park City-Lower Manhattan&#39; = 9, &#39;Bay Ridge&#39; = 10, &#39;Bayside-Bayside Hills&#39; = 11, &#39;Bedford&#39; = 12, &#39;Bedford Park-Fordham North&#39; = 13, &#39;Bellerose&#39; = 14, &#39;Belmont&#39; = 15, &#39;Bensonhurst East&#39; = 16, &#39;Bensonhurst West&#39; = 17, &#39;Borough Park&#39; = 18, &#39;Breezy Point-Belle Harbor-Rockaway Park-Broad Channel&#39; = 19, &#39;Briarwood-Jamaica Hills&#39; = 20, &#39;Brighton Beach&#39; = 21, &#39;Bronxdale&#39; = 22, &#39;Brooklyn Heights-Cobble Hill&#39; = 23, &#39;Brownsville&#39; = 24, &#39;Bushwick North&#39; = 25, &#39;Bushwick South&#39; = 26, &#39;Cambria Heights&#39; = 27, &#39;Canarsie&#39; = 28, &#39;Carroll Gardens-Columbia Street-Red Hook&#39; = 29, &#39;Central Harlem North-Polo Grounds&#39; = 30, &#39;Central Harlem South&#39; = 31, &#39;Charleston-Richmond Valley-Tottenville&#39; = 32, &#39;Chinatown&#39; = 33, &#39;Claremont-Bathgate&#39; = 34, &#39;Clinton&#39; = 35, &#39;Clinton Hill&#39; = 36, &#39;Co-op City&#39; = 37, &#39;College Point&#39; = 38, &#39;Corona&#39; = 39, &#39;Crotona Park East&#39; = 40, &#39;Crown Heights North&#39; = 41, &#39;Crown Heights South&#39; = 42, &#39;Cypress Hills-City Line&#39; = 43, &#39;DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill&#39; = 44, &#39;Douglas Manor-Douglaston-Little Neck&#39; = 45, &#39;Dyker Heights&#39; = 46, &#39;East Concourse-Concourse Village&#39; = 47, &#39;East Elmhurst&#39; = 48, &#39;East Flatbush-Farragut&#39; = 49, &#39;East Flushing&#39; = 50, &#39;East Harlem North&#39; = 51, &#39;East Harlem South&#39; = 52, &#39;East New York&#39; = 53, &#39;East New York (Pennsylvania Ave)&#39; = 54, &#39;East Tremont&#39; = 55, &#39;East Village&#39; = 56, &#39;East Williamsburg&#39; = 57, &#39;Eastchester-Edenwald-Baychester&#39; = 58, &#39;Elmhurst&#39; = 59, &#39;Elmhurst-Maspeth&#39; = 60, &#39;Erasmus&#39; = 61, &#39;Far Rockaway-Bayswater&#39; = 62, &#39;Flatbush&#39; = 63, &#39;Flatlands&#39; = 64, &#39;Flushing&#39; = 65, &#39;Fordham South&#39; = 66, &#39;Forest Hills&#39; = 67, &#39;Fort Greene&#39; = 68, &#39;Fresh Meadows-Utopia&#39; = 69, &#39;Ft. Totten-Bay Terrace-Clearview&#39; = 70, &#39;Georgetown-Marine Park-Bergen Beach-Mill Basin&#39; = 71, &#39;Glen Oaks-Floral Park-New Hyde Park&#39; = 72, &#39;Glendale&#39; = 73, &#39;Gramercy&#39; = 74, &#39;Grasmere-Arrochar-Ft. Wadsworth&#39; = 75, &#39;Gravesend&#39; = 76, &#39;Great Kills&#39; = 77, &#39;Greenpoint&#39; = 78, &#39;Grymes Hill-Clifton-Fox Hills&#39; = 79, &#39;Hamilton Heights&#39; = 80, &#39;Hammels-Arverne-Edgemere&#39; = 81, &#39;Highbridge&#39; = 82, &#39;Hollis&#39; = 83, &#39;Homecrest&#39; = 84, &#39;Hudson Yards-Chelsea-Flatiron-Union Square&#39; = 85, &#39;Hunters Point-Sunnyside-West Maspeth&#39; = 86, &#39;Hunts Point&#39; = 87, &#39;Jackson Heights&#39; = 88, &#39;Jamaica&#39; = 89, &#39;Jamaica Estates-Holliswood&#39; = 90, &#39;Kensington-Ocean Parkway&#39; = 91, &#39;Kew Gardens&#39; = 92, &#39;Kew Gardens Hills&#39; = 93, &#39;Kingsbridge Heights&#39; = 94, &#39;Laurelton&#39; = 95, &#39;Lenox Hill-Roosevelt Island&#39; = 96, &#39;Lincoln Square&#39; = 97, &#39;Lindenwood-Howard Beach&#39; = 98, &#39;Longwood&#39; = 99, &#39;Lower East Side&#39; = 100, &#39;Madison&#39; = 101, &#39;Manhattanville&#39; = 102, &#39;Marble Hill-Inwood&#39; = 103, &#39;Mariner\&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39; = 104, &#39;Maspeth&#39; = 105, &#39;Melrose South-Mott Haven North&#39; = 106, &#39;Middle Village&#39; = 107, &#39;Midtown-Midtown South&#39; = 108, &#39;Midwood&#39; = 109, &#39;Morningside Heights&#39; = 110, &#39;Morrisania-Melrose&#39; = 111, &#39;Mott Haven-Port Morris&#39; = 112, &#39;Mount Hope&#39; = 113, &#39;Murray Hill&#39; = 114, &#39;Murray Hill-Kips Bay&#39; = 115, &#39;New Brighton-Silver Lake&#39; = 116, &#39;New Dorp-Midland Beach&#39; = 117, &#39;New Springville-Bloomfield-Travis&#39; = 118, &#39;North Corona&#39; = 119, &#39;North Riverdale-Fieldston-Riverdale&#39; = 120, &#39;North Side-South Side&#39; = 121, &#39;Norwood&#39; = 122, &#39;Oakland Gardens&#39; = 123, &#39;Oakwood-Oakwood Beach&#39; = 124, &#39;Ocean Hill&#39; = 125, &#39;Ocean Parkway South&#39; = 126, &#39;Old Astoria&#39; = 127, &#39;Old Town-Dongan Hills-South Beach&#39; = 128, &#39;Ozone Park&#39; = 129, &#39;Park Slope-Gowanus&#39; = 130, &#39;Parkchester&#39; = 131, &#39;Pelham Bay-Country Club-City Island&#39; = 132, &#39;Pelham Parkway&#39; = 133, &#39;Pomonok-Flushing Heights-Hillcrest&#39; = 134, &#39;Port Richmond&#39; = 135, &#39;Prospect Heights&#39; = 136, &#39;Prospect Lefferts Gardens-Wingate&#39; = 137, &#39;Queens Village&#39; = 138, &#39;Queensboro Hill&#39; = 139, &#39;Queensbridge-Ravenswood-Long Island City&#39; = 140, &#39;Rego Park&#39; = 141, &#39;Richmond Hill&#39; = 142, &#39;Ridgewood&#39; = 143, &#39;Rikers Island&#39; = 144, &#39;Rosedale&#39; = 145, &#39;Rossville-Woodrow&#39; = 146, &#39;Rugby-Remsen Village&#39; = 147, &#39;Schuylerville-Throgs Neck-Edgewater Park&#39; = 148, &#39;Seagate-Coney Island&#39; = 149, &#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39; = 150, &#39;SoHo-TriBeCa-Civic Center-Little Italy&#39; = 151, &#39;Soundview-Bruckner&#39; = 152, &#39;Soundview-Castle Hill-Clason Point-Harding Park&#39; = 153, &#39;South Jamaica&#39; = 154, &#39;South Ozone Park&#39; = 155, &#39;Springfield Gardens North&#39; = 156, &#39;Springfield Gardens South-Brookville&#39; = 157, &#39;Spuyten Duyvil-Kingsbridge&#39; = 158, &#39;St. Albans&#39; = 159, &#39;Stapleton-Rosebank&#39; = 160, &#39;Starrett City&#39; = 161, &#39;Steinway&#39; = 162, &#39;Stuyvesant Heights&#39; = 163, &#39;Stuyvesant Town-Cooper Village&#39; = 164, &#39;Sunset Park East&#39; = 165, &#39;Sunset Park West&#39; = 166, &#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39; = 167, &#39;Turtle Bay-East Midtown&#39; = 168, &#39;University Heights-Morris Heights&#39; = 169, &#39;Upper East Side-Carnegie Hill&#39; = 170, &#39;Upper West Side&#39; = 171, &#39;Van Cortlandt Village&#39; = 172, &#39;Van Nest-Morris Park-Westchester Square&#39; = 173, &#39;Washington Heights North&#39; = 174, &#39;Washington Heights South&#39; = 175, &#39;West Brighton&#39; = 176, &#39;West Concourse&#39; = 177, &#39;West Farms-Bronx River&#39; = 178, &#39;West New Brighton-New Brighton-St. George&#39; = 179, &#39;West Village&#39; = 180, &#39;Westchester-Unionport&#39; = 181, &#39;Westerleigh&#39; = 182, &#39;Whitestone&#39; = 183, &#39;Williamsbridge-Olinville&#39; = 184, &#39;Williamsburg&#39; = 185, &#39;Windsor Terrace&#39; = 186, &#39;Woodhaven&#39; = 187, &#39;Woodlawn-Wakefield&#39; = 188, &#39;Woodside&#39; = 189, &#39;Yorkville&#39; = 190, &#39;park-cemetery-etc-Bronx&#39; = 191, &#39;park-cemetery-etc-Brooklyn&#39; = 192, &#39;park-cemetery-etc-Manhattan&#39; = 193, &#39;park-cemetery-etc-Queens&#39; = 194, &#39;park-cemetery-etc-Staten Island&#39; = 195)) AS dropoff_ntaname,

toUInt16(ifNull(dropoff_puma, &#39;0&#39;)) AS dropoff_puma

FROM trips
</pre></div> <div dir=rtl> <p>این کار با سرعت 428 هزار رکورد در ثانیه و 3030 ثانیه طول خواهد کشید. برای load سریعتر، شما می توانید یک جدول با موتور <code>Log</code> به جای <code>MergeTree</code> بسازید. در این مورد، دانلود سریعتر از 200 ثانیه کار می کند.</p> <p>این جدول 126 گیابایت فضا بر روی دیسک اشغال می کند.</p> </div> <div class=codehilite><pre><span></span>:) SELECT formatReadableSize(sum(bytes)) FROM system.parts WHERE table = &#39;trips_mergetree&#39; AND active

SELECT formatReadableSize(sum(bytes))
FROM system.parts
WHERE (table = &#39;trips_mergetree&#39;) AND active

┌─formatReadableSize(sum(bytes))─┐
│ 126.18 GiB                     │
└────────────────────────────────┘
</pre></div> <div dir=rtl> <p>در میان چیزهای دیگر، شما می تونید از دستور OPTIMIZE بر روی MergeTree استفاده کنید. اما از آنجایی که بدون این دستور همه چیز خوب است، اجرای این دستور ضروری نیست..</p> <h2 id=ntyj-br-rwy-ykh-srwr>نتایج بر روی یک سرور<a class=headerlink href=#ntyj-br-rwy-ykh-srwr title="Permanent link">&para;</a></h2> </div> <p>Q1:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>cab_type</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>cab_type</span>
</pre></div> <p>0.490 seconds.</p> <p>Q2:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>avg</span><span class=p>(</span><span class=n>total_amount</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span>
</pre></div> <p>1.224 seconds.</p> <p>Q3:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=n>toYear</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>)</span> <span class=k>AS</span> <span class=k>year</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>year</span>
</pre></div> <p>2.104 seconds.</p> <p>Q4:</p> <div class=codehilite><pre><span></span><span class=k>SELECT</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=n>toYear</span><span class=p>(</span><span class=n>pickup_date</span><span class=p>)</span> <span class=k>AS</span> <span class=k>year</span><span class=p>,</span> <span class=n>round</span><span class=p>(</span><span class=n>trip_distance</span><span class=p>)</span> <span class=k>AS</span> <span class=n>distance</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>trips_mergetree</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>passenger_count</span><span class=p>,</span> <span class=k>year</span><span class=p>,</span> <span class=n>distance</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=k>year</span><span class=p>,</span> <span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>DESC</span>
</pre></div> <p>3.593 seconds.</p> <div dir=rtl> <p>کانفیگ سرور به این صورت بود:</p> <p>Two Intel(R) Xeon(R) CPU E5-2650 v2 @ 2.60GHz, 16 physical kernels total, 128 GiB RAM, 8x6 TB HD on hardware RAID-5</p> <p>زمان اجرا query ها از زمان دومین اجرا بهتر می شود، چون query ها داده ها رو از فایل system cache می خوانند. در ادامه cache دیگری رخ نمیدهد: داده ها در هر اجرا خوانده و پردازش شده اند.</p> <p>ساخت جداول در در سه سرور:</p> <p>در هر سرور دستور زیر را اجرا کنید:</p> </div> <div class=codehilite><pre><span></span>CREATE TABLE default.trips_mergetree_third ( trip_id UInt32, vendor_id Enum8(&#39;1&#39; = 1, &#39;2&#39; = 2, &#39;CMT&#39; = 3, &#39;VTS&#39; = 4, &#39;DDS&#39; = 5, &#39;B02512&#39; = 10, &#39;B02598&#39; = 11, &#39;B02617&#39; = 12, &#39;B02682&#39; = 13, &#39;B02764&#39; = 14), pickup_date Date, pickup_datetime DateTime, dropoff_date Date, dropoff_datetime DateTime, store_and_fwd_flag UInt8, rate_code_id UInt8, pickup_longitude Float64, pickup_latitude Float64, dropoff_longitude Float64, dropoff_latitude Float64, passenger_count UInt8, trip_distance Float64, fare_amount Float32, extra Float32, mta_tax Float32, tip_amount Float32, tolls_amount Float32, ehail_fee Float32, improvement_surcharge Float32, total_amount Float32, payment_type_ Enum8(&#39;UNK&#39; = 0, &#39;CSH&#39; = 1, &#39;CRE&#39; = 2, &#39;NOC&#39; = 3, &#39;DIS&#39; = 4), trip_type UInt8, pickup FixedString(25), dropoff FixedString(25), cab_type Enum8(&#39;yellow&#39; = 1, &#39;green&#39; = 2, &#39;uber&#39; = 3), pickup_nyct2010_gid UInt8, pickup_ctlabel Float32, pickup_borocode UInt8, pickup_boroname Enum8(&#39;&#39; = 0, &#39;Manhattan&#39; = 1, &#39;Bronx&#39; = 2, &#39;Brooklyn&#39; = 3, &#39;Queens&#39; = 4, &#39;Staten Island&#39; = 5), pickup_ct2010 FixedString(6), pickup_boroct2010 FixedString(7), pickup_cdeligibil Enum8(&#39; &#39; = 0, &#39;E&#39; = 1, &#39;I&#39; = 2), pickup_ntacode FixedString(4), pickup_ntaname Enum16(&#39;&#39; = 0, &#39;Airport&#39; = 1, &#39;Allerton-Pelham Gardens&#39; = 2, &#39;Annadale-Huguenot-Prince\&#39;s Bay-Eltingville&#39; = 3, &#39;Arden Heights&#39; = 4, &#39;Astoria&#39; = 5, &#39;Auburndale&#39; = 6, &#39;Baisley Park&#39; = 7, &#39;Bath Beach&#39; = 8, &#39;Battery Park City-Lower Manhattan&#39; = 9, &#39;Bay Ridge&#39; = 10, &#39;Bayside-Bayside Hills&#39; = 11, &#39;Bedford&#39; = 12, &#39;Bedford Park-Fordham North&#39; = 13, &#39;Bellerose&#39; = 14, &#39;Belmont&#39; = 15, &#39;Bensonhurst East&#39; = 16, &#39;Bensonhurst West&#39; = 17, &#39;Borough Park&#39; = 18, &#39;Breezy Point-Belle Harbor-Rockaway Park-Broad Channel&#39; = 19, &#39;Briarwood-Jamaica Hills&#39; = 20, &#39;Brighton Beach&#39; = 21, &#39;Bronxdale&#39; = 22, &#39;Brooklyn Heights-Cobble Hill&#39; = 23, &#39;Brownsville&#39; = 24, &#39;Bushwick North&#39; = 25, &#39;Bushwick South&#39; = 26, &#39;Cambria Heights&#39; = 27, &#39;Canarsie&#39; = 28, &#39;Carroll Gardens-Columbia Street-Red Hook&#39; = 29, &#39;Central Harlem North-Polo Grounds&#39; = 30, &#39;Central Harlem South&#39; = 31, &#39;Charleston-Richmond Valley-Tottenville&#39; = 32, &#39;Chinatown&#39; = 33, &#39;Claremont-Bathgate&#39; = 34, &#39;Clinton&#39; = 35, &#39;Clinton Hill&#39; = 36, &#39;Co-op City&#39; = 37, &#39;College Point&#39; = 38, &#39;Corona&#39; = 39, &#39;Crotona Park East&#39; = 40, &#39;Crown Heights North&#39; = 41, &#39;Crown Heights South&#39; = 42, &#39;Cypress Hills-City Line&#39; = 43, &#39;DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill&#39; = 44, &#39;Douglas Manor-Douglaston-Little Neck&#39; = 45, &#39;Dyker Heights&#39; = 46, &#39;East Concourse-Concourse Village&#39; = 47, &#39;East Elmhurst&#39; = 48, &#39;East Flatbush-Farragut&#39; = 49, &#39;East Flushing&#39; = 50, &#39;East Harlem North&#39; = 51, &#39;East Harlem South&#39; = 52, &#39;East New York&#39; = 53, &#39;East New York (Pennsylvania Ave)&#39; = 54, &#39;East Tremont&#39; = 55, &#39;East Village&#39; = 56, &#39;East Williamsburg&#39; = 57, &#39;Eastchester-Edenwald-Baychester&#39; = 58, &#39;Elmhurst&#39; = 59, &#39;Elmhurst-Maspeth&#39; = 60, &#39;Erasmus&#39; = 61, &#39;Far Rockaway-Bayswater&#39; = 62, &#39;Flatbush&#39; = 63, &#39;Flatlands&#39; = 64, &#39;Flushing&#39; = 65, &#39;Fordham South&#39; = 66, &#39;Forest Hills&#39; = 67, &#39;Fort Greene&#39; = 68, &#39;Fresh Meadows-Utopia&#39; = 69, &#39;Ft. Totten-Bay Terrace-Clearview&#39; = 70, &#39;Georgetown-Marine Park-Bergen Beach-Mill Basin&#39; = 71, &#39;Glen Oaks-Floral Park-New Hyde Park&#39; = 72, &#39;Glendale&#39; = 73, &#39;Gramercy&#39; = 74, &#39;Grasmere-Arrochar-Ft. Wadsworth&#39; = 75, &#39;Gravesend&#39; = 76, &#39;Great Kills&#39; = 77, &#39;Greenpoint&#39; = 78, &#39;Grymes Hill-Clifton-Fox Hills&#39; = 79, &#39;Hamilton Heights&#39; = 80, &#39;Hammels-Arverne-Edgemere&#39; = 81, &#39;Highbridge&#39; = 82, &#39;Hollis&#39; = 83, &#39;Homecrest&#39; = 84, &#39;Hudson Yards-Chelsea-Flatiron-Union Square&#39; = 85, &#39;Hunters Point-Sunnyside-West Maspeth&#39; = 86, &#39;Hunts Point&#39; = 87, &#39;Jackson Heights&#39; = 88, &#39;Jamaica&#39; = 89, &#39;Jamaica Estates-Holliswood&#39; = 90, &#39;Kensington-Ocean Parkway&#39; = 91, &#39;Kew Gardens&#39; = 92, &#39;Kew Gardens Hills&#39; = 93, &#39;Kingsbridge Heights&#39; = 94, &#39;Laurelton&#39; = 95, &#39;Lenox Hill-Roosevelt Island&#39; = 96, &#39;Lincoln Square&#39; = 97, &#39;Lindenwood-Howard Beach&#39; = 98, &#39;Longwood&#39; = 99, &#39;Lower East Side&#39; = 100, &#39;Madison&#39; = 101, &#39;Manhattanville&#39; = 102, &#39;Marble Hill-Inwood&#39; = 103, &#39;Mariner\&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39; = 104, &#39;Maspeth&#39; = 105, &#39;Melrose South-Mott Haven North&#39; = 106, &#39;Middle Village&#39; = 107, &#39;Midtown-Midtown South&#39; = 108, &#39;Midwood&#39; = 109, &#39;Morningside Heights&#39; = 110, &#39;Morrisania-Melrose&#39; = 111, &#39;Mott Haven-Port Morris&#39; = 112, &#39;Mount Hope&#39; = 113, &#39;Murray Hill&#39; = 114, &#39;Murray Hill-Kips Bay&#39; = 115, &#39;New Brighton-Silver Lake&#39; = 116, &#39;New Dorp-Midland Beach&#39; = 117, &#39;New Springville-Bloomfield-Travis&#39; = 118, &#39;North Corona&#39; = 119, &#39;North Riverdale-Fieldston-Riverdale&#39; = 120, &#39;North Side-South Side&#39; = 121, &#39;Norwood&#39; = 122, &#39;Oakland Gardens&#39; = 123, &#39;Oakwood-Oakwood Beach&#39; = 124, &#39;Ocean Hill&#39; = 125, &#39;Ocean Parkway South&#39; = 126, &#39;Old Astoria&#39; = 127, &#39;Old Town-Dongan Hills-South Beach&#39; = 128, &#39;Ozone Park&#39; = 129, &#39;Park Slope-Gowanus&#39; = 130, &#39;Parkchester&#39; = 131, &#39;Pelham Bay-Country Club-City Island&#39; = 132, &#39;Pelham Parkway&#39; = 133, &#39;Pomonok-Flushing Heights-Hillcrest&#39; = 134, &#39;Port Richmond&#39; = 135, &#39;Prospect Heights&#39; = 136, &#39;Prospect Lefferts Gardens-Wingate&#39; = 137, &#39;Queens Village&#39; = 138, &#39;Queensboro Hill&#39; = 139, &#39;Queensbridge-Ravenswood-Long Island City&#39; = 140, &#39;Rego Park&#39; = 141, &#39;Richmond Hill&#39; = 142, &#39;Ridgewood&#39; = 143, &#39;Rikers Island&#39; = 144, &#39;Rosedale&#39; = 145, &#39;Rossville-Woodrow&#39; = 146, &#39;Rugby-Remsen Village&#39; = 147, &#39;Schuylerville-Throgs Neck-Edgewater Park&#39; = 148, &#39;Seagate-Coney Island&#39; = 149, &#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39; = 150, &#39;SoHo-TriBeCa-Civic Center-Little Italy&#39; = 151, &#39;Soundview-Bruckner&#39; = 152, &#39;Soundview-Castle Hill-Clason Point-Harding Park&#39; = 153, &#39;South Jamaica&#39; = 154, &#39;South Ozone Park&#39; = 155, &#39;Springfield Gardens North&#39; = 156, &#39;Springfield Gardens South-Brookville&#39; = 157, &#39;Spuyten Duyvil-Kingsbridge&#39; = 158, &#39;St. Albans&#39; = 159, &#39;Stapleton-Rosebank&#39; = 160, &#39;Starrett City&#39; = 161, &#39;Steinway&#39; = 162, &#39;Stuyvesant Heights&#39; = 163, &#39;Stuyvesant Town-Cooper Village&#39; = 164, &#39;Sunset Park East&#39; = 165, &#39;Sunset Park West&#39; = 166, &#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39; = 167, &#39;Turtle Bay-East Midtown&#39; = 168, &#39;University Heights-Morris Heights&#39; = 169, &#39;Upper East Side-Carnegie Hill&#39; = 170, &#39;Upper West Side&#39; = 171, &#39;Van Cortlandt Village&#39; = 172, &#39;Van Nest-Morris Park-Westchester Square&#39; = 173, &#39;Washington Heights North&#39; = 174, &#39;Washington Heights South&#39; = 175, &#39;West Brighton&#39; = 176, &#39;West Concourse&#39; = 177, &#39;West Farms-Bronx River&#39; = 178, &#39;West New Brighton-New Brighton-St. George&#39; = 179, &#39;West Village&#39; = 180, &#39;Westchester-Unionport&#39; = 181, &#39;Westerleigh&#39; = 182, &#39;Whitestone&#39; = 183, &#39;Williamsbridge-Olinville&#39; = 184, &#39;Williamsburg&#39; = 185, &#39;Windsor Terrace&#39; = 186, &#39;Woodhaven&#39; = 187, &#39;Woodlawn-Wakefield&#39; = 188, &#39;Woodside&#39; = 189, &#39;Yorkville&#39; = 190, &#39;park-cemetery-etc-Bronx&#39; = 191, &#39;park-cemetery-etc-Brooklyn&#39; = 192, &#39;park-cemetery-etc-Manhattan&#39; = 193, &#39;park-cemetery-etc-Queens&#39; = 194, &#39;park-cemetery-etc-Staten Island&#39; = 195), pickup_puma UInt16, dropoff_nyct2010_gid UInt8, dropoff_ctlabel Float32, dropoff_borocode UInt8, dropoff_boroname Enum8(&#39;&#39; = 0, &#39;Manhattan&#39; = 1, &#39;Bronx&#39; = 2, &#39;Brooklyn&#39; = 3, &#39;Queens&#39; = 4, &#39;Staten Island&#39; = 5), dropoff_ct2010 FixedString(6), dropoff_boroct2010 FixedString(7), dropoff_cdeligibil Enum8(&#39; &#39; = 0, &#39;E&#39; = 1, &#39;I&#39; = 2), dropoff_ntacode FixedString(4), dropoff_ntaname Enum16(&#39;&#39; = 0, &#39;Airport&#39; = 1, &#39;Allerton-Pelham Gardens&#39; = 2, &#39;Annadale-Huguenot-Prince\&#39;s Bay-Eltingville&#39; = 3, &#39;Arden Heights&#39; = 4, &#39;Astoria&#39; = 5, &#39;Auburndale&#39; = 6, &#39;Baisley Park&#39; = 7, &#39;Bath Beach&#39; = 8, &#39;Battery Park City-Lower Manhattan&#39; = 9, &#39;Bay Ridge&#39; = 10, &#39;Bayside-Bayside Hills&#39; = 11, &#39;Bedford&#39; = 12, &#39;Bedford Park-Fordham North&#39; = 13, &#39;Bellerose&#39; = 14, &#39;Belmont&#39; = 15, &#39;Bensonhurst East&#39; = 16, &#39;Bensonhurst West&#39; = 17, &#39;Borough Park&#39; = 18, &#39;Breezy Point-Belle Harbor-Rockaway Park-Broad Channel&#39; = 19, &#39;Briarwood-Jamaica Hills&#39; = 20, &#39;Brighton Beach&#39; = 21, &#39;Bronxdale&#39; = 22, &#39;Brooklyn Heights-Cobble Hill&#39; = 23, &#39;Brownsville&#39; = 24, &#39;Bushwick North&#39; = 25, &#39;Bushwick South&#39; = 26, &#39;Cambria Heights&#39; = 27, &#39;Canarsie&#39; = 28, &#39;Carroll Gardens-Columbia Street-Red Hook&#39; = 29, &#39;Central Harlem North-Polo Grounds&#39; = 30, &#39;Central Harlem South&#39; = 31, &#39;Charleston-Richmond Valley-Tottenville&#39; = 32, &#39;Chinatown&#39; = 33, &#39;Claremont-Bathgate&#39; = 34, &#39;Clinton&#39; = 35, &#39;Clinton Hill&#39; = 36, &#39;Co-op City&#39; = 37, &#39;College Point&#39; = 38, &#39;Corona&#39; = 39, &#39;Crotona Park East&#39; = 40, &#39;Crown Heights North&#39; = 41, &#39;Crown Heights South&#39; = 42, &#39;Cypress Hills-City Line&#39; = 43, &#39;DUMBO-Vinegar Hill-Downtown Brooklyn-Boerum Hill&#39; = 44, &#39;Douglas Manor-Douglaston-Little Neck&#39; = 45, &#39;Dyker Heights&#39; = 46, &#39;East Concourse-Concourse Village&#39; = 47, &#39;East Elmhurst&#39; = 48, &#39;East Flatbush-Farragut&#39; = 49, &#39;East Flushing&#39; = 50, &#39;East Harlem North&#39; = 51, &#39;East Harlem South&#39; = 52, &#39;East New York&#39; = 53, &#39;East New York (Pennsylvania Ave)&#39; = 54, &#39;East Tremont&#39; = 55, &#39;East Village&#39; = 56, &#39;East Williamsburg&#39; = 57, &#39;Eastchester-Edenwald-Baychester&#39; = 58, &#39;Elmhurst&#39; = 59, &#39;Elmhurst-Maspeth&#39; = 60, &#39;Erasmus&#39; = 61, &#39;Far Rockaway-Bayswater&#39; = 62, &#39;Flatbush&#39; = 63, &#39;Flatlands&#39; = 64, &#39;Flushing&#39; = 65, &#39;Fordham South&#39; = 66, &#39;Forest Hills&#39; = 67, &#39;Fort Greene&#39; = 68, &#39;Fresh Meadows-Utopia&#39; = 69, &#39;Ft. Totten-Bay Terrace-Clearview&#39; = 70, &#39;Georgetown-Marine Park-Bergen Beach-Mill Basin&#39; = 71, &#39;Glen Oaks-Floral Park-New Hyde Park&#39; = 72, &#39;Glendale&#39; = 73, &#39;Gramercy&#39; = 74, &#39;Grasmere-Arrochar-Ft. Wadsworth&#39; = 75, &#39;Gravesend&#39; = 76, &#39;Great Kills&#39; = 77, &#39;Greenpoint&#39; = 78, &#39;Grymes Hill-Clifton-Fox Hills&#39; = 79, &#39;Hamilton Heights&#39; = 80, &#39;Hammels-Arverne-Edgemere&#39; = 81, &#39;Highbridge&#39; = 82, &#39;Hollis&#39; = 83, &#39;Homecrest&#39; = 84, &#39;Hudson Yards-Chelsea-Flatiron-Union Square&#39; = 85, &#39;Hunters Point-Sunnyside-West Maspeth&#39; = 86, &#39;Hunts Point&#39; = 87, &#39;Jackson Heights&#39; = 88, &#39;Jamaica&#39; = 89, &#39;Jamaica Estates-Holliswood&#39; = 90, &#39;Kensington-Ocean Parkway&#39; = 91, &#39;Kew Gardens&#39; = 92, &#39;Kew Gardens Hills&#39; = 93, &#39;Kingsbridge Heights&#39; = 94, &#39;Laurelton&#39; = 95, &#39;Lenox Hill-Roosevelt Island&#39; = 96, &#39;Lincoln Square&#39; = 97, &#39;Lindenwood-Howard Beach&#39; = 98, &#39;Longwood&#39; = 99, &#39;Lower East Side&#39; = 100, &#39;Madison&#39; = 101, &#39;Manhattanville&#39; = 102, &#39;Marble Hill-Inwood&#39; = 103, &#39;Mariner\&#39;s Harbor-Arlington-Port Ivory-Graniteville&#39; = 104, &#39;Maspeth&#39; = 105, &#39;Melrose South-Mott Haven North&#39; = 106, &#39;Middle Village&#39; = 107, &#39;Midtown-Midtown South&#39; = 108, &#39;Midwood&#39; = 109, &#39;Morningside Heights&#39; = 110, &#39;Morrisania-Melrose&#39; = 111, &#39;Mott Haven-Port Morris&#39; = 112, &#39;Mount Hope&#39; = 113, &#39;Murray Hill&#39; = 114, &#39;Murray Hill-Kips Bay&#39; = 115, &#39;New Brighton-Silver Lake&#39; = 116, &#39;New Dorp-Midland Beach&#39; = 117, &#39;New Springville-Bloomfield-Travis&#39; = 118, &#39;North Corona&#39; = 119, &#39;North Riverdale-Fieldston-Riverdale&#39; = 120, &#39;North Side-South Side&#39; = 121, &#39;Norwood&#39; = 122, &#39;Oakland Gardens&#39; = 123, &#39;Oakwood-Oakwood Beach&#39; = 124, &#39;Ocean Hill&#39; = 125, &#39;Ocean Parkway South&#39; = 126, &#39;Old Astoria&#39; = 127, &#39;Old Town-Dongan Hills-South Beach&#39; = 128, &#39;Ozone Park&#39; = 129, &#39;Park Slope-Gowanus&#39; = 130, &#39;Parkchester&#39; = 131, &#39;Pelham Bay-Country Club-City Island&#39; = 132, &#39;Pelham Parkway&#39; = 133, &#39;Pomonok-Flushing Heights-Hillcrest&#39; = 134, &#39;Port Richmond&#39; = 135, &#39;Prospect Heights&#39; = 136, &#39;Prospect Lefferts Gardens-Wingate&#39; = 137, &#39;Queens Village&#39; = 138, &#39;Queensboro Hill&#39; = 139, &#39;Queensbridge-Ravenswood-Long Island City&#39; = 140, &#39;Rego Park&#39; = 141, &#39;Richmond Hill&#39; = 142, &#39;Ridgewood&#39; = 143, &#39;Rikers Island&#39; = 144, &#39;Rosedale&#39; = 145, &#39;Rossville-Woodrow&#39; = 146, &#39;Rugby-Remsen Village&#39; = 147, &#39;Schuylerville-Throgs Neck-Edgewater Park&#39; = 148, &#39;Seagate-Coney Island&#39; = 149, &#39;Sheepshead Bay-Gerritsen Beach-Manhattan Beach&#39; = 150, &#39;SoHo-TriBeCa-Civic Center-Little Italy&#39; = 151, &#39;Soundview-Bruckner&#39; = 152, &#39;Soundview-Castle Hill-Clason Point-Harding Park&#39; = 153, &#39;South Jamaica&#39; = 154, &#39;South Ozone Park&#39; = 155, &#39;Springfield Gardens North&#39; = 156, &#39;Springfield Gardens South-Brookville&#39; = 157, &#39;Spuyten Duyvil-Kingsbridge&#39; = 158, &#39;St. Albans&#39; = 159, &#39;Stapleton-Rosebank&#39; = 160, &#39;Starrett City&#39; = 161, &#39;Steinway&#39; = 162, &#39;Stuyvesant Heights&#39; = 163, &#39;Stuyvesant Town-Cooper Village&#39; = 164, &#39;Sunset Park East&#39; = 165, &#39;Sunset Park West&#39; = 166, &#39;Todt Hill-Emerson Hill-Heartland Village-Lighthouse Hill&#39; = 167, &#39;Turtle Bay-East Midtown&#39; = 168, &#39;University Heights-Morris Heights&#39; = 169, &#39;Upper East Side-Carnegie Hill&#39; = 170, &#39;Upper West Side&#39; = 171, &#39;Van Cortlandt Village&#39; = 172, &#39;Van Nest-Morris Park-Westchester Square&#39; = 173, &#39;Washington Heights North&#39; = 174, &#39;Washington Heights South&#39; = 175, &#39;West Brighton&#39; = 176, &#39;West Concourse&#39; = 177, &#39;West Farms-Bronx River&#39; = 178, &#39;West New Brighton-New Brighton-St. George&#39; = 179, &#39;West Village&#39; = 180, &#39;Westchester-Unionport&#39; = 181, &#39;Westerleigh&#39; = 182, &#39;Whitestone&#39; = 183, &#39;Williamsbridge-Olinville&#39; = 184, &#39;Williamsburg&#39; = 185, &#39;Windsor Terrace&#39; = 186, &#39;Woodhaven&#39; = 187, &#39;Woodlawn-Wakefield&#39; = 188, &#39;Woodside&#39; = 189, &#39;Yorkville&#39; = 190, &#39;park-cemetery-etc-Bronx&#39; = 191, &#39;park-cemetery-etc-Brooklyn&#39; = 192, &#39;park-cemetery-etc-Manhattan&#39; = 193, &#39;park-cemetery-etc-Queens&#39; = 194, &#39;park-cemetery-etc-Staten Island&#39; = 195), dropoff_puma UInt16) ENGINE = MergeTree(pickup_date, pickup_datetime, 8192)
</pre></div> <div dir=rtl> <p>بر روی سرور source دستور زیر را وارد کنید:</p> </div> <div class=codehilite><pre><span></span><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>trips_mergetree_x3</span> <span class=k>AS</span> <span class=n>trips_mergetree_third</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Distributed</span><span class=p>(</span><span class=n>perftest</span><span class=p>,</span> <span class=k>default</span><span class=p>,</span> <span class=n>trips_mergetree_third</span><span class=p>,</span> <span class=n>rand</span><span class=p>())</span>
</pre></div> <div dir=rtl> <p>query زیر دادها را توزیع مجدد می کند:</p> </div> <div class=codehilite><pre><span></span><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>trips_mergetree_x3</span> <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>trips_mergetree</span>
</pre></div> <div dir=rtl> <p>این query 2454 ثانیه زمان میبرد.</p> <p>در سه سرور:</p> <p>Q1: 0.212 ثانیه. Q2: 0.438 ثانیه. Q3: 0.733 ثانیه. Q4: 1.241 ثانیه.</p> <p>از آنجایی که query ها به صورت خطی scale شده اند، از نتایج به دست آمده شگفتی وجود ندارد.</p> <p>ما همچنین نتایج زیر را از اجرای این query در کلاستر 140 سرور دریافت کردیم:</p> <p>Q1: 0.028 ثانیه. Q2: 0.043 ثانیه. Q3: 0.051 ثانیه. Q4: 0.072 ثانیه.</p> <p>در این مورد، زمان پردازش query براساس latency شبکه مشخص می شود. ما این query ها را با استفاده از یک مشتری واقع در دیتاسنتر Yandex در فنلاند در یک کلاستر روسیه دریافت کردیم، که latency آن حدود 20 میلی ثانیه به نتایج اضافه کرد.</p> <h2 id=ntyj>نتایج<a class=headerlink href=#ntyj title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>نودها</th> <th>Q1</th> <th>Q2</th> <th>Q3</th> <th>Q4</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>0.490</td> <td>1.224</td> <td>2.104</td> <td>3.593</td> </tr> <tr> <td>3</td> <td>0.212</td> <td>0.438</td> <td>0.733</td> <td>1.241</td> </tr> <tr> <td>140</td> <td>0.028</td> <td>0.043</td> <td>0.051</td> <td>0.072</td> </tr> </tbody> </table> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../../getting_started/example_datasets/ontime/ title=OnTime class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> قبلی </span> OnTime </span> </div> </a> <a href=../../../getting_started/example_datasets/amplab_benchmark/ title=" بنچمارک AMPLab Big Data" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> بعدی </span> بنچمارک AMPLab Big Data </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> ©2016–2020 Yandex LLC </div> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/modernizr.js></script> <script src=../../../assets/javascripts/application.js></script> <script src=../../../assets/javascripts/lunr/lunr.stemmer.support.js></script> <script src=../../../assets/javascripts/lunr/lunr.fa.js></script> <script src=../../../assets/javascripts/lunr/lunr.multi.js></script> <script type=text/javascript>
      function ready(callback){
          if (document.readyState != 'loading') {
              callback();
          } else if (document.addEventListener) {
              document.addEventListener('DOMContentLoaded', callback);
          } else document.attachEvent('onreadystatechange', function() {
              if (document.readyState == 'complete') {
                  callback();
              }
          });
      }
      ready(function () {
          var i;
          
          app.initialize({
              version: "1.0.4",
              url: {
                  base: "../../.."
              }
          });
          var beforePrint = function() {
            var details = document.getElementsByTagName("details");
            for (i = 0; i < details.length; ++i) {
                details[i].open = 1;
            }
          };
          if (window.matchMedia) {
              window.matchMedia('print').addListener(function(q) {
                  if (q.matches) {
                      beforePrint();
                  }
              });
          }
          window.onbeforeprint = beforePrint;

          var name = window.location.hostname.split('.')[0];
          var feedback_address = name + '-feedback' + '@yandex-team.ru';
          var feedback_email = document.getElementsByClassName('feedback-email');
          for (i = 0; i < feedback_email.length; i++) {
            feedback_email[i].setAttribute('href', 'mailto:' + feedback_address);
            feedback_email[i].innerHTML = feedback_address;
          }

          document.getElementById("releases-selector").addEventListener(
            "change",
            function() {
              var target = window.location.href.split('docs')[0] + 'docs/';
              if (this.value) {
                target = target + this.value + '/';
              }
              window.location = target + 'fa';
            }
          )
      });
    </script> <script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script> <script type=text/javascript> docsearch({
apiKey: 'e239649803024433599de47a53b2d416',
indexName: 'yandex_clickhouse',
inputSelector: '#md-search__input',
algoliaOptions: {
  advancedSyntax: true,
  clickAnalytics: true,
  hitsPerPage: 25,
  'facetFilters': ["lang:fa"]
},
debug: false
});
</script> <!-- Yandex.Metrika counter --> <script type=text/javascript>
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter18343495 = new Ya.Metrika2({
                        id:18343495,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor: true
                    });
                } catch(e) { }
            });
            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/tag.js";
            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks2");
    </script> <noscript> <div><img src=https://mc.yandex.ru/watch/18343495 style="position:absolute; left:-9999px;" alt></div> </noscript> <!-- /Yandex.Metrika counter --> </body> </html>